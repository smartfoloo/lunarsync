// Hash: 4aaed52ce51c07635450d787da2f102ef6b20a34
function pegasus(t,A,e){return(e=new XMLHttpRequest).open("GET",t),t=[],pegasus.timeout&&(e.timeout=pegasus.timeout),e.ontimeout=function(t){A=t},e.onreadystatechange=e.then=function(o,n,r,i){if(o&&o.call&&(t=[,o,n]),A&&t[2]&&t[2](A,e),4==e.readyState&&(r=t[0|e.status/200])){try{i=JSON.parse(e.responseText)}catch(t){i=null}r(i,e)}},e.send(),e}!function(t){if(!Object.defineProperty)throw"Font.js requires Object.defineProperty, which this browser does not support.";if(!document.createElement("canvas").getContext)throw"Font.js requires <canvas> and the Canvas2D API, which this browser does not support.";function A(){this.fontFamily="fjs"+(999999*Math.random()|0)}!function(t){try{new Uint8Array(1);return}catch(t){}function A(t,A){return this.slice(t,A)}function e(t,A){var e,o=t.length;for(arguments.length<2&&(A=0),e=0;e<o;++e,++A)this[A]=255&t[e]}function o(t){var o,n;if("number"==typeof t)for(o=new Array(t),n=0;n<t;++n)o[n]=0;else o=t.slice(0);return o.subarray=A,o.buffer=o,o.byteLength=o.length,o.set=e,"object"==typeof t&&t.buffer&&(o.buffer=t.buffer),o}t.Uint8Array=o,t.Uint32Array=o,t.Int32Array=o}(t),function(t){var A;t.opera||("response"in XMLHttpRequest.prototype||"mozResponseArrayBuffer"in XMLHttpRequest.prototype||"mozResponse"in XMLHttpRequest.prototype||"responseArrayBuffer"in XMLHttpRequest.prototype||(A=t.VBArray?function(){return new Uint8Array(new VBArray(this.responseBody).toArray())}:function(){this.responseBody},Object.defineProperty(XMLHttpRequest.prototype,"response",{get:A})))}(t),t.btoa||(t.btoa=function(t){var A,e,o,n,r,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",s=0,a=0,f="",u=[];if(!t)return t;do{A=(r=t.charCodeAt(s++)<<16|t.charCodeAt(s++)<<8|t.charCodeAt(s++))>>18&63,e=r>>12&63,o=r>>6&63,n=63&r,u[a++]=i.charAt(A)+i.charAt(e)+i.charAt(o)+i.charAt(n)}while(s<t.length);f=u.join("");var l=t.length%3;return(l?f.slice(0,l-3):f)+"===".slice(l||3)}),A.prototype.url="",A.prototype.format="",A.prototype.data="",A.prototype.base64="AAEAAAAKAIAAAwAgT1MvMgAAAAAAAACsAAAAWGNtYXAAAAAAAAABBAAAACxnbHlmAAAAAAAAATAAAAAQaGVhZAAAAAAAAAFAAAAAOGhoZWEAAAAAAAABeAAAACRobXR4AAAAAAAAAZwAAAAIbG9jYQAAAAAAAAGkAAAACG1heHAAAAAAAAABrAAAACBuYW1lAAAAAAAAAcwAAAAgcG9zdAAAAAAAAAHsAAAAEAAEAAEAZAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAABAAMAAQAAAAwABAAgAAAABAAEAAEAAABB//8AAABB////wAABAAAAAAABAAAAAAAAAAAAAAAAMQAAAQAAAAAAAAAAAABfDzz1AAAgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAEAAgAAAAAAAAABAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAIAAAAAQAAAAIAAQABAAAAAAACAAAAAAAAAAAAAAAAAAAAAAAAAAIAHgADAAEECQABAAAAAAADAAEECQACAAIAAAAAAAEAAAAAAAAAAAAAAAAAAA==",A.prototype.metrics={quadsize:0,leading:0,ascent:0,descent:0,weightclass:400},A.prototype.systemfont=!1,A.prototype.loaded=!1,A.prototype.onload=function(){},A.prototype.onerror=function(){},A.prototype.canvas=!1,A.prototype.context=!1,A.prototype.validate=function(t,A,e,o,n){!1!==n&&n<0?this.onerror("Requested system font '"+this.fontFamily+"' could not be loaded (it may not be installed)."):getComputedStyle(t,null).getPropertyValue("width").replace("px","")>0?(document.head.removeChild(A),document.body.removeChild(t),this.loaded=!0,this.onload()):(console.log("timing out"),setTimeout(function(){o.validate(t,A,e,o,!1!==n&&n-50)},1e3))},A.prototype.ondownloaded=function(){var t=this,A=function(t){return String.fromCharCode(t)},e=function(t){if(t<256)return A(0)+A(t);var e=255&t;return A(t>>8)+A(e)},o=function(t,A){return 256*t+A},n=function(t,A){var e,o=t>>7==1;return e=256*(t&=127)+A,o?e-32768:e},r=function(t,A,e,o){return 16777216*t+65536*A+256*e+o},i=function(A){t.onerror(A)},s=A(0)+A(1)+A(0)+A(0),a=this.data,f=A(a[0])+A(a[1])+A(a[2])+A(a[3]),u=f===s,l=!u&&"OTTO"===f;if(u)this.format="truetype";else{if(!l)return void i("Error: file at "+this.url+" cannot be interpreted as OpenType font.");this.format="opentype"}var d,c,h=o(a[4],a[5]),p=12+16*h,y={};for(d=12;d<p;d+=16)c=A(a[d])+A(a[d+1])+A(a[d+2])+A(a[d+3]),y[c]={name:c,checksum:r(a[d+4],a[d+5],a[d+6],a[d+7]),offset:r(a[d+8],a[d+9],a[d+10],a[d+11]),length:r(a[d+12],a[d+13],a[d+14],a[d+15])};var m=function(t){return y[t]?t:(i("Error: font is missing the required OpenType '"+t+"' table."),!1)};if(!1!==(c=m("head"))){d=y[c].offset,y[c].version=""+a[d]+a[d+1]+a[d+2]+a[d+3];var v=o(a[d+18],a[d+19]);if(this.metrics.quadsize=v,!1!==(c=m("hhea"))&&(d=y[c].offset,y[c].version=""+a[d]+a[d+1]+a[d+2]+a[d+3],this.metrics.ascent=n(a[d+4],a[d+5])/v,this.metrics.descent=n(a[d+6],a[d+7])/v,this.metrics.leading=n(a[d+8],a[d+9])/v,!1!==(c=m("OS/2"))&&(d=y[c].offset,y[c].version=""+a[d]+a[d+1],this.metrics.weightclass=o(a[d+4],a[d+5]),!1!==(c=m("cmap"))))){d=y[c].offset,y[c].version=""+a[d]+a[d+1],h=o(a[d+2],a[d+3]);for(var g,b,w,x,C=!1,E=0;E<h;E++)b=o(a[g=d+4+8*E],a[g+1]),w=o(a[g+2],a[g+3]),x=r(a[g+4],a[g+5],a[g+6],a[g+7]),3===b&&1===w&&(C=x);var B="A";if(!1!==C&&4===(f=o(a[d+=C],a[d+1]))){for(var T=function(t){return-1===[9,10,11,12,13,32,127,128,129,141,142,143,144,149,157,158,160,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8203,8204,8205,8206,8207,8232,8233,8234,8235,8235,8236,8237,8238,8239,8287,8288,8289,8290,8291,8292,12288].indexOf(t)},S=d+14,F=d+14+2*(o(a[d+6],a[d+7])/2),q=!1;S<F&&!T(q=o(a[S],a[S+1]));S+=2)q=!1;if(0!=q){B=String.fromCharCode(q);var M=(65536-(q-1))%65536,H=A(0)+e(q)+e(65535)+e(0)+e(q)+e(65535)+e(M)+e(1),R=btoa(H);this.base64=this.base64.substring(0,380)+R+this.base64.substring(380+R.length)}}this.bootstrapValidation(B,!1)}}},A.prototype.bootstrapValidation=function(t,A){var e=this.fontFamily+" testfont",o=document.createElement("style");o.setAttribute("type","text/css"),o.innerHTML="@font-face {\n  font-family: '"+e+"';\n  src: url('data:application/x-font-ttf;base64,"+this.base64+"')\n       format('truetype');}",document.head.appendChild(o);var n=!1;this.systemfont||(n=this.toStyleNode(),document.head.appendChild(n));var r=document.createElement("p");if(r.style.cssText="position: absolute; top: 0; left: 0; opacity: 0;",r.style.fontFamily="'"+this.fontFamily+"', '"+e+"'",r.innerHTML=t+t+t+t+t+t+t+t+t+t,document.body.appendChild(r),"undefined"==typeof getComputedStyle)this.onload(),error("Error: getComputedStyle is not supported by this browser.\nConsequently, Font.onload() cannot be trusted.");else{var i=this.systemfont?1e3:this.metrics.quadsize,s=document.createElement("canvas");s.width=i,s.height=i,this.canvas=s;var a=s.getContext("2d");a.font="1em '"+this.fontFamily+"'",a.fillStyle="white",a.fillRect(-1,-1,i+2,i+2),a.fillStyle="black",a.fillText("test text",50,i/2),this.context=a;var f=this;setTimeout(function(){f.validate(r,o,n,f,A)},50)}},A.prototype.processSystemFont=function(){this.systemfont=!0,this.metrics=!1,this.bootstrapValidation("A",1e3)},A.prototype.loadFont=function(){var t=this;if(-1!==this.url.indexOf(".")){var A=new XMLHttpRequest;A.open("GET",t.url,!0),A.responseType="arraybuffer",A.onload=function(e){var o=A.response;o?(t.data=new Uint8Array(o),t.ondownloaded()):t.onerror("Error downloading font resource from "+t.url)},A.onerror=function(A){t.onerror("Error downloading font resource from "+t.url)},A.send(null)}else setTimeout(function(){t.processSystemFont()},10)},A.prototype.styleNode=!1,A.prototype.toStyleNode=function(){if(this.styleNode)return this.styleNode;this.styleNode=document.createElement("style"),this.styleNode.type="text/css";var t=this.url.replace(".ttf",".eot"),A="@font-face {\n";return A+="  font-family: '"+this.fontFamily+"';\n",A+="  src: url('"+t+"') format(eot), url('"+this.url+"') format('"+this.format+"');\n",A+="}",this.styleNode.innerHTML=A,this.styleNode},A.prototype.measureText=function(t,A){if(!this.loaded)return this.onerror("measureText() was called while the font was not yet loaded"),!1;this.context.font=A+"px '"+this.fontFamily+"'";var e=this.context.measureText(t);e.fontsize=A,e.ascent=0,e.descent=0,e.bounds={minx:0,maxx:e.width,miny:0,maxy:0},e.height=0;var o=[];e.width,this.metrics.quadsize;o.push(t);var n,r=o.length;for(n=0;n<r;n++)this.measureSegment(o[n],A,e);return e},A.prototype.measureSegment=function(t,A,e){var o=document.createElement("div");o.style.position="absolute",o.style.opacity=0,o.style.font=A+"px '"+this.fontFamily+"'";for(o.innerHTML=t,v=1;v<10;v++)o.innerHTML+="<br/>"+t;document.body.appendChild(o),e.leading=1.2*A;var n,r,i=(n=o,r="height",document.defaultView.getComputedStyle(n,null).getPropertyValue(r));if((i=i.replace("px",""))>=10*A&&(e.leading=i/10|0),document.body.removeChild(o),/^\s*$/.test(t))return e;this.canvas;var s=this.context,a=this.systemfont?1e3:this.metrics.quadsize,f=a,u=a,l=a/2,d=(a-e.width)/2;d!==(0|d)&&(d|=0),s.fillStyle="white",s.fillRect(-50,-50,f+100,u+100),s.fillStyle="black",s.fillText(t,d,l);for(var c=e.width+50|0,h=4*A,p=d-25,y=l-h/2,m=s.getImageData(p,y,c,h).data,v=0,g=0,b=4*c,w=m.length,x=h/2;++v<w&&255===m[v];);var C=v/b|0;for(v=w-1;--v>0&&255===m[v];);var E=v/b|0;for(v=0,g=0;g<c&&255===m[v];)(v+=b)>=w&&(g++,v=v-w+4);var B=g,T=1;for(v=w-3,g=0;g<c&&255===m[v];)(v-=b)<0&&(g++,v=w-3-4*T++);var S=c-g;return e.ascent=x-C,e.descent=E-x,e.bounds={minx:B-25,maxx:S-25,miny:-e.descent,maxy:e.ascent},e.height=E-C+1,e},Object.defineProperty(A.prototype,"src",{set:function(t){this.url=t,this.loadFont()}}),"undefined"!=typeof define?define(function(){return A}):t.Font=A}(window);
"use strict";function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _typeof2(e){return(_typeof2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _createForOfIteratorHelper(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw o}}}}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function _get(){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=_superPropBase(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}}).apply(this,arguments)}function _superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_getPrototypeOf(e)););return e}function _classCallCheck2(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,_toPropertyKey(n.key),n)}}function _createClass2(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function _toPropertyKey(e){var t=_toPrimitive(e,"string");return"symbol"===_typeof2(t)?t:String(t)}function _toPrimitive(e,t){if("object"!==_typeof2(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);var n=r.call(e,t||"default");if("object"!==_typeof2(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}function _inherits2(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(n){var i=_isNativeReflectConstruct();return function(){var e,t=_getPrototypeOf(n);if(i){var r=_getPrototypeOf(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return _possibleConstructorReturn2(this,e)}}function _possibleConstructorReturn2(e,t){if(t&&("object"===_typeof2(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}!function i(o,a,s){function l(r,e){if(!a[r]){if(!o[r]){var t="function"==typeof require&&require;if(!e&&t)return t(r,!0);if(u)return u(r,!0);throw new Error("Cannot find module '"+r+"'")}var n=a[r]={exports:{}};o[r][0].call(n.exports,function(e){var t=o[r][1][e];return l(t||e)},n,n.exports,i,o,a,s)}return a[r].exports}for(var u="function"==typeof require&&require,e=0;e<s.length;e++)l(s[e]);return l}({1:[function(e,t,r){t.exports=[{matrix:[[2,2,2,2,2,2,2,2,2,2],[2,0,0,0,0,0,0,0,0,0],[2,0,0,0,0,0,0,0,0,0],[2,0,0,2,2,0,0,2,2,0],[2,0,0,0,0,0,0,0,0,0],[2,0,0,0,0,0,0,0,0,0],[2,0,0,0,0,2,2,0,0,0],[2,0,0,0,0,2,0,0,0,0],[2,0,0,0,0,2,0,0,0,0],[2,2,2,2,2,2,2,2,2,2]],connections:2},{matrix:[[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,2,2,2,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,2,2,2,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,2,2,2,2,0,0,0],[0,2,2,2,0,0,2,2,2,0],[0,0,0,0,0,0,0,0,0,0]],connections:15},{matrix:[[2,2,2,2,2,2,2,2,2,2],[2,0,0,0,0,0,0,0,0,0],[2,0,0,0,0,0,0,0,0,0],[2,2,2,0,0,0,0,0,0,0],[2,0,0,0,0,0,0,0,0,0],[2,0,0,0,2,2,0,0,2,2],[2,0,0,0,0,0,0,0,0,0],[2,0,0,0,0,0,0,0,0,0],[2,0,0,0,0,2,2,2,2,0],[2,0,0,0,0,0,0,0,0,0]],connections:10},{matrix:[[2,0,0,0,0,0,0,0,0,0],[2,0,0,0,0,0,0,0,0,0],[2,2,0,0,2,2,0,0,0,0],[2,0,0,0,0,2,2,0,0,0],[2,0,0,0,0,0,0,0,0,0],[2,0,0,0,0,0,0,0,0,0],[2,2,2,2,0,0,0,0,0,0],[2,2,2,2,0,0,0,2,2,0],[2,2,2,2,0,0,0,2,2,0],[2,2,2,2,2,2,2,2,2,2]],connections:6},{matrix:[[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,2,2,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[2,2,0,0,0,0,0,0,2,2],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,2,2,0,0,0,0],[0,0,0,2,2,2,2,0,0,0],[0,0,2,2,2,2,2,2,0,0],[0,2,2,2,2,2,2,2,2,0],[2,2,2,2,2,2,2,2,2,2]],connections:7},{matrix:[[2,2,2,2,2,2,2,2,2,2],[0,0,0,0,0,2,0,0,0,0],[0,0,0,0,0,2,0,0,0,0],[0,0,0,2,2,2,2,2,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,2,0,0,0,0,0,2,0],[0,0,2,0,0,0,0,0,2,0],[0,0,2,2,2,2,2,2,2,0],[2,2,2,2,2,2,2,2,2,2]],connections:3},{matrix:[[2,2,2,2,2,2,2,2,2,2],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,2,2,0,0,0,0,2,2,0],[2,2,0,0,0,0,0,0,2,2],[0,0,0,0,2,2,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,2,2,0,0,0,0,2,2,0],[2,2,2,0,0,0,0,2,2,2]],connections:11},{matrix:[[0,0,0,0,0,0,0,0,0,2],[0,0,2,2,0,0,0,0,0,2],[0,0,0,0,0,0,0,0,0,2],[0,0,0,0,0,0,2,2,2,2],[2,2,0,0,0,0,0,0,0,2],[0,0,0,0,0,0,0,0,0,2],[0,0,0,0,0,0,2,2,2,2],[0,0,0,0,0,0,0,0,0,2],[0,0,0,0,0,0,0,0,0,2],[2,2,2,0,0,0,0,0,0,2]],connections:13},{matrix:[[2,2,0,0,0,0,0,0,2,2],[2,2,0,0,0,0,0,0,2,2],[2,2,2,2,0,0,2,2,2,2],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,2,2,0,0,0,0],[2,2,0,0,0,0,0,0,2,2],[2,2,0,0,0,0,0,0,2,2],[2,2,2,2,0,0,2,2,2,2],[2,2,2,2,0,0,2,2,2,2]],connections:15},{matrix:[[2,0,0,0,0,0,0,0,0,2],[2,2,0,0,0,0,0,0,2,2],[0,0,0,0,2,2,0,0,0,0],[0,0,0,0,2,2,0,0,0,0],[0,0,2,2,2,2,2,2,0,0],[0,0,2,2,2,2,2,2,0,0],[0,0,0,0,2,2,0,0,0,0],[0,0,0,0,2,2,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[2,2,2,0,0,0,0,2,2,2]],connections:15},{matrix:[[2,2,2,2,2,2,2,2,2,2],[0,0,0,0,2,2,0,0,0,0],[0,0,0,0,2,2,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,2,2,0,0,0,0,2,2,0],[0,2,2,0,0,0,0,2,2,0],[0,2,2,2,2,2,2,2,2,0],[2,2,2,2,2,2,2,2,2,2],[2,2,2,2,2,2,2,2,2,2]],connections:3},{matrix:[[2,2,2,2,2,2,2,2,2,2],[2,2,2,2,2,2,2,2,2,2],[0,0,2,2,2,2,2,2,0,0],[0,0,0,2,2,2,2,0,0,0],[0,0,0,0,2,2,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,2,2,0,0,0,0],[0,0,0,2,2,2,2,0,0,0],[0,0,2,2,2,2,2,2,0,0],[2,2,2,2,2,2,2,2,2,2]],connections:3},{matrix:[[2,2,0,0,0,0,0,0,2,2],[0,0,0,0,2,2,0,0,0,0],[0,0,0,0,2,2,0,0,0,0],[0,0,2,2,2,2,2,2,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,2,2,0,0,0,0,2,2,0],[0,2,2,0,0,0,0,2,2,0],[0,2,2,2,2,2,2,2,2,0],[2,2,2,2,2,2,2,2,2,2]],connections:7},{matrix:[[2,2,2,2,2,2,2,2,2,2],[0,0,0,0,0,0,0,0,0,0],[0,2,2,0,0,0,2,2,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,2,2,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[2,2,0,0,0,0,0,0,2,2],[2,2,0,0,0,0,0,0,2,2],[2,2,0,0,0,0,0,0,2,2],[2,2,2,2,0,0,2,2,2,2]],connections:11},{matrix:[[2,2,2,2,2,2,2,2,2,2],[2,0,0,0,0,0,0,0,0,2],[2,0,0,0,0,0,0,0,0,2],[2,0,0,0,0,0,0,2,2,2],[2,0,0,0,0,0,0,0,0,2],[2,0,2,2,0,0,0,0,0,2],[2,0,0,0,0,0,0,0,0,2],[2,0,0,0,0,2,2,0,0,2],[2,0,0,0,0,0,0,0,0,2],[2,2,2,0,0,0,0,0,2,2]],connections:8},{matrix:[[2,0,2,0,0,0,0,2,0,2],[2,0,0,0,0,0,0,0,0,2],[2,2,0,0,2,2,0,0,2,2],[2,0,0,0,0,0,0,0,0,2],[2,0,0,2,2,2,2,0,0,2],[2,0,0,0,0,0,0,0,0,2],[2,2,0,0,0,0,0,0,2,2],[2,0,0,0,0,0,0,0,0,2],[2,0,0,0,0,0,0,0,0,2],[2,2,2,2,2,2,2,2,2,2]],connections:4},{matrix:[[2,2,2,0,0,0,0,0,0,2],[2,2,2,2,2,0,0,0,0,2],[2,0,0,0,0,0,0,0,0,2],[2,0,0,0,0,0,0,0,0,2],[2,2,2,0,0,0,0,2,2,2],[2,0,0,0,0,0,0,0,0,2],[2,0,0,0,0,0,0,0,0,2],[2,0,0,0,0,0,0,0,0,2],[2,2,2,0,0,2,2,0,0,2],[2,2,2,0,0,0,0,0,0,2]],connections:12},{matrix:[[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,2,2,0,2,2,0,2,2,0],[0,0,2,0,0,0,0,2,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,2,2,2,2,0,0,0],[0,0,0,0,0,0,0,0,0,0],[2,2,0,0,0,0,0,0,2,2],[2,2,0,0,0,0,0,0,2,2],[2,2,2,2,2,2,2,2,2,2]],connections:3}]},{}],2:[function(e,t,r){var n=e("./server-room-connection-controller"),s=e("./webrtc-connection-controller"),l=e("../../../shared/communication/socket-io-channel"),u=e("../../../shared/communication/message-types"),c=e("../../../shared/communication/peer-to-peer-channel"),h=e("../../../shared/communication/local-channel"),d=e("../../../shared/multiplayer/sequence/standard-mode-sequence"),p=e("../../../shared/model/player"),f=e("../../../shared/multiplayer/room"),m=e("../util/console-logger"),v="game-data",i=function(e){_inherits2(a,n);var o=_createSuper(a);function a(e,t,r,n){var i;return _classCallCheck2(this,a),(i=o.call(this)).playerSettings=e,i.io=t,i.sessionId=r,i.hosting=n,i.channels=null,i.peerConnectionControllers=[],i.room=null,i.hosting&&(i.sessionSecret=~~(256*Math.random())),i}return _createClass2(a,[{key:"connect",value:function(){var i=this;return new Promise(function(t,e){i.channels=[];var r=(i.hosting?"p2pSessionIdToCreate":"p2pSessionIdToJoin")+"="+i.sessionId;i.hosting&&(r+="&sessionSecret="+i.sessionSecret);var n=new l(i.io.connect("",{query:r,timeout:5e3,reconnection:i.hosting}));i.channels.push(n),n.connected().take(1).do(function(){return n.send(u.PLAYER_SETTINGS,i.playerSettings)}).flatMap(function(){return n.on(u.P2P_ROLE).take(1)}).flatMap(function(e){return i.hosting?i.connectAsHost(n):i.connectAsGuest(n,e.hostId)}).subscribe(function(e){t(e),i.room&&setTimeout(function(){return i.room.launchIfNeeded()},0)},e),i.channels.push(n)})}},{key:"disconnect",value:function(){if(!this.channels)throw new Error("Not connected yet");this.channels.forEach(function(e){return e.disconnect()}),this.peerConnectionControllers.forEach(function(e){return e.disconnect()}),this.room&&this.room.tearDown()}},{key:"connectAsGuest",value:function(n,i){var o=this;return new Promise(function(t,e){var r=new s({signalingChannel:new c({io:n,peerId:i})});return o.peerConnectionControllers.push(r),r.rx.connected.filter(function(e){return e}).take(1).flatMap(function(){return r.connection.rx.receivedDataChannel()}).do(function(e){return console.log(e,e.label)}).filter(function(e){return e.label===v}).subscribe(function(e){o.channels.push(e),t(e)},e)})}},{key:"connectAsHost",value:function(r){var n=this;this.room=new f({gameModeSequence:new d,maxStateBacklogInSeconds:.3,framerate:60,logger:new m});var t=new h,i=new h;return this.channels.push(t),this.channels.push(i),t.outgoing.subscribe(function(e){return i.receive(e.type,e.data)}),i.outgoing.subscribe(function(e){return t.receive(e.type,e.data)}),this.room.addPlayer(new p({channel:i,name:this.playerSettings.name})),r.on(u.P2P_NEW_GUEST).subscribe(function(t){var e=new s({signalingChannel:new c({io:r,peerId:t.id})});n.peerConnectionControllers.push(e),e.rx.connected.filter(function(e){return e}).take(1).map(function(){return e.connection}).flatMap(function(e){return e.createDataChannel(v)}).subscribe(function(e){n.channels.push(e),n.room.addPlayer(new p({id:t.id,channel:e,name:t.name}))}),e.initiate()}),r.disconnected().delay(100).takeUntil(this.room.rx.tearDown).subscribe(function(){window.alert("Lost connection to central server, new players won't be able to join")}),Promise.resolve(t)}}]),a}();t.exports=i},{"../../../shared/communication/local-channel":847,"../../../shared/communication/message-types":848,"../../../shared/communication/peer-to-peer-channel":849,"../../../shared/communication/socket-io-channel":850,"../../../shared/model/player":902,"../../../shared/multiplayer/room":913,"../../../shared/multiplayer/sequence/standard-mode-sequence":921,"../util/console-logger":123,"./server-room-connection-controller":5,"./webrtc-connection-controller":6}],3:[function(e,t,r){var n=e("./server-room-connection-controller"),a=e("../../../shared/communication/local-channel"),s=e("../../../shared/multiplayer/sequence/vote-mode-sequence"),l=e("../../../shared/model/player"),u=e("../../../shared/modes/deathmatch"),c=e("../../../shared/modes/king-of-the-hill"),h=e("../../../shared/multiplayer/room"),d=e("../util/console-logger"),i=function(e){_inherits2(o,n);var i=_createSuper(o);function o(e,t,r){var n;return _classCallCheck2(this,o),(n=i.call(this)).playerSettings=e,n.gameMode=t,n.room=null,n.debugAI=r,n}return _createClass2(o,[{key:"firstGameMode",value:function(){switch(this.gameMode){case"king-of-the-hill":return new c;default:return new u}}},{key:"connect",value:function(){var i=this;return new Promise(function(e){var t=new s;t.nextGameMode=i.firstGameMode(),i.room=new h({gameModeSequence:t,maxStateBacklogInSeconds:.3,framerate:60,logger:new d});var r=new a,n=new a;r.outgoing.subscribe(function(e){return n.receive(e.type,e.data)}),n.outgoing.subscribe(function(e){return r.receive(e.type,e.data)}),r.disconnected().take(1).subscribe(function(){return i.disconnect()}),i.room.launchIfNeeded(),i.room.addNewBot(),i.room.addNewBot(),i.debugAI&&(window.localRoom=i.room),e(r),setTimeout(function(){i.room.addPlayer(new l({channel:n,name:i.playerSettings.name}))},0)})}},{key:"disconnect",value:function(){this.room&&(this.room.tearDown(),window.localRoom=null)}}]),o}();t.exports=i},{"../../../shared/communication/local-channel":847,"../../../shared/model/player":902,"../../../shared/modes/deathmatch":908,"../../../shared/modes/king-of-the-hill":910,"../../../shared/multiplayer/room":913,"../../../shared/multiplayer/sequence/vote-mode-sequence":922,"../util/console-logger":123,"./server-room-connection-controller":5}],4:[function(e,t,r){var n=function(){function t(e){_classCallCheck2(this,t),this.playerSettings=e}return _createClass2(t,[{key:"connect",value:function(){throw new Error}},{key:"disconnect",value:function(){throw new Error}}]),t}();t.exports=n},{}],5:[function(e,t,r){var n=e("./room-connection-controller"),a=e("../../../shared/communication/socket-io-channel"),s=e("../../../shared/communication/message-types"),l=e("../../../shared/constants"),i=function(e){_inherits2(o,n);var i=_createSuper(o);function o(e,t,r){var n;return _classCallCheck2(this,o),(n=i.call(this)).playerSettings=e,n.io=t,n.serverUrl=r,n.channel=null,n}return _createClass2(o,[{key:"connect",value:function(){var r=this;return new Promise(function(e,t){console.log("Connecting to "+r.serverUrl),r.channel=new a(r.io.connect(r.serverUrl,{query:"joinServer=true&gameVersion="+l.GAME_VERSION,timeout:5e3,reconnection:!1})),r.channel.connected().take(1).subscribe(function(){r.channel.send(s.PLAYER_SETTINGS,r.playerSettings),e(r.channel)},function(e){return t(e)})})}},{key:"disconnect",value:function(){if(!this.channel)throw new Error("Not connected yet");return this.channel.disconnect()}}]),o}();t.exports=i},{"../../../shared/communication/message-types":848,"../../../shared/communication/socket-io-channel":850,"../../../shared/constants":852,"./room-connection-controller":4}],6:[function(e,t,r){var a=e("rxjs/Rx"),s=e("./webrtc-connection"),l=e("../../../shared/communication/message-types"),n=function(){function o(e){var t=this;_classCallCheck2(this,o),this.signalingChannel=e.signalingChannel,this.rx={},this.rx.connected=new a.BehaviorSubject;var r=this.signalingChannel.on(l.WEBRTC_OFFER).subscribe(function(e){return t.receiveOffer(e)}),n=this.signalingChannel.on(l.WEBRTC_ANSWER).subscribe(function(e){return t.receiveAnswer(e)}),i=this.signalingChannel.on(l.WEBRTC_ICE_CANDIDATE).subscribe(function(e){return t.receiveIceCandidate(e)});this.connection=new s,this.connection.rx.iceConnectionState().skip(1).filter(function(e){return"failed"===e||"closed"===e}).take(1).subscribe(function(){r.unsubscribe(),n.unsubscribe(),i.unsubscribe()}),this.connection.rx.gatheredICECandidate().subscribe(function(e){return t.signalingChannel.send(l.WEBRTC_ICE_CANDIDATE,e)}),this.connection.rx.iceConnectionState().map(function(e){return"connected"===e||"completed"===e}).subscribe(function(e){return t.rx.connected.next(e)})}return _createClass2(o,[{key:"initiate",value:function(){var t=this;return this.connection.createOffer().then(function(e){return t.signalingChannel.send(l.WEBRTC_OFFER,e)})}},{key:"receiveOffer",value:function(e){var t=this;return this.connection.acceptOffer(e).then(function(e){return t.signalingChannel.send(l.WEBRTC_ANSWER,e)})}},{key:"receiveAnswer",value:function(e){return this.connection.receiveAnswer(e)}},{key:"receiveIceCandidate",value:function(e){return this.connection.addIceCandidate(new window.RTCIceCandidate(e))}},{key:"disconnect",value:function(){this.connection.close()}}]),o}();t.exports=n},{"../../../shared/communication/message-types":848,"./webrtc-connection":7,"rxjs/Rx":379}],7:[function(e,t,r){var n=e("rxjs/Rx"),i=e("./webrtc-data-channel"),o=window.RTCPeerConnection||window.mozRTCPeerConnection||window.webkitRTCPeerConnection,a=function(){function e(){var r=this;_classCallCheck2(this,e),this.localStreams=[],this.peerConnection=new o({iceServers:[{urls:["stun:stun.services.mozilla.com"]}]}),this.rx={},this.rx.receivedDataChannel=function(){return n.Observable.create(function(t){var e=function(e){return t.next(new i({dataChannel:e.channel,connection:r}))};return r.peerConnection.addEventListener("datachannel",e,!1),function(){return r.peerConnection.removeEventListener("datachannel",e)}})},this.rx.gatheredICECandidate=function(){return n.Observable.create(function(t){var e=function(e){return e.candidate&&t.next(e.candidate)};return r.peerConnection.addEventListener("icecandidate",e,!1),function(){return r.peerConnection.removeEventListener("icecandidate",e)}})},this.rx.receivedStream=function(){return n.Observable.create(function(t){var e=function(e){return t.next(e.stream)};return r.peerConnection.addEventListener("addstream",e,!1),function(){return r.peerConnection.removeEventListener("addstream",e)}})},this.rx.iceConnectionState=function(){return n.Observable.create(function(e){var t=function(){return e.next(r.peerConnection.iceConnectionState)};return r.peerConnection.addEventListener("iceconnectionstatechange",t,!1),t(),function(){return r.peerConnection.removeEventListener("iceconnectionstatechange",t)}})}}return _createClass2(e,[{key:"createOffer",value:function(){var t=this;return this.createDataChannel("dummy").then(function(){return t.peerConnection.createOffer()}).then(function(e){return t.peerConnection.setLocalDescription(e).then(function(){return e})})}},{key:"acceptOffer",value:function(e){var t=this;return this.peerConnection.setRemoteDescription(new window.RTCSessionDescription(e)).then(function(){return t.peerConnection.createAnswer()}).then(function(e){return t.peerConnection.setLocalDescription(e).then(function(){return e})})}},{key:"receiveAnswer",value:function(e){return this.peerConnection.setRemoteDescription(new window.RTCSessionDescription(e))}},{key:"addIceCandidate",value:function(e){return this.peerConnection.addIceCandidate(e)}},{key:"createDataChannel",value:function(r){var n=this;return new Promise(function(e){var t=n.peerConnection.createDataChannel(r);e(new i({dataChannel:t,connection:n}))})}},{key:"addStream",value:function(t){var r=this;return new Promise(function(e){r.localStreams.push(t),r.peerConnection.addStream(t),e()})}},{key:"close",value:function(){this.peerConnection.close(),this.localStreams.forEach(function(t){t.getTracks().slice().forEach(function(e){e.stop(),t.removeTrack(e)})})}}]),e}();t.exports=a},{"./webrtc-data-channel":8,"rxjs/Rx":379}],8:[function(e,t,r){var i=e("rxjs/Rx"),o=e("../../../shared/communication/channel"),n=function(e){_inherits2(n,o);var r=_createSuper(n);function n(e){var t;return _classCallCheck2(this,n),(t=r.call(this)).dataChannel=e.dataChannel,t.connection=e.connection,t.open=new i.BehaviorSubject(!1),t.dataChannel.addEventListener("open",function(){return t.open.next(!0)},!1),t}return _createClass2(n,[{key:"label",get:function(){return this.dataChannel.label}},{key:"send",value:function(e,t){var r=this,n=JSON.stringify({type:e,data:t});this.open.filter(function(e){return e}).take(1).subscribe(function(){return r.dataChannel.send(n)})}},{key:"receive",value:function(){var r=this;return i.Observable.create(function(t){var e=function(e){return t.next(JSON.parse(e.data))};return r.dataChannel.addEventListener("message",e,!1),function(){return r.dataChannel.removeEventListener("message",e)}})}},{key:"on",value:function(t){return this.receive().filter(function(e){return e.type===t}).map(function(e){return e.data})}},{key:"disconnect",value:function(){this.dataChannel.close()}},{key:"connected",value:function(){var r=this;return i.Observable.create(function(e){var t=function(){r.open.next(!0),e.next()};return r.dataChannel.addEventListener("open",t,!1),function(){return r.dataChannel.removeEventListener("open",t)}})}},{key:"disconnected",value:function(){var r=this,e=i.Observable.create(function(e){var t=function(){r.open.next(!1),e.next()};return r.dataChannel.addEventListener("close",t,!1),function(){return r.dataChannel.removeEventListener("close",t)}}),t=this.connection.rx.iceConnectionState().filter(function(e){return"failed"===e||"disconnected"===e||"closed"===e});return i.Observable.merge(t,e).take(1)}}]),n}();t.exports=n},{"../../../shared/communication/channel":845,"rxjs/Rx":379}],9:[function(e,t,r){var h=e("pixi.js"),n=e("../../../shared/controllers/hero-controller"),i=e("../interaction/keyboard"),o=e("../interaction/gamepad"),a=e("../interaction/interaction-manager"),s=function(e){_inherits2(r,n);var t=_createSuper(r);function r(){return _classCallCheck2(this,r),t.apply(this,arguments)}return _createClass2(r,[{key:"getTouchView",value:function(){return this.touchView||(this.touchView=this.createTouchView(),this.screen.view.addChild(this.touchView)),this.touchView}},{key:"createTouchView",value:function(){var e,t=this,r=new h.Container,n=this.screen.game.params.width/4,i=n/2,o=i/4,a=function(e){var i=new h.Graphics;return i.beginFill(16777215),e.forEach(function(e,t){var r=Math.cos(e)*o,n=Math.sin(e)*o;0===t?i.moveTo(r,n):i.lineTo(r,n)}),i.endFill(),i};this.touchButtons=[];for(var s=0;s<4;s++){var l=(e=void 0,(e=new h.Graphics).beginFill(0),e.drawCircle(0,0,i/2),e.endFill(),e);l.position.x=this.screen.game.params.width*(s+.5)/4,l.position.y=this.screen.game.params.height-n/2,r.addChild(l),this.touchButtons.push({view:l,active:null})}this.touchButtons[0].view.addChild(a([Math.PI/3,Math.PI,-Math.PI/3])),this.touchButtons[1].view.addChild(a([0,2*Math.PI/3,2*-Math.PI/3])),this.touchButtons[2].view.addChild(a([Math.PI/4,3*Math.PI/4,5*Math.PI/4,7*Math.PI/4]));for(var u=[],c=0;c<40;c++)u.push(2*Math.PI*c/40);return this.touchButtons[3].view.addChild(a(u)),this.touchButtons.forEach(function(e){return e.view.cacheAsBitmap=!0}),this.touchButtons[0].active=function(){return-1===t.touchDirection()},this.touchButtons[1].active=function(){return 1===t.touchDirection()},this.touchButtons[2].active=function(){return t.touchTrigger()},this.touchButtons[3].active=function(){return t.touchJump()},r}},{key:"nonCharacterCycle",value:function(e){_get(_getPrototypeOf(r.prototype),"nonCharacterCycle",this).call(this,e),this.screen.game.interactionManager.controlStyle===a.TOUCH?(this.getTouchView().visible=!0,this.touchButtons.forEach(function(e){return e.view.alpha=e.active()?.5:.25})):this.touchView&&(this.touchView.visible=!1)}},{key:"keyboardDirection",value:function(){return this.screen.game.interactionManager.isDown(i.LEFT)||this.screen.game.interactionManager.isDown(i.A)?-1:this.screen.game.interactionManager.isDown(i.RIGHT)||this.screen.game.interactionManager.isDown(i.D)?1:0}},{key:"gamepadDirection",value:function(){return this.screen.game.interactionManager.isButtonDown(o.BUTTON_LEFT)?-1:this.screen.game.interactionManager.isButtonDown(o.BUTTON_RIGHT)?1:this.screen.game.interactionManager.getAxisValue(o.LEFT_JOYSTICK_X_AXIS)}},{key:"touchDirection",value:function(){var t=this,r=0;return this.screen.game.interactionManager.touches.forEach(function(e){e.x<0||e.x>t.screen.game.params.width/2||(r=e.x<t.screen.game.params.width/4?-1:1)}),r}},{key:"keyboardJump",value:function(){return this.screen.game.interactionManager.isDown(i.X)||this.screen.game.interactionManager.isDown(i.UP)||this.screen.game.interactionManager.isDown(i.W)}},{key:"gamepadJump",value:function(){return this.screen.game.interactionManager.isButtonDown(o.BUTTON_ACTION_BOTTOM)}},{key:"touchJump",value:function(){var t=this,r=0;return this.screen.game.interactionManager.touches.forEach(function(e){r=r||Math.isBetween(3*t.screen.game.params.width/4,e.x,t.screen.game.params.width)}),r}},{key:"keyboardTrigger",value:function(){return this.screen.game.interactionManager.isDown(i.C)||this.screen.game.interactionManager.isDown(i.SPACE)||this.screen.game.interactionManager.isDown(i.ENTER)}},{key:"gamepadTrigger",value:function(){return this.screen.game.interactionManager.isButtonDown(o.BUTTON_ACTION_LEFT)}},{key:"touchTrigger",value:function(){var t=this,r=0;return this.screen.game.interactionManager.touches.forEach(function(e){r=r||Math.isBetween(t.screen.game.params.width/2,e.x,3*t.screen.game.params.width/4)}),r}},{key:"keyboardSprint",value:function(){return this.screen.game.interactionManager.isDown(i.LEFT_SHIFT)||this.screen.game.interactionManager.isDown(i.RIGHT_SHIFT)}},{key:"gamepadSprint",value:function(){return this.screen.game.interactionManager.isButtonDown(o.TRIGGER_R2)}},{key:"keyboardCameraOffset",value:function(){return null}},{key:"gamepadCameraOffset",value:function(){return this.screen.game.interactionManager.currentGamepad?this.screen.game.interactionManager.isButtonDown(o.BUTTON_UP)?{x:0,y:-1}:this.screen.game.interactionManager.isButtonDown(o.BUTTON_DOWN)?{x:0,y:1}:{x:this.screen.game.interactionManager.getAxisValue(o.RIGHT_JOYSTICK_X_AXIS),y:this.screen.game.interactionManager.getAxisValue(o.RIGHT_JOYSTICK_Y_AXIS)}:null}},{key:"currentInputs",value:function(){return this.screen.paused?this.defaultInputs():this.screen.game.interactionManager.controlStyle===a.KEYBOARD?{direction:this.keyboardDirection(),cameraOffset:this.keyboardCameraOffset(),jump:this.keyboardJump(),trigger:this.keyboardTrigger()}:this.screen.game.interactionManager.controlStyle===a.GAMEPAD?{direction:this.gamepadDirection(),cameraOffset:this.gamepadCameraOffset(),jump:this.gamepadJump(),trigger:this.gamepadTrigger()}:this.screen.game.interactionManager.controlStyle===a.TOUCH?{direction:this.touchDirection(),cameraOffset:null,jump:this.touchJump(),trigger:this.touchTrigger()}:this.defaultInputs()}}]),r}();t.exports=s},{"../../../shared/controllers/hero-controller":855,"../interaction/gamepad":72,"../interaction/interaction-manager":73,"../interaction/keyboard":74,"pixi.js":329}],10:[function(e,t,r){var n=e("rxjs/Rx"),i=function(){function t(e){var r=this;_classCallCheck2(this,t),this.localStorageKey=e.localStorageKey,this.data={},this.defaultValues=e.defaultValues||{},this.rx={},this.rx.changedValue=new n.Subject,this.rx.value=function(t){return r.rx.changedValue.filter(function(e){return e===t}).map(function(){return r.getValue(t)}).startWith(r.getValue(t)).distinctUntilChanged()},this.load()}return _createClass2(t,[{key:"setDefaultValue",value:function(e,t){this.defaultValues[e]=t}},{key:"load",value:function(){var t,e,r=this;try{t=window.localStorage.getItem(this.localStorageKey)}catch(e){console.warn("Falling back to session storage");try{t=window.sessionStorage.getItem(this.localStorageKey)}catch(e){console.warn("Session storage not available either"),t=""}}try{e=JSON.parse(t)}catch(e){}this.data=e||{},Object.keys(this.data).forEach(function(e){return r.rx.changedValue.next(e)})}},{key:"save",value:function(){var e=JSON.stringify(this.data);try{window.localStorage.setItem(this.localStorageKey,e)}catch(e){}}},{key:"setValue",value:function(e,t){this.data[e]!==t&&(this.data[e]=t,this.save(),this.rx.changedValue.next(e))}},{key:"getValue",value:function(e){return e in this.data?this.data[e]:this.defaultValues[e]}}]),t}();t.exports=i},{"rxjs/Rx":379}],11:[function(e,t,r){var n=function(){function t(e){_classCallCheck2(this,t),this.element=e}return _createClass2(t,[{key:"show",value:function(){this.element.style.visibility="visible"}},{key:"hide",value:function(){this.element.style.visibility="hidden"}}]),t}();t.exports=n},{}],12:[function(e,t,r){var n=e("rxjs/Rx"),i=e("./element-toggler"),o=e("../interaction/keyboard"),a=function(){function t(e){_classCallCheck2(this,t),this.toggler=new i(e.form),this.input=e.input,this.label=e.label,this.interactionManager=e.interactionManager,this.visible=!1,this.rx={},this.rx.reset=new n.Subject}return _createClass2(t,[{key:"keyboardEventListener",value:function(){return n.Observable.create(function(t){var e=function(e){return t.next(e)};return window.document.addEventListener("keyup",e,!1),function(){return window.document.removeEventListener("keyup",e)}})}},{key:"cancelInput",value:function(){return this.keyboardEventListener().filter(function(e){return e.keyCode===o.ESC})}},{key:"submitInput",value:function(){return this.keyboardEventListener().filter(function(e){return e.keyCode===o.ENTER})}},{key:"show",value:function(){this.interactionManager.ignoreAllInputs(),this.visible=!0,this.toggler.show(),this.input.focus(),this.input.select()}},{key:"hide",value:function(){this.interactionManager.stopIgnoringAllInputs(),this.visible=!1,this.input.blur(),this.toggler.hide(),this.rx.reset.next()}},{key:"requestInput",value:function(r){var n=this,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"";return new Promise(function(e,t){n.label.innerHTML=r,n.input.value=i,n.input.select(),n.cancelInput().takeUntil(n.rx.reset).subscribe(function(){n.hide(),t()}),n.submitInput().takeUntil(n.rx.reset).subscribe(function(){n.hide(),e(n.input.value)}),n.show()})}}]),t}();t.exports=a},{"../interaction/keyboard":74,"./element-toggler":11,"rxjs/Rx":379}],13:[function(e,t,r){var n=function(){function t(e){_classCallCheck2(this,t),this.element=e.element,this.ratio=e.ratio}return _createClass2(t,[{key:"setup",value:function(){var e=this;window.addEventListener("resize",function(){return e.resize()},!1),this.resize()}},{key:"resize",value:function(){var e,t,r=window.innerWidth,n=window.innerHeight;r/n<=this.ratio?t=(e=r)/this.ratio:e=(t=n)*this.ratio,this.element.style.width=e+"px",this.element.style.height=t+"px"}}]),t}();t.exports=n},{}],14:[function(e,t,r){var n=e("./game/super-brawl"),i=e("./params"),o=e("./dom/resizer");e("../../shared/util/math"),e("./util/pixi-utils");var a=e("animate").Easing;for(var s in a)Math[s]=a[s];window.addEventListener("load",function(){var t=window.nwParams||{};Object.keys(t).forEach(function(e){i[e]=t[e]});var e=Promise.resolve();window.PokiSDK&&(e=PokiSDK.init().then(function(){console.log("Poki SDK successfully initialized")}).catch(function(){console.log("Initialized, but the user likely has adblock")}),PokiSDK.setDebug(0<=window.location.search.indexOf("debug"))),e.then(function(){window.G=new n(i),window.G.setup()})},!1),window.addEventListener("DOMContentLoaded",function(){new o({element:window.document.getElementById("canvas-container"),ratio:i.width/i.height}).setup()},!1)},{"../../shared/util/math":931,"./dom/resizer":13,"./game/super-brawl":16,"./params":82,"./util/pixi-utils":128,animate:161}],15:[function(e,t,r){var n=e("pixi.js"),i=e("stats.js"),o=e("fscreen").default,a=e("../util/pixi-utils"),s=e("../interaction/interaction-manager"),l=e("../sound/sound-manager"),u=e("../dom/form-input-manager"),c=function(){function t(e){_classCallCheck2(this,t),this.params=e,this.parseURL(),this.time=0}return _createClass2(t,[{key:"setup",value:function(){this.canvasContainer=window.document.getElementById("canvas-container"),this.stage=new n.Container,this.screenContainer=new n.Container,this.stage.addChild(this.screenContainer),this.setResolution(this.params.resolution||1),this.interactionManager=new s(this),this.interactionManager.setup();var e=window.document.querySelector("#input-form");this.formInputManager=new u({interactionManager:this.interactionManager,form:e,label:e.querySelector("label"),input:e.querySelector("input")}),this.screens=[],this.lastFrame=window.performance.now(),this.scheduleFrame(),this.params.debug&&(this.debugger=new n.Text("",{fill:"white",align:"left",fontFamily:"Courier",fontSize:"14pt"}),this.debugger.position.x=20,this.debugger.position.y=20,this.stage.addChild(this.debugger),this.stats=new i,this.stats.showPanel(1),window.document.body.appendChild(this.stats.dom),this.renderStats=new i,this.renderStats.showPanel(1),this.renderStats.dom.style.left="80px",window.document.body.appendChild(this.renderStats.dom)),this.soundManager=new l}},{key:"pushScreen",value:function(e){var t=this.screen();e.game=this,e.setup(),this.screenContainer.addChild(e.view),this.screens.push(e),t&&t.background(),e.foreground(),e.cycle(0),e.postCycle(0),this.canvasContainer.style.cursor=e.hideCursor?"none":"default",window.S=e}},{key:"popScreen",value:function(){var e=this.screens.pop();e&&(e.destroy(),a.remove(e.view));var t=this.screens[this.screens.length-1];t&&(t.foreground(),this.canvasContainer.style.cursor=t.hideCursor?"none":"default"),window.S=t}},{key:"setScreen",value:function(e){for(;0<this.screens.length;){var t=this.screens.pop();t.destroy(),a.remove(t.view)}this.pushScreen(e)}},{key:"reloadCurrentScreen",value:function(){var e=this.screen();this.popScreen(),this.pushScreen(e),e.foreground()}},{key:"screen",value:function(){return this.screens[this.screens.length-1]||null}},{key:"scheduleFrame",value:function(){var e=this;if(!this.animationFrameId){var t=function(){e.animationFrameId=null,e.frame()};this.runningLoop=!0,this.params.fps?setTimeout(t,1e3/parseInt(this.params.fps)):this.animationFrameId=window.requestAnimationFrame(t)}}},{key:"stopLoop",value:function(){this.runningLoop=!1,window.cancelAnimationFrame(this.animationFrameId),this.animationFrameId=null}},{key:"frame",value:function(){this.stats&&this.stats.begin();var e=window.performance.now(),t=(e-this.lastFrame)/1e3;if(this.frameStart=window.performance.now(),this.previousFrame=this.lastFrame,this.lastFrame=e,this.cycle(t),this.cycleEnd=window.performance.now(),this.renderStats&&this.renderStats.begin(),this.runningLoop&&this.scheduleFrame(),this.renderer.render(this.stage),this.renderStats&&this.renderStats.end(),this.frameEnd=window.performance.now(),this.params.debug){var r=this.getDebugValues(),n="";for(var i in r)n+=i+": "+r[i]+"\n";this.debugger.text=n}this.stats&&this.stats.end()}},{key:"cycle",value:function(t){t=Math.min(t,this.params.maxElapsed||1),this.time+=t,this.screens.forEach(function(e){e.cycle(t),e.postCycle(t)})}},{key:"getDebugValues",value:function(){var e={"Frame time":Math.roundFloat(this.frameEnd-this.frameStart,2),"Cycle time":Math.roundFloat(this.cycleEnd-this.frameStart,2),"Render time":Math.roundFloat(this.frameEnd-this.cycleEnd,2),"FPS (theoretical)":Math.roundFloat(1e3/(this.frameEnd-this.frameStart),1),"FPS (real)":Math.roundFloat(1e3/(this.frameEnd-this.previousFrame),1),Elements:a.nNodes(this.stage),Leaves:a.nLeaves(this.stage),Visible:a.nVisible(this.stage),Rendered:a.nRendered(this.stage),Filters:a.nFilters(this.stage),Interpolations:this.screen().interpolationPool.size};return this.screen().addDebugValues(e),e}},{key:"parseURL",value:function(){var i=this;(window.document.location.search||"?").substr(1).split("&").forEach(function(e){var t=e.split("=");if(2===t.length){var r=t[0],n=t[1];"true"===n||"false"===n?n=JSON.parse(n):isNaN(n)||(n=parseFloat(n)),i.params[r]=n}})}},{key:"setResolution",value:function(e){if(e!==this.resolution){this.resolution=e;var t=this.params.width*this.resolution,r=this.params.height*this.resolution;this.renderer?this.renderer.resize(t,r):(this.renderer=new n.autoDetectRenderer(t,r,{resolution:1}),this.renderer.clearBeforeRender=!1,this.renderer.roundPixels=!0,this.renderer.antiAlias=!0,this.renderer.transparent=!1,this.canvas=this.renderer.view,this.canvasContainer.appendChild(this.canvas)),this.stage.scale.x=e,this.stage.scale.y=e}}},{key:"enableFullscreen",value:function(){window.PokiSDK||o.requestFullscreen(window.document.body)}},{key:"disableFullscreen",value:function(){window.PokiSDK||o.exitFullscreen()}},{key:"isFullscreen",get:function(){return null!==o.fullscreenElement}},{key:"quit",value:function(){window.close(!0)}}]),t}();t.exports=c},{"../dom/form-input-manager":12,"../interaction/interaction-manager":73,"../sound/sound-manager":114,"../util/pixi-utils":128,fscreen:180,"pixi.js":329,"stats.js":822}],16:[function(e,t,r){var i=e("pixi.js"),o=e("howler").Howl,a=e("./game"),s=e("../../../shared/constants"),l=e("../interaction/keyboard"),u=e("../interaction/gamepad"),c=e("../interaction/interaction-manager"),h=e("../data/user-data"),d=e("../screens/asset-loading-screen"),p=e("../screens/menu/new-menu-screen"),f=e("../screens/menu/main-menu-screen"),m=e("../screens/menu/crash-menu-screen"),v=e("../screens/dev/mask-screen"),b=e("../screens/world/world-screen"),y=e("../screens/world/test-screen"),g=e("../screens/world/main-menu-background-screen"),w=e("../screens/world/multiplayer-screen"),_=e("../metrics/tracker"),x=e("../multiplayer/multiplayer-flow"),S=e("../communication/hosted-room-connection-controller"),C=e("../communication/server-room-connection-controller"),k=e("../communication/offline-room-connection-controller"),T=e("../dom/element-toggler"),A=e("../integrations/armor-games-integration"),E=e("../../../shared/util/random-player-name"),n=function(e){_inherits2(n,a);var t=_createSuper(n);function n(){return _classCallCheck2(this,n),t.apply(this,arguments)}return _createClass2(n,[{key:"setup",value:function(){var t=this;_get(_getPrototypeOf(n.prototype),"setup",this).call(this),this.keyboardInstructionsToggler=new T(window.document.querySelector("#keyboard-instructions")),window.addEventListener("blur",function(){return t.windowHasFocus(!1)},!1),window.addEventListener("focus",function(){return t.windowHasFocus(!0)},!1),this.setupMetrics(),this.userData=new h({localStorageKey:"SuperBrawl-data",defaultValues:{"effects-volume":1,"soundtrack-volume":.2,resolution:1,windowed:!0,name:null,audioVideo:!1,warnedWebRTC:!1}});try{var e=new URLSearchParams(location.search);e.has("roomDetails")&&(this.ruskRoomDetails=JSON.parse(atob(e.get("roomDetails"),"base64")),this.userData.setValue("name",this.ruskRoomDetails.name))}catch(e){console.error(e)}this.userData.rx.value("resolution").subscribe(function(e){return t.setResolution(e)}),this.userData.rx.value("windowed").subscribe(function(e){return t.setWindowed(e)}),this.userData.rx.value("effects-volume").subscribe(function(e){return t.soundManager.setEffectsVolume(e)}),this.userData.rx.value("soundtrack-volume").subscribe(function(e){return t.soundManager.setSoundtrackVolume(e)}),this.setScreen(new d);var r=new i.Text("v"+s.GAME_VERSION,{fontFamily:"Courier",fontSize:12,fill:"#fff"});r.debugLabel="VersionLabel",r.anchor.x=1,r.anchor.y=1,r.position.x=this.params.width-20,r.position.y=this.params.height-10,this.stage.addChild(r),window.greenworks&&(this.initGreenworks(),this.params.demoMode&&(r.text+=" // DEMO"),this.steamAPIs||(r.text+=" // NOT IN STEAM - ENJOY THE GAME ;)")),this.params.armorgames&&new A(this).initialize()}},{key:"setResolution",value:function(e){_get(_getPrototypeOf(n.prototype),"setResolution",this).call(this,e),window.nw&&window.resizeTo(this.canvas.width,this.canvas.height)}},{key:"setWindowed",value:function(e){if(e)this.disableFullscreen();else try{this.enableFullscreen()}catch(e){console.error(e)}}},{key:"assetLoadingComplete",value:function(){this.params.mask?this.setScreen(new v):this.params.test?this.setScreen(new y({})):(this.soundManager.playLoop("soundtrack-gameplay"),this.mainMenu())}},{key:"mainMenu",value:function(){for(this.screens[0]instanceof g||this.setScreen(new g);1<this.screens.length;)this.popScreen();this.pushScreen(new f)}},{key:"promptName",value:function(){var r=this;return this.formInputManager.requestInput("Choose a nickname:",this.userData.getValue("name")||E()).then(function(e){var t=(e||"").slice(0,15);return r.userData.setValue("name",t),t})}},{key:"showInterstitialAd",value:function(){var t=this;return window.PokiSDK?new Promise(function(e){t.soundManager.setMuted(!0),t.interactionManager.ignoreAllInputs(),t.interstitialAdInProgress=!0,t.screen()instanceof w&&PokiSDK.gameplayStop(),PokiSDK.commercialBreak().then(function(){t.soundManager.setMuted(!1),t.interactionManager.stopIgnoringAllInputs(),t.interstitialAdInProgress=!1,t.screen()instanceof w&&PokiSDK.gameplayStart(),e()})}):Promise.resolve()}},{key:"joinRoom",value:function(e,t){var r=this;return this.showInterstitialAd().then(function(){r.userData.getValue("name")||"offline"===e?r.doJoinRoom(e,t):r.promptName().catch(function(){return""}).then(function(){return r.showInterstitialAd()}).then(function(){return r.doJoinRoom(e,t)})})}},{key:"doJoinRoom",value:function(e,t){var r,n={name:this.userData.getValue("name"),receiveAudioVideo:this.userData.getValue("audioVideo"),sendAudioVideo:this.userData.getValue("audioVideo")};r="offline"===e?new k(n,t.gameMode,!!this.params.debugAI):"hosted"===e?new S(n,window.io,t.sessionId,t.hosting):new C(n,window.io,t.serverUrl),new x(this,r).start()}},{key:"cycle",value:function(e){this.params.timekeys&&(this.interactionManager.isDown(l.F)||this.interactionManager.isButtonDown(u.TRIGGER_R1)?e*=6:(this.interactionManager.isDown(l.G)||this.interactionManager.isButtonDown(u.TRIGGER_L1))&&(e*=.1));var t=this.screen();t&&t.timeFactor&&(e*=t.timeFactor()),_get(_getPrototypeOf(n.prototype),"cycle",this).call(this,e)}},{key:"setupMetrics",value:function(){this.tracker=new _}},{key:"setupSounds",value:function(){function e(e){var t,r=window.nw||window.PokiSDK?["ogg"]:["ogg","mp3"];return t=e,r.map(function(e){return t+"."+e})}this.params.mute?this.soundManager.suppressWarnings=!0:(this.soundManager.prepare("tick",[new o({src:e("assets/sound/tick/8BIT_RETRO_Beep_Short_Bright_mono")})]),this.soundManager.prepare("grenade-launch",[new o({src:e("assets/sound/grenade-launch/IMPACT_Energy_Solid_07_mono")})]),this.soundManager.prepare("grenade-bounce",[new o({src:e("assets/sound/grenade-bounce/8BIT_RETRO_Hit_Bump_Thud_mono")})]),this.soundManager.prepare("bumper",[new o({src:e("assets/sound/bumper/8BIT_RETRO_Jump_Glide_Up_Dual_Tone_Bounce_Deep_Fast_mono")})]),this.soundManager.prepare("jump",[new o({src:e("assets/sound/jump/8BIT_RETRO_Jump_Glide_Up_Dual_Tone_High_Fast_mono")})]),this.soundManager.prepare("spawn",[new o({src:e("assets/sound/spawn/SPACE_WARP_Type_01_Warp_C_stereo")})]),this.soundManager.prepare("explosion",[new o({src:e("assets/sound/explosions/8BIT_RETRO_Explosion_Short_Bright_mono")}),new o({src:e("assets/sound/explosions/8BIT_RETRO_Explosion_Short_Dirty_mono")})]),this.soundManager.prepare("hurt",[new o({src:e("assets/sound/hurt/8BIT_RETRO_Hit_Bump_Bright_Reverse_mono")}),new o({src:e("assets/sound/hurt/8BIT_RETRO_Hit_Bump_Deep_Zap_mono")})]),this.soundManager.prepare("land",[new o({src:e("assets/sound/land/land-sfxr")})]),this.soundManager.prepare("shotgun",[new o({src:e("assets/sound/shotgun/FIREARM_Shotgun_Model_01_Fire_Single_RR1_stereo")}),new o({src:e("assets/sound/shotgun/FIREARM_Shotgun_Model_01_Fire_Single_RR2_stereo")}),new o({src:e("assets/sound/shotgun/FIREARM_Shotgun_Model_01_Fire_Single_RR3_stereo")})]),this.soundManager.prepare("machine-gun",[new o({src:e("assets/sound/machine-gun/FIREARM_Assault_Rifle_Model_01b_Fire_Single_RR1_stereo")}),new o({src:e("assets/sound/machine-gun/FIREARM_Assault_Rifle_Model_01b_Fire_Single_RR2_stereo")}),new o({src:e("assets/sound/machine-gun/FIREARM_Assault_Rifle_Model_01b_Fire_Single_RR3_stereo")})]),this.soundManager.prepare("health",[new o({src:e("assets/sound/health/8BIT_RETRO_Powerup_Spawn_Reverse_Repeating_Fading_Zaps_mono")})]),this.soundManager.prepare("kill",[new o({src:e("assets/sound/kill/8BIT_RETRO_Hit_Bump_Dirty_Thud_mono")})]),this.soundManager.prepare("rocket",[new o({src:e("assets/sound/rocket/ROCKET_Launch_Deep_Slow_mono")})]),this.soundManager.prepare("click",[new o({src:e("assets/sound/click/UI_Click_Metallic_mono")})]),this.soundManager.prepare("option-select",[new o({src:e("assets/sound/option-select/UI_Click_Distinct_mono")})]),this.soundManager.prepare("plasma",[new o({src:e("assets/sound/plasma/BLASTER_Bright_Piercing_Pitch_Down_stereo")})]),this.soundManager.prepare("jetpack",[new o({src:e("assets/sound/jetpack/THRUSTER_Bright_Throttle_Flanger_Afterburner_loop_mono"),loop:!0})]),this.soundManager.prepare("weapon",[new o({src:e("assets/sound/weapon/RELOAD_Eject_Leaver_Action_stereo")})]),this.soundManager.prepare("shield",[new o({src:e("assets/sound/shield/SWORD_Whoosh_Hit_Armor_Hard_RR8_mono")})]),this.soundManager.prepare("crown",[new o({src:e("assets/sound/crown/PUZZLE_Success_Brass_Fanfare_Bright_Wet_stereo")})]),this.soundManager.prepare("round-lose",[new o({src:e("assets/sound/round-lose/MUSIC_EFFECT_Dubstep_Negative_stereo")})]),this.soundManager.prepare("round-win",[new o({src:e("assets/sound/round-win/MUSIC_EFFECT_Dubstep_Positive_stereo")})]),this.soundManager.prepare("soundtrack-gameplay",[new o({src:e("assets/sound/soundtrack/gameplay/Frogs_verses_Robots")})]))}},{key:"setScreen",value:function(e){_get(_getPrototypeOf(n.prototype),"setScreen",this).call(this,e),this.screenChanged()}},{key:"pushScreen",value:function(e){_get(_getPrototypeOf(n.prototype),"pushScreen",this).call(this,e),this.tracker.screen(e.getId()),this.screenChanged()}},{key:"popScreen",value:function(){_get(_getPrototypeOf(n.prototype),"popScreen",this).call(this),this.screen()&&this.tracker.screen(this.screen().getId()),this.screenChanged()}},{key:"screenChanged",value:function(){var e=this.screen();e instanceof b&&e.isPlayerControllable()&&this.interactionManager.controlStyle===c.KEYBOARD?this.keyboardInstructionsToggler.show():this.keyboardInstructionsToggler.hide()}},{key:"openURL",value:function(e){window.nw&&window.gui?window.gui.Shell.openExternal(e):window.open(e)}},{key:"initGreenworks",value:function(){if(!window.greenworks.initAPI())return this.steamAPIs=!1,void console.error("Error initializing the greenworks API. Whatever, keep playing");this.steamAPIs=!0}},{key:"handleCrash",value:function(t){try{console.error(t);var e=new m({backgroundType:p.BACKGROUND.DIM}),r=this.screen();r&&r.getId()===e.getId()&&this.popScreen(),e.error=t.message,e.recoverable=this.screen(),this.pushScreen(e),this.scheduleFrame()}catch(e){window.alert("Unrecoverable error, quitting the game (original error: "+t.message+", second error:"+e.message+")"),this.quit()}}},{key:"windowHasFocus",value:function(e){window.nw||window.PokiSDK||this.soundManager.setMuted(!e)}}]),n}();t.exports=n},{"../../../shared/constants":852,"../../../shared/util/random-player-name":935,"../communication/hosted-room-connection-controller":2,"../communication/offline-room-connection-controller":3,"../communication/server-room-connection-controller":5,"../data/user-data":10,"../dom/element-toggler":11,"../integrations/armor-games-integration":70,"../interaction/gamepad":72,"../interaction/interaction-manager":73,"../interaction/keyboard":74,"../metrics/tracker":79,"../multiplayer/multiplayer-flow":81,"../screens/asset-loading-screen":89,"../screens/dev/mask-screen":90,"../screens/menu/crash-menu-screen":93,"../screens/menu/main-menu-screen":97,"../screens/menu/new-menu-screen":99,"../screens/world/main-menu-background-screen":108,"../screens/world/multiplayer-screen":109,"../screens/world/test-screen":112,"../screens/world/world-screen":113,"./game":15,howler:189,"pixi.js":329}],17:[function(e,t,r){var n=e("animate").Animation,i=e("animate").Timeline,s=e("../../../shared/util/random"),o=function(){function t(e){_classCallCheck2(this,t),this.target=null,this.shakeOffset={x:0,y:0},this.nextShakeUpdate=0,this.shakePower=0,this.viewport=e.viewport,this.bounds=e.bounds,this.offsetX=0,this.offsetY=0,this.facingOffset=50,this.frozen=!1,this.zoom=1,this.offsetDistanceFactor=400,this.interpolationPool=e.interpolationPool,this.shakeTimeline=null,this.center=this.withinBounds({x:0,y:0}),this.position={x:0,y:0},this.idealCenter={x:0,y:0}}return _createClass2(t,[{key:"visibleRectangleSizeInWorldUnits",value:function(){return{width:this.viewport.width/this.zoom,height:this.viewport.height/this.zoom}}},{key:"shake",value:function(e,t){var r=this;this.shakeTimeline&&this.shakeTimeline.cancel(),this.shakePower=Math.max(this.shakePower,e),this.shakeTimeline=(new i).wait(t).add(function(){return r.shakePower=0}).run(this.interpolationPool)}},{key:"follow",value:function(e){this.target=e}},{key:"cycle",value:function(e){var t=this.idealTargetPosition(),r=Math.distance(t,this.idealCenter),n=Math.max(1,r/.2),i=Math.atan2(t.y-this.idealCenter.y,t.x-this.idealCenter.x),o=Math.min(n*e,r);this.idealCenter.x+=Math.cos(i)*o,this.idealCenter.y+=Math.sin(i)*o,this.center=this.withinBounds(this.idealCenter);var a=this.visibleRectangleSizeInWorldUnits();this.nextShakeUpdate-=e,this.nextShakeUpdate<=0&&(this.nextShakeUpdate=1/60,this.shakeOffset.x=s.randInt(-50,50)*this.shakePower,this.shakeOffset.y=s.randInt(-50,50)*this.shakePower),this.position.x=~~(this.shakeOffset.x+this.center.x-a.width/2),this.position.y=~~(this.shakeOffset.y+this.center.y-a.height/2)}},{key:"withinBounds",value:function(e){var t=this.visibleRectangleSizeInWorldUnits();return{x:~~Math.between(this.bounds.x+t.width/2,e.x,this.bounds.x+this.bounds.width-t.width/2),y:~~Math.between(this.bounds.y+t.height/2,e.y,this.bounds.y+this.bounds.height-t.height/2)}}},{key:"idealTargetPosition",value:function(){if(!this.target||this.frozen)return this.center;var e=this.target.x+(this.target.facing||0)*this.facingOffset,t=this.target.y;return{x:e+this.offsetX*this.offsetDistanceFactor/this.zoom,y:t+this.offsetY*this.offsetDistanceFactor/this.zoom}}},{key:"containsPoint",value:function(e,t,r){return e>=this.position.x-r&&t>=this.position.y-r&&e<=this.position.x+this.viewport.width/this.zoom+r&&t<=this.position.y+this.viewport.height/this.zoom+r}},{key:"between",value:function(e,t,r){return e<=t&&t<=r}},{key:"visibleRectangle",value:function(){return{x:this.position.x,y:this.position.y,width:this.viewport.width/this.zoom,height:this.viewport.height/this.zoom}}},{key:"recenter",value:function(){this.idealCenter=this.idealTargetPosition()}},{key:"freeze",value:function(){this.frozen=!0}},{key:"positionOnScreen",value:function(e,t){return{x:e-this.position.x,y:t-this.position.y}}},{key:"zoomTo",value:function(e,t){new n(this).interp("zoom",this.zoom,e,Math.easeInOutSine).during(t).run(this.interpolationPool)}},{key:"isPointVisible",value:function(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0,i=this.visibleRectangle();return Math.inRectangle(e,t,i.x,i.y,i.width,i.height,r,n)}}]),t}();t.exports=o},{"../../../shared/util/random":936,animate:161}],18:[function(e,t,r){var n=e("pixi.js"),i=e("animate").Animation,o=e("animate").Timeline,a=e("./element-view-controller"),s=e("../world/world-layer"),l=function(e){_inherits2(r,a);var t=_createSuper(r);function r(){return _classCallCheck2(this,r),t.apply(this,arguments)}return _createClass2(r,[{key:"layerId",get:function(){return s.UNDERNEATH_WORLD}},{key:"createView",value:function(){var e=new n.Container;return e.stick=new n.Graphics,e.stick.beginFill(8476955),e.stick.drawRect(0,-8,1,16),e.addChild(e.stick),e.bumper=new n.Graphics,e.bumper.lineStyle(2,0,.5),e.bumper.beginFill(10449717),e.bumper.drawRect(0,-20,8,40),e.bumper.position.x=10,e.addChild(e.bumper),e}},{key:"updateView",value:function(e){_get(_getPrototypeOf(r.prototype),"updateView",this).call(this,e),e.rotation=this.element.angle,e.stick.width=e.bumper.position.x+3}},{key:"bump",value:function(e){(new o).add(new i(e.bumper).interp("position.x",10,20).during(.05)).add(new i(e.bumper).interp("position.x",20,10).during(.5)).run(this.interpolationPool)}},{key:"setupBindings",value:function(e){var t=this;_get(_getPrototypeOf(r.prototype),"setupBindings",this).call(this,e),this.element.rx.bumped.subscribe(function(){return t.bump(e)})}}]),r}();t.exports=l},{"../world/world-layer":68,"./element-view-controller":26,animate:161,"pixi.js":329}],19:[function(e,t,r){var i=e("pixi.js"),n=function(e){_inherits2(n,i.Container);var r=_createSuper(n);function n(){var e;_classCallCheck2(this,n),e=r.call(this);var t=i.Texture.fromImage("assets/textures/heart-white-small.png");return e.heartsPattern=new i.extras.TilingSprite(t,0,20),e.addChild(e.heartsPattern),e}return _createClass2(n,[{key:"health",get:function(){return this.currentHealth},set:function(e){e!==this.currentHealth&&(this.currentHealth=e,this.heartsPattern.width=20*e)}}]),n}();t.exports=n},{"pixi.js":329}],20:[function(e,t,r){var n=e("pixi.js"),a=e("animate").Animation,s=e("animate").Timeline,o=e("../element-view-controller"),u=e("./element-health-bar"),c=e("../../../../../shared/util/random"),h=e("../../../../../shared/util/set-utils"),d=e("../../../util/pixi-utils"),p=e("../../smoke-particle"),f=e("../../triangle-particle"),m=e("../../../../../shared/elements/projectiles/damage-particle"),v=e("../../world/world-layer"),i=function(e){_inherits2(l,o);var i=_createSuper(l);function l(e,t,r){var n;return _classCallCheck2(this,l),(n=i.call(this,e)).characterColorProvider=t,n.facing=1,n.landed=!1,n.nextBlink=0,n.jumpCount=0,n.health=0,n.currentEquipmentViewControllers=[],n.equipmentViewControllerFactory=r,n.latestColor=16777215,n}return _createClass2(l,[{key:"layerId",get:function(){return v.CHARACTERS}},{key:"createView",value:function(){var e=new n.Container;return e.shield=new n.Graphics,e.shield.beginFill(16777215),e.shield.drawCircle(0,0,50),e.addChild(e.shield),e.halo=new n.Sprite(n.Texture.fromImage("assets/textures/character-halo.png")),e.halo.debugLabel="halo",e.halo.anchor.x=.5,e.halo.anchor.y=.5,e.halo.alpha=.2,e.addChild(e.halo),e.inner=new n.Container,e.inner.debugLabel="inner",e.addChild(e.inner),e.sideScaler=new n.Container,e.sideScaler.debugLabel="inner",e.inner.addChild(e.sideScaler),e.sideInterpolater=new n.Container,e.sideInterpolater.debugLabel="inner",e.sideScaler.addChild(e.sideInterpolater),e.leftLeg=new n.Graphics,e.leftLeg.debugLabel="leftLeg",e.leftLeg.beginFill(16777215),e.leftLeg.lineStyle(2,0,.5),e.leftLeg.drawRect(0,0,6,8,5),e.leftLeg.position.x=-13,e.leftLeg.position.y=18,e.leftLeg.tint=10526880,e.sideInterpolater.addChild(e.leftLeg),e.rightLeg=new n.Graphics,e.rightLeg.debugLabel="rightLeg",e.rightLeg.beginFill(16777215),e.rightLeg.lineStyle(2,0,.5),e.rightLeg.drawRect(0,0,6,8,5),e.rightLeg.position.x=10,e.rightLeg.position.y=18,e.rightLeg.tint=10526880,e.sideInterpolater.addChild(e.rightLeg),e.bodyContainer=new n.Container,e.bodyContainer.debugLabel="bodyContainer",e.sideInterpolater.addChild(e.bodyContainer),e.body=new n.Graphics,e.body.debugLabel="body",e.body.beginFill(16777215),e.body.lineStyle(2,0,.5),e.body.drawRoundedRect(-23,-25,46,45,10),e.body.endFill(),e.bodyContainer.addChild(e.body),e.eyesContainer=new n.Container,e.eyesContainer.debugLabel="eyesContainer",e.eyesContainer.position.y=-15,e.body.addChild(e.eyesContainer),e.eyes=new n.Graphics,e.eyes.debugLabel="eyes",e.eyes.beginFill(0),e.eyes.drawCircle(4,3.5,3.5),e.eyes.drawCircle(16.5,3.5,3.5),e.eyes.endFill(),e.eyesContainer.addChild(e.eyes),e.healthBar=new u,e.healthBar.position.y=-75,e.addChild(e.healthBar),e}},{key:"updateView",value:function(e){_get(_getPrototypeOf(l.prototype),"updateView",this).call(this,e),e.body.tint=this.characterColorProvider.colorForCharacterId(this.element.id)||this.latestColor,this.latestColor=e.body.tint,e.halo.tint=16777215,this.element.facing!==this.facing&&(this.changeDirection(e),this.facing=Math.sign(this.element.facing)),e.sideScaler.scale.x=this.facing,e.sideScaler.scale.y=0<this.element.gravityYSign()?1:-1;var t=Math.PI/16,r=Math.sin(this.element.age*Math.PI*2/.5)/2*t;if(this.element.direction||(r=0),e.body.rotation=r,!this.element.direction&&this.element.landed)e.leftLeg.scale.y=1,e.rightLeg.scale.y=1;else{var n=Math.sin(this.element.age*Math.PI*2/.3);e.leftLeg.scale.y=.5*n+.5,e.rightLeg.scale.y=-.5*n+.5}e.eyesContainer.position.y=-15,this.element.dead?e.eyesContainer.scale.y=.5:e.eyesContainer.scale.y=1,this.element.dead?(e.bodyContainer.position.y=0,e.leftLeg.visible=e.rightLeg.visible=!1):(e.bodyContainer.position.y=0,e.leftLeg.visible=e.rightLeg.visible=this.element.landed),(this.landed!==this.element.landed||this.jumpCount!==this.element.jumpCount&&this.jumpCount<this.element.maxJumpCount)&&this.land(e),this.element.age>=this.nextBlink&&(this.blink(e),this.nextBlink=this.element.age+4);var i=this.element.recoveringTimeLeft();0<i&&!this.element.dead?e.visible=Math.round(8*i-.5)%2==1:e.visible=!0,e.inner.alpha=this.element.isInvincible()?.5:1,this.element.health<this.health&&this.hurt(),this.landed=this.element.landed,this.jumpCount=this.element.jumpCount,this.health=this.element.health,this.updateAbilities(),this.currentEquipmentViewControllers.forEach(function(e){return e.updateView()}),this.characterColorProvider.showCharacterHealth(this.element.id)&&(e.healthBar.visible=this.element.isRecoveringFromDamage(),e.healthBar.health=this.element.health,e.healthBar.position.x=-e.healthBar.width/2);var o=this.element.healthElement();if(e.shield.visible=o&&0<o.shield,e.shield.visible){var a=this.element.world.clockProvider.localClock,s=Math.sin(a*Math.PI*2/.25)/2+1;e.shield.scale.x=e.shield.scale.y=1+.3*s,e.shield.alpha=.5}}},{key:"hurt",value:function(){for(var e=0;e<20;e++){var t=new m({x:this.element.x+c.randInt(-this.element.width/2,this.element.width/2),y:this.element.y+c.randInt(-this.element.height/2,this.element.height/2),color:this.latestColor,gravityModifierY:.2});t.launch(c.randFloat(0,2*Math.PI),c.randInt(100,600)),this.element.world.add(t)}for(var r=0;r<50;r++){var n=c.randInt(6,12);this.addParticle(p.identifier,{color:this.latestColor,x:this.element.x+c.randInt(-this.element.width/2,this.element.width/2),y:this.element.y+c.randInt(-this.element.height/2,this.element.height/2),duration:c.randFloat(1.5,3),deltaX:c.randInt(-100,100),deltaY:c.randInt(-100,100),size:n,deltaSize:-n})}}},{key:"changeDirection",value:function(e){new a(e.sideInterpolater).interp("scale.x",-e.sideInterpolater.scale.x,1).during(.1).run(this.interpolationPool)}},{key:"blink",value:function(e){this.element.dead||(new s).add(new a(e.eyes).interp("scale.y",1,0).during(.1)).add(new a(e.eyes).interp("scale.y",0,1).during(.1)).run(this.interpolationPool)}},{key:"land",value:function(e){(new s).add(new a(e.body).interp("position.y",0,10).during(.1)).add(new a(e.body).interp("position.y",10,0).during(.1)).run(this.interpolationPool),this.dust()}},{key:"dust",value:function(e){if(this.isVisible()){e=e||0;for(var t=0;t<10;t++){var r=c.randInt(6,12);this.addParticle(p.identifier,{color:p.DUST,x:e+this.element.x+c.randInt(-this.element.width/2,this.element.width/2),y:this.element.y+c.randInt(-4,4)+this.element.height/2*this.element.gravityYSign(),duration:c.randFloat(.3,.5),deltaY:c.randInt(-50,-20)*this.element.gravityYSign(),size:r,deltaSize:-r})}}}},{key:"die",value:function(e){var t=this.createView();this.updateView(t),this.tearDownAllEquipmentControllers(),t.body.tint=e.body.tint,t.halo.tint=e.body.tint,d.remove(t.leftLeg),d.remove(t.rightLeg),d.remove(t.halo),new a(t.bodyContainer).interp("rotation",t.bodyContainer.rotation,-Math.PI/2).during(.1).run(this.interpolationPool),t.eyes.scale.y=.5,e.parent.addChildAt(t,e.parent.getChildIndex(e));for(var r=0;r<20;r++){var n=c.randInt(20,40),i=c.randFloat(0,2*Math.PI),o=c.randInt(50,200);this.addParticle(f.identifier,{color:[this.latestColor],x:this.element.x+c.randInt(-this.element.width/2,this.element.width/2),y:this.element.y+c.randInt(-this.element.height/2,this.element.height/2),duration:c.randFloat(.1,.4),deltaX:Math.cos(i)*o,deltaY:Math.sin(i)*o,rotation:c.randFloat(0,2*Math.PI),deltaRotation:c.randFloat(Math.PI/4,Math.PI),size:0,deltaSize:n})}(new s).wait(1).add((new s).add(0,new a(t).interp("scale.x",t.scale.x,0).during(.4)).add(.1,new a(t).interp("scale.y",t.scale.y,5).during(.4)).add(.1,new a(t).interp("position.y",t.position.y,t.position.y-400).during(.3))).add(function(){return d.remove(t)}).run(this.interpolationPool)}},{key:"spawn",value:function(e){e.alpha=0;var t=new n.Graphics;t.beginFill(16777215),t.drawCircle(0,0,400),t.endFill(),t.position.x=this.element.x,t.position.y=this.element.y,e.parent.addChild(t);var r=new n.Graphics;r.lineStyle(10,16777215),r.drawCircle(0,0,200),r.scale.x=0,r.scale.y=0,r.position.x=this.element.x,r.position.y=this.element.y,e.parent.addChild(r),(new s).add((new s).add(0,new a(t).interp("alpha",0,1).during(.2)).add(0,new a(t).interp("scale.x",1,0).during(.2)).add(0,new a(t).interp("scale.y",1,0).during(.2))).add(function(){d.remove(t),e.alpha=1}).add((new s).add(0,new a(r).interp("alpha",1,0).during(.1)).add(0,new a(r).interp("scale.x",0,1).during(.1)).add(0,new a(r).interp("scale.y",0,1).during(.1))).add(function(){d.remove(r)}).run(this.interpolationPool)}},{key:"setupBindings",value:function(e){var t=this;_get(_getPrototypeOf(l.prototype),"setupBindings",this).call(this,e),this.element.diedSubject().subscribe(function(){return t.die(e)})}},{key:"updateAbilities",value:function(){var r=this,e=this.element.equipmentHolders().map(function(e){return e.equipment}),t=new Set(this.currentEquipmentViewControllers.map(function(e){return e.equipment.id})),n=new Set(e.map(function(e){return e.id}));h.equal(t,n)||(this.tearDownAllEquipmentControllers(),this.currentEquipmentViewControllers=Array.from(e).map(function(e){return r.equipmentViewControllerFactory.viewControllerForEquipment(e)}).filter(function(e){return null!==e}).reduce(function(e,t){return e.concat([t]).concat(t.additionalViewControllers())},[]),this.currentEquipmentViewControllers.forEach(function(e){e.characterViewController=r;var t=e.getOrCreateView();t&&(e.isAttachedToCharacter()?r.view.bodyContainer.addChild(t):r.worldViewController.addViewToLayer(t,r.layerId))}))}},{key:"tearDown",value:function(){_get(_getPrototypeOf(l.prototype),"tearDown",this).call(this),this.tearDownAllEquipmentControllers()}},{key:"tearDownAllEquipmentControllers",value:function(){this.currentEquipmentViewControllers.forEach(function(e){return d.remove(e.view)}),this.currentEquipmentViewControllers=[]}},{key:"showKeyboardInstructions",value:function(e){e.keyboardInstructions=new n.Sprite(n.Texture.fromImage("assets/textures/keyboard-instructions.png")),e.keyboardInstructions.anchor.x=.5,e.keyboardInstructions.anchor.y=.5,e.keyboardInstructions.scale.x=e.keyboardInstructions.scale.y=.25,e.keyboardInstructions.alpha=0,e.addChild(e.keyboardInstructions),(new s).wait(1).add((new s).add(0,new a(e.keyboardInstructions).interp("alpha",0,1).during(.3)).add(0,new a(e.keyboardInstructions).interp("position.y",200,100).during(.3))).run(this.interpolationPool)}},{key:"hideKeyboardInstructions",value:function(e){var t=e.keyboardInstructions;t&&(e.keyboardInstructions=null,(new s).add(0,new a(t).interpTo("alpha",0).during(.3)).add(0,new a(t).interpToOffset("position.y",100).during(.3)).add(function(){return d.remove(t)}).run(this.interpolationPool))}}]),l}();t.exports=i},{"../../../../../shared/elements/projectiles/damage-particle":878,"../../../../../shared/util/random":936,"../../../../../shared/util/set-utils":937,"../../../util/pixi-utils":128,"../../smoke-particle":60,"../../triangle-particle":61,"../../world/world-layer":68,"../element-view-controller":26,"./element-health-bar":19,animate:161,"pixi.js":329}],21:[function(e,t,r){var n=e("pixi.js"),i=e("./element-view-controller"),o=e("../world/world-layer"),a=function(e){_inherits2(r,i);var t=_createSuper(r);function r(){return _classCallCheck2(this,r),t.apply(this,arguments)}return _createClass2(r,[{key:"layerId",get:function(){return o.TOP}},{key:"createView",value:function(){var e=new n.Sprite(n.Texture.fromImage("assets/textures/crown-item.png"));return e.anchor.x=.5,e.anchor.y=1,e.width=80,e.height=80,e}},{key:"updateView",value:function(e){_get(_getPrototypeOf(r.prototype),"updateView",this).call(this,e);var t=this.element.world.cyclableById(this.element.owner);t?(e.visible=!0,e.position.x=t.x,e.position.y=t.y):e.visible=!1}},{key:"viewWidth",value:function(){return 80}},{key:"viewHeight",value:function(){return 80}}]),r}();t.exports=a},{"../world/world-layer":68,"./element-view-controller":26,"pixi.js":329}],22:[function(e,t,r){var n=e("pixi.js"),i=e("chance"),o=e("../simple-texture-element-view-controller"),a=e("../../world/world-layer"),s=function(e){_inherits2(r,o);var t=_createSuper(r);function r(){return _classCallCheck2(this,r),t.apply(this,arguments)}return _createClass2(r,[{key:"layerId",get:function(){return a.UNDERNEATH_WORLD}},{key:"texture",value:function(){return n.Texture.fromImage("assets/textures/bush.png")}},{key:"textureAnchorY",value:function(){return.8}},{key:"createView",value:function(){var e=_get(_getPrototypeOf(r.prototype),"createView",this).call(this);return e.scale.x=new i(this.element.id).pickone([-1,1]),e}}]),r}();t.exports=s},{"../../world/world-layer":68,"../simple-texture-element-view-controller":39,chance:177,"pixi.js":329}],23:[function(e,t,r){var n=e("pixi.js"),i=e("chance"),o=e("../simple-texture-element-view-controller"),a=e("../../world/world-layer"),s=function(e){_inherits2(r,o);var t=_createSuper(r);function r(){return _classCallCheck2(this,r),t.apply(this,arguments)}return _createClass2(r,[{key:"layerId",get:function(){return a.UNDERNEATH_WORLD}},{key:"texture",value:function(){return n.Texture.fromImage("assets/textures/grass.png")}},{key:"textureAnchorY",value:function(){return 1}},{key:"createView",value:function(){var e=_get(_getPrototypeOf(r.prototype),"createView",this).call(this);return e.scale.x=new i(this.element.id).pickone([-1,1]),e}}]),r}();t.exports=s},{"../../world/world-layer":68,"../simple-texture-element-view-controller":39,chance:177,"pixi.js":329}],24:[function(e,t,r){var n=e("pixi.js"),i=e("chance"),o=e("../simple-texture-element-view-controller"),a=e("../../world/world-layer"),s=function(e){_inherits2(r,o);var t=_createSuper(r);function r(){return _classCallCheck2(this,r),t.apply(this,arguments)}return _createClass2(r,[{key:"layerId",get:function(){return a.UNDERNEATH_WORLD}},{key:"texture",value:function(){return n.Texture.fromImage("assets/textures/tree.png")}},{key:"textureAnchorY",value:function(){return.9}},{key:"createView",value:function(){var e=_get(_getPrototypeOf(r.prototype),"createView",this).call(this);return e.scale.x=new i(this.element.id).pickone([-1,1]),e}}]),r}();t.exports=s},{"../../world/world-layer":68,"../simple-texture-element-view-controller":39,chance:177,"pixi.js":329}],25:[function(e,t,r){var n=e("../../../../shared/elements/bumper"),i=e("../../../../shared/elements/crown"),o=e("../../../../shared/elements/characters/walking-character"),a=e("../../../../shared/elements/items/equipment-item"),s=e("../../../../shared/elements/items/health-item"),l=e("../../../../shared/elements/items/shield-item"),u=e("../../../../shared/elements/items/crown-item"),c=e("../../../../shared/elements/projectiles/rocket"),h=e("../../../../shared/elements/projectiles/physical-particle"),d=e("../../../../shared/elements/projectiles/simulated-grenade"),p=e("../../../../shared/elements/projectiles/grenade"),f=e("../../../../shared/elements/projectiles/plasma-bullet"),m=e("../../../../shared/elements/projectiles/bullet"),v=e("../../../../shared/elements/projectiles/fire-ball"),b=e("../../../../shared/elements/decorations/tree"),y=e("../../../../shared/elements/decorations/grass"),g=e("../../../../shared/elements/decorations/bush"),w=e("./characters/walking-character-view-controller"),_=e("./items/equipment-item-view-controller"),x=e("./items/health-item-view-controller"),S=e("./items/shield-item-view-controller"),C=e("./items/crown-item-view-controller"),k=e("./projectiles/rocket-view-controller"),T=e("./projectiles/physical-particle-view-controller"),A=e("./projectiles/grenade-view-controller"),E=e("./projectiles/plasma-bullet-view-controller"),O=e("./projectiles/bullet-view-controller"),M=e("./projectiles/fire-ball-view-controller"),P=e("./decorations/tree-view-controller"),I=e("./decorations/grass-view-controller"),R=e("./decorations/bush-view-controller"),D=e("./crown-view-controller"),B=e("./bumper-view-controller"),L=e("../equipments/equipment-view-controller-factory"),F=function(){function t(e){_classCallCheck2(this,t),this.characterColorProvider=e.characterColorProvider}return _createClass2(t,[{key:"viewControllerForElement",value:function(e){return e instanceof o?new w(e,this.characterColorProvider,new L):e instanceof a?new _(e):e instanceof s?new x(e):e instanceof l?new S(e):e instanceof u?new C(e):e instanceof n?new B(e):e instanceof c?new k(e):e instanceof d?null:e instanceof p?new A(e):e instanceof v?new M(e):e instanceof h?new T(e):e instanceof f?new E(e):e instanceof m?new O(e):e instanceof b?new P(e):e instanceof y?new I(e):e instanceof g?new R(e):e instanceof i?new D(e):null}}]),t}();t.exports=F},{"../../../../shared/elements/bumper":858,"../../../../shared/elements/characters/walking-character":860,"../../../../shared/elements/crown":861,"../../../../shared/elements/decorations/bush":862,"../../../../shared/elements/decorations/grass":863,"../../../../shared/elements/decorations/tree":864,"../../../../shared/elements/items/crown-item":869,"../../../../shared/elements/items/equipment-item":870,"../../../../shared/elements/items/health-item":871,"../../../../shared/elements/items/shield-item":873,"../../../../shared/elements/projectiles/bullet":877,"../../../../shared/elements/projectiles/fire-ball":879,"../../../../shared/elements/projectiles/grenade":880,"../../../../shared/elements/projectiles/physical-particle":881,"../../../../shared/elements/projectiles/plasma-bullet":882,"../../../../shared/elements/projectiles/rocket":883,"../../../../shared/elements/projectiles/simulated-grenade":884,"../equipments/equipment-view-controller-factory":40,"./bumper-view-controller":18,"./characters/walking-character-view-controller":20,"./crown-view-controller":21,"./decorations/bush-view-controller":22,"./decorations/grass-view-controller":23,"./decorations/tree-view-controller":24,"./items/crown-item-view-controller":27,"./items/equipment-item-view-controller":28,"./items/health-item-view-controller":29,"./items/shield-item-view-controller":31,"./projectiles/bullet-view-controller":32,"./projectiles/fire-ball-view-controller":33,"./projectiles/grenade-view-controller":34,"./projectiles/physical-particle-view-controller":35,"./projectiles/plasma-bullet-view-controller":36,"./projectiles/rocket-view-controller":38}],26:[function(e,t,r){var n=e("../../../../shared/elements/positioned-element"),i=function(){function t(e){_classCallCheck2(this,t),this.element=e,this.interpolationPool=null,this.worldViewController=null,this.view=null}return _createClass2(t,[{key:"layerId",get:function(){throw new Error("Must implement layerId()")}},{key:"maybeUpdateView",value:function(){var e=this.getOrCreateView();e&&(this.view.visible=this.isVisible(),this.updateView(e))}},{key:"updateView",value:function(e){this.element instanceof n&&(e.position.x=this.element.x,e.position.y=this.element.y)}},{key:"getOrCreateView",value:function(){return this.view||(this.view=this.createView(),this.view&&this.setupBindings(this.view)),this.view}},{key:"createView",value:function(){return null}},{key:"viewWidth",value:function(){return this.element.width}},{key:"viewHeight",value:function(){return this.element.height}},{key:"viewCenter",value:function(){return this.element}},{key:"isVisible",value:function(){return this.worldViewController.isVisible(this.viewCenter(),this.viewWidth(),this.viewHeight())}},{key:"setupBindings",value:function(e){}},{key:"additionsView",value:function(){return this.view}},{key:"addChild",value:function(e){this.additionsView(this.view).addChild(e)}},{key:"addParticle",value:function(e,t){t.layerId||(t.layerId=this.layerId),this.worldViewController.addParticle(e,t)}},{key:"tearDown",value:function(){}}]),t}();t.exports=i},{"../../../../shared/elements/positioned-element":876}],27:[function(e,t,r){var n=e("pixi.js"),i=e("./item-view-controller"),o=function(e){_inherits2(r,i);var t=_createSuper(r);function r(){return _classCallCheck2(this,r),t.apply(this,arguments)}return _createClass2(r,[{key:"createMainView",value:function(){var e=new n.Sprite(n.Texture.fromImage("assets/textures/crown-item.png"));return e.anchor.x=.5,e.anchor.y=.5,e.width=80,e.height=80,e}},{key:"mainViewTint",value:function(){return 16777215}}]),r}();t.exports=o},{"./item-view-controller":30,"pixi.js":329}],28:[function(e,t,r){var n=e("pixi.js"),i=e("./item-view-controller"),o=function(e){_inherits2(r,i);var t=_createSuper(r);function r(){return _classCallCheck2(this,r),t.apply(this,arguments)}return _createClass2(r,[{key:"createView",value:function(){var e=_get(_getPrototypeOf(r.prototype),"createView",this).call(this);return e.label=new n.Text("",{fill:"white",fontFamily:"SquarePixel",fontSize:20,dropShadow:!0,dropShadowColor:"#000",dropShadowAngle:Math.PI/2,dropShadowDistance:2,align:"center"}),e.label.anchor.x=.5,e.label.position.y=-30,e.arrow.addChild(e.label),e}},{key:"createMainView",value:function(){var e=new n.Graphics;return e.beginFill(16777215),e.moveTo(-15,0),e.lineTo(0,-15),e.lineTo(15,0),e.lineTo(0,15),e.endFill(),e}},{key:"updateView",value:function(e){_get(_getPrototypeOf(r.prototype),"updateView",this).call(this,e),e.mainView.rotation=this.element.world.clockProvider.localClock*Math.PI*2/2,e.label.text=this.element.equipment?this.element.equipment.printableLabel:null}}]),r}();t.exports=o},{"./item-view-controller":30,"pixi.js":329}],29:[function(e,t,r){var n=e("pixi.js"),i=e("./item-view-controller"),o=function(e){_inherits2(r,i);var t=_createSuper(r);function r(){return _classCallCheck2(this,r),t.apply(this,arguments)}return _createClass2(r,[{key:"createMainView",value:function(){var e=new n.Sprite(n.Texture.fromImage("assets/textures/heart-item.png"));return e.anchor.x=.5,e.anchor.y=.5,e}}]),r}();t.exports=o},{"./item-view-controller":30,"pixi.js":329}],30:[function(e,t,r){var n=e("pixi.js"),i=e("../element-view-controller"),o=e("../../../../../shared/util/random"),a=e("../../smoke-particle"),s=e("../../world/world-layer"),l=function(e){_inherits2(r,i);var t=_createSuper(r);function r(){return _classCallCheck2(this,r),t.apply(this,arguments)}return _createClass2(r,[{key:"layerId",get:function(){return s.ITEMS}},{key:"createMainView",value:function(){return null}},{key:"createView",value:function(){var e=new n.Container,t=new n.Sprite(n.Texture.fromImage("assets/textures/character-halo.png"));t.anchor.x=.5,t.anchor.y=.5,t.alpha=.35,t.tint=16777215,e.addChild(t),e.stripe1=new n.Sprite(n.Texture.fromImage("assets/textures/item-stripe.png")),e.stripe1.anchor.x=.5,e.stripe1.anchor.y=.5,e.stripe1.width=100,e.stripe1.height=20,e.stripe1.alpha=.5,e.addChild(e.stripe1),e.stripe2=new n.Sprite(n.Texture.fromImage("assets/textures/item-stripe.png")),e.stripe2.anchor.x=.5,e.stripe2.anchor.y=.5,e.stripe2.width=100,e.stripe2.height=20,e.stripe2.alpha=.5,e.addChild(e.stripe2),e.addChild(e.mainView=this.createMainView()),e.mainView.tint=this.mainViewTint();return e.arrow=new n.Graphics,e.arrow.beginFill(16777215),e.arrow.lineStyle(2,0),e.arrow.moveTo(-10,0),e.arrow.lineTo(10,0),e.arrow.lineTo(0,10),e.arrow.closePath(),e.addChild(e.arrow),e}},{key:"mainViewTint",value:function(){return 5064844}},{key:"setupBindings",value:function(e){var t=this;_get(_getPrototypeOf(r.prototype),"setupBindings",this).call(this,e),this.element.world.rx.deletions.filter(function(e){return e===t.element}).take(1).subscribe(function(){return t.pickUpParticles()})}},{key:"updateView",value:function(e){_get(_getPrototypeOf(r.prototype),"updateView",this).call(this,e),e.arrow.position.y=~~(5*Math.sin(this.element.world.clockProvider.localClock*Math.PI)-50),e.stripe1.rotation=this.element.world.clockProvider.localClock*Math.PI,e.stripe2.rotation=this.element.world.clockProvider.localClock*-Math.PI*2}},{key:"viewWidth",value:function(){return 100}},{key:"viewHeight",value:function(){return 100}},{key:"pickUpParticles",value:function(){if(this.isVisible())for(var e=0;e<10;e++){var t=o.randInt(6,12);this.addParticle(a.identifier,{color:a.WALL,x:this.element.x+o.randInt(-20,20),y:this.element.y+o.randInt(-20,20),size:t,duration:o.randFloat(.3,.5),deltaY:o.randPick(-50,-20),deltaSize:-t})}}}]),r}();t.exports=l},{"../../../../../shared/util/random":936,"../../smoke-particle":60,"../../world/world-layer":68,"../element-view-controller":26,"pixi.js":329}],31:[function(e,t,r){var n=e("pixi.js"),i=e("./item-view-controller"),o=function(e){_inherits2(r,i);var t=_createSuper(r);function r(){return _classCallCheck2(this,r),t.apply(this,arguments)}return _createClass2(r,[{key:"createMainView",value:function(){var e=new n.Sprite(n.Texture.fromImage("assets/textures/shield-item.png"));return e.anchor.x=.5,e.anchor.y=.5,e}}]),r}();t.exports=o},{"./item-view-controller":30,"pixi.js":329}],32:[function(e,t,r){var n=e("pixi.js"),i=e("./projectile-view-controller"),o=function(e){_inherits2(r,i);var t=_createSuper(r);function r(){return _classCallCheck2(this,r),t.apply(this,arguments)}return _createClass2(r,[{key:"createView",value:function(){var e=new n.Sprite(n.Texture.fromImage("assets/textures/bullet.png"));return e.anchor.x=1,e.anchor.y=.5,e.width=200,e.height=2,e}},{key:"updateView",value:function(e){_get(_getPrototypeOf(r.prototype),"updateView",this).call(this,e),e.rotation=this.element.angle,e.width=Math.min(200,this.element.age*this.element.speed)}}]),r}();t.exports=o},{"./projectile-view-controller":37,"pixi.js":329}],33:[function(e,t,r){var i=e("pixi.js"),o=e("./projectile-view-controller"),a=e("../../smoke-particle"),s=e("../../../util/oscillate"),l=e("../../../../../shared/util/random"),n=function(e){_inherits2(n,o);var r=_createSuper(n);function n(e){var t;return _classCallCheck2(this,n),(t=r.call(this,e)).nextPuff=0,t}return _createClass2(n,[{key:"createView",value:function(){var e=new i.Sprite(i.Texture.fromImage("assets/textures/character-halo.png"));return e.anchor.x=.5,e.anchor.y=.5,e.scale.x=.4,e.scale.y=.4,e.alpha=.25,e.tint=this.haloColor||16776960,e}},{key:"updateView",value:function(e){_get(_getPrototypeOf(n.prototype),"updateView",this).call(this,e),this.element.age>=this.nextPuff&&(this.puff(e),this.nextPuff=this.element.age+.01)}},{key:"puff",value:function(){var e=l.randInt(5,10);this.addParticle(a.identifier,{color:a.FIRE,x:this.element.x+l.randInt(-this.element.width/2,this.element.width/2),y:this.element.y+l.randInt(-this.element.height/2,this.element.height/2),duration:l.randFloat(1,2),deltaX:l.randInt(-5,5),deltaY:l.randInt(-70,-120),size:e,deltaSize:-e,noFadeOut:!0,easingX:s(4)})}}]),n}();t.exports=n},{"../../../../../shared/util/random":936,"../../../util/oscillate":127,"../../smoke-particle":60,"./projectile-view-controller":37,"pixi.js":329}],34:[function(e,t,r){var i=e("pixi.js"),o=e("./projectile-view-controller"),a=e("../../smoke-particle"),s=e("../../../../../shared/util/random"),n=function(e){_inherits2(n,o);var r=_createSuper(n);function n(e){var t;return _classCallCheck2(this,n),(t=r.call(this,e)).nextPuff=0,t}return _createClass2(n,[{key:"createView",value:function(){var e=new i.Graphics;return e.beginFill(16711680),e.drawRect(-this.element.width/2,-this.element.height/2,this.element.width,this.element.height),e.endFill(),e}},{key:"updateView",value:function(e){_get(_getPrototypeOf(n.prototype),"updateView",this).call(this,e),this.element.age>=this.nextPuff&&!this.element.idle&&(this.puff(e),this.nextPuff=this.element.age+.01)}},{key:"puff",value:function(e){var t=s.randInt(5,10);this.addParticle(a.identifier,{color:[16711680],x:e.position.x,y:e.position.y,size:t,duration:s.randFloat(.4,.8),deltaY:-s.randInt(20,50),deltaSize:-t})}}]),n}();t.exports=n},{"../../../../../shared/util/random":936,"../../smoke-particle":60,"./projectile-view-controller":37,"pixi.js":329}],35:[function(e,t,r){var i=e("pixi.js"),o=e("./projectile-view-controller"),n=function(e){_inherits2(n,o);var r=_createSuper(n);function n(e){var t;return _classCallCheck2(this,n),(t=r.call(this,e)).nextPuff=0,t}return _createClass2(n,[{key:"createView",value:function(){var e=new i.Graphics;return e.beginFill(16777215),e.drawRect(-this.element.width/2,-this.element.height/2,this.element.width,this.element.height),e.endFill(),e}},{key:"updateView",value:function(e){_get(_getPrototypeOf(n.prototype),"updateView",this).call(this,e),e.tint=this.element.color}}]),n}();t.exports=n},{"./projectile-view-controller":37,"pixi.js":329}],36:[function(e,t,r){var i=e("pixi.js"),o=e("./projectile-view-controller"),a=e("../../smoke-particle"),s=e("../../../../../shared/util/random"),n=function(e){_inherits2(n,o);var r=_createSuper(n);function n(e){var t;return _classCallCheck2(this,n),(t=r.call(this,e)).nextPuff=0,t}return _createClass2(n,[{key:"createView",value:function(){var e=new i.Sprite(i.Texture.fromImage("assets/textures/character-halo.png"));return e.anchor.x=.5,e.anchor.y=.5,e.width=4*this.element.width,e.height=4*this.element.height,e.tint=16711935,e}},{key:"updateView",value:function(e){_get(_getPrototypeOf(n.prototype),"updateView",this).call(this,e),this.element.age>=this.nextPuff&&(this.puff(e),this.nextPuff=this.element.age+.01)}},{key:"puff",value:function(e){var t=s.randInt(5,10);this.addParticle(a.identifier,{color:16711935,x:e.x+s.randInt(-5,5),y:e.y+s.randInt(-5,5),size:t,duration:s.randFloat(.4,.8),deltaX:s.randInt(-10,10),deltaY:s.randInt(-10,10),deltaSize:s.randInt(5,10)})}}]),n}();t.exports=n},{"../../../../../shared/util/random":936,"../../smoke-particle":60,"./projectile-view-controller":37,"pixi.js":329}],37:[function(e,t,r){var n=e("../element-view-controller"),i=e("../../world/world-layer"),o=function(e){_inherits2(r,n);var t=_createSuper(r);function r(){return _classCallCheck2(this,r),t.apply(this,arguments)}return _createClass2(r,[{key:"layerId",get:function(){return i.PROJECTILES}}]),r}();t.exports=o},{"../../world/world-layer":68,"../element-view-controller":26}],38:[function(e,t,r){var i=e("pixi.js"),o=e("./projectile-view-controller"),a=e("../../smoke-particle"),s=e("../../../../../shared/util/random"),n=function(e){_inherits2(n,o);var r=_createSuper(n);function n(e){var t;return _classCallCheck2(this,n),(t=r.call(this,e)).nextPuff=0,t}return _createClass2(n,[{key:"createView",value:function(){var e=new i.Graphics;return e.beginFill(16711680),e.moveTo(-this.element.width/2,-this.element.height/2),e.lineTo(this.element.width/2,-this.element.height/2),e.lineTo(this.element.width+this.element.height/2,0),e.lineTo(this.element.width/2,this.element.height/2),e.lineTo(-this.element.width/2,this.element.height/2),e.endFill(),e}},{key:"updateView",value:function(e){_get(_getPrototypeOf(n.prototype),"updateView",this).call(this,e),e.rotation=this.element.angle,this.element.age>=this.nextPuff&&(this.puff(e),this.nextPuff=this.element.age+.01)}},{key:"puff",value:function(e){var t=s.randInt(10,20);this.addParticle(a.identifier,{color:a.DUST,x:e.x,y:e.y,size:t,duration:s.randFloat(.4,.8),deltaY:-s.randInt(20,50),deltaSize:-t})}}]),n}();t.exports=n},{"../../../../../shared/util/random":936,"../../smoke-particle":60,"./projectile-view-controller":37,"pixi.js":329}],39:[function(e,t,r){var n=e("pixi.js"),i=e("./element-view-controller"),o=function(e){_inherits2(r,i);var t=_createSuper(r);function r(){return _classCallCheck2(this,r),t.apply(this,arguments)}return _createClass2(r,[{key:"texture",value:function(){throw new Error("Must override texture()")}},{key:"textureAnchorX",value:function(){return.5}},{key:"textureAnchorY",value:function(){return.5}},{key:"createView",value:function(){var e=new n.Sprite(this.texture());return e.anchor.x=this.textureAnchorX(),e.anchor.y=this.textureAnchorY(),e}},{key:"viewWidth",value:function(){return this.texture().width}},{key:"viewHeight",value:function(){return this.texture().height}},{key:"viewCenter",value:function(){var e=this.texture();return{x:this.element.x-e.width*this.textureAnchorX()/2,y:this.element.y-e.height*this.textureAnchorY()/2}}}]),r}();t.exports=o},{"./element-view-controller":26,"pixi.js":329}],40:[function(e,t,r){var n=e("../../../../shared/equipments/shotgun-equipment"),i=e("../../../../shared/equipments/flamethrower-equipment"),o=e("../../../../shared/equipments/plasma-gun-equipment"),a=e("../../../../shared/equipments/grenade-launcher-equipment"),s=e("../../../../shared/equipments/rocket-launcher-equipment"),l=e("../../../../shared/equipments/machine-gun-equipment"),u=e("./shotgun-view-controller"),c=e("./flamethrower-view-controller"),h=e("./grenade-launcher-view-controller"),d=e("./rocket-launcher-view-controller"),p=e("./plasma-gun-view-controller"),f=e("./machine-gun-view-controller"),m=function(){function e(){_classCallCheck2(this,e)}return _createClass2(e,[{key:"viewControllerForEquipment",value:function(e){return e instanceof n?new u(e):e instanceof i?new c(e):e instanceof o?new p(e):e instanceof s?new d(e):e instanceof a?new h(e):e instanceof l?new f(e):null}}]),e}();t.exports=m},{"../../../../shared/equipments/flamethrower-equipment":888,"../../../../shared/equipments/grenade-launcher-equipment":889,"../../../../shared/equipments/machine-gun-equipment":890,"../../../../shared/equipments/plasma-gun-equipment":891,"../../../../shared/equipments/rocket-launcher-equipment":892,"../../../../shared/equipments/shotgun-equipment":898,"./flamethrower-view-controller":42,"./grenade-launcher-view-controller":43,"./machine-gun-view-controller":44,"./plasma-gun-view-controller":45,"./rocket-launcher-view-controller":46,"./shotgun-view-controller":47}],41:[function(e,t,r){var n=function(){function t(e){_classCallCheck2(this,t),this.equipment=e,this.view=null,this.characterViewController=null}return _createClass2(t,[{key:"updateView",value:function(e){}},{key:"getOrCreateView",value:function(){return this.view||(this.view=this.createView()),this.view}},{key:"createView",value:function(){return null}},{key:"additionalViewControllers",value:function(){return[]}},{key:"isAttachedToCharacter",value:function(){return!0}}]),t}();t.exports=n},{}],42:[function(e,t,r){var n=e("pixi.js"),i=e("./equipment-view-controller"),o=function(e){_inherits2(r,i);var t=_createSuper(r);function r(){return _classCallCheck2(this,r),t.apply(this,arguments)}return _createClass2(r,[{key:"createView",value:function(){var e=new n.Graphics;return e.beginFill(10526880),e.lineStyle(2,0,.5),e.drawRect(-35,-15,20,30),e.endFill(),e.beginFill(10526880),e.drawRect(-27,-1,70,5),e.drawRect(43,-3,10,9),e.endFill(),e.beginFill(13027014),e.drawRect(0,4,14,6),e.drawRect(23,4,6,6),e}}]),r}();t.exports=o},{"./equipment-view-controller":41,"pixi.js":329}],43:[function(e,t,r){var i=e("pixi.js"),o=e("./equipment-view-controller"),a=e("../../../../shared/elements/projectiles/simulated-grenade"),n=function(e){_inherits2(n,o);var r=_createSuper(n);function n(e){var t;return _classCallCheck2(this,n),(t=r.call(this,e)).simulationGrenade=new a({}),t}return _createClass2(n,[{key:"createView",value:function(){return new i.Graphics}},{key:"updateView",value:function(){var t=this,e=this.equipment.character;e&&e.triggeringEquipment?(this.view.visible=!0,this.simulationGrenade.world=this.equipment.holder.world,this.simulationGrenade.setOptions({x:e.x,y:e.y,timeToExplosion:2,owner:e.id}),this.simulationGrenade.launch(this.equipment.launchAngle(),this.equipment.launchForce()),this.view.clear(),this.view.beginFill(16711680),(this.simulationGrenade.simulate()||[]).forEach(function(e){return t.view.drawRect(e.x-2,e.y-2,4,4)})):this.view.visible=!1}},{key:"isAttachedToCharacter",value:function(){return!1}}]),n}(),s=function(e){_inherits2(r,o);var t=_createSuper(r);function r(){return _classCallCheck2(this,r),t.apply(this,arguments)}return _createClass2(r,[{key:"createView",value:function(){var e=new i.Graphics;return e.beginFill(13027014),e.lineStyle(2,0,.5),e.drawRect(0,4,14,6),e.drawRect(23,4,6,6),e.beginFill(10526880),e.drawRect(8,-6,35,10),e.endFill(),e}},{key:"updateView",value:function(){_get(_getPrototypeOf(r.prototype),"updateView",this).call(this);var e=this.equipment.character;e&&(this.view.rotation=e.triggeringEquipment?this.equipment.launchAngle():0,e.facing<0&&e.triggeringEquipment&&(this.view.rotation*=-1,this.view.rotation+=Math.PI),-1===e.gravityYSign()&&(this.view.rotation*=-1))}},{key:"additionalViewControllers",value:function(){return[new n(this.equipment)]}}]),r}();t.exports=s},{"../../../../shared/elements/projectiles/simulated-grenade":884,"./equipment-view-controller":41,"pixi.js":329}],44:[function(e,t,r){var n=e("pixi.js"),i=e("./equipment-view-controller"),o=function(e){_inherits2(r,i);var t=_createSuper(r);function r(){return _classCallCheck2(this,r),t.apply(this,arguments)}return _createClass2(r,[{key:"createView",value:function(){var e=new n.Graphics;return e.lineStyle(2,0,.5),e.beginFill(10526880),e.drawRect(8,0,40,4),e.beginFill(10973762),e.drawRect(-8,0,16,12),e.drawRect(25,4,6,14),e.beginFill(13027014),e.drawRect(8,4,6,6),e.drawRect(31,4,6,6),e}}]),r}();t.exports=o},{"./equipment-view-controller":41,"pixi.js":329}],45:[function(e,t,r){var n=e("pixi.js"),i=e("./equipment-view-controller"),o=function(e){_inherits2(r,i);var t=_createSuper(r);function r(){return _classCallCheck2(this,r),t.apply(this,arguments)}return _createClass2(r,[{key:"createView",value:function(){var e=new n.Graphics;return e.lineStyle(2,0,.5),e.beginFill(13027014),e.drawRect(0,4,14,6),e.drawRect(23,4,6,6),e.beginFill(10526880),e.drawRect(8,-6,35,10),e}}]),r}();t.exports=o},{"./equipment-view-controller":41,"pixi.js":329}],46:[function(e,t,r){var n=e("pixi.js"),i=e("./equipment-view-controller"),o=function(e){_inherits2(r,i);var t=_createSuper(r);function r(){return _classCallCheck2(this,r),t.apply(this,arguments)}return _createClass2(r,[{key:"createView",value:function(){var e=new n.Graphics;return e.lineStyle(2,0,.5),e.beginFill(13027014),e.drawRect(0,4,14,6),e.drawRect(23,4,6,6),e.beginFill(10526880),e.drawRect(-27,-6,70,10),e}}]),r}();t.exports=o},{"./equipment-view-controller":41,"pixi.js":329}],47:[function(e,t,r){var n=e("pixi.js"),i=e("./equipment-view-controller"),o=function(e){_inherits2(r,i);var t=_createSuper(r);function r(){return _classCallCheck2(this,r),t.apply(this,arguments)}return _createClass2(r,[{key:"createView",value:function(){var e=new n.Graphics;return e.beginFill(13027014),e.lineStyle(2,0,.5),e.drawRect(0,4,14,6),e.drawRect(23,4,6,6),e.beginFill(10526880),e.drawRect(8,0,35,4),e}}]),r}();t.exports=o},{"./equipment-view-controller":41,"pixi.js":329}],48:[function(e,t,r){var o=e("pixi.js"),i=e("../../util/pixi-utils"),a=e("animate").Animation,s=e("animate").Timeline,n=function(){function n(e,t,r){_classCallCheck2(this,n),this.width=e,this.height=t,this.view=new o.Container,this.text=new o.Text(r.toUpperCase(),{fill:"#ffffff",fontFamily:"SquarePixel",fontSize:50,dropShadow:!0,dropShadowColor:"#000",dropShadowAngle:Math.PI/2,dropShadowDistance:5,wordWrap:!0,wordWrapWidth:.9*this.width,align:"center"}),this.text.anchor.x=.5,this.text.anchor.y=.5,this.text.position.x=this.width/2,this.text.position.y=.3*this.height,this.view.addChild(this.text),this.dim=new o.Graphics,this.dim.beginFill(0,.5),this.dim.drawRect(0,this.text.position.y-this.text.height/2,this.width,this.text.height+10),this.view.addChildAt(this.dim,0)}return _createClass2(n,[{key:"animate",value:function(){var e=this;return(new s).add(this.animateIn()).addBreakpoint().wait(1).add(this.animateOut()).add(function(){i.remove(e.view)}).addBreakpoint()}},{key:"animateIn",value:function(){var e=this,t=Math.easeOutQuint,r=-this.width/2,n=this.width/2,i=new o.filters.BlurXFilter;return(new s).add(0,function(){e.text.filters=[i]}).add(0,new a(this.dim).interp("alpha",0,1).during(.3)).add(0,new a(this.text).interp("position.x",r,n,t).during(1)).add(0,new a(i).interp("blur",100,0,t).during(1)).add(function(){e.text.filters=null})}},{key:"animateOut",value:function(){var e=this,t=Math.easeInQuint,r=this.width/2,n=3*this.width/2,i=new o.filters.BlurXFilter;return(new s).add(0,function(){e.text.filters=[i]}).add(.7,new a(this.dim).interp("alpha",1,0).during(.3)).add(0,new a(this.text).interp("position.x",r,n,t).during(1)).add(0,new a(i).interp("blur",0,100,t)).add(function(){e.text.filters=null})}}]),n}();t.exports=n},{"../../util/pixi-utils":128,animate:161,"pixi.js":329}],49:[function(e,t,r){var o=e("pixi.js"),n=function(e){_inherits2(i,o.Container);var t=_createSuper(i);function i(e){var r;_classCallCheck2(this,i),r=t.call(this);var n=0;return e.forEach(function(e){var t=new o.Text(e.text,e.style);t.position.x=n,r.addChild(t),n+=t.width}),r}return _createClass2(i)}();t.exports=n},{"pixi.js":329}],50:[function(e,t,r){var o=e("pixi.js"),s=e("animate").Animation,l=e("animate").Timeline,a=e("animate").Loop,u=e("../../util/pixi-utils"),n=function(e){_inherits2(i,o.Container);var n=_createSuper(i);function i(){var e;_classCallCheck2(this,i),(e=n.call(this)).interpolationPool=null,e.blinkLoop=null,e.heartsContainer=new o.Container,e.addChild(e.heartsContainer);var t=o.Texture.fromImage("assets/textures/heart-white.png"),r=o.Texture.fromImage("assets/textures/heart-black.png");return e.heartsSlotsPattern=new o.extras.TilingSprite(r,0,e.cellSize),e.heartsContainer.addChild(e.heartsSlotsPattern),e.heartsPattern=new o.extras.TilingSprite(t,0,e.cellSize),e.heartsContainer.addChild(e.heartsPattern),e.redThreshold=1.5,e}return _createClass2(i,[{key:"cellSize",get:function(){return 60}},{key:"heartsWidth",get:function(){return this.currentMaxHealth*this.cellSize}},{key:"heartsHeight",get:function(){return this.cellSize}},{key:"health",get:function(){return this.currentHealth},set:function(e){var t=this;if(e!==this.currentHealth)if(void 0!==this.currentHealth&&(e<this.currentHealth?this.animateLoss(this.currentHealth,e):this.animateGain(this.currentHealth,e)),this.currentHealth=e,this.heartsPattern.width=e*this.cellSize,this.blinkLoop&&(this.blinkLoop.cancel(),this.blinkLoop=null,this.heartsPattern.tint=16777215),this.currentHealth<=this.redThreshold){var r=Math.max(.25*this.currentHealth,.125);this.blinkLoop=new a(r,function(){t.heartsPattern.tint=16711680===t.heartsPattern.tint?16777215:16711680}),this.blinkLoop.run(this.interpolationPool)}else this.heartsPattern.tint=16777215}},{key:"maxHealth",get:function(){return this.currentMaxHealth},set:function(e){e!==this.currentMaxHealth&&(this.currentMaxHealth=e,this.heartsSlotsPattern.width=e*this.cellSize)}},{key:"animateLoss",value:function(e,t){for(var r=new l,n=[],i=.2,o=e;t<o;o-=.5){var a=this.piecePattern(o-.25);a.tint=16711680,this.addChild(a),r.add(i,(new l).add(0,new s(a).interp("position.y",a.position.y,a.position.y+100,Math.easeInBack).during(.4)).add(0,new s(a).interp("alpha",1,0).during(.4)).add(0,new s(a).interp("scale.x",1,2,Math.easeOutBack).during(.4)).add(0,new s(a).interp("scale.y",1,2,Math.easeOutBack).during(.4))),n.push(a),i+=.1}n.forEach(function(e){r.add(function(){u.remove(e)})}),r.run(this.interpolationPool)}},{key:"animateGain",value:function(e,t){for(var r=new l,n=[],i=.2,o=e+.5;o<=t;o+=.5){var a=this.piecePattern(o-.25);a.tint=65280,this.addChild(a),r.add(i,(new l).add(0,new s(a).interp("alpha",1,0).during(.2)).add(0,new s(a).interp("scale.x",1,2).during(.2)).add(0,new s(a).interp("scale.y",1,2).during(.2))),n.push(a),i+=.1}n.forEach(function(e){r.add(function(){u.remove(e)})}),r.run(this.interpolationPool)}},{key:"piecePattern",value:function(e){var t=o.Texture.fromImage("assets/textures/heart-white.png"),r=new o.extras.TilingSprite(t,this.cellSize/2,this.cellSize);return r.tilePosition.x=(e-.25)*this.cellSize,r.pivot.x=this.cellSize/4,r.pivot.y=this.cellSize/2,r.position.x=e*this.cellSize,r.position.y=this.cellSize/2,r}}]),i}();t.exports=n},{"../../util/pixi-utils":128,animate:161,"pixi.js":329}],51:[function(e,t,r){var o=e("pixi.js"),a=e("../../../../shared/ui/hud-items"),n=e("./announcement"),s=e("./health-bar"),l=e("./shield-bar"),u=e("./log-view"),c=e("../../util/pixi-utils"),i=function(){function i(e){_classCallCheck2(this,i),this.width=e.width,this.height=e.height,this.interpolationPool=e.interpolationPool,this.view=new o.Container,this.view.debugLabel="HUD",this.gradient=new o.Sprite(o.Texture.fromImage("assets/textures/hud-gradient.png")),this.gradient.width=this.width,this.view.addChild(this.gradient),this.itemsContainer=new o.Container,this.itemsContainer.position.y=50,this.view.addChild(this.itemsContainer);var t=new s;t.interpolationPool=this.interpolationPool;var r=new l;r.interpolationPool=this.interpolationPool;var n=new o.Container;n.addChild(t),n.addChild(r),this.ammo=this.createLabelAndValue(),this.timer=this.createLabelAndValue(),this.message=this.createLabelAndValue(),this.health={container:n,healthBar:t,shieldBar:r},this.log=new u({interpolationPool:this.interpolationPool}),this.log.position.x=50,this.log.position.y=this.height-50,this.view.addChild(this.log),this.items={},this.items[a.AMMO]=this.ammo,this.items[a.TIMER]=this.timer,this.items[a.HEALTH]=this.health,this.items[a.MESSAGE]=this.message,this.items[a.LEADERBOARD]=this.leaderboard}return _createClass2(i,[{key:"createLabelAndValue",value:function(){var e=new o.Container,t=new o.Text("",{fill:"#fff",fontFamily:"SquarePixel",fontSize:36,dropShadow:!0,dropShadowColor:"#000",dropShadowDistance:4,dropShadowAngle:Math.PI/2});t.anchor.x=.5,e.addChild(t);var r=new o.Text("",{fill:"#fff",fontFamily:"SquarePixel",fontSize:50,dropShadow:!0,dropShadowColor:"#000",dropShadowDistance:4,dropShadowAngle:Math.PI/2});return r.anchor.x=.5,r.position.y=30,e.addChild(r),{label:t,value:r,container:e}}},{key:"setTopBarItems",value:function(i){var o=this;c.removeAllChildren(this.itemsContainer),i.forEach(function(e,t){var r=(t+1)/(i.length+1)*o.width,n=o.items[e.type];n&&(n.container.position.x=r,o.itemsContainer.addChild(n.container),e.type===a.MESSAGE&&o.setLabelAndValue(e.type,e.data.label,e.data.value))})}},{key:"setLabelAndValue",value:function(e,t,r){var n=this.items[e];n&&(n.label.text=t.toString().toUpperCase(),n.value.text=r.toString().toUpperCase())}},{key:"setHealth",value:function(e,t){this.health.healthBar.health=e,this.health.healthBar.maxHealth=t,this.health.healthBar.position.x=-this.health.healthBar.heartsWidth/2,this.health.healthBar.visible=this.health.shieldBar.health<=0}},{key:"setShield",value:function(e,t){this.health.shieldBar.health=e,this.health.shieldBar.maxHealth=t,this.health.shieldBar.position.x=-this.health.shieldBar.heartsWidth/2,this.health.healthBar.visible=this.health.shieldBar.health<=0}},{key:"announce",value:function(e,t){return this.currentAnnouncement&&(c.remove(this.currentAnnouncement.view),this.currentAnnouncement=null),this.currentAnnouncement=new n(this.width,this.height,e),this.view.addChild(this.currentAnnouncement.view),this.currentAnnouncement.animate().add(function(){t&&t()}).run(this.interpolationPool)}},{key:"showKeyboardInstructions",value:function(){var e=new o.Sprite(o.Texture.fromImage("assets/textures/keyboard-instructions.png"));e.anchor.x=.5,e.anchor.y=.5,e.scale.x=e.scale.y=.5,e.position.x=this.width/2,e.position.y=3*this.height/4,this.view.addChild(e)}}]),i}();t.exports=i},{"../../../../shared/ui/hud-items":927,"../../util/pixi-utils":128,"./announcement":48,"./health-bar":50,"./log-view":52,"./shield-bar":53,"pixi.js":329}],52:[function(e,t,r){var i=e("pixi.js"),o=e("animate").Timeline,a=e("animate").Animation,s=e("./composite-text"),l=e("../../util/pixi-utils"),n=function(e){_inherits2(n,i.Container);var r=_createSuper(n);function n(){var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return _classCallCheck2(this,n),(e=r.call(this)).entries=[],e.maxEntries=t.maxEntries||5,e.spacing=t.spacing||20,e.interpolationPool=t.interpolationPool,e}return _createClass2(n,[{key:"add",value:function(e){var t=new s(e.map(function(e){return{text:e.text,style:{fill:e.color||"#fff",fontFamily:"SquarePixel",fontSize:32,dropShadow:!0,dropShadowColor:"#000",dropShadowDistance:2,dropShadowAngle:Math.PI/2}}}));t.children.forEach(function(e){return e.anchor.y=1}),t.position.y=this.spacing,this.addChild(t),this.entries.unshift(t),this.shift()}},{key:"shift",value:function(){var r=this;this.entries.length>=this.maxEntries&&this.removeOldestEntry(),this.entries.forEach(function(e,t){new a(e).interpTo("position.y",-t*r.spacing).during(.3).run(r.interpolationPool)})}},{key:"removeOldestEntry",value:function(){var e=this.entries.pop();e&&(new o).add(0,new a(e).interpTo("position.y",-(this.maxEntries-1)*this.spacing).during(.3)).add(0,new a(e).interpTo("alpha",0).during(.3)).add(function(){return l.remove(e)}).run(this.interpolationPool)}}]),n}();t.exports=n},{"../../util/pixi-utils":128,"./composite-text":49,animate:161,"pixi.js":329}],53:[function(e,t,r){var o=e("pixi.js"),s=e("animate").Animation,l=e("animate").Timeline,u=e("../../util/pixi-utils"),n=function(e){_inherits2(i,o.Container);var n=_createSuper(i);function i(){var e;_classCallCheck2(this,i),(e=n.call(this)).interpolationPool=null,e.shieldsContainer=new o.Container,e.addChild(e.shieldsContainer);var t=o.Texture.fromImage("assets/textures/shield-white.png"),r=o.Texture.fromImage("assets/textures/shield-black.png");return e.heartsSlotsPattern=new o.extras.TilingSprite(r,0,e.cellSize),e.shieldsContainer.addChild(e.heartsSlotsPattern),e.heartsPattern=new o.extras.TilingSprite(t,0,e.cellSize),e.shieldsContainer.addChild(e.heartsPattern),e}return _createClass2(i,[{key:"cellSize",get:function(){return 60}},{key:"heartsWidth",get:function(){return this.currentMaxHealth*this.cellSize}},{key:"heartsHeight",get:function(){return this.cellSize}},{key:"health",get:function(){return this.currentHealth},set:function(e){e!==this.currentHealth&&(void 0!==this.currentHealth&&(e<this.currentHealth?this.animateLoss(this.currentHealth,e):this.animateGain(this.currentHealth,e)),this.currentHealth=e,this.heartsPattern.width=e*this.cellSize,this.heartsSlotsPattern.visible=0<e)}},{key:"maxHealth",get:function(){return this.currentMaxHealth},set:function(e){e!==this.currentMaxHealth&&(this.currentMaxHealth=e,this.heartsSlotsPattern.width=e*this.cellSize)}},{key:"animateLoss",value:function(e,t){for(var r=new l,n=[],i=.2,o=e;t<o;o-=.5){var a=this.piecePattern(o-.25);a.tint=16711680,this.addChild(a),r.add(i,(new l).add(0,new s(a).interp("position.y",a.position.y,a.position.y+100,Math.easeInBack).during(.4)).add(0,new s(a).interp("alpha",1,0).during(.4)).add(0,new s(a).interp("scale.x",1,2,Math.easeOutBack).during(.4)).add(0,new s(a).interp("scale.y",1,2,Math.easeOutBack).during(.4))),n.push(a),i+=.1}n.forEach(function(e){r.add(function(){u.remove(e)})}),r.run(this.interpolationPool)}},{key:"animateGain",value:function(e,t){for(var r=new l,n=[],i=.2,o=e+.5;o<=t;o+=.5){var a=this.piecePattern(o-.25);a.tint=65280,this.addChild(a),r.add(i,(new l).add(0,new s(a).interp("alpha",1,0).during(.2)).add(0,new s(a).interp("scale.x",1,2).during(.2)).add(0,new s(a).interp("scale.y",1,2).during(.2))),n.push(a),i+=.1}n.forEach(function(e){r.add(function(){u.remove(e)})}),r.run(this.interpolationPool)}},{key:"piecePattern",value:function(e){var t=o.Texture.fromImage("assets/textures/shield-white.png"),r=new o.extras.TilingSprite(t,this.cellSize/2,this.cellSize);return r.tilePosition.x=(e-.25)*this.cellSize,r.pivot.x=this.cellSize/4,r.pivot.y=this.cellSize/2,r.position.x=e*this.cellSize,r.position.y=this.cellSize/2,r}}]),i}();t.exports=n},{"../../util/pixi-utils":128,animate:161,"pixi.js":329}],54:[function(e,t,r){var c=e("pixi.js"),h=e("animate").Timeline,d=e("animate").Animation,p=e("animate").Easing,f=e("../../util/pixi-utils"),n=function(){function t(e){_classCallCheck2(this,t),this.interpolationPool=e.interpolationPool,this.width=e.width,this.height=e.height,this.streamsX=e.streamsX,this.renderer=e.renderer,this.view=new c.Container,this.itemMap={},this.itemList=[]}return _createClass2(t,[{key:"addStream",value:function(n,e){var i=this,o=window.document.createElement("video");o.addEventListener("loadedmetadata",function(){var e=new c.Texture.fromVideo(o),t=new c.Sprite(e);t.position.x=i.streamsX,t.alpha=0,t.anchor.x=.5,t.anchor.y=.5,i.view.addChild(t);var r={videoElement:o,view:t,id:n,texture:e};i.itemMap[n]=r,i.itemList.push(r),i.updateLayout()},!1),o.srcObject=e.stream,o.play()}},{key:"removeStream",value:function(e){var t=this.streamItemById(e);if(t){delete this.itemMap[e],f.remove(t.view);var r=this.itemList.indexOf(t.view);0<=r&&this.itemList.splice(r,1),this.updateLayout()}}},{key:"streamItemById",value:function(e){return this.itemMap[e]||null}},{key:"updateLayout",value:function(){var i=this,r=10*(this.itemList.length-1);this.itemList.forEach(function(e){var t=e.texture.width/e.texture.height;r+=100/t+10});var o=new h,a=(this.height-r)/2;this.itemList.forEach(function(e){var t=e.view;t.width=100,t.scale.y=t.scale.x;var r=i.streamsX,n=a;t.position.x!==r&&o.add(0,new d(t).interpTo("position.x",r).during(.3)),t.position.y!==n&&o.add(0,new d(t).interpTo("position.y",n).during(.3)),1!==t.alpha&&o.add(0,new d(t).interpTo("alpha",1).during(.3)),a=t.position.y+t.height+10}),o.run(this.interpolationPool)}},{key:"rearrange",value:function(r){var n=[],i=[];this.itemList.forEach(function(e){var t=r.indexOf(e.id);0<=t?n[t]=e:i.push(e)}),this.itemList=n.concat(i),this.updateLayout()}},{key:"highlightStream",value:function(e){var t=this.streamItemById(e);if(t&&t.texture.width&&t.texture.height){var r=new c.Sprite(t.texture);r.position.x=t.view.position.x,r.position.y=t.view.position.y,r.width=t.view.width,r.height=t.view.height,r.anchor.x=.5,r.anchor.y=.5,this.view.addChild(r);var n=t.texture.width/t.texture.height,i=p.easeInOutCubic,o=(new h).add(0,new d(r).interpTo("position.x",this.width/2,i)).add(0,new d(r).interpTo("position.y",this.height/2,i)).add(0,new d(r).interpTo("width",300,i)).add(0,new d(r).interpTo("height",300/n,i));o.duration=.3;var a=p.easeInOutCubic,s=(new h).add(0,new d(r).interp("position.x",this.width/2,r.position.x,a)).add(0,new d(r).interp("position.y",this.height/2,r.position.y,a)).add(0,new d(r).interp("width",300,r.width,a)).add(0,new d(r).interp("height",300/n,r.height,a));s.duration=.3,(new h).add(function(){return t.view.visible=!1}).add(o).wait(3).add(s).add(function(){return f.remove(r)}).add(function(){return t.view.visible=!0}).run(this.interpolationPool)}}},{key:"showStreamHurt",value:function(e){var t=this.streamItemById(e);if(t){var r=t.view.getBounds(),n=new c.Graphics;n.beginFill(9764864,.5),n.drawRect(0,0,r.width,r.height),n.position.x=r.x,n.position.y=r.y,this.view.addChild(n),(new h).add(new d(n).interp("alpha",0,1).during(.2)).add(new d(n).interp("alpha",1,0).during(.2)).add(function(){return f.remove(n)}).run(this.interpolationPool)}}},{key:"showStreamDied",value:function(e){var t=this.streamItemById(e);if(t&&t.texture.width&&t.texture.height){var r=new c.Sprite(t.texture),n=new c.Graphics;r.addChild(n),(r.mask=n).beginFill(16777215),n.moveTo(0,0),n.lineTo(.6*t.texture.width,0),n.lineTo(.4*t.texture.width,t.texture.height),n.lineTo(0,t.texture.height);var i=c.RenderTexture.create(t.texture.width,t.texture.height);this.renderer.render(r,i),n.clear(),n.beginFill(16777215),n.moveTo(t.texture.width,0),n.lineTo(.6*t.texture.width,0),n.lineTo(.4*t.texture.width,t.texture.height),n.lineTo(t.texture.width,t.texture.height);var o=c.RenderTexture.create(t.texture.width,t.texture.height);this.renderer.render(r,o);var a=new c.Sprite(i);a.position.x=t.view.position.x-.25*t.view.width,a.position.y=t.view.position.y,a.anchor.x=.25,a.anchor.y=.5,a.scale.x=t.view.scale.x,a.scale.y=t.view.scale.y,this.view.addChild(a);var s=new c.Sprite(o);s.position.x=t.view.position.x+.5*t.view.width,s.position.y=t.view.position.y,s.anchor.x=.75,s.anchor.y=.5,s.scale.x=t.view.scale.x,s.scale.y=t.view.scale.y,this.view.addChild(s);var l=p.easeOutCubic,u=(new h).add(function(){return t.view.visible=!1}).add(0,new d(a).interpToOffset("position.x",-50,l)).add(0,new d(a).interpTo("alpha",0)).add(0,new d(a).interpTo("rotation",Math.PI/3,l)).add(0,new d(s).interpToOffset("position.x",50,l)).add(0,new d(s).interpTo("alpha",0)).add(0,new d(s).interpTo("rotation",Math.PI/3,l));u.duration=1,(new h).add(function(){return t.view.visible=!1}).add(u).wait(.5).add(function(){return t.view.visible=!0}).add(new d(t.view).interp("alpha",0,1).during(.3)).add(function(){t.view.visible=!0,f.remove(a),f.remove(s)}).run(this.interpolationPool)}}}]),t}();t.exports=n},{"../../util/pixi-utils":128,animate:161,"pixi.js":329}],55:[function(e,t,r){var o=e("pixi.js"),a=e("animate").Animation,n=function(e){_inherits2(i,o.Container);var n=_createSuper(i);function i(e,t){var r;return _classCallCheck2(this,i),(r=n.call(this)).effectWidth=e,r.effectHeight=t,r.margin=t/2,r.shape=new o.Graphics,r.shape.beginFill(0),r.shape.moveTo(0,0),r.shape.lineTo(e+r.margin,0),r.shape.lineTo(e,t),r.shape.lineTo(-r.margin,t),r.shape.beginFill(),r.addChild(r.shape),r}return _createClass2(i,[{key:"animateOut",value:function(){return new a(this.shape).interp("position.x",0,this.effectWidth+this.margin).during(.5).init()}},{key:"animateIn",value:function(){return new a(this.shape).interp("position.x",-this.effectWidth-this.margin,0).during(.5).init()}}]),i}();t.exports=n},{animate:161,"pixi.js":329}],56:[function(e,t,r){var i=e("pixi.js"),o=e("../ui/gauge"),n=function(e){_inherits2(n,i.Container);var r=_createSuper(n);function n(e){var t;return _classCallCheck2(this,n),(t=r.call(this)).soundManager=e.soundManager,t.labelOverride=null,t.gauge=new o({width:e.width,height:e.height}),t.addChild(t.gauge),t.label=new i.Text("",{fill:"white",fontFamily:"SquarePixel",fontSize:50,align:"center"}),t.label.anchor.x=.5,t.label.anchor.y=.5,t.label.position.x=e.width/2,t.label.position.y=-50,t.addChild(t.label),t}return _createClass2(n,[{key:"progress",get:function(){return this.gauge.value},set:function(e){this.gauge.value=e,this.labelOverride?this.label.text=this.labelOverride:this.label.text=e<1?Math.round(100*e)+"%":"Ready"}},{key:"setLabel",value:function(e){this.labelOverride=e}}]),n}();t.exports=n},{"../ui/gauge":118,"pixi.js":329}],57:[function(e,t,r){var n=e("../../../shared/util/array-utils"),i=function(){function t(e){_classCallCheck2(this,t),this.generators={},this.pools={},this.alivePool={},this.maxCount={},this.interpolationPool=e.interpolationPool||null,this.proxies=[]}return _createClass2(t,[{key:"registerParticleType",value:function(e,t,r){this.generators[e]=t,this.pools[e]=[],this.alivePool[e]=[],this.maxCount[e]=r||100}},{key:"dequeue",value:function(e,t){if(!this.pools[e])return null;var r=this.pools[e].shift();return r||(r=this.alivePool[e].length<this.maxCount[e]?new this.generators[e]({manager:this,identifier:e}):this.alivePool[e].shift(),this.alivePool[e].push(r)),this.proxies.forEach(function(e){return e(t)}),r.setup(t,this.interpolationPool),r}},{key:"enqueue",value:function(e){this.pools[e.identifier].push(e)}},{key:"addProxy",value:function(e){this.proxies.push(e)}},{key:"removeProxy",value:function(e){n.remove(this.proxies,e)}}]),t}();t.exports=i},{"../../../shared/util/array-utils":929}],58:[function(e,t,r){var n=e("animate").Timeline,i=e("animate").Animation,o=e("../../../shared/util/random"),a=e("../util/pixi-utils"),s=function(){function t(e){_classCallCheck2(this,t),this.manager=e.manager,this.identifier=e.identifier,this.view=this.createView()}return _createClass2(t,[{key:"done",value:function(){a.remove(this.view),this.manager.enqueue(this),this.timeline=null}},{key:"createView",value:function(){return null}},{key:"tearDown",value:function(){this.timeline&&(this.timeline.cancel(),this.timeline=null)}},{key:"setup",value:function(e,t){var r=this;e.size=e.size||1,this.tearDown(),this.view.position.x=e.x,this.view.position.y=e.y,this.view.tint=e.color.length?o.randPick(e.color):e.color,this.view.scale.x=e.size,this.view.scale.y=e.size,this.view.alpha=e.alpha||1,this.timeline=new n,e.deltaX&&this.timeline.add(0,new i(this.view).interp("position.x",e.x,e.x+e.deltaX,e.easingX).during(e.duration)),e.deltaY&&this.timeline.add(0,new i(this.view).interp("position.y",e.y,e.y+e.deltaY,e.easingY).during(e.duration)),e.deltaRotation&&this.timeline.add(0,new i(this.view).interp("rotation",this.view.rotation,this.view.rotation+e.deltaRotation).during(e.duration)),e.deltaSize&&(this.timeline.add(0,new i(this.view).interp("scale.x",e.size,e.size+e.deltaSize).during(e.duration)),this.timeline.add(0,new i(this.view).interp("scale.y",e.size,e.size+e.deltaSize).during(e.duration))),e.noFadeOut||this.timeline.add(0,new i(this.view).interp("alpha",1,0).during(e.duration)),this.timeline.add(function(){return r.done()}).run(t)}}]),t}();t.exports=s},{"../../../shared/util/random":936,"../util/pixi-utils":128,animate:161}],59:[function(e,t,r){var n=e("pixi.js"),i=function(e){_inherits2(r,n.Container);var t=_createSuper(r);function r(){var e;return _classCallCheck2(this,r),(e=t.call(this)).label=new n.Text("",{fill:"white",fontFamily:"SquarePixel",fontSize:36,dropShadow:!0,dropShadowColor:"#000",dropShadowAngle:Math.PI/2,dropShadowDistance:2,align:"center"}),e.label.anchor.x=.5,e.label.position.y=-110,e.addChild(e.label),e}return _createClass2(r)}();t.exports=i},{"pixi.js":329}],60:[function(e,t,r){var i=e("pixi.js"),o=e("./particle"),n=function(e){_inherits2(n,o);var r=_createSuper(n);function n(e){var t;return _classCallCheck2(this,n),(t=r.call(this,e)).timeline=null,t}return _createClass2(n,[{key:"createView",value:function(){var e=new i.Graphics;return e.beginFill(16777215),e.drawRect(-.5,-.5,1,1),e.endFill(),e.debugLabel="SmokeParticle",e.rotation=Math.PI/4,e}}]),n}();n.identifier="smoke",n.DUST=[8947848],n.FIRE=[16746496,16776960,16711680],n.WALL=[16777215],t.exports=n},{"./particle":58,"pixi.js":329}],61:[function(e,t,r){var n=e("pixi.js"),i=e("./particle"),o=function(e){_inherits2(r,i);var t=_createSuper(r);function r(e){return _classCallCheck2(this,r),t.call(this,e)}return _createClass2(r,[{key:"createView",value:function(){var e=new n.Graphics;return e.beginFill(16777215),e.moveTo(0,0),e.lineTo(1,0),e.lineTo(0,1),e.endFill(),e.debugLabel="TriangleParticle",e}}]),r}();o.identifier="triangle",t.exports=o},{"./particle":58,"pixi.js":329}],62:[function(e,t,r){var o=e("pixi.js"),n=function(e){_inherits2(i,o.Graphics);var n=_createSuper(i);function i(e,t){var r;return _classCallCheck2(this,i),(r=n.call(this)).world=e,r.source=t,r.radius=0,r}return _createClass2(i,[{key:"update",value:function(){var e=this.world.tileSize/4,t=~~(this.source.y/e),r=~~(this.source.x/e),n=~~(this.radius/e);this.clear();for(var i=t-n;i<=t+n;i++)for(var o=r-n;o<=r+n;o++){if(~~Math.pointDistance(i,o,t,r)===n){var a=this.world.solidTileAtRowCol(~~(i*e/this.world.tileSize),~~(o*e/this.world.tileSize))?16777215:0;this.beginFill(a,1),this.drawRect(o*e,i*e,e,e),this.endFill()}}}}]),i}();t.exports=n},{"pixi.js":329}],63:[function(e,t,r){var n=function(){function t(e){_classCallCheck2(this,t),this.tileSize=e.tileSize,this.radius=e.radius,this.masks={}}return _createClass2(t,[{key:"maskFor",value:function(e,t,r,n){var i=""+e+t+r+n;return this.masks[i]||(this.masks[i]=this.createTileMask(e,t,r,n)),this.masks[i]}},{key:"createTileMask",value:function(e,t,r,n){var i=this,o=window.document.createElement("canvas");o.width=this.tileSize,o.height=this.tileSize;var a=o.getContext("2d");a.fillStyle="#fff",a.fillRect(0,this.radius,this.tileSize,this.tileSize-2*this.radius),a.fillRect(this.radius,0,this.tileSize-2*this.radius,this.radius),a.fillRect(this.radius,this.tileSize-this.radius,this.tileSize-2*this.radius,this.radius),a.translate(o.width/2,o.height/2);var s=Math.sqrt(2*Math.pow(this.tileSize/2-this.radius,2)),l=Math.sqrt(2*Math.pow(this.radius,2));return[e,t,n,r].forEach(function(e,t){var r=3*-Math.PI/4+t*Math.PI/2;a.save(),a.rotate(r),a.translate(s,0),a.beginPath(),a.moveTo(0,0),e?a.arc(0,0,i.radius,-Math.PI/4,Math.PI/4,!1):(a.lineTo(l,-l),a.lineTo(l,0),a.lineTo(l,l)),a.fill(),a.restore()}),o}}]),t}();t.exports=n},{}],64:[function(e,t,r){var n=e("pixi.js"),i=e("./tile-view-controller"),o=function(e){_inherits2(r,i);var t=_createSuper(r);function r(){return _classCallCheck2(this,r),t.apply(this,arguments)}return _createClass2(r,[{key:"getTexture",value:function(){return this.tile.chunk.world.solidTileAtRowCol(this.tile.row-1,this.tile.col)?n.Texture.fromImage("assets/textures/new-dirt.png"):n.Texture.fromImage("assets/textures/new-floor.png")}}]),r}();t.exports=o},{"./tile-view-controller":66,"pixi.js":329}],65:[function(e,t,r){var n=e("../../../../../shared/world/tiles/obstacles/obstacle-tile"),i=e("../../../../../shared/world/tiles/obstacles/unbreakable-obstacle-tile"),o=e("./obstacle-tile-view-controller"),a=function(){function e(){_classCallCheck2(this,e)}return _createClass2(e,[{key:"viewControllerForTile",value:function(e,t){return t instanceof n||t instanceof i?new o(e,t):null}}]),e}();t.exports=a},{"../../../../../shared/world/tiles/obstacles/obstacle-tile":969,"../../../../../shared/world/tiles/obstacles/unbreakable-obstacle-tile":971,"./obstacle-tile-view-controller":64}],66:[function(e,t,r){var n=e("pixi.js"),i=function(){function r(e,t){_classCallCheck2(this,r),this.chunkViewController=e,this.tile=t}return _createClass2(r,[{key:"getTexture",value:function(){return null}},{key:"createView",value:function(){var e=this.getTexture();return new n.Sprite(e)}}]),r}();t.exports=i},{"pixi.js":329}],67:[function(e,t,r){var i=e("pixi.js"),g=new(e("./rounded-tile-cache"))({tileSize:80,radius:20}),n=function(){function n(e,t,r){_classCallCheck2(this,n),this.worldViewController=e,this.chunk=t,this.renderer=r,this.initializeView()}return _createClass2(n,[{key:"setVisible",value:function(e){this.view.visible=e}},{key:"initializeView",value:function(){var l=this,u=new i.Container,e=window.document.createElement("canvas");e.width=this.chunk.width,e.height=this.chunk.height;var c=e.getContext("2d");this.chunk.tileList.forEach(function(e){var t=l.worldViewController.tileViewControllerFactory.viewControllerForTile(l,e);if(t){var r=t.createView();if(r){r.position.x=e.x-l.chunk.x,r.position.y=e.y-l.chunk.y,u.addChild(r);var n=l.chunk.world.solidTileAtRowCol(e.row-1,e.col),i=l.chunk.world.solidTileAtRowCol(e.row+1,e.col),o=l.chunk.world.solidTileAtRowCol(e.row,e.col-1),a=l.chunk.world.solidTileAtRowCol(e.row,e.col+1),s=g.maskFor(!n&&!o,!n&&!a,!i&&!o,!i&&!a);c.drawImage(s,e.x-l.chunk.x,e.y-l.chunk.y)}}}),this.addOutlines(u),u.mask=i.Sprite.from(e);var t=i.RenderTexture.create(this.chunk.width,this.chunk.height);this.renderer.render(u,t),this.view=new i.Sprite(t),this.view.position.x=this.chunk.x,this.view.position.y=this.chunk.y}},{key:"addOutlines",value:function(e){var b=this,t=window.document.createElement("canvas");t.width=this.chunk.width,t.height=this.chunk.height;var y=t.getContext("2d");y.lineWidth=5,y.strokeStyle="#000",y.lineCap="round",y.globalAlpha=.5,y.beginPath(),this.chunk.tileList.forEach(function(e){var t=b.chunk.world.solidTileAtRowCol(e.row-1,e.col),r=b.chunk.world.solidTileAtRowCol(e.row+1,e.col),n=b.chunk.world.solidTileAtRowCol(e.row,e.col-1),i=b.chunk.world.solidTileAtRowCol(e.row,e.col+1),o=!t&&!n,a=!t&&!i,s=!r&&!n,l=!r&&!i,u=o?g.radius:0,c=e.width-(a?g.radius:0),h=s?g.radius:0,d=e.width-(l?g.radius:0),p=o?g.radius:0,f=e.height-(s?g.radius:0),m=a?g.radius:0,v=e.height-(l?g.radius:0);y.save(),y.translate(e.x-b.chunk.x,e.y-b.chunk.y),t||(y.moveTo(u,0),y.lineTo(c,0)),a&&y.arc(c,m,g.radius,-Math.PI/2,0,!1),i||(y.moveTo(e.width,m),y.lineTo(e.width,v)),l&&y.arc(d,v,g.radius,0,Math.PI/2,!1),r||(y.moveTo(d,e.height),y.lineTo(h,e.height)),s&&y.arc(h,f,g.radius,Math.PI/2,Math.PI,!1),n||(y.moveTo(0,f),y.lineTo(0,p)),o&&y.arc(u,p,g.radius,Math.PI,-Math.PI/2,!1),y.restore()}),y.stroke();var r=i.Texture.from(t),n=i.Sprite.from(r);e.addChild(n)}}]),n}();t.exports=n},{"./rounded-tile-cache":63,"pixi.js":329}],68:[function(e,t,r){t.exports={UNDERNEATH_WORLD:"UNDERNEATH_WORLD",ITEMS:"items",PROJECTILES:"projectiles",CHARACTERS:"elements",PARTICLES:"particles",TOP:"top"}},{}],69:[function(e,t,r){var h=e("pixi.js"),s=e("chance"),l=e("pixi-filters").ShockwaveFilter,d=e("animate").Timeline,p=e("animate").Animation,u=e("animate").Easing,f=e("../../../../shared/util/random"),m=e("../../util/oscillate"),n=e("../../../../shared/elements/projectiles/plasma-bullet"),i=e("../../../../shared/elements/projectiles/bullet"),c=e("../../../../shared/elements/decorations/tree"),v=e("../../../../shared/elements/decorations/grass"),b=e("../../../../shared/elements/decorations/bush"),o=e("../../../../shared/world/events/spawn"),a=e("../../../../shared/world/events/item-pickup"),y=e("../../../../shared/world/events/equipment-shot"),g=e("../../../../shared/world/events/addition"),w=e("../../../../shared/world/generate/mask"),_=e("./world-chunk-view-controller"),x=e("./explosion-tile-effect"),S=e("./world-layer"),C=e("./tiles/tile-view-controller-factory"),k=e("../elements/element-view-controller-factory"),T=e("../particle-manager"),A=e("../smoke-particle"),E=e("../triangle-particle"),O=e("../../../../shared/util/array-utils"),M=e("../../util/pixi-utils"),P=function(){function t(e){var r=this;_classCallCheck2(this,t),this.world=e.world,this.interpolationPool=e.interpolationPool,this.camera=e.camera,this.events=e.events,this.renderer=e.renderer,this.view=new h.Container,this.view.debugLabel="World",this.layers={},[S.UNDERNEATH_WORLD,"chunks",S.PROJECTILES,S.CHARACTERS,S.ITEMS,S.PARTICLES,S.TOP].forEach(function(e){var t=new h.Container;r.view.addChild(t),r.layers[e]=t}),this.elementsViewControllers=[],this.elementsViewControllersMap={},this.tileViewControllerFactory=new C,this.elementViewControllerFactory=new k({characterColorProvider:e.characterColorProvider}),this.particleManager=new T({interpolationPool:this.interpolationPool}),this.particleManager.registerParticleType(A.identifier,A,1e3),this.particleManager.registerParticleType(E.identifier,E,200),this.chunkViews=this.world.chunkList.map(function(e){return new _(r,e,r.renderer)}),this.chunkViews.forEach(function(e){r.layers.chunks.addChild(e.view)}),this.world.rx.additions.subscribe(function(e){return r.initializeViewForElement(e)}),this.world.rx.deletions.subscribe(function(e){return r.removeViewForElement(e)}),this.world.rx.explosions.filter(function(e){return r.isPointVisible(e.source.x,e.source.y,e.radius,e.radius)}).subscribe(function(e){return r.explosionAnimation(e.source,e.radius)}),this.world.rx.explosions.subscribe(function(e){return r.explosionShockwave(e.source)}),this.world.rx.deletions.filter(function(e){return e instanceof n}).subscribe(function(e){return r.plasmaBulletExplosionAnimation(e)}),this.events.filter(function(e){return e instanceof y&&e.shotEvent instanceof g&&"bullet"===e.shotEvent.elementState.type}).subscribe(function(e){return r.shot(e)}),this.world.rx.deletions.filter(function(e){return e instanceof i}).subscribe(function(e){return r.bulletExplosionAnimation(e)}),this.events.filter(function(e){return e instanceof o}).filter(function(e){return r.isPointVisible(e.elementState.x,e.elementState.y,50,50)}).subscribe(function(e){return r.spawnAnimation(e.elementState.x,e.elementState.y)}),this.events.filter(function(e){return e instanceof a}).map(function(e){return r.world.cyclableById(e.characterId)}).filter(function(e){return e&&r.isPointVisible(e.x,e.y,50,50)}).subscribe(function(e){return r.itemPickupAnimation(e)}),this.addTrees()}return _createClass2(t,[{key:"update",value:function(){this.onlyShowVisibleChunks(),this.updateAllElementsViews()}},{key:"visibleChunkViews",value:function(){var t=this.camera.visibleRectangle();return this.chunkViews.filter(function(e){return Math.rectangleIntersection(t,e.chunk.rectangle)})}},{key:"onlyShowVisibleChunks",value:function(){var r=this.camera.visibleRectangle();this.chunkViews.forEach(function(e){var t=Math.rectangleIntersection(r,e.chunk.rectangle);e.setVisible(t)})}},{key:"existingViewControllerForElement",value:function(e){return this.elementsViewControllersMap[e.id]||null}},{key:"initializeViewForElement",value:function(e){var t=this.elementViewControllerFactory.viewControllerForElement(e);if(t){t.interpolationPool=this.interpolationPool,(t.worldViewController=this).elementsViewControllers.push(t);var r=(this.elementsViewControllersMap[e.id]=t).getOrCreateView();r&&(t.maybeUpdateView(),this.addViewToLayer(r,t.layerId))}}},{key:"addViewToLayer",value:function(e,t){if(!this.layers[t])throw new Error("Invalid layerId: "+t);this.layers[t].addChild(e)}},{key:"removeViewForElement",value:function(e){var t=this.elementsViewControllersMap[e.id];t&&(t.tearDown(),M.remove(t.view),O.remove(this.elementsViewControllers,t),delete this.elementsViewControllersMap[e.id])}},{key:"updateAllElementsViews",value:function(){this.elementsViewControllers.forEach(function(e){e.maybeUpdateView()})}},{key:"addParticle",value:function(e,t){var r=this.particleManager.dequeue(e,t);if(r){if(!this.layers[t.layerId])throw new Error("Invalid layerId: "+t.layerId);this.layers[t.layerId].addChild(r.view)}}},{key:"isVisible",value:function(e,t,r){return this.isPointVisible(e.x,e.y,t,r)}},{key:"isPointVisible",value:function(e,t,r,n){return this.camera.isPointVisible(e,t,r,n)}},{key:"spawnAnimation",value:function(e,t){this.shockwave(e,t,.35);var r=new h.Graphics;r.beginFill(16777215),r.drawCircle(0,0,400),r.endFill(),r.position.x=e,r.position.y=t,this.view.addChild(r);var n=new h.Graphics;n.lineStyle(10,16777215),n.drawCircle(0,0,200),n.scale.x=0,n.scale.y=0,n.position.x=e,n.position.y=t,this.view.addChild(n),(new d).add((new d).add(0,new p(r).interp("alpha",0,1).during(.2)).add(0,new p(r).interp("scale.x",1,0).during(.2)).add(0,new p(r).interp("scale.y",1,0).during(.2))).add(function(){return M.remove(r)}).add((new d).add(0,new p(n).interp("alpha",1,0).during(.1)).add(0,new p(n).interp("scale.x",0,1).during(.1)).add(0,new p(n).interp("scale.y",0,1).during(.1))).add(function(){return M.remove(n)}).run(this.interpolationPool)}},{key:"explosionAnimation",value:function(e,t){var r=new x(this.world,e);this.view.addChild(r),this.explosionTiles(e,t);var n=new h.Graphics;n.beginFill(16777215),n.drawCircle(0,0,t),n.position.x=e.x,n.position.y=e.y,this.view.addChild(n);var i=new h.Graphics;i.lineStyle(t/5,16746496),i.drawCircle(0,0,t),i.position.x=e.x,i.position.y=e.y,i.alpha=0,this.view.addChild(i);var o=new h.Graphics;o.lineStyle(t/5,16776960),o.drawCircle(0,0,1.5*t),o.position.x=e.x,o.position.y=e.y,o.alpha=0,o.scale.y=.2,this.view.addChild(o),(new d).add(.2,new p(n).interp("alpha",1,0).during(.1)).add(0,new p(n).interpFrom("scale.x",.5).during(.3)).add(0,new p(n).interpFrom("scale.y",.5).during(.3)).add(function(){return M.remove(n)}).add(.2,new p(i).interp("alpha",1,0).during(.1)).add(function(){return M.remove(i)}).run(this.interpolationPool),(new d).add(.1,new p(o).interp("alpha",0,1).during(.2)).add(.3,new p(o).interp("alpha",1,0).during(.2)).add(.1,new p(o).interpFrom("scale.x",.5).during(.2)).add(.1,new p(o).interpFrom("scale.y",.5).during(.2)).add(function(){return M.remove(o)}).run(this.interpolationPool);for(var a=t*t*Math.PI/(this.world.tileSize*this.world.tileSize),s=0;s<5*a;s++){var l=f.randInt(24,40),u=f.randFloat(0,2*Math.PI),c=f.randInt(0,t);this.addParticle(A.identifier,{color:A.FIRE,x:e.x+Math.cos(u)*c,y:e.y+Math.sin(u)*c,size:l,duration:f.randFloat(.8,2),deltaX:f.randInt(-5,5),deltaY:-f.randInt(80,180),deltaSize:-l,easingX:m(4),layerId:S.PARTICLES})}}},{key:"explosionShockwave",value:function(e){var t=.75*this.camera.viewport.width,r=1-Math.distance(e,this.camera.center)/t;r<=0||this.camera.shake(r,.2)}},{key:"explosionTiles",value:function(e,t){for(var r=~~((e.y-t)/this.world.tileSize),n=~~((e.x-t)/this.world.tileSize),i=~~((e.y+t)/this.world.tileSize),o=~~((e.x+t)/this.world.tileSize),a=r;a<=i;a++)for(var s=n;s<=o;s++){var l=this.world.solidTileAtRowCol(a,s);l&&this.makeBitsFall(l)}}},{key:"makeBitsFall",value:function(r){for(var e,n=this,t=r.row+1;t<r.row+10;t++)if(this.world.solidTileAtRowCol(t,r.col)){e=t;break}if(e&&e!==r.row+1)for(var i=e*this.world.tileSize,o=function(){var e=new h.Graphics;e.beginFill(13211987),e.drawRect(-5,-5,10,10),e.position.x=10*f.randInt(0,8)+5+r.x,e.position.y=10*f.randInt(0,8)+5+r.y,n.view.addChild(e);var t=(i-e.position.y)/400+f.randFloat(0,.5);(new d).add(0,new p(e).interpTo("position.y",i,u.easeOutBounce).during(t)).add(0,new p(e).interpTo("rotation",f.randFloat(4*-Math.PI,4*Math.PI)).during(t)).add(new p(e).interp("alpha",1,0).during(.3)).add(function(){return M.remove(e)}).run(n.interpolationPool)},a=0;a<10;a++)o()}},{key:"shockwave",value:function(e,t,r){var n=this,i=this.camera.visibleRectangle(),o=this.camera.positionOnScreen(e,t),a=new l;a.center=[o.x/i.width,o.y/i.height],M.addFilter(this.view,a),(new d).add(new p(a).interp("time",0,1).during(r||.5)).add(function(){return M.removeFilter(n.view,a)}).run(this.interpolationPool)}},{key:"plasmaBulletExplosionAnimation",value:function(e){for(var t=f.randInt(10,20),r=0;r<5;r++)this.addParticle(A.identifier,{color:16711935,x:e.x,y:e.y,size:0,duration:f.randFloat(.4,.8),deltaX:f.randInt(-50,50),deltaY:f.randInt(-50,50),deltaSize:t,layerId:S.PARTICLES})}},{key:"shot",value:function(e){var t=this.world.cyclableById(e.equipmentHolderState.owner);if(t&&this.isPointVisible(t.x,t.y))for(var r=0;r<10;r++){var n=f.randInt(10,14);this.addParticle(A.identifier,{color:A.FIRE,x:t.x+t.facing*t.width+f.randInt(-20,20),y:t.y,duration:f.randFloat(.1,.3),deltaY:f.randInt(-100,-50),size:n,deltaSize:-n,layerId:S.PARTICLES})}}},{key:"bulletExplosionAnimation",value:function(e){if(this.isPointVisible(e.x,e.y))for(var t=0;t<10;t++){var r=f.randInt(3,8);this.addParticle(A.identifier,{color:A.FIRE,x:e.x+f.randInt(-20,20),y:e.y,duration:f.randFloat(.2,.4),deltaX:Math.cos(e.angle)*f.randInt(-40,-20),deltaY:f.randInt(-40,40),size:r,deltaSize:-r,layerId:S.PARTICLES})}}},{key:"addTrees",value:function(){for(var r=this,n=new s(1),e=[],t=1;t<this.world.rows-1;t++)for(var i=1;i<this.world.cols-1;i++){var o=this.world.matrix.get(t,i,w.VOID)!==w.VOID,a=this.world.matrix.get(t-1,i,w.VOID)!==w.VOID;!(this.world.matrix.get(t+1,i,w.VOID)!==w.VOID)||o||a||e.push({row:t,col:i})}n.pickset(e,.3*e.length).forEach(function(e){var t=new(n.pickone([c,v,b]))({x:(e.col+.5)*r.world.tileSize,y:(e.row+1)*r.world.tileSize});r.world.add(t)})}},{key:"itemPickupAnimation",value:function(e){var t=new h.Graphics;t.beginFill(16777215),t.drawCircle(0,0,150),this.layers.chunks.addChild(t),(new d).add(0,new p(t).interp("alpha",1,0).during(.3).progress(function(){t.position.x=e.x,t.position.y=e.y})).add(0,new p(t).interpTo("scale.x",0).during(.3)).add(0,new p(t).interpTo("scale.y",0).during(.3)).add(function(){return M.remove(t)}).run(this.interpolationPool)}}]),t}();t.exports=P},{"../../../../shared/elements/decorations/bush":862,"../../../../shared/elements/decorations/grass":863,"../../../../shared/elements/decorations/tree":864,"../../../../shared/elements/projectiles/bullet":877,"../../../../shared/elements/projectiles/plasma-bullet":882,"../../../../shared/util/array-utils":929,"../../../../shared/util/random":936,"../../../../shared/world/events/addition":940,"../../../../shared/world/events/equipment-shot":945,"../../../../shared/world/events/item-pickup":951,"../../../../shared/world/events/spawn":955,"../../../../shared/world/generate/mask":960,"../../util/oscillate":127,"../../util/pixi-utils":128,"../elements/element-view-controller-factory":25,"../particle-manager":57,"../smoke-particle":60,"../triangle-particle":61,"./explosion-tile-effect":62,"./tiles/tile-view-controller-factory":65,"./world-chunk-view-controller":67,"./world-layer":68,animate:161,chance:177,"pixi-filters":196,"pixi.js":329}],70:[function(e,t,r){var n=function(){function t(e){_classCallCheck2(this,t),this.game=e,this.parentDomains=["https://files.armorgames.com","https://cache.armorgames.com"],this.ready=!1,this.nextRequestId=0,this.pendingRequests={}}return _createClass2(t,[{key:"initialize",value:function(){var o=this;window.addEventListener("message",function(e){console.log("Received message from parent",e);var t=e.data.requestId,r=e.data.success,n=e.data.result,i=o.pendingRequests[t];i&&(delete o.pendingRequests[t],r?i.resolve(n):i.reject(n))},!1),this.apiCall("authenticateUser",[]).then(function(e){console.log("yay authed",e),o.game.userData.setValue("name",e.username)}).catch(function(e){return console.error(e)})}},{key:"apiCall",value:function(i,o){var a=this;return new Promise(function(e,t){var r={requestId:a.nextRequestId++,requestMethod:i,requestParams:o||[],resolve:e,reject:t},n={requestId:(a.pendingRequests[r.requestId]=r).requestId,requestMethod:r.requestMethod,requestParams:r.requestParams};a.parentDomains.forEach(function(e){window.parent.postMessage(n,e)})})}}]),t}();t.exports=n},{}],71:[function(e,t,r){var n=function(){function e(){_classCallCheck2(this,e)}return _createClass2(e,[{key:"contains",value:function(e,t){return!1}},{key:"down",value:function(e,t){}},{key:"action",value:function(e,t){}},{key:"cancel",value:function(){}},{key:"center",value:function(){}},{key:"move",value:function(e,t){}},{key:"setFocused",value:function(e){}},{key:"handleKeyDown",value:function(e){return!1}}]),e}();t.exports=n},{}],72:[function(e,t,r){var n=_createClass2(function e(){_classCallCheck2(this,e)});n.BUTTON_ACTION_BOTTOM=0,n.BUTTON_ACTION_RIGHT=1,n.BUTTON_ACTION_LEFT=2,n.BUTTON_ACTION_TOP=3,n.BUTTON_PAUSE=9,n.BUTTON_UP=12,n.BUTTON_DOWN=13,n.BUTTON_LEFT=14,n.BUTTON_RIGHT=15,n.TRIGGER_L1=4,n.TRIGGER_R1=5,n.TRIGGER_L2=6,n.TRIGGER_R2=7,n.LEFT_JOYSTICK_X_AXIS=0,n.LEFT_JOYSTICK_Y_AXIS=1,n.RIGHT_JOYSTICK_X_AXIS=2,n.RIGHT_JOYSTICK_Y_AXIS=3,t.exports=n},{}],73:[function(e,t,r){var n=e("rxjs/Rx"),i=e("./keyboard"),o=e("../is-mobile"),a=function(){function s(e){_classCallCheck2(this,s),this.game=e,this.mouseIsDown=!1,this.touches=[],this.gamepads=[],this.currentGamepad=null,this.previousGamepadStates={},this.deadAxisThreshold=.2,this.axisChangeThreshold=.1,this.ignoringAllInputs=!1,this.controlStyle=null,this.rx={},this.rx.controlStyle=new n.BehaviorSubject(this.controlStyle),this.updateControlStyle(o()?s.TOUCH:s.KEYBOARD)}return _createClass2(s,[{key:"keyOrButtonLabel",value:function(){return this.controlStyle===s.GAMEPAD?"button":"key"}},{key:"updateControlStyle",value:function(e){e!==this.controlStyle&&(this.downKeys={},this.controlStyle=e,this.rx.controlStyle.next(this.controlStyle))}},{key:"setup",value:function(){window.addEventListener("keydown",this.keyDown.bind(this),!1),window.addEventListener("keyup",this.keyUp.bind(this),!1),o()?(window.addEventListener("touchstart",this.touchStart.bind(this),!1),window.addEventListener("touchmove",this.touchMove.bind(this),!1),window.addEventListener("touchend",this.touchEnd.bind(this),!1)):(window.addEventListener("mousedown",this.mouseDown.bind(this),!1),window.addEventListener("mousemove",this.mouseMove.bind(this),!1),window.addEventListener("mouseup",this.mouseUp.bind(this),!1)),window.addEventListener("gamepadconnected",this.gamepadConnected.bind(this),!1),window.addEventListener("gamepaddisconnected",this.gamepadDisconnected.bind(this),!1),this.gamepadsCycle()}},{key:"ignoreAllInputs",value:function(){var r=this;this.ignoringAllInputs=!0,Object.keys(this.downKeys).forEach(function(e){if(r.downKeys[e]){r.downKeys[e]=0;var t=r.game.screen();t&&t.keyUp(e)}})}},{key:"stopIgnoringAllInputs",value:function(){this.ignoringAllInputs=!1}},{key:"keyDown",value:function(e){if(!this.game.formInputManager.visible){if(this.updateControlStyle(s.KEYBOARD),!this.downKeys[e.keyCode]){this.downKeys[e.keyCode]=Date.now();var t=this.game.screen();t&&!this.ignoringAllInputs&&t.keyDown(e.keyCode)}(e.keyCode===i.UP||e.keyCode===i.DOWN||e.keyCode===i.TAB||e.keyCode===i.SPACE&&!this.game.formInputManager.visible)&&e.preventDefault()}}},{key:"keyUp",value:function(e){if(!this.game.formInputManager.visible&&(this.updateControlStyle(s.KEYBOARD),this.downKeys[e.keyCode])){this.downKeys[e.keyCode]=0;var t=this.game.screen();t&&t.keyUp(e.keyCode)}}},{key:"updateTouches",value:function(e){this.touches=[];for(var t=0;t<e.touches.length;t++){var r=this.getCoordinates(e.touches[t]);this.touches.push(r)}}},{key:"touchStart",value:function(e){if(!this.game.formInputManager.visible){this.updateControlStyle(s.TOUCH),this.updateTouches(e);var t=this.game.screen();t&&t.touchStart(this.touches[0].x,this.touches[0].y)}}},{key:"touchMove",value:function(e){if(!this.game.formInputManager.visible){this.updateTouches(e);var t=this.game.screen();t&&t.touchMove(this.touches[0].x,this.touches[0].y)}}},{key:"touchEnd",value:function(e){if(!this.game.formInputManager.visible){this.updateTouches(e);var t=this.game.screen();t&&t.touchEnd()}}},{key:"mouseDown",value:function(e){this.mouseIsDown=!0;var t=this.getCoordinates(e),r=this.game.screen();r&&!this.ignoringAllInputs&&r.touchStart(t.x,t.y)}},{key:"mouseMove",value:function(e){var t=this.game.screen();if(t&&!this.ignoringAllInputs){var r=this.getCoordinates(e),n=this.game.screen().getAreaForCoordinates(r.x,r.y);this.game.screen().hideCursor||(this.game.canvasContainer.style.cursor=n?"pointer":"default"),t.mouseMove(r.x,r.y),this.mouseIsDown&&t.touchMove(r.x,r.y)}}},{key:"mouseUp",value:function(e){if(this.mouseIsDown){var t=this.getCoordinates(e),r=this.game.screen();r&&!this.ignoringAllInputs&&r.touchEnd(t.x,t.y)}}},{key:"getCoordinates",value:function(e){var t=this.game.canvas.getBoundingClientRect();return{x:this.game.params.width*(e.pageX-t.left)/t.width,y:this.game.params.height*(e.pageY-t.top)/t.height}}},{key:"isDown",value:function(e){return!!this.downKeys[e]}},{key:"isButtonDown",value:function(e){return!(!this.currentGamepad||!this.currentGamepad.buttons[e])&&this.currentGamepad.buttons[e].pressed}},{key:"getAxisValue",value:function(e){if(!this.currentGamepad)return 0;var t=this.currentGamepad.axes[e];return Math.abs(t)<this.deadAxisThreshold?0:t}},{key:"addGamepad",value:function(e){e&&-1===this.gamepads.indexOf(e)&&(this.gamepads.push(e),this.currentGamepad||(this.currentGamepad=e))}},{key:"gamepadConnected",value:function(e){console.log("Gamepad connected",e.gamepad.index,e.gamepad.id),this.findGamepads()}},{key:"gamepadDisconnected",value:function(e){console.log("Gamepad disconnected",e.gamepad.index,e.gamepad.id),this.findGamepads()}},{key:"findGamepads",value:function(){if(this.gamepads=[],this.currentGamepad=null,window.navigator.getGamepads)for(var e=window.navigator.getGamepads(),t=0;t<e.length;t++)this.addGamepad(e[t])}},{key:"gamepadsCycle",value:function(){var a=this;this.findGamepads(),window.requestAnimationFrame(this.gamepadsCycle.bind(this)),this.gamepads.forEach(function(r){var n=a.previousGamepadStates[r.id],i=!0;if(n){var o=a.game.screen();i=!1,r.buttons.forEach(function(e,t){o&&e.pressed!==n.buttons[t].pressed&&(e.pressed?o.buttonDown(r,t):o.buttonUp(r,t),i=!0)}),r.axes.forEach(function(e,t){o&&Math.abs(e-n.axes[t])>a.axisChangeThreshold&&(o.axisChange(r,t,e),i=!0)})}i&&(a.updateControlStyle(s.GAMEPAD),a.previousGamepadStates[r.id]={buttons:r.buttons.map(function(e){return{pressed:e.pressed}}),axes:r.axes.slice()})})}}]),s}();a.KEYBOARD=1,a.GAMEPAD=2,a.TOUCH=3,t.exports=a},{"../is-mobile":75,"./keyboard":74,"rxjs/Rx":379}],74:[function(e,t,r){var n=_createClass2(function e(){_classCallCheck2(this,e)});n.TAB=9,n.ENTER=13,n.ESC=27,n.SPACE=32,n.LEFT=37,n.UP=38,n.RIGHT=39,n.DOWN=40,n.RIGHT_SHIFT=13,n.LEFT_SHIFT=16,n.A=65,n.B=66,n.C=67,n.D=68,n.E=69,n.F=70,n.G=71,n.N=78,n.P=80,n.S=83,n.W=87,n.X=88,n.Y=89,t.exports=n},{}],75:[function(e,t,r){var n=!!(navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/Windows Phone/i));t.exports=function(){return n}},{}],76:[function(e,t,r){var i=e("../interaction/clickable-area"),n=function(e){_inherits2(n,i);var r=_createSuper(n);function n(e){var t;return _classCallCheck2(this,n),(t=r.call(this)).x=e.x||0,t.y=e.y||0,t.enabled=!!e.enabled,t.isDown=!1,t.actionCallback=e.actionCallback,t.interpolationPool=null,t.setFocused(!1),t}return _createClass2(n,[{key:"getView",value:function(){return this.view||(this.view=this.createView()),this.updateView(),this.view}},{key:"createView",value:function(){return null}},{key:"updateView",value:function(){}},{key:"action",value:function(){this.isDown&&(this.isDown=!1,this.actionCallback&&this.actionCallback(),this.updateView())}},{key:"contains",value:function(e,t){return Math.inRectangle(e,t,this.x,this.y,this.width,this.height)}},{key:"move",value:function(e,t){}},{key:"center",value:function(){return{x:this.x,y:this.y}}},{key:"down",value:function(){this.isDown=!0,this.setFocused(!0),this.updateView()}},{key:"cancel",value:function(){this.isDown=!1,this.updateView()}},{key:"setFocused",value:function(e){e!==this.focused&&(this.focused=e,this.updateView())}},{key:"setEnabled",value:function(e){e!==this.enabled&&(this.enabled=e,this.updateView())}}]),n}();t.exports=n},{"../interaction/clickable-area":71}],77:[function(e,t,r){var i=e("pixi.js"),o=e("../interaction/clickable-area"),a=e("../interaction/keyboard"),s=e("animate").Timeline,l=e("animate").Animation,n=function(e){_inherits2(n,o);var r=_createSuper(n);function n(e){var t;return _classCallCheck2(this,n),(t=r.call(this)).enabled=!0,t.x=e.x||0,t.y=e.y||0,t.bottomPadding=e.bottomPadding||0,t.width=e.width||440,t.height=e.height||90+t.bottomPadding,t.sliderHeight=e.sliderHeight||40,t.padding=e.padding||2,t.label=e.label||"",t.focused=!1,t.changeCallback=e.changeCallback,t.value=void 0!==e.value?e.value:1,t.minValue=e.minValue||0,t.maxValue=e.maxValue||1,t.precision=e.precision||.1,t.interpolationPool=null,t.view=null,t}return _createClass2(n,[{key:"getView",value:function(){return this.view||(this.view=this.createView(),this.updateView()),this.view}},{key:"createView",value:function(){var e=new i.Container;this.trackView=new i.Graphics,this.trackView.beginFill(16777215),this.trackView.drawRect(0,0,this.width,this.sliderHeight),this.trackView.position.y=this.height-this.sliderHeight-this.bottomPadding,e.addChild(this.trackView),this.sliderView=new i.Graphics,this.sliderView.beginFill(0),this.sliderView.drawRect(0,0,this.width-2*this.padding,this.sliderHeight-2*this.padding),this.sliderView.position.x=this.padding,this.sliderView.position.y=this.padding,this.trackView.addChild(this.sliderView),this.labelText=new i.Text("",{fill:"#ffffff",fontFamily:"SquarePixel",fontSize:22,dropShadow:!0,dropShadowColor:"#000",dropShadowAngle:Math.PI/2,dropShadowDistance:4,align:"center"}),this.labelText.anchor.x=.5,this.labelText.anchor.y=.5,this.labelText.position.x=this.width/2,this.labelText.position.y=(this.height-this.sliderHeight-this.bottomPadding)/2,e.addChild(this.labelText);return this.arrowLeft=new i.Graphics,this.arrowLeft.beginFill(16777215),this.arrowLeft.moveTo(-15,-15),this.arrowLeft.lineTo(0,0),this.arrowLeft.lineTo(-15,15),this.arrowLeft.position.x=-20,this.arrowLeft.position.y=this.height-this.bottomPadding-this.sliderHeight/2,e.addChild(this.arrowLeft),this.arrowRight=new i.Graphics,this.arrowRight.beginFill(16777215),this.arrowRight.moveTo(15,-15),this.arrowRight.lineTo(0,0),this.arrowRight.lineTo(15,15),this.arrowRight.position.x=this.width+20,this.arrowRight.position.y=this.arrowLeft.position.y,e.addChild(this.arrowRight),e}},{key:"updateView",value:function(){this.sliderView.scale.x=(this.value-this.minValue)/(this.maxValue-this.minValue),this.labelText.text=this.label,this.arrowRight.visible=this.arrowLeft.visible=this.focused,this.view.position.x=this.x,this.view.position.y=this.y}},{key:"setValue",value:function(e){var t=Math.round(e/this.precision)*this.precision;this.value=Math.between(this.minValue,t,this.maxValue),this.updateView(),this.changeCallback&&this.changeCallback(this.value)}},{key:"down",value:function(e,t){isNaN(e)||isNaN(t)||this.setValue(this.relativePosition(e)*(this.maxValue-this.minValue)+this.minValue)}},{key:"action",value:function(e,t){}},{key:"move",value:function(e,t){this.down(e,t)}},{key:"contains",value:function(e,t){return Math.inRectangle(e,t,this.x,this.y+this.height-this.sliderHeight-this.bottomPadding,this.width,this.sliderHeight)}},{key:"center",value:function(){return{x:this.x,y:this.y}}},{key:"relativePosition",value:function(e){return(e-this.x)/this.width}},{key:"setFocused",value:function(e){if(e!==this.focused&&(this.focused=e,this.updateView(),this.interpolationPool&&e)){(new s).add(0,new l(this.arrowLeft).interp("alpha",0,1).during(.1)).add(0,new l(this.arrowRight).interp("alpha",0,1).during(.1)).add(0,new l(this.arrowLeft).interpFromOffset("position.x",-100).during(.1)).add(0,new l(this.arrowRight).interpFromOffset("position.x",100).during(.1)).run(this.interpolationPool)}}},{key:"handleKeyDown",value:function(e){return(e===a.LEFT||e===a.RIGHT)&&(e===a.LEFT?this.setValue(this.value-this.precision):e===a.RIGHT&&this.setValue(this.value+this.precision),!0)}}]),n}();t.exports=n},{"../interaction/clickable-area":71,"../interaction/keyboard":74,animate:161,"pixi.js":329}],78:[function(e,t,r){var i=e("pixi.js"),o=e("./button"),a=e("../is-mobile"),s=e("animate").Animation,n=function(e){_inherits2(n,o);var r=_createSuper(n);function n(e){var t;return _classCallCheck2(this,n),e.enabled=!e.disabled,(t=r.call(this,e)).label=e.label||"",t.fontSize=e.fontSize||36,t.isDown=!1,t.view=t.createView(),t.view.debugLabel="TextButton",t.updateView(),t}return _createClass2(n,[{key:"createView",value:function(){var e=new i.Container;return this.labelText=new i.Text("",{fill:"#fff",fontFamily:"Gameplay",fontSize:this.fontSize,dropShadow:!0,dropShadowColor:"#000",dropShadowAngle:Math.PI/2,dropShadowDistance:3}),e.addChild(this.labelText),e}},{key:"setLabel",value:function(e){this.label=e.toString(),this.updateView()}},{key:"updateView",value:function(){_get(_getPrototypeOf(n.prototype),"updateView",this).call(this),this.view&&(this.view.position.x=this.x,this.view.position.y=this.y,this.labelText.text="+ "+this.label,this.isDown?this.labelText.style.fill="#000":this.focused?this.labelText.style.fill="#fff":this.labelText.style.fill="#999",this.labelText.updateText(),this.labelText.alpha=this.enabled?1:.5)}},{key:"width",get:function(){return 450}},{key:"height",get:function(){return this.labelText.height}},{key:"setFocused",value:function(e){if(e!==this.focused&&(_get(_getPrototypeOf(n.prototype),"setFocused",this).call(this,e),this.labelText)){var t=this.focused?-50:0;this.interpolationPool?a()||new s(this.labelText).interpTo("position.x",t).during(.1).run(this.interpolationPool):this.labelText.position.x=t}}}]),n}();t.exports=n},{"../is-mobile":75,"./button":76,animate:161,"pixi.js":329}],79:[function(e,t,r){var n=function(){function e(){_classCallCheck2(this,e)}return _createClass2(e,[{key:"screen",value:function(e){}},{key:"event",value:function(e,t,r){}}]),e}();t.exports=n},{}],80:[function(e,t,r){var i=e("../../../shared/model/player-set"),n=function(e){_inherits2(n,i);var r=_createSuper(n);function n(e){var t;return _classCallCheck2(this,n),(t=r.call(this)).ownPlayerId=e,t}return _createClass2(n,[{key:"ownPlayer",value:function(){return this.playerById(this.ownPlayerId)}}]),n}();t.exports=n},{"../../../shared/model/player-set":901}],81:[function(e,t,r){var o=e("rxjs/Rx"),a=e("../screens/menu/wait-screen"),s=e("../screens/world/multiplayer-screen"),l=e("../../../shared/communication/message-types"),n=function(){function r(e,t){_classCallCheck2(this,r),this.game=e,this.roomConnectionController=t,this.waitScreen=null}return _createClass2(r,[{key:"start",value:function(){var n=this;this.waitScreen=new a,this.game.pushScreen(this.waitScreen);var i=!1;o.Observable.timer(5e3).filter(function(){return!i}).take(1).filter(function(){return n.game.screen()===n.waitScreen}).subscribe(function(){n.finishFlow(),window.alert("Failed to connect within reasonable time")}),this.roomConnectionController.connect().then(function(t){var r;t.disconnected().take(1).subscribe(function(){return n.finishFlow()}),t.on(l.INITIALIZATION).subscribe(function(e){r&&r.pop(),i=!0,r=new s({channel:t,playerId:e.playerId,initialState:e.state,initialScoreboard:e.scoreboard}),n.game.setScreen(r)})}).catch(function(e){n.finishFlow(),window.alert(e),console.error(e)})}},{key:"finishFlow",value:function(){this.roomConnectionController.disconnect(),this.game.screen()===this.waitScreen?this.game.popScreen():this.game.mainMenu()}}]),r}();t.exports=n},{"../../../shared/communication/message-types":848,"../screens/menu/wait-screen":105,"../screens/world/multiplayer-screen":109,"rxjs/Rx":379}],82:[function(e,t,r){var n=e("./is-mobile"),i={width:1600,height:900,tileSize:80,chunkSize:3,debug:!1,demoMode:!1,ghost:!1,zoomdiff:0};if(t.exports=i,n()){if(window.innerHeight>window.innerWidth){var o=i.width;i.width=i.height,i.height=o}var a=i.width/i.height,s=window.innerWidth/window.innerHeight;a<s?i.height=i.width/s:i.width=i.height*s}},{"./is-mobile":75}],83:[function(e,t,r){var i=e("pixi.js"),l=e("chance"),o=e("animate").Timeline,a=e("animate").Animation,s=e("animate").Loop,u=e("../util/measure"),c=e("../util/pixi-utils"),h=e("./world-screen-rule"),d=e("../../../shared/world/generate/mask"),p=e("../../../shared/world/world"),f=e("../../../shared/world/events/spawn"),m=e("../../../shared/elements/characters/walking-character"),v=e("../../../shared/ai/path-detector"),b=e("../../../shared/controllers/node-hero-controller"),y=e("../../../shared/elements/items/equipment-item"),g=e("../../../shared/elements/equipment-holder"),w=e("../../../shared/equipments/equipment-factory"),_=e("../../../shared/equipments/shotgun-equipment"),x=e("../../../shared/equipments/plasma-gun-equipment"),S=e("../../../shared/equipments/grenade-launcher-equipment"),C=e("../../../shared/equipments/rocket-launcher-equipment"),k=e("../../../shared/equipments/flamethrower-equipment"),T=e("../../../shared/equipments/machine-gun-equipment"),A=e("../../../shared/elements/perks/character-health"),E=e("../../../shared/ai/equipment/equipment-controller-factory"),O=e("../is-mobile"),n=function(e){_inherits2(n,h);var r=_createSuper(n);function n(){var e;_classCallCheck2(this,n),e=r.call(this);var t=d.OBSTACLE;return e.matrix=[[t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t],[t,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,t],[t,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,t],[t,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,t],[t,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,t],[t,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,t],[t,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,t],[t,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,t],[t,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,t],[t,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,t],[t,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,t],[t,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,t],[t,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,t],[t,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,t,t,0,0,0,0,0,0,t],[t,0,0,0,t,t,0,0,0,t,t,0,0,t,t,0,0,0,0,0,0,t,t,0,0,0,t],[t,0,0,0,0,0,0,0,0,0,0,0,0,0,t,0,0,0,0,0,0,0,0,0,0,0,t],[t,0,0,0,0,0,0,0,0,0,0,0,0,0,t,0,0,0,0,t,t,t,t,t,0,0,t],[t,t,t,0,0,0,t,t,t,0,0,0,t,t,t,t,0,0,0,0,0,0,0,0,0,0,t],[t,0,0,0,0,0,t,t,t,0,t,t,t,0,0,0,0,0,t,t,0,0,0,0,0,0,t],[t,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,t,t,0,0,0,t],[t,0,0,0,t,0,0,0,0,0,0,0,0,0,0,t,t,0,0,0,0,t,t,0,0,0,t],[t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t]],e}return _createClass2(n,[{key:"setup",value:function(t){var r=this;_get(_getPrototypeOf(n.prototype),"setup",this).call(this,t),u("Detecting nodes",function(){var e=new v(t.world);r.pathNodes=e.detectNodes()});for(var e=0;e<3;e++)this.spawnCharacter(t);new s(10,function(){return r.spawnItem(t)}).run(t.interpolationPool),t.camera.follow({x:t.world.width/2,y:t.world.height-t.camera.viewport.height/2}),O()&&(t.camera.bounds.x=-500,t.camera.bounds.y=-500,t.camera.bounds.width=9999,t.camera.bounds.height=9999),t.camera.recenter()}},{key:"spawnCharacter",value:function(e){var t=this,r=new l,n=r.pickone(this.pathNodes),i=new m({x:n.x,y:n.y,speed:400});e.world.add(i);var o=new f(i.state());e.world.addEvent(o);var a=new A({health:5,maxHealth:5,owner:i.id});e.world.add(a),this.subscription(a.rx.died.delay(2e3)).subscribe(function(){return t.spawnCharacter(e)});var s=new b({character:i,nodes:this.pathNodes,equipmentControllerFactory:new E});e.gameState.addController(s),e.world.add(new g({owner:i.id,equipment:r.pickone([new _({}),new x({}),new C({}),new S({}),new k({}),new T({})])}))}},{key:"spawnItem",value:function(e){if(!(5<e.world.itemCountInBucket("item"))){var t=new l,r=t.pickone(this.pathNodes);e.world.add(new y({x:r.x,y:r.y,equipment:t.pickone([new x({}),new C({}),new S({}),new k({}),new T({})])},new w))}}},{key:"animateIn",value:function(e){var t=new i.Graphics;return t.beginFill(0),t.drawRect(0,0,e.game.params.width,e.game.params.height),e.view.addChild(t),(new o).add(new a(t).interp("alpha",1,0).during(1)).add(function(){return c.remove(t)})}},{key:"getWorld",value:function(e){return new p({matrix:this.matrix,tileSize:e.game.params.tileSize,chunkSize:e.game.params.chunkSize})}},{key:"colorForCharacterId",value:function(e){return new l(e).pickone([65280,16711680,255,16776960,16711935,65535,16746496,16711816,65416,35071,8913151])}}]),n}();t.exports=n},{"../../../shared/ai/equipment/equipment-controller-factory":828,"../../../shared/ai/path-detector":837,"../../../shared/controllers/node-hero-controller":856,"../../../shared/elements/characters/walking-character":860,"../../../shared/elements/equipment-holder":868,"../../../shared/elements/items/equipment-item":870,"../../../shared/elements/perks/character-health":874,"../../../shared/equipments/equipment-factory":886,"../../../shared/equipments/flamethrower-equipment":888,"../../../shared/equipments/grenade-launcher-equipment":889,"../../../shared/equipments/machine-gun-equipment":890,"../../../shared/equipments/plasma-gun-equipment":891,"../../../shared/equipments/rocket-launcher-equipment":892,"../../../shared/equipments/shotgun-equipment":898,"../../../shared/world/events/spawn":955,"../../../shared/world/generate/mask":960,"../../../shared/world/world":974,"../is-mobile":75,"../util/measure":125,"../util/pixi-utils":128,"./world-screen-rule":88,animate:161,chance:177,"pixi.js":329}],84:[function(e,t,r){var d=e("rxjs/Rx"),p=e("pixi.js"),f=e("chance"),m=e("stats.js"),v=e("animate").Timeline,b=e("animate").Animation,i=e("./world-screen-rule"),o=e("../../../shared/world/world"),y=e("../../../shared/world/events/damage"),g=e("../../../shared/ui/hud-items"),a=e("../../../shared/authority/client-authority"),s=e("../../../shared/authority/server-authority"),w=e("../../../shared/communication/message-types"),l=e("../../../shared/communication/lag-tracker"),u=e("../communication/webrtc-connection-controller"),c=e("../../../shared/communication/peer-to-peer-channel"),_=e("../multiplayer/client-player-set"),x=e("../../../shared/model/scoreboard"),S=e("../../../shared/model/log-entry"),C=e("../../../shared/model/poll"),k=e("../../../shared/model/poll-types"),T=e("../util/format"),A=e("../util/notifications-controller"),E=e("../util/pixi-utils"),O=e("../interaction/keyboard"),M=e("../ui/scoreboard-view-controller"),P=e("../ui/leaderboard-view-controller"),I=e("../ui/death-cam-info-view-controller"),R=e("../screens/menu/confirm-menu-screen"),D=e("../screens/world/replay-screen"),B=e("../graphics/hud/video-view-controller"),L=e("../graphics/player-indicator"),F=e("../screens/menu/poll-menu-screen"),j=e("../../../shared/ai/path-detector"),n=function(e){_inherits2(h,i);var n=_createSuper(h);function h(e){var t;_classCallCheck2(this,h),(t=n.call(this)).playerId=e.playerId,t.channel=e.channel,t.initialState=e.initialState,t.characterId=null;var r=e.maxStateBacklogInSeconds||.3;return t.maxStateBacklog=t.framerate*r,t.lastReceivedStateId=t.initialState.id,t.stateId=0,t.serverLagTracker=new l,t.authority=new a,t.authority.characterId=t.characterId,t.players=new _(t.playerId),t.players.parsePlayers(t.initialState.players),t.playerIndicators={},t.previousPlayers={},t.serverAuthority=new s(t.players),t.serverHUDSettings={},t.addedLogEntrySubject=new d.Subject,t.scoreboard=new x,t.scoreboard.parseState(e.initialScoreboard),t.peerConnections=[],t.streamByPlayerId={},t.notificationsController=new A,t}return _createClass2(h,[{key:"getAuthority",value:function(){return this.authority}},{key:"setup",value:function(o){var i=this;_get(_getPrototypeOf(h.prototype),"setup",this).call(this,o),o.game.soundManager.setLoopMuted(!1),this.deathCamInfoViewController=new I,o.gameState.parseState(this.initialState.gameState,this.serverAuthority),this.subscription(this.channel.on(w.HUD_SETTINGS)).subscribe(function(e){i.serverHUDSettings=e,i.updateHUD(o)}),this.subscription(this.channel.on(w.SCORE_CHANGE)).subscribe(function(e){o.hero&&o.scoreChangeText(e.text,o.hero.x,o.hero.y),window.PokiSDK&&Number.isInteger(e.scoreChange)&&PokiSDK.happyTime(e.scoreChange/100)}),this.subscription(this.channel.on(w.SCOREBOARD)).subscribe(function(e){return i.scoreboard.parseState(e)});var e=this.channel.on(w.LOG_ENTRY).map(function(e){return S.fromJSON(e)}).share();this.subscription(e.map(function(e){return i.stringComponentsForLogEntry(e)}).filter(function(e){return e})).subscribe(function(e){return i.addLogEntry(o,e)}),this.subscription(e.filter(function(e){return e.type===S.ROUND_ENDED&&e.data.winners&&e.data.winners.length}).map(function(e){return 0<=e.data.winners.indexOf(i.playerId)})).subscribe(function(e){o.game.soundManager.setLoopMuted(!0),o.soundPool.playWithVolume(e?"round-win":"round-lose",1),window.PokiSDK&&e&&PokiSDK.happyTime(1),setTimeout(function(){o.game.showInterstitialAd()},4e3)}),this.subscription(this.addedLogEntrySubject.switchMap(function(){return d.Observable.interval(1e4)})).subscribe(function(){return o.hud.log.removeOldestEntry([])}),this.subscription(o.rx.foreground.filter(function(e){return e}).switchMap(function(){return i.channel.on(w.POLL_OPEN)})).subscribe(function(e){return i.showPoll(o,C.fromJSON(e.poll),e.canRespond)}),this.subscription(this.channel.on(w.POLL_CLOSE)).subscribe(function(){return i.closePoll(o)}),this.subscription(this.channel.on(w.REPLAY)).subscribe(function(e){return i.showReplay(o,e.states,e.targetIds,e.indicators,e.replayType)}),this.subscription(this.channel.on(w.STATE)).subscribe(function(e){return i.lastReceivedStateId=e.id}),this.subscription(this.channel.on(w.STATE)).subscribe(function(e){return i.serverLagTracker.markReceived(e.lastReceivedStateId)}),o.game.params.debug&&(this.serverLatencyStats=new m,this.serverLatencyStats.showPanel(1),this.serverLatencyStats.dom.style.left="160px",window.document.body.appendChild(this.serverLatencyStats.dom),this.subscription(this.channel.on(w.STATE)).subscribe(function(){i.serverLatencyStats.end(),i.serverLatencyStats.begin()})),this.subscription(this.channel.on(w.STATE)).subscribe(function(e){return i.players.parsePlayers(e.players)}),this.subscription(this.channel.on(w.STATE)).subscribe(function(e){o.game.params.ghost&&e.gameState.world.cyclables.forEach(function(e){e.id===i.characterId&&(e.id=i.characterId+"-ghost")}),o.gameState.parseState(e.gameState,i.serverAuthority)}),this.subscription(this.channel.on(w.RESPAWN)).subscribe(function(e){return i.respawn(o,e)}),this.subscription(this.channel.on(w.HUD_MESSAGE)).subscribe(function(e){return o.hud.announce(e.message)});var a=!1;this.subscription(this.channel.on(w.CAMERA_TARGET).delay(100)).subscribe(function(e){if(E.remove(i.deathCamInfoViewController.view),e.position)o.camera.follow(e.position),o.camera.zoomTo(1,.3);else if(e.playerId){var t=i.players.playerById(e.playerId);if(t){var r=i.scoreboard.rowForPlayer(t.id);i.deathCamInfoViewController.setPlayer(t,{isSelf:t.id===i.playerId,items:[{label:"Score",value:r?r.score:"-"},{label:"Frags",value:r?r.kills:"-"},{label:"Deaths",value:r?r.deaths:"-"}]}),i.deathCamInfoViewController.show(),i.deathCamInfoViewController.view.position.x=(o.game.params.width-i.deathCamInfoViewController.view.width)/2,i.deathCamInfoViewController.view.position.y=.6*o.game.params.height,o.view.addChild(i.deathCamInfoViewController.view),(new v).add(0,new b(i.deathCamInfoViewController.view).interpFromOffset("position.y",200).during(.3)).add(0,new b(i.deathCamInfoViewController.view).interp("alpha",0,1).during(.3)).run(o.interpolationPool)}var n=o.world.cyclableById(t.characterId);return void(n&&(o.camera.zoomTo(2,.3),o.camera.follow(n)))}a||(a=!0,o.camera.recenter())}),this.subscription(d.Observable.interval(1e3/60).filter(function(){return!i.serverLagTracker.isLagging(i.maxStateBacklog)})).subscribe(function(){return i.transmitState(o)}),this.subscription(d.Observable.combineLatest(o.game.userData.rx.value("name"),o.game.userData.rx.value("color"))).subscribe(function(e){return i.channel.send(w.PLAYER_SETTINGS,{name:e[0],color:e[1]})}),this.subscription(o.rx.cycle.filter(function(){return null!==o.gameState.timerSettings.reference})).subscribe(function(){var e=Math.max(0,o.gameState.timerSettings.time(o.gameState.clock));o.hud.setLabelAndValue(g.TIMER,"Time Left",T.time(e))}),this.subscription(o.rx.cycle.filter(function(){return null!==o.gameState.timerSettings.reference}).map(function(){return Math.max(0,~~o.gameState.timerSettings.time(o.gameState.clock))}).filter(function(e){return e<=10}).distinctUntilChanged().throttleTime(500)).subscribe(function(){return o.game.soundManager.play("tick")}),this.subscription(o.rx.cycle).subscribe(function(){if(o.hero){var e=o.hero.equipmentHolders()[0];if(e&&e.equipment){var t=e.equipment,r=0<t.ammoPerShot?t.ammo:"-";o.hud.setLabelAndValue(g.AMMO,t.printableLabel,r)}}});var t=new P({scoreboard:this.scoreboard,playerSet:this.players,interpolationPool:o.interpolationPool});t.view.position.x=o.game.params.width-300,t.view.position.y=300,o.view.addChild(t.view),this.subscription(d.Observable.interval(1e3)).subscribe(function(){t.update(),t.view.position.y=(o.game.params.height-t.requiredHeight())/2});var r=new p.Graphics;r.beginFill(0,.5),r.drawRect(0,0,o.game.params.width,o.game.params.height),o.view.addChild(r);var n=new M({scoreboard:this.scoreboard,playerSet:this.players});n.view.position.x=(o.game.params.width-n.view.width)/2,n.view.position.y=(o.game.params.height-n.view.height)/2,r.addChild(n.view);var s=o.rx.isKeyDown(O.TAB).startWith(!1);if(this.subscription(s).subscribe(function(e){r.visible=e,t.view.visible=!e}),this.subscription(s.switchMap(function(e){return e?d.Observable.interval(1e3).startWith(null):new d.Subject})).subscribe(function(){return n.updateLabels()}),this.subscription(o.rx.isKeyDown(O.Y).distinctUntilChanged().filter(function(e){return!e})).subscribe(function(){return i.promptChatMessage(o)}),this.subscription(this.channel.on(w.LOG_ENTRY).map(function(e){return S.fromJSON(e)}).filter(function(e){return e.type===S.CHAT_MESSAGE&&e.data.player.id!==i.playerId})).subscribe(function(e){return i.notificationsController.notify(e.data.player.name+" said",e.data.message)}),this.subscription(this.channel.on(w.LOG_ENTRY).map(function(e){return S.fromJSON(e)}).filter(function(e){return e.type===S.PLAYER_JOINED&&e.data.player.id!==i.playerId})).subscribe(function(e){return i.notificationsController.notify("New player",e.data.player.name+" joined the brawl")}),this.notificationsController.requestPermission().catch(function(e){return console.error(e)}),this.subscription(this.players.rx.list).subscribe(function(){return i.checkPlayersChange(o)}),this.videoViewController=new B({interpolationPool:o.interpolationPool,width:o.game.params.width,height:o.game.params.height,streamsX:o.game.params.width-100,renderer:o.game.renderer}),o.view.addChild(this.videoViewController.view),this.subscription(this.scoreboard.rx.changed).subscribe(function(){return i.videoViewController.rearrange(i.scoreboard.rows.map(function(e){return e.playerId}))}),this.subscription(this.channel.on(w.LOG_ENTRY).map(function(e){return S.fromJSON(e)}).filter(function(e){return e.type===S.FRAG&&e.data.killer&&e.data.player.id===i.playerId&&e.data.killer.id!==e.data.player.id})).subscribe(function(e){return i.videoViewController.highlightStream(e.data.killer.id)}),this.subscription(o.gameState.rx.appliedEvents.filter(function(e){return e instanceof y}).map(function(e){return i.players.playerByCharacterId(e.characterId)}).filter(function(e){return e})).subscribe(function(e){return i.videoViewController.showStreamHurt(e.id)}),this.subscription(this.channel.on(w.LOG_ENTRY).map(function(e){return S.fromJSON(e)}).filter(function(e){return e.type===S.FRAG})).subscribe(function(e){return i.videoViewController.showStreamDied(e.data.player.id)}),"king-of-the-hill"===this.initialState.gameMode&&this.setupCrownIndicator(o),window.localRoom){var l=new j(o.world).detectNodes(),u=new f(1);l.forEach(function(i){i.connections.forEach(function(e){var t=Math.distance(i,e),r=Math.atan2(e.y-i.y,e.x-i.x),n=new p.Graphics;n.lineStyle(2,u.integer({min:0,max:16777215})),n.moveTo(i.x,i.y),n.lineTo(i.x+Math.cos(r+Math.PI/32)*t/2,i.y+Math.sin(r+Math.PI/32)*t/2),n.lineTo(e.x,e.y),o.worldViewController.view.addChildAt(n,0)})});var c=new p.Graphics;o.worldContainer.addChild(c),this.subscription(o.rx.cycle).subscribe(function(){c.clear(),c.lineStyle(5,16711680),window.localRoom.gameState.controllers.forEach(function(e){(e.path||[]).forEach(function(e,t){0===t?c.moveTo(e.x,e.y):c.lineTo(e.x,e.y)})})})}window.PokiSDK&&window.PokiSDK.gameplayStart()}},{key:"tearDown",value:function(e){_get(_getPrototypeOf(h.prototype),"tearDown",this).call(this,e),e.game.soundManager.setLoopMuted(!1),this.peerConnections.forEach(function(e){return e.close()}),this.peerConnections=[];var t=this.streamByPlayerId[this.playerId];t&&t.getTracks().slice().forEach(function(e){e.stop(),t.removeTrack(e)}),this.serverLatencyStats&&this.serverLatencyStats.dom.parentNode.removeChild(this.serverLatencyStats.dom),window.PokiSDK&&window.PokiSDK.gameplayStop()}},{key:"transmitState",value:function(e){var t=this.transmittableState(e);this.channel.send(w.STATE,t),this.serverLagTracker.markSent(this.stateId),this.stateId++}},{key:"transmittableState",value:function(e){var t=e.gameState.state(this.serverAuthority);t.events=e.world.eventProxy.buffer.map(function(e){return e.toJSON()});var r={lastReceivedStateId:this.lastReceivedStateId,id:this.stateId,gameState:t};return e.world.eventProxy.clear(),r}},{key:"getWorld",value:function(e){return new o({matrix:this.initialState.gameState.world.matrix,tileSize:e.game.params.tileSize,chunkSize:e.game.params.chunkSize})}},{key:"getPauseOptions",value:function(e){var t=[this.resumeOption(e),this.settingsOption(e)];this.players.count<6&&t.push(this.addBotOption(e));var r=!1;return this.players.forEach(function(e){r=r||e.isBot}),r&&t.push(this.removeBotOption(e)),t.push(this.quitOption(e)),t}},{key:"addBotOption",value:function(){var t=this;return{label:"Add bot",action:function(e){t.channel.send(w.POLL_REQUEST,{type:k.ADD_BOT}),e.back()}}}},{key:"removeBotOption",value:function(){var t=this;return{label:"Remove a bot",action:function(e){t.channel.send(w.POLL_REQUEST,{type:k.REMOVE_BOT}),e.back()}}}},{key:"quitOption",value:function(){var t=this;return{label:"Main Menu",action:function(e){e.openSubMenu(new R({question:"Ragequit?",description:"Other players will make fun of you",yes:function(){return t.channel.disconnect()},no:function(e){return e.back()}}))}}}},{key:"hudTopBarItems",value:function(){return this.serverHUDSettings.topBarItems||[]}},{key:"respawn",value:function(t,e){var r=this;this.characterId=e.characterId,this.authority.characterId=this.characterId,this.subscription(t.world.rx.additions.filter(function(e){return e.id===r.characterId}).take(1)).subscribe(function(e){return t.setupHero(e)})}},{key:"checkPlayersChange",value:function(t){var r=this,n={};this.players.forEach(function(e){n[e.id]=!0,r.previousPlayers[e.id]||r.newPlayer(t,e)}),this.previousPlayers=n}},{key:"newPlayer",value:function(e,t){var r=this;t.id!==this.playerId&&this.setupIndicator(e,t);var n=this.players.playerById(this.playerId);if(n){var i=t.sendAudioVideo&&n.receiveAudioVideo,o=n.sendAudioVideo&&t.receiveAudioVideo;if(i||o)if(t.id===this.playerId){n.sendAudioVideo&&window.navigator.mediaDevices.getUserMedia({video:!0}).then(function(e){r.streamByPlayerId[r.playerId]=e,r.videoViewController.addStream(n.id,{stream:e})}).catch(function(e){return console.error(e)})}else this.initiateAudioVideoConnection(e,t)}}},{key:"setupIndicator",value:function(t,r){var e=this,n=new L;t.worldContainer.addChild(n),this.subscription(t.rx.cycle.takeUntil(this.players.rx.list.filter(function(){return!e.players.playerById(r.id)}))).subscribe(function(){var e=t.world.cyclableById(r.characterId);e&&t.worldViewController.isVisible(e,0,0)?(n.label.text!==r.name&&(n.label.text=r.name),n.visible=!0,n.position.x=e.x,n.position.y=e.y):n.visible=!1},null,function(){E.remove(n)})}},{key:"setupCrownIndicator",value:function(r){var n=new p.Sprite(p.Texture.fromImage("assets/textures/crown-item.png"));n.anchor.x=.5,n.anchor.y=.5,n.width=80,n.height=80,r.worldContainer.addChild(n);var i=new p.Graphics;i.lineStyle(2,0),i.beginFill(16777215),i.moveTo(50,0),i.lineTo(40,-10),i.lineTo(40,10),i.closePath(),n.addChild(i),this.subscription(r.rx.postCycle).map(function(){var e=r.world.itemsInBucket("crown");if(e&&e.length&&e[0].owner)return r.world.cyclableById(e[0].owner);var t=r.world.itemsInBucket("crown-item");return t&&t.length?t[0]:null}).subscribe(function(e){if(e)if(r.worldViewController.isPointVisible(e.x,e.y,100,100))n.visible=!1;else{n.visible=!0;var t=r.camera.visibleRectangle();n.position.x=Math.between(t.x+200,e.x,t.x+t.width-200),n.position.y=Math.between(t.y+200,e.y,t.y+t.height-200),i.rotation=Math.atan2(e.y-n.position.y,e.x-n.position.x)}else n.visible=!1})}},{key:"initiateAudioVideoConnection",value:function(t,r){var n=this;if(window.navigator.mediaDevices&&window.navigator.mediaDevices.getUserMedia){var e=this.players.playerById(this.playerId);if(e){var i=function(e){n.initiatePeerToPeerConnection(t,r,e)};if(r.receiveAudioVideo&&e.sendAudioVideo){window.navigator.mediaDevices.getUserMedia({video:!0,audio:!0}).then(function(e){return i(e)}).catch(function(e){console.error(e),i(null)})}else i(null)}}}},{key:"initiatePeerToPeerConnection",value:function(e,t,r){var n,i=this,o=new c({io:this.channel,peerId:t.id}),a=new u({signalingChannel:o});r&&a.connection.addStream(r),this.peerConnections.push(a.connection),this.subscription(a.connection.rx.receivedStream()).subscribe(function(e){return n=e}),this.subscription(a.rx.connected.filter(function(e){return e}).take(1)).subscribe(function(){n&&(i.streamByPlayerId[t.id]=n,i.videoViewController.addStream(t.id,{stream:n})),i.subscription(a.rx.connected.filter(function(e){return!e}).subscribe(function(){a.connection.close(),i.videoViewController.removeStream(t.id),i.streamByPlayerId[t.id]=null}))}),this.playerId<t.id&&a.initiate().catch(function(e){return console.error(e)})}},{key:"colorForCharacterId",value:function(e){var t=this.players.playerByCharacterId(e);return t?t.color:null}},{key:"showCharacterHealth",value:function(e){return e!==this.characterId}},{key:"logEntryNameForPlayer",value:function(e){return e.id===this.playerId?"You":e.name+(e.isBot?" (AI)":"")}},{key:"stringComponentsForLogEntry",value:function(e){return e.type===S.CHAT_MESSAGE?[{text:this.logEntryNameForPlayer(e.data.player),color:e.data.player.color},{text:": "+e.data.message}]:e.type===S.PLAYER_LEFT?[{text:e.data.player.name,color:e.data.player.color},{text:" left"}]:e.type===S.ROUND_ENDED?[{text:"Round is over"}]:e.type===S.FRAG?e.data.killer&&e.data.player.id!==e.data.killer.id?[{text:this.logEntryNameForPlayer(e.data.killer),color:e.data.killer.color},{text:" killed "},{text:this.logEntryNameForPlayer(e.data.player),color:e.data.player.color}]:[{text:this.logEntryNameForPlayer(e.data.player),color:e.data.player.color},{text:" committed suicide"}]:e.type===S.POLL_RESPONSE?[{text:this.logEntryNameForPlayer(e.data.player),color:e.data.player.color},{text:" voted "},{text:e.data.responseLabel,color:e.data.player.color}]:e.type===S.CROWN_DROPPED?[{text:this.logEntryNameForPlayer(e.data.player),color:e.data.player.color},{text:" lost the crown"}]:e.type===S.CROWN_ACQUIRED?[{text:this.logEntryNameForPlayer(e.data.player),color:e.data.player.color},{text:" found the crown"}]:null}},{key:"promptChatMessage",value:function(t){var r=this;t.game.formInputManager.requestInput("Enter your message:").then(function(e){return r.doSendMessage(t,e)}).catch(function(e){console.error(e)})}},{key:"doSendMessage",value:function(e,t){t&&this.channel.send(w.CHAT_MESSAGE,{message:t})}},{key:"showPoll",value:function(e,t,r){var n=this;this.closePoll(e),r&&(this.pollScreen=new F(t),e.game.pushScreen(this.pollScreen),this.subscription(this.pollScreen.rx.pickedOption.take(1)).subscribe(function(e){n.channel.send(w.POLL_RESPONSE,e)})),this.addLogEntry(e,[{text:"Poll Started: "},{text:t.prompt,color:16776960}]),this.poll=t}},{key:"closePoll",value:function(e){this.poll&&(this.poll=null,this.addLogEntry(e,[{text:"Poll Closed"}]),this.pollScreen&&(this.pollScreen.pop(),this.pollScreen=null))}},{key:"addLogEntry",value:function(e,t){e.hud.log.add(t),this.addedLogEntrySubject.next()}},{key:"showReplay",value:function(e,t,r,n,i){var o=this;e.game.interstitialAdInProgress||(e.game.pushScreen(new D({targetIds:r,states:t,indicators:n,replayType:i,roundId:this.initialState.roundId})),this.subscription(e.rx.foreground.filter(function(e){return e}).take(1)).subscribe(function(){o.channel.send(w.REPLAY_WATCHED,{}),o.animateIn(e).runAsMain(e.interpolationPool)}))}},{key:"skyColor",value:function(){var e=i.skyColors();return e[this.initialState.roundId%e.length]}}]),h}();t.exports=n},{"../../../shared/ai/path-detector":837,"../../../shared/authority/client-authority":841,"../../../shared/authority/server-authority":844,"../../../shared/communication/lag-tracker":846,"../../../shared/communication/message-types":848,"../../../shared/communication/peer-to-peer-channel":849,"../../../shared/model/log-entry":900,"../../../shared/model/poll":905,"../../../shared/model/poll-types":904,"../../../shared/model/scoreboard":906,"../../../shared/ui/hud-items":927,"../../../shared/world/events/damage":943,"../../../shared/world/world":974,"../communication/webrtc-connection-controller":6,"../graphics/hud/video-view-controller":54,"../graphics/player-indicator":59,"../interaction/keyboard":74,"../multiplayer/client-player-set":80,"../screens/menu/confirm-menu-screen":92,"../screens/menu/poll-menu-screen":103,"../screens/world/replay-screen":111,"../ui/death-cam-info-view-controller":117,"../ui/leaderboard-view-controller":119,"../ui/scoreboard-view-controller":120,"../util/format":124,"../util/notifications-controller":126,"../util/pixi-utils":128,"./world-screen-rule":88,animate:161,chance:177,"pixi.js":329,"rxjs/Rx":379,"stats.js":822}],85:[function(e,t,r){var l=e("rxjs/Rx"),u=e("../menu/slider"),n=e("./world-screen-rule"),i=e("../../../shared/world/world"),c=e("../../../shared/world/events/authority-event-proxy"),o=e("../multiplayer/client-player-set"),a=e("../../../shared/authority/recorder-authority"),h=e("../../../shared/authority/server-authority"),d=e("../interaction/keyboard"),p=e("../graphics/player-indicator"),f=e("../util/pixi-utils"),s=function(e){_inherits2(s,n);var r=_createSuper(s);function s(e){var t;return _classCallCheck2(this,s),(t=r.call(this)).states=e.recording.states,t.players=new o,t.authority=new a,t.serverAuthority=new h,t.rx.resetTimeline=new l.Subject,t}return _createClass2(s,[{key:"getAuthority",value:function(){return this.authority}},{key:"setup",value:function(n){var r=this;_get(_getPrototypeOf(s.prototype),"setup",this).call(this,n),n.world.eventProxy=new c(n.gameState,this.authority),n.gameState.parseState(this.states[0].gameState,this.serverAuthority);var i={x:n.world.width/2,y:n.world.height/2};n.camera.follow(i),this.subscription(l.Observable.combineLatest(n.rx.isKeyDown(d.LEFT).startWith(!1),n.rx.isKeyDown(d.RIGHT).startWith(!1),n.rx.isKeyDown(d.UP).startWith(!1),n.rx.isKeyDown(d.DOWN).startWith(!1),n.rx.isKeyDown(d.LEFT_SHIFT).startWith(!1)).filter(function(e){return!e[4]}).map(function(e){return{left:e[0],right:e[1],up:e[2],down:e[3]}}).switchMap(function(t){return n.rx.cycle.map(function(e){return{elapsed:e,directions:t}})})).subscribe(function(e){var t=0,r=0;e.directions.left?t=-1:e.directions.right&&(t=1),e.directions.up?r=-1:e.directions.down&&(r=1),i.x+=600*t*e.elapsed,i.y+=600*r*e.elapsed,i.x=Math.between(n.game.params.width/2,i.x,n.world.width-n.game.params.width/2),i.y=Math.between(n.game.params.height/2,i.y,n.world.height-n.game.params.height/2)});var e=.8*n.game.params.width;this.progressSlider=new u({label:"",value:0,precision:1e-6,changeCallback:function(e){r.setupTimeline(n,e),n.isGameStatePaused=!0},x:(n.game.params.width-e)/2,y:n.game.params.height-200,width:e}),n.view.addChild(this.progressSlider.getView()),n.addClickableArea(this.progressSlider),this.progressSlider.updateView();var o=this.states[0].gameState.clock,t=this.states[this.states.length-1].gameState.clock,a=t-o;this.setupTimeline(n,0),this.subscription(l.Observable.combineLatest(n.rx.isKeyDown(d.LEFT).startWith(!1),n.rx.isKeyDown(d.RIGHT).startWith(!1),n.rx.isKeyDown(d.LEFT_SHIFT).startWith(!1)).switchMap(function(t){return n.rx.cycle.filter(function(){return t[2]&&(t[0]||t[1])}).map(function(e){return(t[0]?-1:1)*e*(.5/a)})})).subscribe(function(e){n.isGameStatePaused=!0;var t=(n.gameState.clock-o)/a;r.setupTimeline(n,t+e),console.log(t,e)}),this.subscription(l.Observable.merge(n.rx.cycle.filter(function(){return n.gameState.clock>t}).delay(1),n.rx.isKeyDown(d.ENTER).filter(function(e){return e})).take(1)).subscribe(function(){return n.game.mainMenu()}),this.subscription(n.rx.isKeyDown(d.SPACE).distinctUntilChanged().delay(1).filter(function(e){return e})).subscribe(function(){n.isGameStatePaused=!n.isGameStatePaused}),this.subscription(this.players.rx.list).subscribe(function(){return r.checkPlayersChange(n)})}},{key:"getWorld",value:function(e){return new i({matrix:this.states[0].gameState.world.matrix,tileSize:e.game.params.tileSize,chunkSize:e.game.params.chunkSize})}},{key:"setupTimeline",value:function(r,n){var i,o,a=this,s=this.states[0].gameState.clock,l=this.states[this.states.length-1].gameState.clock,e=l-s;if(this.rx.resetTimeline.next(),r.world.cyclables.slice().forEach(function(e){r.world.remove(e),r.worldViewController.removeViewForElement(e)}),this.states.forEach(function(e){var t=(e.gameState.clock-s)/(l-s);t<n?i=e:(o||(o=e),a.subscription(r.rx.cycle.takeUntil(a.rx.resetTimeline).filter(function(){return r.gameState.clock>e.gameState.clock}).take(1)).subscribe(function(){r.gameState.parseState(e.gameState,a.serverAuthority),a.players.parsePlayers(e.players),a.progressSlider.value=t,a.progressSlider.updateView()}))}),r.gameState.clock=0,i&&o){r.gameState.clock=i.gameState.clock,r.gameState.parseState(i.gameState,this.serverAuthority),this.players.parsePlayers(i.players);var t=s+n*e;r.gameState.cycle(t-r.gameState.clock)}this.progressSlider.value=n}},{key:"checkPlayersChange",value:function(t){var r=this,n={};this.players.forEach(function(e){n[e.id]=!0,r.previousPlayers[e.id]||r.newPlayer(t,e)}),this.previousPlayers=n}},{key:"newPlayer",value:function(e,t){this.setupIndicator(e,t)}},{key:"setupIndicator",value:function(t,r){var e=this,n=new p;t.worldContainer.addChild(n),this.subscription(t.rx.cycle.takeUntil(this.players.rx.list.filter(function(){return!e.players.playerById(r.id)}))).subscribe(function(){var e=t.world.cyclableById(r.characterId);e&&t.worldViewController.isVisible(e,0,0)?(n.label.text!==r.name&&(n.label.text=r.name),n.visible=!0,n.position.x=e.x,n.position.y=e.y):n.visible=!1},null,function(){f.remove(n)})}},{key:"colorForCharacterId",value:function(e){var t=this.players.playerByCharacterId(e);return t?t.color:null}},{key:"isPausable",value:function(){return!1}}]),s}();t.exports=s},{"../../../shared/authority/recorder-authority":843,"../../../shared/authority/server-authority":844,"../../../shared/world/events/authority-event-proxy":941,"../../../shared/world/world":974,"../graphics/player-indicator":59,"../interaction/keyboard":74,"../menu/slider":77,"../multiplayer/client-player-set":80,"../util/pixi-utils":128,"./world-screen-rule":88,"rxjs/Rx":379}],86:[function(e,t,r){var p=e("rxjs/Rx"),f=e("pixi.js"),n=e("./world-screen-rule"),i=e("../../../shared/world/world"),m=e("../../../shared/world/events/authority-event-proxy"),o=e("../../../shared/model/player-set"),v=e("../../../shared/recording/replay-types"),a=e("../../../shared/authority/recorder-authority"),s=e("../../../shared/authority/server-authority"),b=e("../graphics/player-indicator"),y=e("../interaction/keyboard"),g=e("../util/pixi-utils"),w=e("../is-mobile"),l=function(e){_inherits2(d,n);var r=_createSuper(d);function d(e){var t;return _classCallCheck2(this,d),(t=r.call(this)).targetIds=e.targetIds,t.states=e.states,t.indicators=e.indicators,t.replayType=e.replayType,t.roundId=e.roundId,t.players=new o,t.authority=new a,t.serverAuthority=new s,t}return _createClass2(d,[{key:"getAuthority",value:function(){return this.authority}},{key:"setup",value:function(i){var n=this;_get(_getPrototypeOf(d.prototype),"setup",this).call(this,i);var e=new f.filters.ColorMatrixFilter;e.sepia(1),g.addFilter(i.view,e);var t=new f.Text(w()?"Tap to skip":"Press [ENTER] to skip",{fill:"#ffffff",fontFamily:"SquarePixel",fontSize:72,dropShadow:!0,dropShadowColor:"#000",dropShadowAngle:Math.PI/2,dropShadowDistance:2});t.anchor.x=.5,t.anchor.y=.5,t.position.x=i.game.params.width/2,t.position.y=.75*i.game.params.height,i.view.addChild(t),i.world.eventProxy=new m(i.gameState,this.authority),i.gameState.parseState(this.states[0].gameState,this.serverAuthority);var r=this.targetIds.map(function(e){return i.world.cyclableSubject(e)});this.subscription(p.Observable.combineLatest(r).throttleTime(200)).subscribe(function(e){var t,r=e.filter(function(e){return!!e}).reduce(function(e,t,r,n){return e.x+=t.x/n.length,e.y+=t.y/n.length,e},{x:0,y:0}),n=_createForOfIteratorHelper(e);try{for(n.s();!(t=n.n()).done;){if(t.value){i.camera.follow(r);break}}}catch(e){n.e(e)}finally{n.f()}});var o=this.states[0].gameState.clock,a=this.states[this.states.length-1].gameState.clock,s=a-o,l=0,u=0;this.replayType===v.DEATH_CAM?(l=.5*s+o,u=.75*s+o):this.replayType===v.BEST_PLAY&&(u=.1*s+(l=o));var c=!1;this.states.forEach(function(e){n.subscription(i.rx.cycle.filter(function(){return i.gameState.clock>e.gameState.clock}).take(1)).subscribe(function(){i.gameState.parseState(e.gameState,n.serverAuthority),n.players.parsePlayers(e.players),c||(i.gameState.world.environment.timeFactor=e.gameState.clock>l&&e.gameState.clock<u?.25:1)})}),this.subscription(i.rx.cycle.filter(function(){return i.gameState.clock>l}).take(1)).subscribe(function(){return i.camera.zoomTo(2,.5)}),this.subscription(i.rx.cycle.filter(function(){return i.gameState.clock>u}).take(1)).subscribe(function(){return i.camera.zoomTo(1,.5)}),this.replayType===v.BEST_PLAY&&i.hud.announce("Play of the game"),Object.keys(this.indicators).forEach(function(t){var r=new b;r.label.text=n.indicators[t],i.worldContainer.addChild(r),n.subscription(i.rx.cycle).subscribe(function(){var e=i.world.cyclableById(t);e?(r.visible=!0,r.position.x=e.x,r.position.y=e.y):r.visible=!1})});var h=i.outro().add(function(){return i.pop()});this.subscription(p.Observable.merge(i.rx.cycle.filter(function(){return i.gameState.clock>a-h.duration}),i.rx.isKeyDown(y.ENTER).filter(function(e){return e}),i.rx.touchEnd).take(1)).subscribe(function(){c=!0,h.runAsMain(i.interpolationPool),g.remove(t)})}},{key:"getWorld",value:function(e){return new i({matrix:this.states[0].gameState.world.matrix,tileSize:e.game.params.tileSize,chunkSize:e.game.params.chunkSize})}},{key:"colorForCharacterId",value:function(e){var t=this.players.playerByCharacterId(e);return t?t.color:null}},{key:"isPausable",value:function(){return!1}},{key:"skyColor",value:function(){var e=n.skyColors();return e[this.roundId%e.length]}}]),d}();t.exports=l},{"../../../shared/authority/recorder-authority":843,"../../../shared/authority/server-authority":844,"../../../shared/model/player-set":901,"../../../shared/recording/replay-types":926,"../../../shared/world/events/authority-event-proxy":941,"../../../shared/world/world":974,"../graphics/player-indicator":59,"../interaction/keyboard":74,"../is-mobile":75,"../util/pixi-utils":128,"./world-screen-rule":88,"pixi.js":329,"rxjs/Rx":379}],87:[function(e,t,r){var n=e("pixi.js"),u=e("chance"),i=e("./world-screen-rule"),o=e("../../../shared/world/generate/mask"),a=e("../../../shared/world/world"),l=e("../../../shared/elements/characters/walking-character"),c=e("../graphics/hud/hud"),h=e("../../../shared/ai/path-detector"),d=e("../../../shared/controllers/node-hero-controller"),p=e("../../../shared/equipments/rocket-launcher-equipment"),f=e("../../../shared/equipments/plasma-gun-equipment"),m=e("../../../shared/equipments/shotgun-equipment"),v=e("../../../shared/equipments/flamethrower-equipment"),b=e("../../../shared/equipments/grenade-launcher-equipment"),y=e("../../../shared/elements/items/equipment-item"),g=e("../../../shared/ai/equipment/equipment-controller-factory"),w=e("../../../shared/equipments/equipment-factory"),s=function(e){_inherits2(s,i);var r=_createSuper(s);function s(){var e;_classCallCheck2(this,s),e=r.call(this);var t=o.OBSTACLE;return e.matrix=[[t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t],[t,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,t],[t,0,0,0,0,0,0,0,0,0,t,0,0,0,0,t,t,t,t,0,0,0,0,0,0,0,t],[t,t,t,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,t],[t,0,0,0,0,0,t,t,t,0,0,0,t,t,t,0,0,0,0,0,0,0,0,0,0,0,t],[t,0,0,0,0,0,0,t,t,0,0,0,t,t,0,0,0,0,0,0,t,t,t,t,0,0,t],[t,0,0,0,0,0,t,t,t,t,t,t,t,t,0,0,0,0,0,0,0,0,0,0,0,t,t],[t,0,0,0,0,0,t,t,t,0,0,0,t,t,t,t,0,0,0,0,0,0,0,0,t,t,t],[t,0,0,0,0,0,t,t,t,0,t,0,t,t,0,0,0,0,t,t,t,t,0,0,t,t,t],[t,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,t],[t,0,0,0,t,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,t],[t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t]],e}return _createClass2(s,[{key:"hudItems",value:function(){return c.TIMER|c.HEALTH|c.INFO}},{key:"setup",value:function(e){_get(_getPrototypeOf(s.prototype),"setup",this).call(this,e);var t=new l({x:2.5*e.world.tileSize,y:.5*e.world.tileSize,speed:500});t.facing=-1,e.world.add(t),e.setupHero(t);for(var r=new h(e.world).detectNodes(),n=0;n<2;n++){var i=new u(n).pickone(r),o=new l({x:i.x,y:i.y,speed:400});e.world.add(o);var a=new d({character:o,nodes:r,equipmentControllerFactory:new g});e.gameState.addController(a),this.newPathForEnemy(e,o,a,r,o.id)}}},{key:"newPathForEnemy",value:function(e,t,r,n){var i=this,o=4<arguments.length&&void 0!==arguments[4]?arguments[4]:1,a=new u(o),s=a.pickone(n),l=new y({x:s.x,y:s.y,equipment:a.pickone([new f({}),new p({}),new b({}),new v({}),new m({})])},new w);e.world.add(l),this.subscription(e.world.rx.deletions.filter(function(e){return e.id===l.id}).filter(function(){return t.world})).subscribe(function(){return i.newPathForEnemy(e,t,r,n,o+1)})}},{key:"findPath",value:function(r){var e=this.nodes.slice(0).sort(function(e,t){return Math.distance(e,r.hero)-Math.distance(t,r.hero)})[0];this.pathFinder.findPath([e],this.item).steps.forEach(function(e){var t=new n.Graphics;t.beginFill(16711680),t.drawRect(-5,-5,10,10),t.position.x=e.x,t.position.y=e.y,r.worldViewController.view.addChild(t)})}},{key:"getWorld",value:function(e){return new a({matrix:this.matrix,tileSize:e.game.params.tileSize,chunkSize:e.game.params.chunkSize})}},{key:"colorForCharacterId",value:function(e){return new u(e).integer({min:0,max:16777215})}},{key:"getPauseOptions",value:function(e){return[this.resumeOption(e),this.settingsOption(e)]}}]),s}();t.exports=s},{"../../../shared/ai/equipment/equipment-controller-factory":828,"../../../shared/ai/path-detector":837,"../../../shared/controllers/node-hero-controller":856,"../../../shared/elements/characters/walking-character":860,"../../../shared/elements/items/equipment-item":870,"../../../shared/equipments/equipment-factory":886,"../../../shared/equipments/flamethrower-equipment":888,"../../../shared/equipments/grenade-launcher-equipment":889,"../../../shared/equipments/plasma-gun-equipment":891,"../../../shared/equipments/rocket-launcher-equipment":892,"../../../shared/equipments/shotgun-equipment":898,"../../../shared/world/generate/mask":960,"../../../shared/world/world":974,"../graphics/hud/hud":51,"./world-screen-rule":88,chance:177,"pixi.js":329}],88:[function(e,t,r){var n=e("rxjs/Rx"),a=e("chance"),s=e("pixi-filters"),l=e("animate").Timeline,u=e("animate").Animation,i=e("../controllers/hero-player-controller"),o=e("../../../shared/authority/local-authority"),c=e("../util/pixi-utils"),h=function(){function e(){_classCallCheck2(this,e),this.rx={},this.rx.tearDown=new n.Subject}return _createClass2(e,[{key:"setup",value:function(e){var t=this;this.time=0,this.subscription(e.rx.cycle).subscribe(function(e){return t.time+=e})}},{key:"subscription",value:function(e){return e.takeUntil(this.rx.tearDown)}},{key:"hudTopBarItems",value:function(e){return[]}},{key:"tearDown",value:function(){this.rx.tearDown.next()}},{key:"animateIn",value:function(e){return(new l).add(0,e.intro())}},{key:"initialCameraTarget",value:function(e){return e.hero}},{key:"randomPhrases",value:function(){return[]}},{key:"createHeroController",value:function(e){var t=new i({character:e.hero});return t.screen=e,t}},{key:"updateHUD",value:function(e){e.hud.setTopBarItems(this.hudTopBarItems(e))}},{key:"getHeroSettings",value:function(e){return{speed:560,bodyColor:16777215,legColor:10526880,health:5}}},{key:"resumeOption",value:function(e){return{label:"Resume",action:function(){return e.makeCurrent()}}}},{key:"settingsOption",value:function(){return{label:"Settings",action:function(e){return e.settings()}}}},{key:"quitOption",value:function(){return{label:"Main Menu",action:function(e){return e.quit()}}}},{key:"isPausable",value:function(e){return!0}},{key:"getPauseOptions",value:function(){return[]}},{key:"heroHurt",value:function(e){e.flash(16711680,.15);var r=new s.RGBSplitFilter;c.addFilter(e.view,r);var t=new a,n=t.floating({min:0,max:2*Math.PI}),i=t.floating({min:0,max:2*Math.PI}),o=t.floating({min:0,max:2*Math.PI});(new l).add(new u({}).interp("foo",1,0).during(.3).progress(function(e){var t=1-e;r.red=[50*Math.cos(n)*t,50*Math.sin(n)*t],r.green=[50*Math.cos(i)*t,50*Math.sin(i)*t],r.blue=[50*Math.cos(o)*t,50*Math.sin(o)*t]})).add(function(){return c.removeFilter(e.view,r)}).run(e.interpolationPool)}},{key:"getAuthority",value:function(){return new o}},{key:"colorForCharacterId",value:function(e){return null}},{key:"showCharacterHealth",value:function(e){return!1}},{key:"skyColor",value:function(){return(new a).pickone(e.skyColors())}}],[{key:"skyColors",value:function(){return[2442145,8044004,16752474]}}]),e}();t.exports=h},{"../../../shared/authority/local-authority":842,"../controllers/hero-player-controller":9,"../util/pixi-utils":128,animate:161,chance:177,"pixi-filters":196,"rxjs/Rx":379}],89:[function(e,t,r){var a=e("pixi.js"),n=e("../ui/screen"),i=e("../graphics/loading-effect"),o=e("animate").Timeline,s=e("animate").Animation,l=e("../../../shared/world/generate/mask-set"),u=e("../../../shared/util/array-utils"),c=function(e){_inherits2(r,n);var t=_createSuper(r);function r(){var e;return _classCallCheck2(this,r),(e=t.call(this)).hideCursor=!1,e}return _createClass2(r,[{key:"getId",value:function(){return"loading"}},{key:"setup",value:function(){_get(_getPrototypeOf(r.prototype),"setup",this).call(this);var e=new a.Graphics;e.beginFill(0),e.drawRect(0,0,this.game.params.width,this.game.params.height),this.view.addChild(e),this.loadingEffect=new i({width:.5*this.game.params.width,height:20}),this.loadingEffect.position.x=(this.game.params.width-this.loadingEffect.width)/2,this.loadingEffect.position.y=(this.game.params.height-this.loadingEffect.height)/2,this.view.addChild(this.loadingEffect),this.startLoading()}},{key:"startLoading",value:function(){var e=this;window.PokiSDK&&window.PokiSDK.gameLoadingStart(),this.loadFonts().then(function(){return e.setProgress(.25),e.loadMasks()}).then(function(){return e.setProgress(.5),e.loadImages()}).then(function(){return e.setProgress(.75),e.loadSounds()}).then(function(){e.complete()}).catch(function(e){console.error(e)}).then(function(){window.PokiSDK&&window.PokiSDK.gameLoadingFinished()})}},{key:"setMessage",value:function(e){this.loadingEffect.setLabel(e)}},{key:"loadMaskSet",value:function(r){return new Promise(function(t,e){pegasus(r).then(function(e){t(l.fromJSON(e))},e)})}},{key:"loadMasks",value:function(){var i=this;return this.game.params.mask?new Promise(function(e,t){i.setMessage("Loading masks...");var r,n;Promise.all([(r="assets/masks/multiplayer.json",n="multiplayer",new Promise(function(t,e){i.loadMaskSet(r).then(function(e){l[n]=e,t()},e)}))]).then(e,t)}):Promise.resolve()}},{key:"loadFont",value:function(n,i){return new Promise(function(e,t){var r=new Font;r.onload=e,r.onerror=t,r.fontFamily=n,r.src=i})}},{key:"loadFonts",value:function(){return this.setMessage("Loading fonts..."),Promise.all([this.loadFont("SquarePixel","assets/fonts/square_pixel-7.ttf"),this.loadFont("Gameplay","assets/fonts/Gameplay.ttf")])}},{key:"loadImages",value:function(){var i=this,o=["assets/textures/bush.png","assets/textures/character-halo.png","assets/textures/cloud.png","assets/textures/grass.png","assets/textures/shield-item.png","assets/textures/heart-black.png","assets/textures/heart-item.png","assets/textures/heart-white-small.png","assets/textures/heart-white.png","assets/textures/shield-white.png","assets/textures/shield-black.png","assets/textures/crown-item.png","assets/textures/keyboard-instructions.png","assets/textures/heart.png","assets/textures/hills1.png","assets/textures/hills2.png","assets/textures/hud-gradient.png","assets/textures/item-stripe.png","assets/textures/new-dirt.png","assets/textures/new-floor.png","assets/textures/tree.png","assets/textures/bullet.png"];return 0===o.length?Promise.resolve():new Promise(function(e,t){i.setMessage("Loading images...");for(var r=new a.loaders.Loader,n=0;n<o.length;n++)r.add(o[n],o[n]);r.on("progress",function(e){i.setMessage("Loading images... "+Math.round(e.progress)+"%")}),r.on("complete",e),r.on("error",t),r.load()})}},{key:"loadSounds",value:function(){var i=this;return new Promise(function(t){i.setMessage("Loading sounds..."),i.game.setupSounds();var r=i.game.soundManager.soundList;if(0!==r.length){var n=r.slice(0);r.forEach(function(e){e.on("load",function(){u.remove(n,e),i.setMessage("Loading sounds... "+Math.round(100*(1-n.length/r.length))+"%"),0===n.length&&t()}),e.on("loaderror",function(){console.warn("Failed to load sound at "+e._src+". Proceeding anyway"),t()})})}else t()})}},{key:"setProgress",value:function(e){new s(this.loadingEffect).interp("progress",this.loadingEffect.progress,e).during(.5).run(this.interpolationPool)}},{key:"complete",value:function(){var e=this;this.setProgress(1),(new o).add(new s(this.view).interp("alpha",1,0).during(1)).add(function(){e.game.assetLoadingComplete()}).runAsMain(this.interpolationPool)}}]),r}();t.exports=c},{"../../../shared/util/array-utils":929,"../../../shared/world/generate/mask-set":959,"../graphics/loading-effect":56,"../ui/screen":121,animate:161,"pixi.js":329}],90:[function(e,t,r){var i=e("pixi.js"),n=e("./simulate-world-screen"),o=e("../../ui/screen"),a=e("../../../../shared/world/generate/mask-set"),l=e("../../../../shared/world/generate/mask"),u=e("../../menu/text-button"),c=e("../../interaction/keyboard"),s=function(e){_inherits2(s,o);var t=_createSuper(s);function s(){var e;return _classCallCheck2(this,s),(e=t.call(this)).hideCursor=!1,e}return _createClass2(s,[{key:"getId",value:function(){return"mask"}},{key:"setup",value:function(){var e=this;_get(_getPrototypeOf(s.prototype),"setup",this).call(this),this.maskSet=a[window.prompt("Which mask set?","multiplayer")],this.maskSet||(this.maskSet=new a([new l])),this.tags=[l.VOID,l.UNBREAKABLE_OBSTACLE];var t=.8*Math.min(this.game.params.width,this.game.params.height);this.maskRows=10,this.maskCols=10,this.tileSize=t/this.maskRows,this.maskView=new i.Container,this.view.addChild(this.maskView),this.tilesContainer=new i.Container,this.maskView.addChild(this.tilesContainer),this.grid=new i.Graphics,this.maskView.addChild(this.grid);for(var r=0;r<=this.maskCols;r++)this.grid.lineStyle(2,16711680),this.grid.moveTo(r*this.tileSize,0),this.grid.lineTo(r*this.tileSize,this.tileSize*this.maskRows);for(var n=0;n<=this.maskRows;n++)this.grid.lineStyle(2,16711680),this.grid.moveTo(0,n*this.tileSize),this.grid.lineTo(this.tileSize*this.maskCols,n*this.tileSize);this.maskView.position.x=(this.game.params.width-this.maskView.width)/2,this.maskView.position.y=(this.game.params.height-this.maskView.height)/2;this.leftConnectionButton=new u({x:(this.maskView.position.x-50)/2,y:this.maskView.position.y+(this.maskView.height-50)/2,width:50,height:50,label:"0",fontSize:32,actionCallback:function(){return e.toggleConnection(l.LEFT)}}),this.view.addChild(this.leftConnectionButton.getView()),this.addClickableArea(this.leftConnectionButton),this.topConnectionButton=new u({x:this.maskView.position.x+(this.maskView.width-50)/2,y:(this.maskView.position.y-50)/2,width:50,height:50,label:"0",fontSize:32,actionCallback:function(){return e.toggleConnection(l.UP)}}),this.view.addChild(this.topConnectionButton.getView()),this.addClickableArea(this.topConnectionButton),this.rightConnectionButton=new u({x:this.maskView.position.x+this.maskView.width+(this.maskView.position.x-50)/2,y:this.maskView.position.y+(this.maskView.height-50)/2,width:50,height:50,label:"0",fontSize:32,actionCallback:function(){return e.toggleConnection(l.RIGHT)}}),this.view.addChild(this.rightConnectionButton.getView()),this.addClickableArea(this.rightConnectionButton),this.bottomConnectionButton=new u({x:this.maskView.position.x+(this.maskView.width-50)/2,y:this.maskView.position.y+this.maskView.height+(this.maskView.position.y-50)/2,width:50,height:50,label:"0",fontSize:32,actionCallback:function(){return e.toggleConnection(l.DOWN)}}),this.view.addChild(this.bottomConnectionButton.getView()),this.addClickableArea(this.bottomConnectionButton),this.currentMaskIndex=0,this.setMask(this.maskSet.masks[this.currentMaskIndex])}},{key:"setMask",value:function(e){this.mask=e,this.updateView()}},{key:"updateView",value:function(){for(;0<this.tilesContainer.children.length;)this.tilesContainer.removeChild(this.tilesContainer.children[0]);for(var e=0;e<this.maskRows;e++)for(var t=0;t<this.maskCols;t++){var r=this.mask.matrix[e][t],n=this.getViewForMaskTag(r);n&&(n.position.x=t*this.tileSize,n.position.y=e*this.tileSize,this.tilesContainer.addChild(n))}this.updateConnectionButtons()}},{key:"getViewForMaskTag",value:function(e){if(e===l.VOID)return null;var t=new i.Graphics;return t.beginFill(16777215,e===l.POSSIBLE_OBSTACLE?.5:1),t.drawRect(0,0,this.tileSize,this.tileSize),t.endFill(),e===l.FLOOR_SPIKE&&(t.beginFill(16711680),t.drawRect(0,0,this.tileSize,.2*this.tileSize),t.endFill()),e===l.FLOOR_SPIKE&&(t.beginFill(16711680),t.drawRect(0,.8*this.tileSize,this.tileSize,.2*this.tileSize),t.endFill()),t}},{key:"toggleConnection",value:function(e){this.mask.connections^=e,this.updateConnectionButtons()}},{key:"updateConnectionButtons",value:function(){this.leftConnectionButton.setLabel(this.mask.connections&l.LEFT?"1":"0"),this.rightConnectionButton.setLabel(this.mask.connections&l.RIGHT?"1":"0"),this.topConnectionButton.setLabel(this.mask.connections&l.UP?"1":"0"),this.bottomConnectionButton.setLabel(this.mask.connections&l.DOWN?"1":"0")}},{key:"keyDown",value:function(e){_get(_getPrototypeOf(s.prototype),"keyDown",this).call(this,e),e===c.LEFT?this.currentMaskIndex--:e===c.RIGHT?this.currentMaskIndex++:e===c.S?(console.log(JSON.stringify(this.maskSet.toJSON())),window.prompt("Save to masks.json",JSON.stringify(this.maskSet.toJSON()))):e===c.ENTER?this.game.pushScreen(new n({maskSet:this.maskSet})):e===c.D?window.confirm("Delete this mask?")&&this.maskSet.masks.splice(this.currentMaskIndex,1):e===c.N&&window.confirm("Create a new mask?")&&(this.maskSet.masks.push(new l),this.currentMaskIndex=this.maskSet.masks.length-1),this.currentMaskIndex=Math.between(0,this.currentMaskIndex,this.maskSet.masks.length-1),this.setMask(this.maskSet.masks[this.currentMaskIndex])}},{key:"touchStart",value:function(e,t){_get(_getPrototypeOf(s.prototype),"touchStart",this).call(this,e,t);var r=(e-this.maskView.position.x)/this.maskView.width,n=(t-this.maskView.position.y)/this.maskView.height;if(Math.isBetween(0,r,1)&&Math.isBetween(0,n,1)){var i=~~(n*this.maskRows),o=~~(r*this.maskCols),a=(this.tags.indexOf(this.mask.matrix[i][o])+1)%this.tags.length;this.mask.matrix[i][o]=this.tags[a],this.updateView()}}}]),s}();t.exports=s},{"../../../../shared/world/generate/mask":960,"../../../../shared/world/generate/mask-set":959,"../../interaction/keyboard":74,"../../menu/text-button":78,"../../ui/screen":121,"./simulate-world-screen":91,"pixi.js":329}],91:[function(e,t,r){var d=e("rxjs/Rx"),p=e("pixi.js"),f=e("chance"),i=e("../../ui/screen"),m=e("../../../../shared/world/generate/mask"),v=e("../../../../shared/world/generate/generator"),b=e("../../../../shared/world/world"),y=e("../../graphics/world/world-view-controller"),g=e("../../gameplay/camera"),n=function(e){_inherits2(n,i);var r=_createSuper(n);function n(e){var t;return _classCallCheck2(this,n),(t=r.call(this)).maskSet=e.maskSet,t}return _createClass2(n,[{key:"getId",value:function(){return"simulate-world"}},{key:"setup",value:function(){_get(_getPrototypeOf(n.prototype),"setup",this).call(this),this.maskMapRows=3,this.maskMapCols=3;var e=new p.Graphics;e.beginFill(0,.8),e.drawRect(0,0,this.game.params.width,this.game.params.height),this.view.addChild(e),this.worldContainer=new p.Container,this.view.addChild(this.worldContainer),this.simulate()}},{key:"simulate",value:function(){for(;0<this.worldContainer.children.length;)this.worldContainer.removeChild(this.worldContainer.children[0]);this.world&&this.world.view&&this.world.view.parent&&this.world.view.parent.removeChild(this.world.view);var r=this.maskSet.withMirrored().masks,n=new f(1),e=new v(new f(1)).generateMaze({rows:this.maskMapRows,cols:this.maskMapCols}).addRedundantDirections(.8).inflate(function(t){console.log(t);var e=r.filter(function(e){return e.connections===t});return n.pickone(e).matrix}).padHorizontal(2,m.UNBREAKABLE_OBSTACLE).padVertical(2,m.UNBREAKABLE_OBSTACLE);window.generator=e,this.world=new b({matrix:e.inflated,tileSize:this.game.params.tileSize,chunkSize:this.game.params.chunkSize});var t=new g({viewport:{width:this.game.params.width,height:this.game.params.height},bounds:{x:0,y:0,width:this.world.width,height:this.world.height},interpolationPool:this.interpolationPool});this.worldViewController=new y({world:this.world,renderer:this.game.renderer,interpolationPool:this.interpolationPool,characterColorProvider:null,camera:t,events:new d.Subject}),this.worldContainer.addChild(this.worldViewController.view),this.world.width>this.world.height?(this.worldViewController.view.width=.8*this.game.params.width,this.worldViewController.view.scale.y=this.worldViewController.view.scale.x):(this.worldViewController.view.height=.8*this.game.params.height,this.worldViewController.view.scale.x=this.worldViewController.view.scale.y);for(var i=e.maze,o=10*this.game.params.tileSize,a=0;a<i.length;a++)for(var s=0;s<i[a].length;s++){var l=(s+.5)*o+3*this.game.params.tileSize,u=(a+.5)*o+3*this.game.params.tileSize,c=i[a][s],h=new p.Graphics;h.lineStyle(10,16711680),c&m.RIGHT&&(h.moveTo(l,u),h.lineTo(l+o/2,u)),c&m.DOWN&&(h.moveTo(l,u),h.lineTo(l,u+o/2)),c&m.LEFT&&(h.moveTo(l,u),h.lineTo(l-o/2,u)),c&m.UP&&(h.moveTo(l,u),h.lineTo(l,u-o/2)),this.worldViewController.view.addChild(h)}this.worldViewController.view.position.x=(this.game.params.width-this.worldViewController.view.width)/2,this.worldViewController.view.position.y=(this.game.params.height-this.worldViewController.view.height)/2,this.worldContainer.addChild(this.worldViewController.view)}},{key:"keyDown",value:function(e){if(_get(_getPrototypeOf(n.prototype),"keyDown",this).call(this,e),37===e)this.maskMapCols=Math.max(1,this.maskMapCols-1);else if(39===e)this.maskMapCols++;else if(38===e)this.maskMapRows=Math.max(1,this.maskMapRows-1);else if(40===e)this.maskMapRows++;else{if(13!==e)return;this.game.popScreen()}this.simulate()}}]),n}();t.exports=n},{"../../../../shared/world/generate/generator":958,"../../../../shared/world/generate/mask":960,"../../../../shared/world/world":974,"../../gameplay/camera":17,"../../graphics/world/world-view-controller":69,"../../ui/screen":121,chance:177,"pixi.js":329,"rxjs/Rx":379}],92:[function(e,t,r){var i=e("./new-menu-screen"),o=e("../../menu/text-button"),n=function(e){_inherits2(n,i);var r=_createSuper(n);function n(e){var t;return _classCallCheck2(this,n),(t=r.call(this)).question=e.question,t.description=e.description||null,t.yesCallback=e.yes,t.noCallback=e.no,t.yesString=e.yesString||"Yes",t.noString=e.noString||"No",t}return _createClass2(n,[{key:"getId",value:function(){return"confirm-menu"}},{key:"setup",value:function(){var e=this;_get(_getPrototypeOf(n.prototype),"setup",this).call(this),this.setTitle(this.question),this.setSubtitle(this.description),this.addButton(new o({label:this.yesString,actionCallback:function(){return e.yes()}})),this.addButton(new o({label:this.noString,actionCallback:function(){return e.no()}}))}},{key:"yes",value:function(){this.yesCallback&&this.yesCallback(this)}},{key:"no",value:function(){this.noCallback&&this.noCallback(this)}}]),n}();t.exports=n},{"../../menu/text-button":78,"./new-menu-screen":99}],93:[function(e,t,r){var o=e("pixi.js"),n=e("./new-menu-screen"),a=e("../../menu/text-button"),i=function(e){_inherits2(i,n);var t=_createSuper(i);function i(){return _classCallCheck2(this,i),t.apply(this,arguments)}return _createClass2(i,[{key:"getId",value:function(){return"crash"}},{key:"setup",value:function(){var e=this;_get(_getPrototypeOf(i.prototype),"setup",this).call(this);var t,r=this.setTitle("Game crashed :'(");t=this.recoverable?"It seems like there was an actual issue and the game crashed because of that. You can either try to resume the game or quit otherwise.\nError details: "+(this.error?this.error.toString():null):"It seems like there was an actual issue and the game crashed because of that. It seems like we won't be able to recover from that. Please quit the game and try again.\nError details: "+(this.error?this.error.toString():null),t+="\n\nCrash reports are highly appreciated!";var n=new o.Text(t,{fill:"#ffffff",fontFamily:"SquarePixel",fontSize:40,dropShadow:!0,dropShadowColor:"#444444",dropShadowAngle:Math.PI/2,dropShadowDistance:2,wordWrap:!0,wordWrapWidth:.8*this.game.params.width,align:"center"});n.anchor.x=.5,n.anchor.y=.5,n.position.x=this.game.params.width/2,n.position.y=r.position.y+r.height+50,this.content.addChild(n),this.recoverable&&this.addButton(new a({label:"Try To Resume",actionCallback:function(){return e.resume()}})),this.addButton(new a({label:"Report Crash",actionCallback:function(){return e.game.openURL("http://remvst.com/contact.html")}})),window.nw&&this.addButton(new a({label:"Quit",actionCallback:function(){return e.game.quit()}}))}},{key:"resume",value:function(){this.game.popScreen()}}]),i}();t.exports=i},{"../../menu/text-button":78,"./new-menu-screen":99,"pixi.js":329}],94:[function(e,t,r){var n=e("../../menu/text-button"),i=e("../../ui/text-box"),o=e("./new-menu-screen"),a=function(e){_inherits2(r,o);var t=_createSuper(r);function r(){return _classCallCheck2(this,r),t.apply(this,arguments)}return _createClass2(r,[{key:"getId",value:function(){return"credits"}},{key:"setup",value:function(){var e=this;_get(_getPrototypeOf(r.prototype),"setup",this).call(this),this.setTitle("Credits"),window.PokiSDK?(this.creditsBox=new i({title:"",content:["Game by Rmi Vansteelandt (remvst.com)","Music by Teknoaxe (teknoaxe.com)","Square Pixel7 Font (dafont.com)","Gameplay Font (dafont.com)"].join("\n\n")}),this.creditsBox.position.x=this.game.params.width-this.creditsBox.width-200,this.creditsBox.position.y=(this.game.params.height-this.creditsBox.height)/2,this.view.addChild(this.creditsBox)):(this.addButton(new n({label:"Game by remvst",actionCallback:function(){return e.game.openURL("https://twitter.com/remvst/")}})),this.addButton(new n({label:"Music by TeknoAxe",actionCallback:function(){return e.game.openURL("https://www.youtube.com/watch?v=dxwnOggj4oM")}})),this.addButton(new n({label:"Square Pixel7 Font",actionCallback:function(){return e.game.openURL("https://www.dafont.com/square-pixel7.font")}})),this.addButton(new n({label:"Gameplay Font",actionCallback:function(){return e.game.openURL("https://www.dafont.com/gameplay.font")}}))),this.addButton(new n({label:"Back",actionCallback:function(){return e.back()}}))}}]),r}();t.exports=a},{"../../menu/text-button":78,"../../ui/text-box":122,"./new-menu-screen":99}],95:[function(e,t,r){var i=e("pixi.js"),o=e("animate").Timeline,a=e("animate").Animation,s=e("../../ui/screen"),l=e("../../interaction/keyboard"),u=e("../../interaction/gamepad"),c=e("../../util/pixi-utils"),n=function(e){_inherits2(n,s);var t=_createSuper(n);function n(){var e;return _classCallCheck2(this,n),(e=t.call(this)).hideCursor=!1,e}return _createClass2(n,[{key:"setup",value:function(){var t=this;_get(_getPrototypeOf(n.prototype),"setup",this).call(this),this.buttons=[],this.content=new i.Container,this.view.addChild(this.content),this.dialogBackground=new i.Graphics,this.dialogBackground.beginFill(0,.7),this.dialogBackground.drawRect(0,0,1,1),this.content.addChild(this.dialogBackground),this.subscription(this.rx.keyDown).subscribe(function(e){t.focusedArea&&t.focusedArea.handleKeyDown(e)||(e===l.DOWN?t.moveFocus(0,1):e===l.UP?t.moveFocus(0,-1):e===l.RIGHT?t.moveFocus(1,0):e===l.LEFT?t.moveFocus(-1,0):e===l.SPACE||e===l.ENTER?t.focusedArea&&t.focusedArea.down(t.focusedArea.center()):e===l.ESC&&t.back())}),this.subscription(this.rx.keyUp).subscribe(function(e){e!==l.SPACE&&e!==l.ENTER||t.focusedArea&&t.focusedArea.action()}),this.mapGamepadsToKeyboard()}},{key:"background",value:function(){_get(_getPrototypeOf(n.prototype),"background",this).call(this),this.animateOut().run(this.interpolationPool)}},{key:"foreground",value:function(){_get(_getPrototypeOf(n.prototype),"foreground",this).call(this),this.animateIn().run(this.interpolationPool)}},{key:"animateIn",value:function(){return new a(this.content).interp("position.y",-this.game.params.height,0).during(.15)}},{key:"animateOut",value:function(){return new a(this.content).interpTo("position.y",-this.game.params.height).during(.15)}},{key:"setTitle",value:function(e){return c.remove(this.title),this.title=new i.Text(e,{fill:"#fff",fontFamily:"SquarePixel",fontSize:120,dropShadow:!0,dropShadowColor:"#000",dropShadowAngle:Math.PI/2,dropShadowDistance:10,align:"center",lineHeight:70}),this.title.anchor.x=.5,this.content.addChild(this.title),this.updateLayout(),this.title}},{key:"setSubtitle",value:function(e){return c.remove(this.subtitle),this.subtitle=new i.Text(e,{fill:"#fff",fontFamily:"SquarePixel",fontSize:40,dropShadow:!0,dropShadowColor:"#000",dropShadowAngle:Math.PI/2,dropShadowDistance:3,wordWrap:!0,wordWrapWidth:this.containerWidth()-80,align:"left"}),this.subtitle.anchor.x=.5,this.content.addChild(this.subtitle),this.updateLayout(),this.subtitle}},{key:"containerWidth",value:function(){return.7*this.game.params.width}},{key:"updateLayout",value:function(){var t=this,e=this.title?this.title.height:0,r=this.subtitle?this.subtitle.height:0,n=0;n+=40,n+=e,n+=40,n+=r,n+=40,n+=this.buttons.reduce(function(e,t){return e+t.height},0),n+=40,this.dialogBackground.position.x=(this.game.params.width-this.containerWidth())/2,this.dialogBackground.position.y=(this.game.params.height-n)/2,this.dialogBackground.width=this.containerWidth(),this.dialogBackground.height=n,this.title&&(this.title.position.x=this.dialogBackground.position.x+this.containerWidth()/2,this.title.position.y=this.dialogBackground.position.y+40),this.subtitle&&(this.subtitle.position.x=this.dialogBackground.position.x+this.containerWidth()/2,this.subtitle.position.y=this.dialogBackground.position.y+40+e+40);var i=(this.subtitle?this.subtitle.position.y:0)+r+40;this.buttons.forEach(function(e){e.x=(t.game.params.width-e.width)/2,e.y=i,e.updateView(),i+=e.height})}},{key:"addButton",value:function(e){e.interpolationPool=this.interpolationPool,this.buttons.push(e),this.addClickableArea(e),this.content.addChild(e.getView()),1===this.buttons.length&&this.focusOn(e),this.updateLayout()}},{key:"removeButton",value:function(e){var t=this.buttons.indexOf(e);0<=t&&this.buttons.splice(t,1),this.removeClickableArea(e),c.remove(e.getView()),this.updateLayout()}},{key:"focusOnFirstEnabledArea",value:function(){this.focusOn(this.enabledAreas()[0])}},{key:"mouseMove",value:function(e,t){if(_get(_getPrototypeOf(n.prototype),"mouseMove",this).call(this,e,t),!this.currentArea){var r=this.getAreaForCoordinates(e,t);r&&this.focusOn(r)}}},{key:"back",value:function(){var e=this;this.game.screen()===this&&(new o).add(this.animateOut()).add(function(){return e.game.popScreen()}).run(this.interpolationPool)}},{key:"mapGamepadsToKeyboard",value:function(){var n=this,t={};t[u.BUTTON_DOWN]=l.DOWN,t[u.BUTTON_UP]=l.UP,t[u.BUTTON_LEFT]=l.LEFT,t[u.BUTTON_RIGHT]=l.RIGHT,t[u.BUTTON_ACTION_BOTTOM]=l.ENTER,t[u.BUTTON_ACTION_RIGHT]=l.ESC,this.subscription(this.rx.buttonDown).subscribe(function(e){t[e.buttonIndex]&&n.keyDown(t[e.buttonIndex])}),this.subscription(this.rx.buttonUp).subscribe(function(e){t[e.buttonIndex]&&n.keyUp(t[e.buttonIndex])});var i=!1;this.subscription(this.rx.axisChange).subscribe(function(e){if(i){if(e.axisIndex!==u.LEFT_JOYSTICK_Y_AXIS&&e.axisIndex!==u.LEFT_JOYSTICK_X_AXIS)return;var t=n.game.interactionManager.getAxisValue(u.LEFT_JOYSTICK_X_AXIS),r=n.game.interactionManager.getAxisValue(u.LEFT_JOYSTICK_Y_AXIS);Math.abs(t)<.1&&Math.abs(r)<.1&&(i=!1)}else e.axisIndex===u.LEFT_JOYSTICK_Y_AXIS?(.3<Math.abs(e.value)&&(i=!0),.3<e.value?n.keyDown(l.DOWN):n.keyUp(l.DOWN),e.value<-.3?n.keyDown(l.UP):n.keyUp(l.UP)):e.axisIndex===u.LEFT_JOYSTICK_X_AXIS&&(.3<Math.abs(e.value)&&(i=!0),.3<e.value?n.keyDown(l.RIGHT):n.keyUp(l.RIGHT),e.value<-.3?n.keyDown(l.LEFT):n.keyUp(l.LEFT))})}},{key:"focusOn",value:function(e){this.focusedArea&&e!==this.focusedArea&&this.game.soundManager.play("click"),_get(_getPrototypeOf(n.prototype),"focusOn",this).call(this,e)}}]),n}();t.exports=n},{"../../interaction/gamepad":72,"../../interaction/keyboard":74,"../../ui/screen":121,"../../util/pixi-utils":128,animate:161,"pixi.js":329}],96:[function(e,t,r){var i=e("rxjs/Rx"),o=e("./new-menu-screen"),a=e("../../menu/text-button"),n=function(e){_inherits2(n,o);var r=_createSuper(n);function n(e){var t;return _classCallCheck2(this,n),(t=r.call(this)).poll=e,t}return _createClass2(n,[{key:"getId",value:function(){return"poll-menu"}},{key:"setup",value:function(){var e=this;_get(_getPrototypeOf(n.prototype),"setup",this).call(this),this.setTitle("Game Mode"),this.setSubtitle("Pick a game mode"),this.addButton(new a({label:"Deathmatch",actionCallback:function(){return e.game.joinRoom("offline",{gameMode:"deathmatch"})}})),this.addButton(new a({label:"King of the hill",actionCallback:function(){return e.game.joinRoom("offline",{gameMode:"king-of-the-hill"})}})),this.addButton(new a({label:"Back",actionCallback:function(){return e.back()}})),this.rx.pickedMode=new i.Subject}}]),n}();t.exports=n},{"../../menu/text-button":78,"./new-menu-screen":99,"rxjs/Rx":379}],97:[function(e,t,r){var n=e("animate").Timeline,i=e("animate").Animation,o=e("../../../updates"),a=e("../../menu/text-button"),s=e("./new-menu-screen"),l=e("./options-menu"),u=e("./confirm-menu-screen"),c=e("./game-mode-screen"),h=e("./webrtc-warning-screen"),d=e("./peer-to-peer-sessions-screen"),p=e("./credits-menu-screen"),f=e("./server-list-screen"),m=e("../../is-mobile"),v=e("../../ui/text-box"),b=e("../select-recording-screen"),y=function(e){_inherits2(r,s);var t=_createSuper(r);function r(){return _classCallCheck2(this,r),t.apply(this,arguments)}return _createClass2(r,[{key:"getId",value:function(){return"main-menu"}},{key:"setup",value:function(){_get(_getPrototypeOf(r.prototype),"setup",this).call(this),this.setTitle("Super\nBrawl"),this.addButton(this.joinServerButton()),this.addButton(this.practiceButton()),m()||(this.addButton(this.settingsButton()),this.addButton(this.creditsButton()));var e=o.updates[o.updates.length-1];this.updatesBox=new v({title:e.title,content:e.description}),this.updatesBox.position.x=this.game.params.width-this.updatesBox.width-200,this.updatesBox.position.y=(this.game.params.height-this.updatesBox.height)/2,m()||this.view.addChild(this.updatesBox),this.game.params.replay&&this.addButton(this.playRecordingButton()),window.nw&&this.addButton(this.quitButton())}},{key:"back",value:function(){}},{key:"joinServerButton",value:function(){var e=this;return new a({label:"Play Online",actionCallback:function(){return e.openSubMenu(new f)}})}},{key:"joinPrivateGameButton",value:function(){var e=this;return new a({label:"Hosted Brawls",actionCallback:function(){e.game.userData.getValue("warnedWebRTC")?e.openSubMenu(new d):e.openSubMenu(new h)}})}},{key:"practiceButton",value:function(){var e=this;return new a({label:"Practice With Bots",actionCallback:function(){return e.openSubMenu(new c)}})}},{key:"settingsButton",value:function(){var e=this;return new a({label:"Settings",actionCallback:function(){return e.openSubMenu(new l({inGame:!1}))}})}},{key:"creditsButton",value:function(){var e=this;return new a({label:"Credits",actionCallback:function(){return e.openSubMenu(new p)}})}},{key:"quitButton",value:function(){var e=this;return new a({label:"Quit",actionCallback:function(){e.game.pushScreen(new u({question:"Quit?",yes:function(){return e.game.quit()},no:function(){return e.game.popScreen()}}))}})}},{key:"playRecordingButton",value:function(){var e=this;return new a({label:"Play Recording",actionCallback:function(){return e.game.setScreen(new b)}})}},{key:"animateIn",value:function(){return(new n).add(_get(_getPrototypeOf(r.prototype),"animateIn",this).call(this)).add(0,(new n).add(0,new i(this.updatesBox).interp("alpha",0,1).during(.15)).add(0,new i(this.updatesBox).interp("position.y",this.game.params.height,(this.game.params.height-this.updatesBox.height)/2).during(.15)))}},{key:"animateOut",value:function(){return(new n).add(_get(_getPrototypeOf(r.prototype),"animateOut",this).call(this)).add(0,(new n).add(0,new i(this.updatesBox).interpTo("alpha",0).during(.15)).add(0,new i(this.updatesBox).interpTo("position.y",this.game.params.height).during(.15)))}}]),r}();t.exports=y},{"../../../updates":129,"../../is-mobile":75,"../../menu/text-button":78,"../../ui/text-box":122,"../select-recording-screen":107,"./confirm-menu-screen":92,"./credits-menu-screen":94,"./game-mode-screen":96,"./new-menu-screen":99,"./options-menu":100,"./peer-to-peer-sessions-screen":102,"./server-list-screen":104,"./webrtc-warning-screen":106,animate:161}],98:[function(e,t,r){var i=e("rxjs/Rx"),o=e("./new-menu-screen"),a=e("../../menu/text-button"),n=function(e){_inherits2(n,o);var r=_createSuper(n);function n(e){var t;return _classCallCheck2(this,n),(t=r.call(this)).offerAudioVideoButton=e.audioVideoButton,t}return _createClass2(n,[{key:"getId",value:function(){return"multiplayer-settings"}},{key:"setup",value:function(){var t,r=this;_get(_getPrototypeOf(n.prototype),"setup",this).call(this),this.setTitle("Player\nSettings"),this.addButton(this.nameButton=new a({label:"",actionCallback:function(){return r.promptName()}})),this.offerAudioVideoButton&&(t=new a({label:"",actionCallback:function(){return r.toggleAudioVideo()}}),this.addButton(t),this.subscription(this.game.userData.rx.value("audioVideo")).subscribe(function(e){return t.setLabel("Play with video: "+(e?"yes":"no"))})),this.addButton(new a({label:"Back",actionCallback:function(){return r.back()}})),this.buttons.forEach(function(e){return e.updateView()}),this.subscription(this.game.userData.rx.value("name")).subscribe(function(e){return r.nameButton.setLabel(e?"Name: "+e:"Set a name")}),this.rx.join=new i.Subject}},{key:"promptName",value:function(){var t=this;this.game.promptName().then(function(e){return t.game.userData.setValue("name",e)})}},{key:"toggleAudioVideo",value:function(){var e=this.game.userData.getValue("audioVideo");this.game.userData.setValue("audioVideo",!e)}}]),n}();t.exports=n},{"../../menu/text-button":78,"./new-menu-screen":99,"rxjs/Rx":379}],99:[function(e,t,r){var i=e("pixi.js"),o=e("animate").Timeline,a=e("animate").Animation,s=e("../../ui/screen"),l=e("../../interaction/keyboard"),u=e("../../interaction/gamepad"),c=e("../../util/pixi-utils"),h=e("../../is-mobile"),n=function(e){_inherits2(n,s);var t=_createSuper(n);function n(){var e;return _classCallCheck2(this,n),(e=t.call(this)).hideCursor=!1,e}return _createClass2(n,[{key:"setup",value:function(){var t=this;if(_get(_getPrototypeOf(n.prototype),"setup",this).call(this),this.buttons=[],this.content=new i.Container,this.content.position.x=-this.game.params.width/2,this.view.addChild(this.content),h()){var e=new i.Sprite(i.Texture.WHITE);e.tint=0,e.alpha=.7,e.width=this.game.params.width,e.height=this.game.params.height,this.content.addChild(e)}else{var r=new i.Graphics;r.beginFill(0,.7),r.moveTo(0,0),r.lineTo(this.game.params.width/2,0),r.lineTo(this.game.params.width/2-170,this.game.params.height),r.lineTo(0,this.game.params.height),this.content.addChild(r)}this.subscription(this.rx.keyDown).subscribe(function(e){t.focusedArea&&t.focusedArea.handleKeyDown(e)||(e===l.DOWN?t.moveFocus(0,1):e===l.UP?t.moveFocus(0,-1):e===l.RIGHT?t.moveFocus(1,0):e===l.LEFT?t.moveFocus(-1,0):e===l.SPACE||e===l.ENTER?t.focusedArea&&t.focusedArea.down(t.focusedArea.center()):e===l.ESC&&t.back())}),this.subscription(this.rx.keyUp).subscribe(function(e){e!==l.SPACE&&e!==l.ENTER||t.focusedArea&&t.focusedArea.action()}),this.mapGamepadsToKeyboard()}},{key:"background",value:function(){_get(_getPrototypeOf(n.prototype),"background",this).call(this),this.animateOut().run(this.interpolationPool)}},{key:"foreground",value:function(){_get(_getPrototypeOf(n.prototype),"foreground",this).call(this),this.animateIn().run(this.interpolationPool)}},{key:"animateIn",value:function(){return new a(this.content).interp("position.x",-this.game.params.width/2,0).during(.15)}},{key:"animateOut",value:function(){return new a(this.content).interpTo("position.x",h()?-this.game.params.width:-this.game.params.width/2).during(.15)}},{key:"setTitle",value:function(e){return this.title&&c.remove(this.title),this.title=new i.Text(e,{fill:"#fff",fontFamily:"SquarePixel",fontSize:120,dropShadow:!0,dropShadowColor:"#000",dropShadowAngle:Math.PI/2,dropShadowDistance:10,align:"center",lineHeight:70}),this.title.anchor.x=.5,this.title.anchor.y=.5,this.title.position.x=h()?this.game.params.width/2:this.game.params.width/4,this.title.position.y=h()?this.game.params.height/4:200,this.content.addChild(this.title),this.title}},{key:"setSubtitle",value:function(e){var t=new i.Text(e,{fill:"#fff",fontFamily:"SquarePixel",fontSize:40,dropShadow:!0,dropShadowColor:"#000",dropShadowAngle:Math.PI/2,dropShadowDistance:3,wordWrap:!0,wordWrapWidth:.3*this.game.params.width,align:"center"});return t.anchor.x=.5,t.anchor.y=.5,t.position.x=h()?this.game.params.width/2:this.game.params.width/4,t.position.y=h()?this.title.position.y+this.title.height/2+100:this.title.position.y+this.title.height/2+t.height/2+20,this.content.addChild(t),t}},{key:"addButton",value:function(e){var t=this;e.interpolationPool=this.interpolationPool,e.x=h()?(this.game.params.width-e.width)/2:145;var r=e.actionCallback;e.actionCallback=function(){return t.game.soundManager.play("option-select"),r?r():null},this.buttons.push(e),this.addClickableArea(e),this.content.addChild(e.getView());var n=this.buttons.reduce(function(e,t){return e+t.height},0),i=.3*this.game.params.height+(.7*this.game.params.height-n)/2;h()&&(i=this.game.params.height/2-50),this.buttons.forEach(function(e){e.y=i,e.updateView(),i+=e.height,h()&&(i+=50)}),1===this.buttons.length&&this.focusOn(e)}},{key:"removeButton",value:function(e){var t=this.buttons.indexOf(e);0<=t&&this.buttons.splice(t,1),this.removeClickableArea(e),c.remove(e.getView())}},{key:"focusOnFirstEnabledArea",value:function(){this.focusOn(this.enabledAreas()[0])}},{key:"mouseMove",value:function(e,t){if(_get(_getPrototypeOf(n.prototype),"mouseMove",this).call(this,e,t),!this.currentArea){var r=this.getAreaForCoordinates(e,t);r&&this.focusOn(r)}}},{key:"back",value:function(){var e=this;this.game.screen()===this&&(new o).add(this.animateOut()).add(function(){return e.game.popScreen()}).run(this.interpolationPool)}},{key:"mapGamepadsToKeyboard",value:function(){var n=this,t={};t[u.BUTTON_DOWN]=l.DOWN,t[u.BUTTON_UP]=l.UP,t[u.BUTTON_LEFT]=l.LEFT,t[u.BUTTON_RIGHT]=l.RIGHT,t[u.BUTTON_ACTION_BOTTOM]=l.ENTER,t[u.BUTTON_ACTION_RIGHT]=l.ESC,this.subscription(this.rx.buttonDown).subscribe(function(e){t[e.buttonIndex]&&n.keyDown(t[e.buttonIndex])}),this.subscription(this.rx.buttonUp).subscribe(function(e){t[e.buttonIndex]&&n.keyUp(t[e.buttonIndex])});var i=!1;this.subscription(this.rx.axisChange).subscribe(function(e){if(i){if(e.axisIndex!==u.LEFT_JOYSTICK_Y_AXIS&&e.axisIndex!==u.LEFT_JOYSTICK_X_AXIS)return;var t=n.game.interactionManager.getAxisValue(u.LEFT_JOYSTICK_X_AXIS),r=n.game.interactionManager.getAxisValue(u.LEFT_JOYSTICK_Y_AXIS);Math.abs(t)<.1&&Math.abs(r)<.1&&(i=!1)}else e.axisIndex===u.LEFT_JOYSTICK_Y_AXIS?(.3<Math.abs(e.value)&&(i=!0),.3<e.value?n.keyDown(l.DOWN):n.keyUp(l.DOWN),e.value<-.3?n.keyDown(l.UP):n.keyUp(l.UP)):e.axisIndex===u.LEFT_JOYSTICK_X_AXIS&&(.3<Math.abs(e.value)&&(i=!0),.3<e.value?n.keyDown(l.RIGHT):n.keyUp(l.RIGHT),e.value<-.3?n.keyDown(l.LEFT):n.keyUp(l.LEFT))})}},{key:"focusOn",value:function(e){this.focusedArea&&e!==this.focusedArea&&this.game.soundManager.play("click"),_get(_getPrototypeOf(n.prototype),"focusOn",this).call(this,e)}},{key:"openSubMenu",value:function(e,t){var r=this;(new o).add(this.animateOut()).add(function(){return r.game.pushScreen(e)}).add(function(){t&&t(e)}).run(this.interpolationPool)}}]),n}();t.exports=n},{"../../interaction/gamepad":72,"../../interaction/keyboard":74,"../../is-mobile":75,"../../ui/screen":121,"../../util/pixi-utils":128,animate:161,"pixi.js":329}],100:[function(e,t,r){var i=e("./new-menu-screen"),o=e("./multiplayer-settings-screen"),a=e("../../menu/text-button"),s=e("../../menu/slider"),n=function(e){_inherits2(n,i);var r=_createSuper(n);function n(e){var t;return _classCallCheck2(this,n),(t=r.call(this,e)).inGame=e.inGame,t}return _createClass2(n,[{key:"getId",value:function(){return"options"}},{key:"setup",value:function(){var t=this;_get(_getPrototypeOf(n.prototype),"setup",this).call(this),this.setTitle("Settings"),this.addButton(new s({label:"Effects volume",value:this.game.userData.getValue("effects-volume"),changeCallback:function(e){t.game.userData.setValue("effects-volume",e)}})),this.addButton(new s({label:"Music volume",value:this.game.userData.getValue("soundtrack-volume"),changeCallback:function(e){t.game.userData.setValue("soundtrack-volume",e)}})),this.addButton(new s({label:"Quality",precision:.1,value:this.game.userData.getValue("resolution"),minValue:.5,maxValue:1,bottomPadding:20,changeCallback:function(e){t.game.userData.setValue("resolution",e)}})),window.PokiSDK||(this.addButton(this.windowedButton=new a({label:"",actionCallback:function(){return t.toggleWindowed()}})),this.updateWindowedButtonLabel()),this.addButton(new a({label:"Player Settings",actionCallback:function(){return t.openSubMenu(new o({joinButton:!1,audioVideoButton:!t.inGame}))}})),this.addButton(new a({label:"Back",actionCallback:function(){return t.back()}}))}},{key:"updateWindowedButtonLabel",value:function(){this.windowedButton.setLabel("Windowed: "+(this.game.userData.getValue("windowed")?"yes":"no"))}},{key:"toggleWindowed",value:function(){this.game.userData.setValue("windowed",!this.game.userData.getValue("windowed")),this.updateWindowedButtonLabel()}}]),n}();t.exports=n},{"../../menu/slider":77,"../../menu/text-button":78,"./multiplayer-settings-screen":98,"./new-menu-screen":99}],101:[function(e,t,r){var i=e("./new-menu-screen"),o=e("../../menu/text-button"),a=e("./options-menu"),s=e("./confirm-menu-screen"),n=function(e){_inherits2(n,i);var r=_createSuper(n);function n(e){var t;return _classCallCheck2(this,n),(t=r.call(this)).options=e.options,t}return _createClass2(n,[{key:"getId",value:function(){return"pause-menu"}},{key:"setup",value:function(){var t=this;_get(_getPrototypeOf(n.prototype),"setup",this).call(this),this.setTitle("Game\nPaused"),this.options.forEach(function(e){t.addButton(new o({label:e.label,width:600,actionCallback:function(){return e.action(t)}}))})}},{key:"resume",value:function(){this.game.popScreen()}},{key:"settings",value:function(){this.openSubMenu(new a({inGame:!0}))}},{key:"quit",value:function(){var e=this;this.openSubMenu(new s({question:"Return to main menu?",description:"All unsaved progress will be lost",yes:function(){return e.game.mainMenu()},no:function(){return e.game.popScreen()}}))}}]),n}();t.exports=n},{"../../menu/text-button":78,"./confirm-menu-screen":92,"./new-menu-screen":99,"./options-menu":100}],102:[function(e,t,r){var n=e("chance"),i=e("../../menu/text-button"),o=e("./new-menu-screen"),a=function(e){_inherits2(r,o);var t=_createSuper(r);function r(){return _classCallCheck2(this,r),t.apply(this,arguments)}return _createClass2(r,[{key:"getId",value:function(){return"peer-to-peer-sessions"}},{key:"setup",value:function(){var t=this;_get(_getPrototypeOf(r.prototype),"setup",this).call(this),this.setTitle("Hosted\nBrawls"),new Promise(function(e,t){pegasus("/p2p-sessions").then(e,t)}).catch(function(e){return console.error(e),[]}).then(function(e){t.addButton(new i({label:"Create a brawl",actionCallback:function(){return t.createSession()}})),e.sessions.forEach(function(e){t.addButton(new i({label:e,actionCallback:function(){return t.joinSession(e)}}))}),t.addButton(new i({label:"Back",actionCallback:function(){return t.back()}}))})}},{key:"createSession",value:function(){var t=this,e=(new n).pickone(["brawlerz","coolbrawl","brawlin","killbox","working hard"]);this.game.formInputManager.requestInput("Enter a name for your brawl",e).then(function(e){e&&(15<e.length||!/^[a-zA-Z ]+$/.test(e)?window.alert("Brawl name can only contain alphabetical letters and must be less than 15 characters long"):t.game.joinRoom("hosted",{hosting:!0,sessionId:e}))})}},{key:"joinSession",value:function(e){this.game.joinRoom("hosted",{hosting:!1,sessionId:e})}}]),r}();t.exports=a},{"../../menu/text-button":78,"./new-menu-screen":99,chance:177}],103:[function(e,t,r){var i=e("rxjs/Rx"),o=e("./new-menu-screen"),a=e("../../menu/text-button"),n=function(e){_inherits2(n,o);var r=_createSuper(n);function n(e){var t;return _classCallCheck2(this,n),(t=r.call(this)).poll=e,t}return _createClass2(n,[{key:"getId",value:function(){return"poll-menu"}},{key:"setup",value:function(){var t=this;_get(_getPrototypeOf(n.prototype),"setup",this).call(this),this.setTitle("Poll"),this.setSubtitle(this.poll.prompt),this.poll.options.forEach(function(e){t.addButton(new a({label:e.label,width:600,actionCallback:function(){return t.pickOption(e)}}))}),this.rx.pickedOption=new i.Subject}},{key:"pickOption",value:function(e){this.rx.pickedOption.next(e.id),this.back()}},{key:"back",value:function(){_get(_getPrototypeOf(n.prototype),"back",this).call(this),this.rx.pickedOption.next(null)}}]),n}();t.exports=n},{"../../menu/text-button":78,"./new-menu-screen":99,"rxjs/Rx":379}],104:[function(e,t,r){var i=e("../../menu/text-button"),o=e("./new-menu-screen"),n=function(e){_inherits2(n,o);var t=_createSuper(n);function n(){return _classCallCheck2(this,n),t.apply(this,arguments)}return _createClass2(n,[{key:"getId",value:function(){return"server-list"}},{key:"setup",value:function(){var t=this;_get(_getPrototypeOf(n.prototype),"setup",this).call(this),this.setTitle("Choose\nBrawl");var r="/api/servers";window.PokiSDK&&(r="https://superbrawl.herokuapp.com"+r),new Promise(function(e,t){pegasus(r).then(e,t)}).catch(function(e){return console.error(e),[]}).then(function(e){e.servers.forEach(function(e){t.addButton(new i({label:e.label,actionCallback:function(){return t.joinServer(e)}}))}),t.addButton(new i({label:"Back",actionCallback:function(){return t.back()}}))})}},{key:"joinServer",value:function(e){this.game.joinRoom("server",{serverUrl:e.url})}}]),n}();t.exports=n},{"../../menu/text-button":78,"./new-menu-screen":99}],105:[function(e,t,r){var n=e("./new-menu-screen"),i=function(e){_inherits2(r,n);var t=_createSuper(r);function r(){return _classCallCheck2(this,r),t.apply(this,arguments)}return _createClass2(r,[{key:"getId",value:function(){return"wait"}},{key:"setup",value:function(){_get(_getPrototypeOf(r.prototype),"setup",this).call(this),this.setTitle("Joining...")}}]),r}();t.exports=i},{"./new-menu-screen":99}],106:[function(e,t,r){var n=e("../../menu/text-button"),i=e("./dialog-menu-screen"),o=e("./peer-to-peer-sessions-screen"),a=function(e){_inherits2(r,i);var t=_createSuper(r);function r(){return _classCallCheck2(this,r),t.apply(this,arguments)}return _createClass2(r,[{key:"getId",value:function(){return"webrtc-warning"}},{key:"setup",value:function(){_get(_getPrototypeOf(r.prototype),"setup",this).call(this);this.setTitle("Disclaimer"),this.setSubtitle("Hosted brawls rely on WebRTC, therefore connectivity is not guaranteed.\nSome Players might not be able to join.\n\nWhile playing, a connection to the server must be maintained to allow new players to connect."),this.addButton(this.continueButton()),this.addButton(this.cancelButton())}},{key:"continueButton",value:function(){var e=this;return new n({label:"Continue",actionCallback:function(){e.game.userData.setValue("warnedWebRTC",!0),e.pop(),e.game.pushScreen(new o)}})}},{key:"cancelButton",value:function(){var e=this;return new n({label:"Cancel",actionCallback:function(){return e.back()}})}}]),r}();t.exports=a},{"../../menu/text-button":78,"./dialog-menu-screen":95,"./peer-to-peer-sessions-screen":102}],107:[function(e,t,r){var i=e("pixi.js"),o=e("../ui/screen"),a=e("./world/play-recording-screen"),n=function(e){_inherits2(n,o);var t=_createSuper(n);function n(){return _classCallCheck2(this,n),t.apply(this,arguments)}return _createClass2(n,[{key:"getId",value:function(){return"select-recording"}},{key:"setup",value:function(){var r=this;_get(_getPrototypeOf(n.prototype),"setup",this).call(this);var e=new i.Text("Drag and drop the recording here",{fill:"#fff",fontFamily:"SquarePixel",fontSize:40,dropShadow:!0,dropShadowColor:"#000",dropShadowAngle:Math.PI/2,dropShadowDistance:3,wordWrap:!0,wordWrapWidth:.3*this.game.params.width,align:"center"});e.anchor.x=.5,e.anchor.y=.5,e.position.x=this.game.params.width/2,e.position.y=this.game.params.height/2,this.view.addChild(e),this.dragOverListener=function(e){e.stopPropagation(),e.preventDefault(),e.dataTransfer.dropEffect="copy"},this.dropListener=function(e){e.stopPropagation(),e.preventDefault();var t=e.dataTransfer.files[0];t&&r.fileDropped(t)},window.document.body.addEventListener("dragover",this.dropListener,!1),window.document.body.addEventListener("drop",this.dropListener,!1)}},{key:"destroy",value:function(){_get(_getPrototypeOf(n.prototype),"destroy",this).call(this),window.document.body.removeEventListener("dragover",this.dropListener),window.document.body.removeEventListener("drop",this.dropListener,!0)}},{key:"fileDropped",value:function(e){var i=this,o=new window.FileReader;o.addEventListener("load",function(){try{var e=o.result,t=e.substr(e.indexOf(",")+1),r=window.atob(t),n=JSON.parse(r);i.game.setScreen(new a({recording:n}))}catch(e){window.alert("Error reading file: "+e)}},!1),o.readAsDataURL(e)}}]),n}();t.exports=n},{"../ui/screen":121,"./world/play-recording-screen":110,"pixi.js":329}],108:[function(e,t,r){var n=e("./world-screen"),i=e("../../rules/main-menu-rule"),o=function(e){_inherits2(r,n);var t=_createSuper(r);function r(){var e;return _classCallCheck2(this,r),(e=t.call(this)).rule=new i,e}return _createClass2(r,[{key:"getId",value:function(){return"main-menu-background"}},{key:"setup",value:function(){_get(_getPrototypeOf(r.prototype),"setup",this).call(this),this.worldSoundController.tearDown()}},{key:"isMute",value:function(){return!0}}]),r}();t.exports=o},{"../../rules/main-menu-rule":83,"./world-screen":113}],109:[function(e,t,r){var i=e("./world-screen"),o=e("../../rules/multiplayer-rule"),n=function(e){_inherits2(n,i);var r=_createSuper(n);function n(e){var t;return _classCallCheck2(this,n),(t=r.call(this)).rule=new o({playerId:e.playerId,channel:e.channel,initialState:e.initialState,initialScoreboard:e.initialScoreboard}),t}return _createClass2(n,[{key:"getId",value:function(){return"multiplayer"}},{key:"addDebugValues",value:function(e){_get(_getPrototypeOf(n.prototype),"addDebugValues",this).call(this,e),e.Latency=this.rule.serverLagTracker.latency}}]),n}();t.exports=n},{"../../rules/multiplayer-rule":84,"./world-screen":113}],110:[function(e,t,r){var i=e("./world-screen"),o=e("../../rules/play-recording-rule"),n=function(e){_inherits2(n,i);var r=_createSuper(n);function n(e){var t;return _classCallCheck2(this,n),(t=r.call(this)).isGameStatePaused=!1,t.hideCursor=!1,t.rule=new o({recording:e.recording}),t}return _createClass2(n,[{key:"getId",value:function(){return"play-recording"}},{key:"gameStatePaused",value:function(){return this.isGameStatePaused}},{key:"isPlayerControllable",value:function(){return!1}}]),n}();t.exports=n},{"../../rules/play-recording-rule":85,"./world-screen":113}],111:[function(e,t,r){var i=e("./world-screen"),o=e("../../rules/replay-rule"),n=function(e){_inherits2(n,i);var r=_createSuper(n);function n(e){var t;return _classCallCheck2(this,n),(t=r.call(this)).rule=new o({states:e.states,targetIds:e.targetIds,indicators:e.indicators,replayType:e.replayType,roundId:e.roundId}),t}return _createClass2(n,[{key:"getId",value:function(){return"replay"}},{key:"isPlayerControllable",value:function(){return!1}}]),n}();t.exports=n},{"../../rules/replay-rule":86,"./world-screen":113}],112:[function(e,t,r){var n=e("./world-screen"),i=e("../../rules/test-rule"),o=function(e){_inherits2(r,n);var t=_createSuper(r);function r(){var e;return _classCallCheck2(this,r),(e=t.call(this)).rule=new i,e}return _createClass2(r,[{key:"getId",value:function(){return"test"}}]),r}();t.exports=o},{"../../rules/test-rule":87,"./world-screen":113}],113:[function(e,t,r){var n=e("rxjs/Rx"),c=e("chance"),l=e("pixi.js"),i=e("../../ui/screen"),a=e("../menu/pause-menu-screen"),s=e("../../../../shared/controllers/controller-factory"),u=e("../../../../shared/elements/element-factory"),h=e("../../gameplay/camera"),d=e("animate").Animation,p=e("animate").Timeline,f=e("../../interaction/keyboard"),m=e("../../interaction/gamepad"),v=e("../../../../shared/equipments/equipment-factory"),b=e("../../graphics/hud/hud"),y=e("../../graphics/intro-effect2"),g=e("../../../../shared/model/game-state"),w=e("../../../../shared/world/events/event-parser"),_=e("../../../../shared/world/events/took-damage"),x=e("../../../../shared/world/events/authority-event-proxy"),S=e("../../util/measure"),C=e("../../util/pixi-utils"),k=e("../../graphics/world/world-view-controller"),T=e("../../sound/world-sound-controller"),o=function(e){_inherits2(o,i);var t=_createSuper(o);function o(){var e;return _classCallCheck2(this,o),(e=t.call(this)).rule=null,e.randomPhraseInterval=5,e.hideCursor=!0,e.wasSetup=!1,e}return _createClass2(o,[{key:"setup",value:function(){var e=this;this.wasSetup||(this.wasSetup=!0,_get(_getPrototypeOf(o.prototype),"setup",this).call(this),this.setupBackground(),this.subscription(this.rx.keyDown.filter(function(e){return e===f.P||e===f.ESC})).subscribe(function(){return e.pauseMenu()}),this.subscription(this.rx.buttonDown.filter(function(e){return e.buttonIndex===m.BUTTON_PAUSE})).subscribe(function(){return e.pauseMenu()}),this.timeSinceSaidSomething=0,S("Generating world",function(){e.world=e.rule.getWorld(e)}),this.gameState=new g({world:this.world,factory:new u,controllerFactory:new s,equipmentFactory:new v,eventParser:new w,authority:this.rule.getAuthority(this)}),this.world.eventProxy=new x(this.gameState,this.rule.getAuthority()),this.world.clockProvider=this.gameState,this.worldContainer=new l.Container,this.view.addChild(this.worldContainer),this.camera=new h({viewport:{width:this.game.params.width,height:this.game.params.height},bounds:{x:0,y:0,width:this.world.width,height:this.world.height},interpolationPool:this.interpolationPool}),this.worldViewController=new k({world:this.world,renderer:this.game.renderer,interpolationPool:this.interpolationPool,characterColorProvider:this.rule,camera:this.camera,events:this.gameState.rx.appliedEvents}),this.worldContainer.addChild(this.worldViewController.view),this.worldSoundController=new T({world:this.world,camera:this.camera,events:this.gameState.rx.appliedEvents,soundPool:this.soundPool}),this.isMute()||this.worldSoundController.setup(),this.game.params.zoomdiff&&(this.cameraIndicator=new l.Graphics,this.cameraIndicator.beginFill(16711680,.5),this.cameraIndicator.drawRect(0,0,1,1),this.worldContainer.addChild(this.cameraIndicator)),this.paused=!1,this.createHUD(),this.camera.recenter(),S("Setting up rule",function(){e.rule.setup(e)}),this.rule.animateIn(this).runAsMain(this.interpolationPool))}},{key:"destroy",value:function(){_get(_getPrototypeOf(o.prototype),"destroy",this).call(this),this.rule.tearDown(this),this.worldSoundController.tearDown(),this.wasSetup=!1}},{key:"cycle",value:function(e){_get(_getPrototypeOf(o.prototype),"cycle",this).call(this,e),this.gameStatePaused()||this.gameState.cycle(e/this.timeFactor()),this.camera.cycle(e),this.camera.target===this.hero&&(this.heroController.cameraOffset?(this.camera.offsetX=this.heroController.cameraOffset.x,this.camera.offsetY=this.heroController.cameraOffset.y):(this.camera.offsetX=0,this.camera.offsetY=0)),this.worldViewController.update(),this.updateBackground();var t=this.camera.zoom-(this.game.params.zoomdiff||0),r=t-this.camera.zoom;if(this.worldContainer.position.x=-this.camera.position.x*t-r*this.camera.viewport.width/2,this.worldContainer.position.y=-this.camera.position.y*t-r*this.camera.viewport.height/2,this.worldContainer.scale.x=t,this.worldContainer.scale.y=t,this.hud&&(this.hud.view.position.x=this.camera.shakeOffset.x,this.hud.view.position.y=this.camera.shakeOffset.y),this.game.params.zoomdiff){var n=this.camera.visibleRectangle();this.cameraIndicator.position.x=n.x,this.cameraIndicator.position.y=n.y,this.cameraIndicator.scale.x=n.width,this.cameraIndicator.scale.y=n.height}if(this.hud&&this.hero){var i=this.hero.healthElement();i&&(this.hud.setHealth(i.health,i.maxHealth),this.hud.setShield(i.shield,i.maxShield))}}},{key:"timeFactor",value:function(){return this.world.environment.timeFactor}},{key:"scoreChangeText",value:function(e,t,r){var n=new l.Text(e.toUpperCase(),{fill:"#0f0",fontFamily:"SquarePixel",fontSize:36,align:"center",dropShadow:!0,dropShadowColor:"#000",dropShadowDistance:2,dropShadowAngle:Math.PI/2});n.anchor.x=.5,n.anchor.y=.5,n.position.x=t,n.position.y=r,this.worldViewController.view.addChild(n),(new p).add(0,new d(n).interp("alpha",0,1).during(.1)).add(0,new d(n).interpToOffset("position.y",-80).during(.2)).wait(1).add(new d(n).interp("alpha",1,0).during(.4)).add(function(){return C.remove(n)}).run(this.interpolationPool)}},{key:"setupBackground",value:function(){this.bgColor=new l.Graphics,this.bgColor.beginFill(this.rule.skyColor()),this.bgColor.drawRect(0,0,1,1),this.bgColor.width=this.game.params.width,this.bgColor.height=this.game.params.height,this.view.addChildAt(this.bgColor,0);var e=new l.Container;this.view.addChildAt(e,1);var t=l.Texture.fromImage("assets/textures/cloud.png");this.backgroundClouds=[];for(var r=0;r<10;r++){var n=new l.Sprite(t);n.anchor.x=.5,n.anchor.y=.5,n.scale.x=.3+.7*r/10,n.scale.y=.3+.7*r/10,e.addChild(n),this.backgroundClouds.push(n)}var i=[{texture:l.Texture.fromImage("assets/textures/hills2.png"),color:25344},{texture:l.Texture.fromImage("assets/textures/hills1.png"),color:35584}];this.backgroundHills=[],this.backgroundHillsFillers=[];for(var o=0;o<i.length;o++){var a=new l.extras.TilingSprite(i[o].texture,this.game.params.width,i[o].texture.height);this.view.addChild(a),this.backgroundHills.push(a);var s=new l.Graphics;s.beginFill(i[o].color),s.drawRect(0,0,1,1),this.view.addChild(s),this.backgroundHillsFillers.push(s)}}},{key:"parallaxPosition",value:function(e,t,r){var n=this.camera.center.x-e,i=this.camera.center.y-t;return{x:this.game.params.width/2-n*(1-r),y:this.game.params.height/2-i*(1-r)}}},{key:"updateBackground",value:function(){var u=this;this.backgroundClouds.forEach(function(e,t){var r=new c(t),n=u.game.params.width+200,i=r.integer({min:-200,max:n}),o=.5+.25*(1-t/u.backgroundClouds.length),a=i+50*u.age,s=u.world.height*r.floating({min:.2,max:.5}),l=u.parallaxPosition(a,s,o);e.position.x=(l.x- -200)%(n- -200)-200,e.position.y=l.y});var o=new c(0),a=Number.MAX_VALUE;this.backgroundHills.forEach(function(e,t,r){var n=.5+.25*(1-t/r.length),i=u.parallaxPosition(0,u.world.lowestVoidY-e.height,n);e.tilePosition.x=i.x+o.integer({min:0,max:500}),e.position.y=i.y,a=Math.min(a,e.position.y+e.height)});var s=this.camera.positionOnScreen(0,this.world.lowestVoidY).y*this.camera.zoom;this.backgroundHillsFillers.forEach(function(e,t,r){var n,i=u.backgroundHills[t],o=i.position.y+i.height;if(t<r.length-1){var a=u.backgroundHills[t+1];n=a.position.y+a.height}else n=u.game.params.height;e.position.y=o,e.width=u.game.params.width,e.height=Math.min(u.game.params.height-e.position.y,s-n),e.height=Math.min(n,s)-o}),this.bgColor.height=this.backgroundHillsFillers[0].position.y}},{key:"flash",value:function(e,t){var r=new l.Graphics;r.beginFill(e),r.drawRect(0,0,1,1),r.width=this.game.params.width,r.height=this.game.params.height,this.view.addChild(r),(new p).add(new d(r).interp("alpha",1,0).during(t||.1)).add(function(){C.remove(r)}).run(this.interpolationPool)}},{key:"visibleTiles",value:function(){var t=this,r=[];return this.world.forEachTile(function(e){t.camera.containsPoint(e.center.x,e.center.y,e.width)&&r.push(e)}),r}},{key:"intro",value:function(){var e=new y(this.game.params.width,this.game.params.height);return this.view.addChild(e),(new p).add(e.animateOut()).add(function(){C.remove(e)})}},{key:"outro",value:function(){var e=new y(this.game.params.width,this.game.params.height);return this.view.addChild(e),(new p).add(e.animateIn()).add(function(){C.remove(e)})}},{key:"animateWorldIn",value:function(){var a=new c(1),e=a.shuffle(this.worldViewController.visibleChunkViews()),s=new p;return e.forEach(function(e,t){var r=a.pickone(["x","y"]),n=400*a.pickone([-1,1]),i=e.view.position[r]+n,o=e.view.position[r];e.view.position[r]=i,e.view.alpha=0,s.add(.01*t,new d(e.view).interp("position."+r,i,o).during(.1)),s.add(.01*t,new d(e.view).interp("alpha",0,1).during(.1))}),s}},{key:"addDebugValues",value:function(e){_get(_getPrototypeOf(o.prototype),"addDebugValues",this).call(this,e),e.Paused=this.paused,e.Cycles=this.gameState.cyclesInFrame+"/"+this.world.cyclables.length}},{key:"createHUD",value:function(){this.hud=new b({width:this.game.params.width,height:this.game.params.height,interpolationPool:this.interpolationPool}),this.view.addChild(this.hud.view)}},{key:"pauseMenu",value:function(){this.rule.isPausable(this)&&this.game.pushScreen(new a({options:this.rule.getPauseOptions(this)}))}},{key:"background",value:function(){_get(_getPrototypeOf(o.prototype),"background",this).call(this),this.paused=!0,this.hud&&(this.hud.view.visible=!1)}},{key:"foreground",value:function(){_get(_getPrototypeOf(o.prototype),"foreground",this).call(this),this.paused=!1,this.hud&&(this.hud.view.visible=!0)}},{key:"tearDownHero",value:function(){this.heroController&&this.gameState.removeController(this.heroController),this.hero=null,this.rule.updateHUD(this),this.worldSoundController.characterId=null}},{key:"setupHero",value:function(t){var e=this;this.tearDownHero(),this.hero=t,this.worldSoundController.characterId=this.hero.id,this.heroController=this.rule.createHeroController(this,this.hero),this.gameState.addController(this.heroController),this.rule.updateHUD(this),this.subscription(this.gameState.rx.appliedEvents.filter(function(e){return e instanceof _&&e.characterId===t.id})).subscribe(function(){return e.rule.heroHurt(e)}),this.subscription(this.hero.diedSubject()).subscribe(function(){return e.tearDownHero()}),this.camera.follow(this.hero);var r=this.worldViewController.existingViewControllerForElement(this.hero);r.showKeyboardInstructions(r.getOrCreateView()),n.Observable.timer(4e3).subscribe(function(){return r.hideKeyboardInstructions(r.getOrCreateView())})}},{key:"isMute",value:function(){return!1}},{key:"gameStatePaused",value:function(){return!1}},{key:"isPlayerControllable",value:function(){return!0}}]),o}();t.exports=o},{"../../../../shared/controllers/controller-factory":853,"../../../../shared/elements/element-factory":866,"../../../../shared/equipments/equipment-factory":886,"../../../../shared/model/game-state":899,"../../../../shared/world/events/authority-event-proxy":941,"../../../../shared/world/events/event-parser":946,"../../../../shared/world/events/took-damage":956,"../../gameplay/camera":17,"../../graphics/hud/hud":51,"../../graphics/intro-effect2":55,"../../graphics/world/world-view-controller":69,"../../interaction/gamepad":72,"../../interaction/keyboard":74,"../../sound/world-sound-controller":116,"../../ui/screen":121,"../../util/measure":125,"../../util/pixi-utils":128,"../menu/pause-menu-screen":101,animate:161,chance:177,"pixi.js":329,"rxjs/Rx":379}],114:[function(e,t,r){var n=e("howler").Howler,i=e("../../../shared/util/random"),o=function(){function r(e,t){_classCallCheck2(this,r),this._howl=e,this._id=t}return _createClass2(r,[{key:"stop",value:function(){return this._howl.stop(this._id),this}},{key:"volume",value:function(e){return this._howl.volume(e,this._id),this}},{key:"getVolume",value:function(){return this._howl.volume(this._id)}},{key:"rate",value:function(e){return this._howl.rate(e,this._id),this}},{key:"fade",value:function(e,t,r){return this._howl.fade(e,t,r),this}},{key:"once",value:function(e,t){return this._howl.once(e,t,this._id),this}},{key:"loop",value:function(){return this._howl.loop()}},{key:"setMuted",value:function(e){return this._howl.mute(e)}}]),r}(),a=function(){function e(){_classCallCheck2(this,e),this.soundMap={},this.currentLoopId=null,this.currentLoopSound=null,this.suppressWarnings=!1,this.soundList=[],this.effectsVolume=1,this.soundtrackVolume=1}return _createClass2(e,[{key:"prepare",value:function(e,t){var r=this;(this.soundMap[e]=t).forEach(function(e){r.soundList.push(e)})}},{key:"randomSound",value:function(e){if(this.soundMap[e])return i.randPick(this.soundMap[e]);this.suppressWarnings||console.warn("Unknown sound "+e)}},{key:"play",value:function(e){return this.playWithVolume(e,1)}},{key:"playWithVolume",value:function(e,t){return this.playWithVolumeAndRate(e,t,1)}},{key:"playWithVolumeAndRate",value:function(e,t,r){var n=this.randomSound(e);if(n)return new o(n,n.play()).volume(t*this.effectsVolume).rate(r)}},{key:"playLoop",value:function(e){var t=this;if(this.currentLoopId!==e){this.stopLoop();var r=this.play(e);r&&(this.currentLoopId=e,this.currentLoopSound=r,this.currentLoopSound.rate(1).fade(0,this.soundtrackVolume,3e3),this.currentLoopSound.once("end",function(){t.stopLoop(),t.playLoop(e)}))}}},{key:"stopLoop",value:function(){if(!this.currentLoopSound)return Promise.resolve();this.currentLoopSound.stop(),this.currentLoopId=null,this.currentLoopSound=null}},{key:"setSoundtrackVolume",value:function(e){this.soundtrackVolume=e,this.currentLoopSound&&this.currentLoopSound.volume(e)}},{key:"setEffectsVolume",value:function(e){this.effectsVolume=e}},{key:"setMuted",value:function(e){n.mute(e)}},{key:"setLoopMuted",value:function(e){this.currentLoopSound&&this.currentLoopSound.setMuted(e)}}]),e}();t.exports=a},{"../../../shared/util/random":936,howler:189}],115:[function(e,t,r){var o=e("../../../shared/util/array-utils"),n=function(){function t(e){_classCallCheck2(this,t),this._soundManager=e,this._sounds=[],this._proxies=[]}return _createClass2(t,[{key:"addProxy",value:function(e){this._proxies.push(e)}},{key:"removeProxy",value:function(e){o.remove(this._proxies,e)}},{key:"playWithVolume",value:function(e,t){var r=this,n={soundId:e,volume:t};this._proxies.forEach(function(e){return n=e(n)});var i=this._soundManager.playWithVolume(n.soundId,n.volume);if(i){if(!i.loop())return i.once("end",function(){return o.remove(r._sounds,i)});i.once("stop",function(){return o.remove(r._sounds,i)}),this._sounds.push(i)}return i}},{key:"stopAll",value:function(){this._sounds.slice().forEach(function(e){return e.stop()}),this._sounds=[]}}]),t}();t.exports=n},{"../../../shared/util/array-utils":929}],116:[function(e,t,r){var a=e("rxjs/Rx"),n=e("../../../shared/world/events/jump"),i=e("../../../shared/world/events/land"),s=e("../../../shared/world/events/bump"),l=e("../../../shared/world/events/addition"),u=e("../../../shared/world/events/explosion"),c=e("../../../shared/world/events/acquired-equipment"),h=e("../../../shared/world/events/acquired-shield"),d=e("../../../shared/world/events/took-damage"),p=e("../../../shared/world/events/spawn"),f=e("../../../shared/world/events/heal"),m=e("../../../shared/world/events/equipment-shot"),v=e("../../../shared/elements/equipment-holder"),b=e("../../../shared/elements/crown"),y=e("../../../shared/equipments/flamethrower-equipment"),g=.2,w=.8,_=1.2,o=function(){function t(e){_classCallCheck2(this,t),this.world=e.world,this.events=e.events,this.camera=e.camera,this.soundPool=e.soundPool,this.characterId=null,this.subscriptions=[],this.rx={},this.rx.tearDown=new a.Subject}return _createClass2(t,[{key:"setup",value:function(){this.setupBindings()}},{key:"tearDown",value:function(){this.rx.tearDown.next()}},{key:"subscription",value:function(e){this.subscriptions.push(e)}},{key:"setupBindings",value:function(){var o=this;this.subscription(this.events.filter(function(e){return e instanceof n}).map(function(e){return o.positionOf(e.characterId)}).subscribe(function(e){return o.playWithDistance("jump",e,g,.3)})),this.subscription(this.events.filter(function(e){return e instanceof i}).map(function(e){return o.positionOf(e.characterId)}).subscribe(function(e){return o.playWithDistance("land",e,g)})),this.subscription(this.events.filter(function(e){return e instanceof d}).map(function(e){return o.positionOf(e.characterId)}).subscribe(function(e){return o.playWithDistance("kill",e,g)})),this.subscription(this.events.filter(function(e){return e instanceof s}).map(function(e){return o.positionOf(e.bumperId)}).subscribe(function(e){return o.playWithDistance("bumper",e,g)})),this.subscription(this.events.filter(function(e){return e instanceof m&&e.shotEvent instanceof l&&"equipment-shotgun"===e.equipmentHolderState.equipment.type}).map(function(e){return o.world.cyclableById(e.equipmentHolderState.owner)}).subscribe(function(e){return o.playWithDistance("shotgun",e,w,.7)})),this.subscription(this.events.filter(function(e){return e instanceof m&&e.shotEvent instanceof l&&"equipment-machine-gun"===e.equipmentHolderState.equipment.type}).map(function(e){return o.world.cyclableById(e.equipmentHolderState.owner)}).subscribe(function(e){return o.playWithDistance("machine-gun",e,w,.7)})),this.subscription(this.events.filter(function(e){return e instanceof m&&e.shotEvent instanceof l&&"plasma-bullet"===e.shotEvent.elementState.type}).map(function(e){return e.shotEvent.elementState}).subscribe(function(e){return o.playWithDistance("plasma",e,g)})),this.subscription(this.events.filter(function(e){return e instanceof m&&e.shotEvent instanceof l&&"rocket"===e.shotEvent.elementState.type}).map(function(e){return e.shotEvent.elementState}).subscribe(function(e){return o.playWithDistance("rocket",e,g)})),this.subscription(this.events.filter(function(e){return e instanceof m&&e.shotEvent instanceof l&&"grenade"===e.shotEvent.elementState.type}).map(function(e){return e.shotEvent.elementState}).subscribe(function(e){return o.playWithDistance("grenade-launch",e,g)})),this.subscription(this.events.filter(function(e){return e instanceof u}).map(function(e){return e.source}).subscribe(function(e){return o.playWithDistance("explosion",e,_)})),this.subscription(this.events.filter(function(e){return e instanceof c}).map(function(e){return o.world.cyclableById(e.characterId)}).subscribe(function(e){return o.playWithDistance("weapon",e,g)})),this.subscription(this.events.filter(function(e){return e instanceof h}).map(function(e){return o.world.cyclableById(e.characterId)}).subscribe(function(e){return o.playWithDistance("shield",e,g)})),this.subscription(this.events.filter(function(e){return e instanceof p}).map(function(e){return o.world.cyclableById(e.elementState.id)}).subscribe(function(e){return o.playWithDistance("spawn",e,g)})),this.subscription(this.events.filter(function(e){return e instanceof f}).filter(function(e){return e.characterId===o.characterId}).subscribe(function(){return o.playWithVolume("health",1)})),this.subscription(this.events.filter(function(e){return e instanceof v}).filter(function(e){return e.characterId===o.characterId}).subscribe(function(){return o.playWithVolume("health",1)})),this.subscription(this.world.rx.additions.filter(function(e){return e instanceof v}).flatMap(function(r){var e,n=function(){return e||(e=o.soundPool.playWithVolume("jetpack")),e},i=function(){e&&e.stop(),e=null};return r.rx.cycle.map(function(){if(!(r.equipment instanceof y))return!1;var e=r.character;return!!e&&e.triggeringEquipment}).timeout(100).catch(function(){return a.Observable.of(!1)}).map(function(e){var t=r.character;return{play:n,stop:i,source:t,shouldPlay:t&&e}})}).subscribe(function(e){if(e.source&&e.shouldPlay){var t=.4*o.distanceVolumeRatio(e.source,g),r=e.play();r&&r.volume(t)}else e.stop()})),this.subscription(this.world.rx.additions.filter(function(e){return e instanceof b}).flatMap(function(e){return e.rx.cycle.map(function(){return e.owner})}).distinctUntilChanged().filter(function(e){return!!e}).subscribe(function(){return o.playWithVolume("crown",1)}))}},{key:"playWithDistance",value:function(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:g,n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:1;if(t){var i=this.distanceVolumeRatio(t,r)*n;this.playWithVolume(e,i)}}},{key:"playWithVolume",value:function(e,t){t<.02||this.soundPool.playWithVolume(e,t)}},{key:"distanceVolumeRatio",value:function(e,t){var r=this.camera.visibleRectangle(),n=Math.abs(e.x-(r.x+r.width/2)),i=Math.abs(e.y-(r.y+r.height/2)),o=Math.max(0,n-r.width/2),a=Math.max(0,i-r.height/2),s=Math.pointDistance(0,0,o,a)/(Math.pointDistance(0,0,r.width,r.height)/2*t);return Math.max(0,1-s)}},{key:"positionOf",value:function(e){return this.world.cyclableById(e)}}]),t}();t.exports=o},{"../../../shared/elements/crown":861,"../../../shared/elements/equipment-holder":868,"../../../shared/equipments/flamethrower-equipment":888,"../../../shared/world/events/acquired-equipment":938,"../../../shared/world/events/acquired-shield":939,"../../../shared/world/events/addition":940,"../../../shared/world/events/bump":942,"../../../shared/world/events/equipment-shot":945,"../../../shared/world/events/explosion":949,"../../../shared/world/events/heal":950,"../../../shared/world/events/jump":952,"../../../shared/world/events/land":953,"../../../shared/world/events/spawn":955,"../../../shared/world/events/took-damage":956,"rxjs/Rx":379}],117:[function(e,t,r){var a=e("pixi.js"),n=e("../util/pixi-utils"),i=function(){function r(){_classCallCheck2(this,r),this.view=new a.Container;var e=new a.Text("You were fragged by",{fill:"#ffffff",fontFamily:"SquarePixel",fontSize:30,dropShadow:!0,dropShadowColor:"#000",dropShadowAngle:Math.PI/2,dropShadowDistance:2});e.anchor.x=.5,e.position.x=250,e.position.y=20,this.view.addChild(e),this.playerNameLabel=new a.Text(" ",{fill:"#ffffff",fontFamily:"SquarePixel",fontSize:50,dropShadow:!0,dropShadowColor:"#000",dropShadowAngle:Math.PI/2,dropShadowDistance:2}),this.playerNameLabel.anchor.x=.5,this.playerNameLabel.position.x=250,this.playerNameLabel.position.y=e.position.y+e.height+10,this.view.addChild(this.playerNameLabel),this.itemsContainer=new a.Container,this.view.addChild(this.itemsContainer);var t=new a.Graphics;t.beginFill(0,.75),t.drawRect(0,0,1,1),t.width=500,t.height=this.playerNameLabel.position.y+this.playerNameLabel.height+100,this.view.addChildAt(t,0),this.view.visible=!1}return _createClass2(r,[{key:"setPlayer",value:function(e,t){var o=this;this.playerNameLabel.text=t.isSelf?"Yourself":e.name,n.removeAllChildren(this.itemsContainer),t.items.forEach(function(e,t,r){var n=new a.Text(e.label,{fill:"#ffffff",fontFamily:"SquarePixel",fontSize:20,dropShadow:!0,dropShadowColor:"#000",dropShadowAngle:Math.PI/2,dropShadowDistance:2});n.anchor.x=.5,n.position.x=(t+.5)/r.length*500,n.position.y=o.playerNameLabel.position.y+o.playerNameLabel.height+20,o.itemsContainer.addChild(n);var i=new a.Text(e.value,{fill:"#ffffff",fontFamily:"SquarePixel",fontSize:40,dropShadow:!0,dropShadowColor:"#000",dropShadowAngle:Math.PI/2,dropShadowDistance:2});i.anchor.x=.5,i.position.x=(t+.5)/r.length*500,i.position.y=n.position.y+n.height+10,o.itemsContainer.addChild(i)})}},{key:"hide",value:function(){this.view.visible=!1,n.removeAllChildren(this.itemsContainer)}},{key:"show",value:function(){this.view.visible=!0}}]),r}();t.exports=i},{"../util/pixi-utils":128,"pixi.js":329}],118:[function(e,t,r){var o=e("pixi.js"),a=e("animate").Timeline,s=e("animate").Animation,l=e("../util/pixi-utils"),n=function(e){_inherits2(n,o.Container);var r=_createSuper(n);function n(e){var t;return _classCallCheck2(this,n),(t=r.call(this)).trackWidth=e.width,t.trackHeight=e.height,t.track=new o.Graphics,t.track.beginFill(8947848),t.track.drawRect(0,0,e.width,e.height),t.addChild(t.track),t.loader=new o.Graphics,t.loader.beginFill(16777215),t.loader.drawRect(0,0,e.width,e.height),t.addChild(t.loader),t.value=0,t}return _createClass2(n,[{key:"value",get:function(){return this.currentValue},set:function(e){this.currentValue=Math.between(0,e,1),this.loader.scale.x=this.currentValue}},{key:"setValueWithAnimation",value:function(e){var t=this.value,r=e-this.value;if(0!==r){if(this.value=e,r<-.05){var n=new o.Graphics;return n.beginFill(16777215),n.drawRect(0,0,r*this.trackWidth,this.trackHeight),n.endFill(),n.position.x=t*this.trackWidth,this.addChild(n),(new a).add(0,new s(n).interp("alpha",1,0).during(.3)).add(0,new s(n).interp("position.y",0,20,Math.easeInQuart).during(.3)).add(function(){return l.remove(r)})}if(0<r){var i=new o.Graphics;return i.beginFill(65280),i.drawRect(0,0,-r*this.trackWidth,this.trackHeight),i.endFill(),i.position.x=this.value*this.trackWidth,this.addChild(i),(new a).add(0,new s(i).interp("alpha",1,0).during(.5)).add(0,new s(i).interp("scale.x",1,0).during(.5)).add(function(){return l.remove(r)})}}}}]),n}();t.exports=n},{"../util/pixi-utils":128,animate:161,"pixi.js":329}],119:[function(e,t,r){var l=e("pixi.js"),a=e("animate").Timeline,u=e("animate").Animation,n=e("../util/pixi-utils"),i=function(){function t(e){_classCallCheck2(this,t),this.scoreboard=e.scoreboard,this.playerSet=e.playerSet,this.interpolationPool=e.interpolationPool,this.totalHeight=0,this.view=new l.Container,this.initialize()}return _createClass2(t,[{key:"initialize",value:function(){this.playerIdToItem={}}},{key:"update",value:function(){var s=this;Object.keys(this.playerIdToItem).slice().forEach(function(e){if(!s.playerSet.playerById(e)){var t=s.playerIdToItem[e];n.remove(t.container),delete s.playerIdToItem[e]}}),this.playerSet.forEach(function(e){if(!(e.id in s.playerIdToItem)){var t=new l.Container;s.view.addChild(t);var r=new l.Graphics;r.beginFill(0),r.drawRect(-10,-10,20,20),r.position.x=2,r.position.y=2,t.addChild(r);var n=new l.Graphics;n.beginFill(16777215),n.drawRect(-10,-10,20,20),t.addChild(n);var i=new l.Text(e.name,{fill:"#ffffff",fontFamily:"SquarePixel",fontSize:30,dropShadow:!0,dropShadowColor:"#000",dropShadowAngle:Math.PI/2,dropShadowDistance:2});i.anchor.y=.5,i.position.x=25,i.position.y=-2,t.addChild(i);var o=new l.Text("0",{fill:"#ffffff",fontFamily:"SquarePixel",fontSize:30,dropShadow:!0,dropShadowColor:"#000",dropShadowAngle:Math.PI/2,dropShadowDistance:2});if(o.anchor.x=1,o.anchor.y=.5,o.position.x=280,o.position.y=i.position.y,t.addChild(o),e===s.playerSet.ownPlayer()){var a=new l.Graphics;a.beginFill(0,.5),a.drawRect(-12,-12,290,24),t.addChildAt(a,0)}s.playerIdToItem[e.id]={label:i,color:n,container:t,score:o}}}),this.scoreboard.rows.forEach(function(e,t){var r=s.playerSet.playerById(e.playerId),n=s.playerIdToItem[e.playerId];if(r&&n){var i=r.name+(r.isBot?" (AI)":"");10<r.name.length?n.label.text=i.slice(0,10)+"...":n.label.text=i,n.score.text=(e.score||0).toString(),n.color.tint=r.color;var o=25*t;n.targetPosition!==o&&(n.targetPosition=o,(new a).add(new u(n.container).interpTo("position.y",o).during(.3)).run(s.interpolationPool))}}),this.totalHeight=25*this.scoreboard.rows.length}},{key:"requiredHeight",value:function(){return this.totalHeight}}]),t}();t.exports=i},{"../util/pixi-utils":128,animate:161,"pixi.js":329}],120:[function(e,t,r){var m=e("pixi.js"),v={fill:"#ffffff",fontFamily:"SquarePixel",fontSize:20},b={fill:"#ffffff",fontFamily:"SquarePixel",fontSize:40},n=function(){function t(e){_classCallCheck2(this,t),this.scoreboard=e.scoreboard,this.playerSet=e.playerSet,this.view=new m.Container,this.initialize()}return _createClass2(t,[{key:"initialize",value:function(){this.rows=[];var e=new m.Container;e.position.y=20,this.view.addChild(e);var t=new m.Text("Kills",v);t.anchor.x=.5,t.anchor.y=.5,t.position.x=850,e.addChild(t);var r=new m.Text("Score",v);r.anchor.x=.5,r.anchor.y=.5,r.position.x=1e3,e.addChild(r);var n=new m.Text("Latency",v);n.anchor.x=.5,n.anchor.y=.5,n.position.x=1150,e.addChild(n);var i=new m.Graphics;i.beginFill(16777215,.2),this.view.addChild(i);for(var o=40,a=0;a<10;a++){var s=new m.Container;s.position.y=o+20,this.view.addChild(s);var l=new m.Graphics;l.beginFill(0),l.drawRect(-10,-10,20,20),l.position.x=22,l.position.y=2,s.addChild(l);var u=new m.Graphics;u.beginFill(16777215),u.drawRect(-10,-10,20,20),u.position.x=20,s.addChild(u);var c=new m.Text("",b);c.anchor.y=.5,c.position.x=50,s.addChild(c);var h=new m.Text("",b);h.anchor.x=.5,h.anchor.y=.5,h.position.x=850,s.addChild(h);var d=new m.Text("",b);d.anchor.x=.5,d.anchor.y=.5,d.position.x=1e3,s.addChild(d);var p=new m.Text("",b);p.anchor.x=.5,p.anchor.y=.5,p.position.x=1150,s.addChild(p),this.rows.push({labels:s,color:u,name:c,kills:h,score:d,latency:p}),a%2==0&&i.drawRect(0,o,1200,40),o+=40}var f=new m.Graphics;f.beginFill(0,.5),f.drawRect(0,0,1200,440),f.endFill(),this.view.addChildAt(f,0),this.ownRowBackground=new m.Graphics,this.ownRowBackground.lineStyle(2,16711680),this.ownRowBackground.drawRect(0,-20,1200,40),this.view.addChildAt(this.ownRowBackground,1)}},{key:"updateLabels",value:function(){var i=this;this.rows.forEach(function(e){return e.labels.visible=!1}),this.scoreboard.rows.forEach(function(e,t){var r=i.rows[t];if(r){var n=i.playerSet.playerById(e.playerId);n&&(r.labels.visible=!0,r.color.tint=n.color,r.name.text=n.name+(n.isBot?" (AI)":""),r.kills.text=e.kills.toString(),r.score.text=e.score.toString(),r.latency.text=n.latency.toString(),n===i.playerSet.ownPlayer()&&(i.ownRowBackground.position.y=r.labels.position.y))}})}}]),t}();t.exports=n},{"pixi.js":329}],121:[function(e,t,r){var i=e("pixi.js"),o=e("rxjs/Rx"),a=e("animate").InterpolationPool,s=e("../interaction/keyboard"),l=e("../interaction/gamepad"),u=e("../sound/sound-pool"),n=e("../../../shared/util/array-utils"),c=e("../util/pixi-utils"),h=function(){function e(){_classCallCheck2(this,e),this.game=null,this.hideCursor=!0}return _createClass2(e,[{key:"getId",value:function(){throw new Error("Unimplemented getId() for screen")}},{key:"setup",value:function(){var n=this;this.clickableAreas=[],this.currentArea=null,this.subscriptions=[],this.age=0,this.focusedArea=null,this.rx={},this.rx.cycle=new o.Subject,this.rx.postCycle=new o.Subject,this.rx.foreground=new o.BehaviorSubject(!1),this.rx.keyDown=new o.Subject,this.rx.keyUp=new o.Subject,this.rx.isKeyDown=function(t){var e=n.rx.keyDown.filter(function(e){return e===t}).map(function(){return!0}),r=n.rx.keyUp.filter(function(e){return e===t}).map(function(){return!1});return o.Observable.merge(r,e)},this.rx.buttonDown=new o.Subject,this.rx.buttonUp=new o.Subject,this.rx.axisChange=new o.Subject,this.rx.destroy=new o.Subject,this.rx.touchEnd=new o.Subject,this.view=new i.Container,this.view.debugLabel="Screen/"+this.getId(),this.interpolationPool=new a,this.soundPool=new u(this.game.soundManager),this.subscription(this.rx.keyDown.filter(function(e){return e===s.ENTER})).subscribe(function(){return n.interpolationPool.skip()}),this.subscription(this.rx.buttonDown.filter(function(e){return e.buttonIndex===l.BUTTON_ACTION_BOTTOM})).subscribe(function(){return n.interpolationPool.skip()})}},{key:"destroy",value:function(){c.remove(this.view),this.view=null,this.interpolationPool=null,this.focusedArea=null,this.soundPool.stopAll(),this.rx.destroy.next()}},{key:"foreground",value:function(){this.rx.foreground.next(!0)}},{key:"background",value:function(){this.soundPool.stopAll(),this.rx.foreground.next(!1)}},{key:"cycle",value:function(e){this.age+=e,this.rx.cycle.next(e)}},{key:"postCycle",value:function(e){this.interpolationPool.cycle(e),this.rx.postCycle.next(e)}},{key:"subscription",value:function(e){return e.takeUntil(this.rx.destroy)}},{key:"keyDown",value:function(e){this.rx.keyDown.next(e)}},{key:"keyUp",value:function(e){this.rx.keyUp.next(e)}},{key:"buttonDown",value:function(e,t){this.rx.buttonDown.next({gamepad:e,buttonIndex:t})}},{key:"buttonUp",value:function(e,t){this.rx.buttonUp.next({gamepad:e,buttonIndex:t})}},{key:"axisChange",value:function(e,t,r){this.rx.axisChange.next({gamepad:e,axisIndex:t,value:r})}},{key:"addClickableArea",value:function(e){this.clickableAreas.push(e)}},{key:"removeClickableArea",value:function(e){n.remove(this.clickableAreas,e)}},{key:"cycleFocus",value:function(e){var t=this.enabledAreas();if(this.focusedArea)if(0!==t.length){var r,n=t.indexOf(this.focusedArea);r=0<=n?(n+e+this.clickableAreas.length)%this.clickableAreas.length:0,this.focusOn(this.clickableAreas[r])}else this.focusOn(null);else 0<t.length&&this.focusOn(t[0])}},{key:"moveFocus",value:function(e,t){var r=this,n=this.enabledAreas();if(this.focusedArea){var i=this.focusedArea.center(),o=Math.atan2(t,e),a=n.filter(function(e){return e!==r.focusedArea}).filter(function(e){var t=e.center(),r=Math.atan2(t.y-i.y,t.x-i.x),n=Math.normalizeAngle(r-o);return Math.abs(n)<Math.PI/3}).sort(function(e,t){return Math.distance(e.center(),i)-Math.distance(t.center(),i)});0!==a.length&&this.focusOn(a[0])}else 0<n.length&&this.focusOn(n[0])}},{key:"focusOn",value:function(e){e!==this.focusedArea&&this.focusedArea&&(this.focusedArea.setFocused(!1),this.focusedArea.cancel()),this.focusedArea=e,this.focusedArea&&this.focusedArea.setFocused(!0)}},{key:"enabledAreas",value:function(){return this.clickableAreas.filter(function(e){return e.enabled})}},{key:"getAreaForCoordinates",value:function(t,r){return this.enabledAreas().filter(function(e){return e.contains(t,r)})[0]||null}},{key:"touchStart",value:function(e,t){this.currentArea=this.getAreaForCoordinates(e,t),this.currentArea&&(this.focusedArea&&this.focusedArea.setFocused(!1),this.focusedArea=this.currentArea,this.overCurrentArea=!0,this.currentArea.down(e,t))}},{key:"touchMove",value:function(e,t){this.currentArea&&(this.overCurrentArea&&!this.currentArea.contains(e,t)&&(this.currentArea.cancel(),this.overCurrentArea=!1),this.overCurrentArea&&this.currentArea.move(e,t),!this.overCurrentArea&&this.currentArea.contains(e,t)&&(this.currentArea.down(e,t),this.overCurrentArea=!0))}},{key:"touchEnd",value:function(){this.rx.touchEnd.next(),this.currentArea&&(this.overCurrentArea&&this.currentArea.action(),this.currentArea=null,this.overCurrentArea=!1)}},{key:"mouseMove",value:function(e,t){}},{key:"addDebugValues",value:function(e){e["Screen ID"]=this.getId()}},{key:"pop",value:function(){this.game&&this.game.screen()===this?this.game.popScreen():console.warn("Attempted to pop a screen that wasn't at the top of the stack")}},{key:"makeCurrent",value:function(){if(this.game&&-1!==this.game.screens.indexOf(this))for(;this.game.screen()!==this;)this.game.popScreen();else console.warn("Attempted to make a screen current while not being on a game")}}]),e}();t.exports=h},{"../../../shared/util/array-utils":929,"../interaction/gamepad":72,"../interaction/keyboard":74,"../sound/sound-pool":115,"../util/pixi-utils":128,animate:161,"pixi.js":329,"rxjs/Rx":379}],122:[function(e,t,r){var a=e("pixi.js"),n=function(e){_inherits2(o,a.Container);var i=_createSuper(o);function o(e){var t;_classCallCheck2(this,o),t=i.call(this);var r=e.width||500,n=e.padding||20;return t.title=new a.Text(e.title,{fill:"#fff",fontFamily:"SquarePixel",fontSize:36,dropShadow:!0,dropShadowColor:"#000",dropShadowAngle:Math.PI/2,dropShadowDistance:5,align:"center",wordWrap:!0,wordWrapWidth:r-2*n}),t.title.anchor.x=.5,t.title.position.x=r/2,t.title.position.y=n,t.addChild(t.title),t.content=new a.Text(e.content,{fill:"#fff",fontFamily:"Courier",fontSize:24,align:"justify",wordWrap:!0,wordWrapWidth:r-2*n}),t.content.position.x=n,t.content.position.y=t.title.position.y+t.title.height+n,t.addChild(t.content),t.background=new a.Graphics,t.background.beginFill(0,.8),t.background.drawRect(0,0,1,1),t.background.width=r,t.background.height=t.content.position.y+t.content.height+n,t.addChildAt(t.background,0),t}return _createClass2(o)}();t.exports=n},{"pixi.js":329}],123:[function(e,t,r){var n=e("../../../shared/util/logger"),i=function(e){_inherits2(r,n);var t=_createSuper(r);function r(){return _classCallCheck2(this,r),t.apply(this,arguments)}return _createClass2(r,[{key:"debug",value:function(e){console.debug(e)}},{key:"info",value:function(e){console.info(e)}},{key:"warn",value:function(e){console.warn(e)}},{key:"error",value:function(e){console.error(e)}}]),r}();t.exports=i},{"../../../shared/util/logger":930}],124:[function(e,t,r){var n={};n.addZeros=function(e,t){for(var r=e.toString();r.length<t;)r="0"+r;return r},n.time=function(e){if(null===e)return"--:--.---";var t=~~(e/60),r=~~(e%60);return this.addZeros(t,2)+":"+this.addZeros(r,2)+"."+this.addZeros(~~(e%1*100),2)},n.timeLeft=function(e){return~~(e/86400)+" d "+~~(e%86400/3600)+" hrs "+~~(e%3600/60)+" mn"},t.exports=n},{}],125:[function(e,t,r){t.exports=function(e,t){var r=window.performance.now();t();var n=window.performance.now()-r;return console.log(e+": "+n+"ms"),n}},{}],126:[function(e,t,r){var n=function(){function e(){_classCallCheck2(this,e)}return _createClass2(e,[{key:"isSupported",value:function(){return window.PokiSDK,!1}},{key:"requestPermission",value:function(){return this.isSupported()?"denied"===window.Notification.permission?Promise.reject(new Error("Permissions were already denied")):"granted"===window.Notification.permission?Promise.resolve():new Promise(function(t,e){window.Notification.requestPermission().then(function(e){if("granted"!==e)throw new Error("Permission were denied");t()}).catch(e)}):Promise.reject(new Error("Notifications are not supported"))}},{key:"notify",value:function(e,t){if(this.isSupported())return this.requestPermission().then(function(){return new window.Notification(e,{body:t,requiredInteraction:!1,renotify:!1})})}}]),e}();t.exports=n},{}],127:[function(e,t,r){t.exports=function(i){return i=i||4,function(e,t,r,n){return Math.sin(e/n*Math.PI*i)*r+t}}},{}],128:[function(e,t,r){var i={addFilter:function(e,t){if(e){var r=e.filters;e.filters=r?(r.push(t),r):[t]}},removeFilter:function(e,t){if(e){var r=e.filters;if(r){var n=r.indexOf(t);-1!==n&&(r.splice(n,1),e.filters=r)}}},remove:function(e){e&&e.parent&&e.parent.removeChild(e)},removeAllChildren:function(e){e&&e.removeChildren(0,e.children.length)},nNodes:function(e){return function r(e){return 1+e.children.reduce(function(e,t){return e+r(t)},0)}(e)},nLeaves:function(e){return function r(e){return e.children.reduce(function(e,t){return 0===t.children.length?e+1:e+r(t)},0)}(e)},nVisible:function(e){return function r(e){return e.visible?1+e.children.reduce(function(e,t){return e+r(t)},0):0}(e)},nRendered:function(e){return function r(e){return e.visible?e.cacheAsBitmap?1:1+e.children.reduce(function(e,t){return e+r(t)},0):0}(e)},nFilters:function(e){return function r(e){return e.visible?(e.filters?e.filters.length:0)+e.children.reduce(function(e,t){return e+r(t)},0):0}(e)},treeStrings:function(e,r){r=r||0;for(var t="",n=0;n<r;n++)t+=" ";return t+=" "+e.constructor.name,e.debugLabel&&(t+=" - "+e.debugLabel),e.children?e.children.reduce(function(e,t){return e.concat(i.treeStrings(t,r+1))},[t]):[t]},treeDescription:function(e){return i.treeStrings(e).join("\n")}};t.exports=i},{}],129:[function(e,t,r){t.exports={updates:[{title:"Update - Jan 28, 2019",description:"Now that SuperBrawl is available to everyone, I would love to collect feedback to improve the game further.\n\nYou can send me feedback (or challenge me) by emailing me at remvst@gmail.com, or on Twitter @remvst"},{title:"Update - Feb 1, 2019",description:"SuperBrawl goes global! You can now join a european brawl, allowing for lower latency for players on that side of the pond!\n\nIn terms of gameplay, the shotgun and machine gun were slightly modified to be a little more consistent with how the game works.\n\nI am still looking for ways to improve the game, so you can send me feedback (or challenge me) by emailing me at remvst@gmail.com, or on Twitter @remvst"},{title:"ArmorGames - Feb 15 2019",description:"SuperBrawl is now on ArmorGames! Given the numerous players that the game will be getting in the next few days, I'm working hard on addressing your feedback.\n\nPlease don't hesitate to submit constructive criticism and report bugs so I can improve the game as much as possible!"},{title:"March 6 2019\nFixed Controls",description:"Given your feedback, you can now shoot using SPACE or ENTER, jump using the UP arrow and go left and right using A and D. Hopefully you will find a control scheme that suits you!\n\nKeep sending more constructive feedback!"},{title:"Update - July 13, 2019",description:"SuperBrawl has now been live for a while, but I am still trying to give it minor updates.\n\nI am aware that at certain times of the day it is hard to find other players, so the game will now automatically add bots if no humans are joining, in order to guarantee constant brawling!\n\nEnjoy!"},{title:"Update - May 2020",description:"SuperBrawl is now live on the Poki platform! Enjoy fighting against all these new players!"},{title:"Update - June 2020",description:"More servers have been deployed!\n\nNow that SuperBrawl is available on Poki, thousands of players have been brawling, which requires more servers. But that's a good problem to have!"},{title:"Update - November 2023",description:"SuperBrawl is getting a few minor updates.\n\nMobile support should now feel much nicer.\n\nMore updates to come!"}]}},{}],130:[function(e,t,r){var n,i;n=this,i=function(e,t){var r=function(t){function e(e){t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\n\nuniform float gamma;\nuniform float contrast;\nuniform float saturation;\nuniform float brightness;\nuniform float red;\nuniform float green;\nuniform float blue;\nuniform float alpha;\n\nvoid main(void)\n{\n    vec4 c = texture2D(uSampler, vTextureCoord);\n\n    if (c.a > 0.0) {\n        c.rgb /= c.a;\n\n        vec3 rgb = pow(c.rgb, vec3(1. / gamma));\n        rgb = mix(vec3(.5), mix(vec3(dot(vec3(.2125, .7154, .0721), rgb)), rgb, saturation), contrast);\n        rgb.r *= red;\n        rgb.g *= green;\n        rgb.b *= blue;\n        c.rgb = rgb * brightness;\n\n        c.rgb *= c.a;\n    }\n\n    gl_FragColor = c * alpha;\n}\n"),Object.assign(this,{gamma:1,saturation:1,contrast:1,brightness:1,red:1,green:1,blue:1,alpha:1},e)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.apply=function(e,t,r,n){this.uniforms.gamma=Math.max(this.gamma,1e-4),this.uniforms.saturation=this.saturation,this.uniforms.contrast=this.contrast,this.uniforms.brightness=this.brightness,this.uniforms.red=this.red,this.uniforms.green=this.green,this.uniforms.blue=this.blue,this.uniforms.alpha=this.alpha,e.applyFilter(this,t,r,n)},e}(t.Filter);e.AdjustmentFilter=r,Object.defineProperty(e,"__esModule",{value:!0})},"object"==_typeof2(r)&&void 0!==t?i(r,e("pixi.js")):"function"==typeof define&&define.amd?define(["exports","pixi.js"],i):i(n.__filters={},n.PIXI),Object.assign(PIXI.filters,this.__filters)},{"pixi.js":329}],131:[function(e,t,r){var n,i;n=this,i=function(e,s,l){var u="attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}",c=function(t){function e(e){void 0===e&&(e=.5),t.call(this,u,"\nuniform sampler2D uSampler;\nvarying vec2 vTextureCoord;\n\nuniform float threshold;\n\nvoid main() {\n    vec4 color = texture2D(uSampler, vTextureCoord);\n\n    // A simple & fast algorithm for getting brightness.\n    // It's inaccuracy , but good enought for this feature.\n    float _max = max(max(color.r, color.g), color.b);\n    float _min = min(min(color.r, color.g), color.b);\n    float brightness = (_max + _min) * 0.5;\n\n    if(brightness > threshold) {\n        gl_FragColor = color;\n    } else {\n        gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);\n    }\n}\n"),this.threshold=e}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var r={threshold:{configurable:!0}};return r.threshold.get=function(){return this.uniforms.threshold},r.threshold.set=function(e){this.uniforms.threshold=e},Object.defineProperties(e.prototype,r),e}(s.Filter),t=function(a){function e(e){a.call(this,u,"uniform sampler2D uSampler;\nvarying vec2 vTextureCoord;\n\nuniform sampler2D bloomTexture;\nuniform float bloomScale;\nuniform float brightness;\n\nvoid main() {\n    vec4 color = texture2D(uSampler, vTextureCoord);\n    color.rgb *= brightness;\n    vec4 bloomColor = vec4(texture2D(bloomTexture, vTextureCoord).rgb, 0.0);\n    bloomColor.rgb *= bloomScale;\n    gl_FragColor = color + bloomColor;\n}\n"),"number"==typeof e&&(e={threshold:e}),e=Object.assign({threshold:.5,bloomScale:1,brightness:1,kernels:null,blur:8,quality:4,pixelSize:1,resolution:s.settings.RESOLUTION},e),this.bloomScale=e.bloomScale,this.brightness=e.brightness;var t=e.kernels,r=e.blur,n=e.quality,i=e.pixelSize,o=e.resolution;this._extractFilter=new c(e.threshold),this._extractFilter.resolution=o,this._blurFilter=t?new l.KawaseBlurFilter(t):new l.KawaseBlurFilter(r,n),this.pixelSize=i,this.resolution=o}a&&(e.__proto__=a);var t={resolution:{configurable:!0},threshold:{configurable:!0},kernels:{configurable:!0},blur:{configurable:!0},quality:{configurable:!0},pixelSize:{configurable:!0}};return((e.prototype=Object.create(a&&a.prototype)).constructor=e).prototype.apply=function(e,t,r,n,i){var o=e.getRenderTarget(!0);this._extractFilter.apply(e,t,o,!0,i);var a=e.getRenderTarget(!0);this._blurFilter.apply(e,o,a,!0,i),this.uniforms.bloomScale=this.bloomScale,this.uniforms.brightness=this.brightness,this.uniforms.bloomTexture=a,e.applyFilter(this,t,r,n),e.returnRenderTarget(a),e.returnRenderTarget(o)},t.resolution.get=function(){return this._resolution},t.resolution.set=function(e){this._resolution=e,this._extractFilter&&(this._extractFilter.resolution=e),this._blurFilter&&(this._blurFilter.resolution=e)},t.threshold.get=function(){return this._extractFilter.threshold},t.threshold.set=function(e){this._extractFilter.threshold=e},t.kernels.get=function(){return this._blurFilter.kernels},t.kernels.set=function(e){this._blurFilter.kernels=e},t.blur.get=function(){return this._blurFilter.blur},t.blur.set=function(e){this._blurFilter.blur=e},t.quality.get=function(){return this._blurFilter.quality},t.quality.set=function(e){this._blurFilter.quality=e},t.pixelSize.get=function(){return this._blurFilter.pixelSize},t.pixelSize.set=function(e){this._blurFilter.pixelSize=e},Object.defineProperties(e.prototype,t),e}(s.Filter);e.AdvancedBloomFilter=t,Object.defineProperty(e,"__esModule",{value:!0})},"object"==_typeof2(r)&&void 0!==t?i(r,e("pixi.js"),e("@pixi/filter-kawase-blur")):"function"==typeof define&&define.amd?define(["exports","pixi.js","@pixi/filter-kawase-blur"],i):i(n.__filters={},n.PIXI,n.PIXI.filters),Object.assign(PIXI.filters,this.__filters)},{"@pixi/filter-kawase-blur":147,"pixi.js":329}],132:[function(e,t,r){var n,i;n=this,i=function(e,t){var r=function(t){function e(e){void 0===e&&(e=8),t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\n\nuniform vec4 filterArea;\nuniform float pixelSize;\nuniform sampler2D uSampler;\n\nvec2 mapCoord( vec2 coord )\n{\n    coord *= filterArea.xy;\n    coord += filterArea.zw;\n\n    return coord;\n}\n\nvec2 unmapCoord( vec2 coord )\n{\n    coord -= filterArea.zw;\n    coord /= filterArea.xy;\n\n    return coord;\n}\n\nvec2 pixelate(vec2 coord, vec2 size)\n{\n    return floor( coord / size ) * size;\n}\n\nvec2 getMod(vec2 coord, vec2 size)\n{\n    return mod( coord , size) / size;\n}\n\nfloat character(float n, vec2 p)\n{\n    p = floor(p*vec2(4.0, -4.0) + 2.5);\n    if (clamp(p.x, 0.0, 4.0) == p.x && clamp(p.y, 0.0, 4.0) == p.y)\n    {\n        if (int(mod(n/exp2(p.x + 5.0*p.y), 2.0)) == 1) return 1.0;\n    }\n    return 0.0;\n}\n\nvoid main()\n{\n    vec2 coord = mapCoord(vTextureCoord);\n\n    // get the rounded color..\n    vec2 pixCoord = pixelate(coord, vec2(pixelSize));\n    pixCoord = unmapCoord(pixCoord);\n\n    vec4 color = texture2D(uSampler, pixCoord);\n\n    // determine the character to use\n    float gray = (color.r + color.g + color.b) / 3.0;\n\n    float n =  65536.0;             // .\n    if (gray > 0.2) n = 65600.0;    // :\n    if (gray > 0.3) n = 332772.0;   // *\n    if (gray > 0.4) n = 15255086.0; // o\n    if (gray > 0.5) n = 23385164.0; // &\n    if (gray > 0.6) n = 15252014.0; // 8\n    if (gray > 0.7) n = 13199452.0; // @\n    if (gray > 0.8) n = 11512810.0; // #\n\n    // get the mod..\n    vec2 modd = getMod(coord, vec2(pixelSize));\n\n    gl_FragColor = color * character( n, vec2(-1.0) + modd * 2.0);\n\n}"),this.size=e}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var r={size:{configurable:!0}};return r.size.get=function(){return this.uniforms.pixelSize},r.size.set=function(e){this.uniforms.pixelSize=e},Object.defineProperties(e.prototype,r),e}(t.Filter);e.AsciiFilter=r,Object.defineProperty(e,"__esModule",{value:!0})},"object"==_typeof2(r)&&void 0!==t?i(r,e("pixi.js")):"function"==typeof define&&define.amd?define(["exports","pixi.js"],i):i(n.__filters={},n.PIXI),Object.assign(PIXI.filters,this.__filters)},{"pixi.js":329}],133:[function(e,t,r){var n,i;n=this,i=function(e,n){var t=function(t){function e(e){void 0===e&&(e={}),t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","precision mediump float;\n\nvarying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform vec4 filterArea;\n\nuniform float transformX;\nuniform float transformY;\nuniform vec3 lightColor;\nuniform float lightAlpha;\nuniform vec3 shadowColor;\nuniform float shadowAlpha;\n\nvoid main(void) {\n    vec2 transform = vec2(1.0 / filterArea) * vec2(transformX, transformY);\n    vec4 color = texture2D(uSampler, vTextureCoord);\n    float light = texture2D(uSampler, vTextureCoord - transform).a;\n    float shadow = texture2D(uSampler, vTextureCoord + transform).a;\n\n    color.rgb = mix(color.rgb, lightColor, clamp((color.a - light) * lightAlpha, 0.0, 1.0));\n    color.rgb = mix(color.rgb, shadowColor, clamp((color.a - shadow) * shadowAlpha, 0.0, 1.0));\n    gl_FragColor = vec4(color.rgb * color.a, color.a);\n}\n"),this.uniforms.lightColor=new Float32Array(3),this.uniforms.shadowColor=new Float32Array(3),e=Object.assign({rotation:45,thickness:2,lightColor:16777215,lightAlpha:.7,shadowColor:0,shadowAlpha:.7},e),this.rotation=e.rotation,this.thickness=e.thickness,this.lightColor=e.lightColor,this.lightAlpha=e.lightAlpha,this.shadowColor=e.shadowColor,this.shadowAlpha=e.shadowAlpha}t&&(e.__proto__=t);var r={rotation:{configurable:!0},thickness:{configurable:!0},lightColor:{configurable:!0},lightAlpha:{configurable:!0},shadowColor:{configurable:!0},shadowAlpha:{configurable:!0}};return((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype._updateTransform=function(){this.uniforms.transformX=this._thickness*Math.cos(this._angle),this.uniforms.transformY=this._thickness*Math.sin(this._angle)},r.rotation.get=function(){return this._angle/n.DEG_TO_RAD},r.rotation.set=function(e){this._angle=e*n.DEG_TO_RAD,this._updateTransform()},r.thickness.get=function(){return this._thickness},r.thickness.set=function(e){this._thickness=e,this._updateTransform()},r.lightColor.get=function(){return n.utils.rgb2hex(this.uniforms.lightColor)},r.lightColor.set=function(e){n.utils.hex2rgb(e,this.uniforms.lightColor)},r.lightAlpha.get=function(){return this.uniforms.lightAlpha},r.lightAlpha.set=function(e){this.uniforms.lightAlpha=e},r.shadowColor.get=function(){return n.utils.rgb2hex(this.uniforms.shadowColor)},r.shadowColor.set=function(e){n.utils.hex2rgb(e,this.uniforms.shadowColor)},r.shadowAlpha.get=function(){return this.uniforms.shadowAlpha},r.shadowAlpha.set=function(e){this.uniforms.shadowAlpha=e},Object.defineProperties(e.prototype,r),e}(n.Filter);e.BevelFilter=t,Object.defineProperty(e,"__esModule",{value:!0})},"object"==_typeof2(r)&&void 0!==t?i(r,e("pixi.js")):"function"==typeof define&&define.amd?define(["exports","pixi.js"],i):i(n.__filters={},n.PIXI),Object.assign(PIXI.filters,this.__filters)},{"pixi.js":329}],134:[function(e,t,r){var n,i;n=this,i=function(e,s){var t=s.filters,l=t.BlurXFilter,u=t.BlurYFilter,c=t.AlphaFilter,r=function(a){function e(e,t,r,n){var i,o;void 0===e&&(e=2),void 0===t&&(t=4),void 0===r&&(r=s.settings.RESOLUTION),void 0===n&&(n=5),a.call(this),"number"==typeof e?o=i=e:e instanceof s.Point?(i=e.x,o=e.y):Array.isArray(e)&&(i=e[0],o=e[1]),this.blurXFilter=new l(i,t,r,n),this.blurYFilter=new u(o,t,r,n),this.blurYFilter.blendMode=s.BLEND_MODES.SCREEN,this.defaultFilter=new c}a&&(e.__proto__=a);var t={blur:{configurable:!0},blurX:{configurable:!0},blurY:{configurable:!0}};return((e.prototype=Object.create(a&&a.prototype)).constructor=e).prototype.apply=function(e,t,r){var n=e.getRenderTarget(!0);this.defaultFilter.apply(e,t,r),this.blurXFilter.apply(e,t,n),this.blurYFilter.apply(e,n,r),e.returnRenderTarget(n)},t.blur.get=function(){return this.blurXFilter.blur},t.blur.set=function(e){this.blurXFilter.blur=this.blurYFilter.blur=e},t.blurX.get=function(){return this.blurXFilter.blur},t.blurX.set=function(e){this.blurXFilter.blur=e},t.blurY.get=function(){return this.blurYFilter.blur},t.blurY.set=function(e){this.blurYFilter.blur=e},Object.defineProperties(e.prototype,t),e}(s.Filter);e.BloomFilter=r,Object.defineProperty(e,"__esModule",{value:!0})},"object"==_typeof2(r)&&void 0!==t?i(r,e("pixi.js")):"function"==typeof define&&define.amd?define(["exports","pixi.js"],i):i(n.__filters={},n.PIXI),Object.assign(PIXI.filters,this.__filters)},{"pixi.js":329}],135:[function(e,t,r){var n,i;n=this,i=function(e,t){var r=function(n){function e(e,t,r){n.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","uniform float radius;\nuniform float strength;\nuniform vec2 center;\nuniform sampler2D uSampler;\nvarying vec2 vTextureCoord;\n\nuniform vec4 filterArea;\nuniform vec4 filterClamp;\nuniform vec2 dimensions;\n\nvoid main()\n{\n    vec2 coord = vTextureCoord * filterArea.xy;\n    coord -= center * dimensions.xy;\n    float distance = length(coord);\n    if (distance < radius) {\n        float percent = distance / radius;\n        if (strength > 0.0) {\n            coord *= mix(1.0, smoothstep(0.0, radius / distance, percent), strength * 0.75);\n        } else {\n            coord *= mix(1.0, pow(percent, 1.0 + strength * 0.75) * radius / distance, 1.0 - percent);\n        }\n    }\n    coord += center * dimensions.xy;\n    coord /= filterArea.xy;\n    vec2 clampedCoord = clamp(coord, filterClamp.xy, filterClamp.zw);\n    vec4 color = texture2D(uSampler, clampedCoord);\n    if (coord != clampedCoord) {\n        color *= max(0.0, 1.0 - length(coord - clampedCoord));\n    }\n\n    gl_FragColor = color;\n}\n"),this.uniforms.dimensions=new Float32Array(2),this.center=e||[.5,.5],this.radius=t||100,this.strength=r||1}n&&(e.__proto__=n);var t={radius:{configurable:!0},strength:{configurable:!0},center:{configurable:!0}};return((e.prototype=Object.create(n&&n.prototype)).constructor=e).prototype.apply=function(e,t,r,n){this.uniforms.dimensions[0]=t.sourceFrame.width,this.uniforms.dimensions[1]=t.sourceFrame.height,e.applyFilter(this,t,r,n)},t.radius.get=function(){return this.uniforms.radius},t.radius.set=function(e){this.uniforms.radius=e},t.strength.get=function(){return this.uniforms.strength},t.strength.set=function(e){this.uniforms.strength=e},t.center.get=function(){return this.uniforms.center},t.center.set=function(e){this.uniforms.center=e},Object.defineProperties(e.prototype,t),e}(t.Filter);e.BulgePinchFilter=r,Object.defineProperty(e,"__esModule",{value:!0})},"object"==_typeof2(r)&&void 0!==t?i(r,e("pixi.js")):"function"==typeof define&&define.amd?define(["exports","pixi.js"],i):i(n.__filters={},n.PIXI),Object.assign(PIXI.filters,this.__filters)},{"pixi.js":329}],136:[function(e,t,r){var n,i;n=this,i=function(e,r){var t=function(n){function e(e,t,r){void 0===t&&(t=!1),void 0===r&&(r=1),n.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","\nvarying vec2 vTextureCoord;\nuniform sampler2D uSampler;\n\nuniform sampler2D colorMap;\n\nuniform float _mix;\nuniform float _size;\nuniform float _sliceSize;\nuniform float _slicePixelSize;\nuniform float _sliceInnerSize;\n\nvoid main() {\n    vec4 color = texture2D(uSampler, vTextureCoord.xy);\n\n    float sliceIndex = color.b * (_size - 1.0);\n    float zSlice0 = floor(sliceIndex);\n    float zSlice1 = ceil(sliceIndex);\n\n    float xOffset = _slicePixelSize * 0.5 + color.r * _sliceInnerSize;\n    float s0 = xOffset + zSlice0 * _sliceSize;\n    float s1 = xOffset + zSlice1 * _sliceSize;\n    vec4 slice0Color = texture2D(colorMap, vec2(s0, color.g));\n    vec4 slice1Color = texture2D(colorMap, vec2(s1, color.g));\n    vec4 adjusted = mix(slice0Color, slice1Color, fract(sliceIndex));\n\n    gl_FragColor = mix(color, adjusted, _mix);\n}\n"),this._size=0,this._sliceSize=0,this._slicePixelSize=0,this._sliceInnerSize=0,this._scaleMode=null,this._nearest=!1,this.nearest=t,this.mix=r,this.colorMap=e}n&&(e.__proto__=n);var t={colorSize:{configurable:!0},colorMap:{configurable:!0},nearest:{configurable:!0}};return((e.prototype=Object.create(n&&n.prototype)).constructor=e).prototype.apply=function(e,t,r,n){this.uniforms._mix=this.mix,e.applyFilter(this,t,r,n)},t.colorSize.get=function(){return this._size},t.colorMap.get=function(){return this._colorMap},t.colorMap.set=function(e){e instanceof r.Texture||(e=r.Texture.from(e)),e&&e.baseTexture&&(e.baseTexture.scaleMode=this._scaleMode,e.baseTexture.mipmap=!1,this._size=e.height,this._sliceSize=1/this._size,this._slicePixelSize=this._sliceSize/this._size,this._sliceInnerSize=this._slicePixelSize*(this._size-1),this.uniforms._size=this._size,this.uniforms._sliceSize=this._sliceSize,this.uniforms._slicePixelSize=this._slicePixelSize,this.uniforms._sliceInnerSize=this._sliceInnerSize,this.uniforms.colorMap=e),this._colorMap=e},t.nearest.get=function(){return this._nearest},t.nearest.set=function(e){this._nearest=e,this._scaleMode=e?r.SCALE_MODES.NEAREST:r.SCALE_MODES.LINEAR;var t=this._colorMap;t&&t.baseTexture&&(t.baseTexture._glTextures={},t.baseTexture.scaleMode=this._scaleMode,t.baseTexture.mipmap=!1,t._updateID++,t.baseTexture.emit("update",t.baseTexture))},e.prototype.updateColorMap=function(){var e=this._colorMap;e&&e.baseTexture&&(e._updateID++,e.baseTexture.emit("update",e.baseTexture),this.colorMap=e)},e.prototype.destroy=function(e){this._colorMap&&this._colorMap.destroy(e),n.prototype.destroy.call(this)},Object.defineProperties(e.prototype,t),e}(r.Filter);e.ColorMapFilter=t,Object.defineProperty(e,"__esModule",{value:!0})},"object"==_typeof2(r)&&void 0!==t?i(r,e("pixi.js")):"function"==typeof define&&define.amd?define(["exports","pixi.js"],i):i(n.__filters={},n.PIXI),Object.assign(PIXI.filters,this.__filters)},{"pixi.js":329}],137:[function(e,t,r){var n,i;n=this,i=function(e,r){var t=function(n){function e(e,t,r){void 0===e&&(e=16711680),void 0===t&&(t=0),void 0===r&&(r=.4),n.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform vec3 originalColor;\nuniform vec3 newColor;\nuniform float epsilon;\nvoid main(void) {\n    vec4 currentColor = texture2D(uSampler, vTextureCoord);\n    vec3 colorDiff = originalColor - (currentColor.rgb / max(currentColor.a, 0.0000000001));\n    float colorDistance = length(colorDiff);\n    float doReplace = step(colorDistance, epsilon);\n    gl_FragColor = vec4(mix(currentColor.rgb, (newColor + colorDiff) * currentColor.a, doReplace), currentColor.a);\n}\n"),this.uniforms.originalColor=new Float32Array(3),this.uniforms.newColor=new Float32Array(3),this.originalColor=e,this.newColor=t,this.epsilon=r}n&&(e.__proto__=n),(e.prototype=Object.create(n&&n.prototype)).constructor=e;var t={originalColor:{configurable:!0},newColor:{configurable:!0},epsilon:{configurable:!0}};return t.originalColor.set=function(e){var t=this.uniforms.originalColor;this._originalColor="number"==typeof e?(r.utils.hex2rgb(e,t),e):(t[0]=e[0],t[1]=e[1],t[2]=e[2],r.utils.rgb2hex(t))},t.originalColor.get=function(){return this._originalColor},t.newColor.set=function(e){var t=this.uniforms.newColor;this._newColor="number"==typeof e?(r.utils.hex2rgb(e,t),e):(t[0]=e[0],t[1]=e[1],t[2]=e[2],r.utils.rgb2hex(t))},t.newColor.get=function(){return this._newColor},t.epsilon.set=function(e){this.uniforms.epsilon=e},t.epsilon.get=function(){return this.uniforms.epsilon},Object.defineProperties(e.prototype,t),e}(r.Filter);e.ColorReplaceFilter=t,Object.defineProperty(e,"__esModule",{value:!0})},"object"==_typeof2(r)&&void 0!==t?i(r,e("pixi.js")):"function"==typeof define&&define.amd?define(["exports","pixi.js"],i):i(n.__filters={},n.PIXI),Object.assign(PIXI.filters,this.__filters)},{"pixi.js":329}],138:[function(e,t,r){var n,i;n=this,i=function(e,t){var r=function(n){function e(e,t,r){n.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","precision mediump float;\n\nvarying mediump vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec2 texelSize;\nuniform float matrix[9];\n\nvoid main(void)\n{\n   vec4 c11 = texture2D(uSampler, vTextureCoord - texelSize); // top left\n   vec4 c12 = texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y - texelSize.y)); // top center\n   vec4 c13 = texture2D(uSampler, vec2(vTextureCoord.x + texelSize.x, vTextureCoord.y - texelSize.y)); // top right\n\n   vec4 c21 = texture2D(uSampler, vec2(vTextureCoord.x - texelSize.x, vTextureCoord.y)); // mid left\n   vec4 c22 = texture2D(uSampler, vTextureCoord); // mid center\n   vec4 c23 = texture2D(uSampler, vec2(vTextureCoord.x + texelSize.x, vTextureCoord.y)); // mid right\n\n   vec4 c31 = texture2D(uSampler, vec2(vTextureCoord.x - texelSize.x, vTextureCoord.y + texelSize.y)); // bottom left\n   vec4 c32 = texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y + texelSize.y)); // bottom center\n   vec4 c33 = texture2D(uSampler, vTextureCoord + texelSize); // bottom right\n\n   gl_FragColor =\n       c11 * matrix[0] + c12 * matrix[1] + c13 * matrix[2] +\n       c21 * matrix[3] + c22 * matrix[4] + c23 * matrix[5] +\n       c31 * matrix[6] + c32 * matrix[7] + c33 * matrix[8];\n\n   gl_FragColor.a = c22.a;\n}\n"),this.uniforms.texelSize=new Float32Array(9),this.matrix=e,this.width=t,this.height=r}n&&(e.__proto__=n),(e.prototype=Object.create(n&&n.prototype)).constructor=e;var t={matrix:{configurable:!0},width:{configurable:!0},height:{configurable:!0}};return t.matrix.get=function(){return this.uniforms.matrix},t.matrix.set=function(e){this.uniforms.matrix=new Float32Array(e)},t.width.get=function(){return 1/this.uniforms.texelSize[0]},t.width.set=function(e){this.uniforms.texelSize[0]=1/e},t.height.get=function(){return 1/this.uniforms.texelSize[1]},t.height.set=function(e){this.uniforms.texelSize[1]=1/e},Object.defineProperties(e.prototype,t),e}(t.Filter);e.ConvolutionFilter=r,Object.defineProperty(e,"__esModule",{value:!0})},"object"==_typeof2(r)&&void 0!==t?i(r,e("pixi.js")):"function"==typeof define&&define.amd?define(["exports","pixi.js"],i):i(n.__filters={},n.PIXI),Object.assign(PIXI.filters,this.__filters)},{"pixi.js":329}],139:[function(e,t,r){var n,i;n=this,i=function(e,t){var r=function(e){function t(){e.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    float lum = length(texture2D(uSampler, vTextureCoord.xy).rgb);\n\n    gl_FragColor = vec4(1.0, 1.0, 1.0, 1.0);\n\n    if (lum < 1.00)\n    {\n        if (mod(gl_FragCoord.x + gl_FragCoord.y, 10.0) == 0.0)\n        {\n            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);\n        }\n    }\n\n    if (lum < 0.75)\n    {\n        if (mod(gl_FragCoord.x - gl_FragCoord.y, 10.0) == 0.0)\n        {\n            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);\n        }\n    }\n\n    if (lum < 0.50)\n    {\n        if (mod(gl_FragCoord.x + gl_FragCoord.y - 5.0, 10.0) == 0.0)\n        {\n            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);\n        }\n    }\n\n    if (lum < 0.3)\n    {\n        if (mod(gl_FragCoord.x - gl_FragCoord.y - 5.0, 10.0) == 0.0)\n        {\n            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);\n        }\n    }\n}\n")}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t}(t.Filter);e.CrossHatchFilter=r,Object.defineProperty(e,"__esModule",{value:!0})},"object"==_typeof2(r)&&void 0!==t?i(r,e("pixi.js")):"function"==typeof define&&define.amd?define(["exports","pixi.js"],i):i(n.__filters={},n.PIXI),Object.assign(PIXI.filters,this.__filters)},{"pixi.js":329}],140:[function(e,t,r){var n,i;n=this,i=function(e,t){var r=function(t){function e(e){t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\n\nuniform vec4 filterArea;\nuniform vec2 dimensions;\n\nconst float SQRT_2 = 1.414213;\n\nconst float light = 1.0;\n\nuniform float curvature;\nuniform float lineWidth;\nuniform float lineContrast;\nuniform bool verticalLine;\nuniform float noise;\nuniform float noiseSize;\n\nuniform float vignetting;\nuniform float vignettingAlpha;\nuniform float vignettingBlur;\n\nuniform float seed;\nuniform float time;\n\nfloat rand(vec2 co) {\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvoid main(void)\n{\n    vec2 pixelCoord = vTextureCoord.xy * filterArea.xy;\n    vec2 coord = pixelCoord / dimensions;\n\n    vec2 dir = vec2(coord - vec2(0.5, 0.5));\n\n    float _c = curvature > 0. ? curvature : 1.;\n    float k = curvature > 0. ?(length(dir * dir) * 0.25 * _c * _c + 0.935 * _c) : 1.;\n    vec2 uv = dir * k;\n\n    gl_FragColor = texture2D(uSampler, vTextureCoord);\n    vec3 rgb = gl_FragColor.rgb;\n\n\n    if (noise > 0.0 && noiseSize > 0.0)\n    {\n        pixelCoord.x = floor(pixelCoord.x / noiseSize);\n        pixelCoord.y = floor(pixelCoord.y / noiseSize);\n        float _noise = rand(pixelCoord * noiseSize * seed) - 0.5;\n        rgb += _noise * noise;\n    }\n\n    if (lineWidth > 0.0) {\n        float v = (verticalLine ? uv.x * dimensions.x : uv.y * dimensions.y) * min(1.0, 2.0 / lineWidth ) / _c;\n        float j = 1. + cos(v * 1.2 - time) * 0.5 * lineContrast;\n        rgb *= j;\n        float segment = verticalLine ? mod((dir.x + .5) * dimensions.x, 4.) : mod((dir.y + .5) * dimensions.y, 4.);\n        rgb *= 0.99 + ceil(segment) * 0.015;\n    }\n\n    if (vignetting > 0.0)\n    {\n        float outter = SQRT_2 - vignetting * SQRT_2;\n        float darker = clamp((outter - length(dir) * SQRT_2) / ( 0.00001 + vignettingBlur * SQRT_2), 0.0, 1.0);\n        rgb *= darker + (1.0 - darker) * (1.0 - vignettingAlpha);\n    }\n\n    gl_FragColor.rgb = rgb;\n}\n"),this.uniforms.dimensions=new Float32Array(2),this.time=0,this.seed=0,Object.assign(this,{curvature:1,lineWidth:1,lineContrast:.25,verticalLine:!1,noise:0,noiseSize:1,seed:0,vignetting:.3,vignettingAlpha:1,vignettingBlur:.3,time:0},e)}t&&(e.__proto__=t);var r={curvature:{configurable:!0},lineWidth:{configurable:!0},lineContrast:{configurable:!0},verticalLine:{configurable:!0},noise:{configurable:!0},noiseSize:{configurable:!0},vignetting:{configurable:!0},vignettingAlpha:{configurable:!0},vignettingBlur:{configurable:!0}};return((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.apply=function(e,t,r,n){this.uniforms.dimensions[0]=t.sourceFrame.width,this.uniforms.dimensions[1]=t.sourceFrame.height,this.uniforms.seed=this.seed,this.uniforms.time=this.time,e.applyFilter(this,t,r,n)},r.curvature.set=function(e){this.uniforms.curvature=e},r.curvature.get=function(){return this.uniforms.curvature},r.lineWidth.set=function(e){this.uniforms.lineWidth=e},r.lineWidth.get=function(){return this.uniforms.lineWidth},r.lineContrast.set=function(e){this.uniforms.lineContrast=e},r.lineContrast.get=function(){return this.uniforms.lineContrast},r.verticalLine.set=function(e){this.uniforms.verticalLine=e},r.verticalLine.get=function(){return this.uniforms.verticalLine},r.noise.set=function(e){this.uniforms.noise=e},r.noise.get=function(){return this.uniforms.noise},r.noiseSize.set=function(e){this.uniforms.noiseSize=e},r.noiseSize.get=function(){return this.uniforms.noiseSize},r.vignetting.set=function(e){this.uniforms.vignetting=e},r.vignetting.get=function(){return this.uniforms.vignetting},r.vignettingAlpha.set=function(e){this.uniforms.vignettingAlpha=e},r.vignettingAlpha.get=function(){return this.uniforms.vignettingAlpha},r.vignettingBlur.set=function(e){this.uniforms.vignettingBlur=e},r.vignettingBlur.get=function(){return this.uniforms.vignettingBlur},Object.defineProperties(e.prototype,r),e}(t.Filter);e.CRTFilter=r,Object.defineProperty(e,"__esModule",{value:!0})},"object"==_typeof2(r)&&void 0!==t?i(r,e("pixi.js")):"function"==typeof define&&define.amd?define(["exports","pixi.js"],i):i(n.__filters={},n.PIXI),Object.assign(PIXI.filters,this.__filters)},{"pixi.js":329}],141:[function(e,t,r){var n,i;n=this,i=function(e,t){var r=function(r){function e(e,t){void 0===e&&(e=1),void 0===t&&(t=5),r.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","precision mediump float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform vec4 filterArea;\nuniform sampler2D uSampler;\n\nuniform float angle;\nuniform float scale;\n\nfloat pattern()\n{\n   float s = sin(angle), c = cos(angle);\n   vec2 tex = vTextureCoord * filterArea.xy;\n   vec2 point = vec2(\n       c * tex.x - s * tex.y,\n       s * tex.x + c * tex.y\n   ) * scale;\n   return (sin(point.x) * sin(point.y)) * 4.0;\n}\n\nvoid main()\n{\n   vec4 color = texture2D(uSampler, vTextureCoord);\n   float average = (color.r + color.g + color.b) / 3.0;\n   gl_FragColor = vec4(vec3(average * 10.0 - 5.0 + pattern()), color.a);\n}\n"),this.scale=e,this.angle=t}r&&(e.__proto__=r),(e.prototype=Object.create(r&&r.prototype)).constructor=e;var t={scale:{configurable:!0},angle:{configurable:!0}};return t.scale.get=function(){return this.uniforms.scale},t.scale.set=function(e){this.uniforms.scale=e},t.angle.get=function(){return this.uniforms.angle},t.angle.set=function(e){this.uniforms.angle=e},Object.defineProperties(e.prototype,t),e}(t.Filter);e.DotFilter=r,Object.defineProperty(e,"__esModule",{value:!0})},"object"==_typeof2(r)&&void 0!==t?i(r,e("pixi.js")):"function"==typeof define&&define.amd?define(["exports","pixi.js"],i):i(n.__filters={},n.PIXI),Object.assign(PIXI.filters,this.__filters)},{"pixi.js":329}],142:[function(e,t,r){var n,i;n=this,i=function(e,d,p){var t=function(h){function e(e){e&&e.constructor!==Object&&(console.warn("DropShadowFilter now uses options instead of (rotation, distance, blur, color, alpha)"),e={rotation:e},void 0!==arguments[1]&&(e.distance=arguments[1]),void 0!==arguments[2]&&(e.blur=arguments[2]),void 0!==arguments[3]&&(e.color=arguments[3]),void 0!==arguments[4]&&(e.alpha=arguments[4])),e=Object.assign({rotation:45,distance:5,color:0,alpha:.5,shadowOnly:!1,kernels:null,blur:2,quality:3,pixelSize:1,resolution:p.settings.RESOLUTION},e),h.call(this);var t=e.kernels,r=e.blur,n=e.quality,i=e.pixelSize,o=e.resolution;this._tintFilter=new p.Filter("attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform float alpha;\nuniform vec3 color;\nvoid main(void){\n    vec4 sample = texture2D(uSampler, vTextureCoord);\n\n    // Un-premultiply alpha before applying the color\n    if (sample.a > 0.0) {\n        sample.rgb /= sample.a;\n    }\n\n    // Premultiply alpha again\n    sample.rgb = color.rgb * sample.a;\n\n    // alpha user alpha\n    sample *= alpha;\n\n    gl_FragColor = sample;\n}"),this._tintFilter.uniforms.color=new Float32Array(4),this._tintFilter.resolution=o,this._blurFilter=t?new d.KawaseBlurFilter(t):new d.KawaseBlurFilter(r,n),this.pixelSize=i,this.resolution=o,this.targetTransform=new p.Matrix;var a=e.shadowOnly,s=e.rotation,l=e.distance,u=e.alpha,c=e.color;this.shadowOnly=a,this.rotation=s,this.distance=l,this.alpha=u,this.color=c,this._updatePadding()}h&&(e.__proto__=h);var t={resolution:{configurable:!0},distance:{configurable:!0},rotation:{configurable:!0},alpha:{configurable:!0},color:{configurable:!0},kernels:{configurable:!0},blur:{configurable:!0},quality:{configurable:!0},pixelSize:{configurable:!0}};return((e.prototype=Object.create(h&&h.prototype)).constructor=e).prototype.apply=function(e,t,r,n){var i=e.getRenderTarget();i.transform=this.targetTransform,this._tintFilter.apply(e,t,i,!0),i.transform=null,this._blurFilter.apply(e,i,r,n),!0!==this.shadowOnly&&e.applyFilter(this,t,r,!1),e.returnRenderTarget(i)},e.prototype._updatePadding=function(){this.padding=this.distance+2*this.blur},e.prototype._updateTargetTransform=function(){this.targetTransform.tx=this.distance*Math.cos(this.angle),this.targetTransform.ty=this.distance*Math.sin(this.angle)},t.resolution.get=function(){return this._resolution},t.resolution.set=function(e){this._resolution=e,this._tintFilter&&(this._tintFilter.resolution=e),this._blurFilter&&(this._blurFilter.resolution=e)},t.distance.get=function(){return this._distance},t.distance.set=function(e){this._distance=e,this._updatePadding(),this._updateTargetTransform()},t.rotation.get=function(){return this.angle/p.DEG_TO_RAD},t.rotation.set=function(e){this.angle=e*p.DEG_TO_RAD,this._updateTargetTransform()},t.alpha.get=function(){return this._tintFilter.uniforms.alpha},t.alpha.set=function(e){this._tintFilter.uniforms.alpha=e},t.color.get=function(){return p.utils.rgb2hex(this._tintFilter.uniforms.color)},t.color.set=function(e){p.utils.hex2rgb(e,this._tintFilter.uniforms.color)},t.kernels.get=function(){return this._blurFilter.kernels},t.kernels.set=function(e){this._blurFilter.kernels=e},t.blur.get=function(){return this._blurFilter.blur},t.blur.set=function(e){this._blurFilter.blur=e,this._updatePadding()},t.quality.get=function(){return this._blurFilter.quality},t.quality.set=function(e){this._blurFilter.quality=e},t.pixelSize.get=function(){return this._blurFilter.pixelSize},t.pixelSize.set=function(e){this._blurFilter.pixelSize=e},Object.defineProperties(e.prototype,t),e}(p.Filter);e.DropShadowFilter=t,Object.defineProperty(e,"__esModule",{value:!0})},"object"==_typeof2(r)&&void 0!==t?i(r,e("@pixi/filter-kawase-blur"),e("pixi.js")):"function"==typeof define&&define.amd?define(["exports","@pixi/filter-kawase-blur","pixi.js"],i):i(n.__filters={},n.PIXI.filters,n.PIXI),Object.assign(PIXI.filters,this?this.__filters:__filters)},{"@pixi/filter-kawase-blur":147,"pixi.js":329}],143:[function(e,t,r){var n,i;n=this,i=function(e,t){var r=function(t){function e(e){void 0===e&&(e=5),t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float strength;\nuniform vec4 filterArea;\n\n\nvoid main(void)\n{\n\tvec2 onePixel = vec2(1.0 / filterArea);\n\n\tvec4 color;\n\n\tcolor.rgb = vec3(0.5);\n\n\tcolor -= texture2D(uSampler, vTextureCoord - onePixel) * strength;\n\tcolor += texture2D(uSampler, vTextureCoord + onePixel) * strength;\n\n\tcolor.rgb = vec3((color.r + color.g + color.b) / 3.0);\n\n\tfloat alpha = texture2D(uSampler, vTextureCoord).a;\n\n\tgl_FragColor = vec4(color.rgb * alpha, alpha);\n}\n"),this.strength=e}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var r={strength:{configurable:!0}};return r.strength.get=function(){return this.uniforms.strength},r.strength.set=function(e){this.uniforms.strength=e},Object.defineProperties(e.prototype,r),e}(t.Filter);e.EmbossFilter=r,Object.defineProperty(e,"__esModule",{value:!0})},"object"==_typeof2(r)&&void 0!==t?i(r,e("pixi.js")):"function"==typeof define&&define.amd?define(["exports","pixi.js"],i):i(n.__filters={},n.PIXI),Object.assign(PIXI.filters,this.__filters)},{"pixi.js":329}],144:[function(e,t,r){var n,i;n=this,i=function(e,n){var t=function(t){function e(e){void 0===e&&(e={}),t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","// precision highp float;\n\nvarying vec2 vTextureCoord;\nuniform sampler2D uSampler;\n\nuniform vec4 filterArea;\nuniform vec4 filterClamp;\nuniform vec2 dimensions;\nuniform float aspect;\n\nuniform sampler2D displacementMap;\nuniform float offset;\nuniform float sinDir;\nuniform float cosDir;\nuniform int fillMode;\n\nuniform float seed;\nuniform vec2 red;\nuniform vec2 green;\nuniform vec2 blue;\n\nconst int TRANSPARENT = 0;\nconst int ORIGINAL = 1;\nconst int LOOP = 2;\nconst int CLAMP = 3;\nconst int MIRROR = 4;\n\nvoid main(void)\n{\n    vec2 coord = (vTextureCoord * filterArea.xy) / dimensions;\n\n    if (coord.x > 1.0 || coord.y > 1.0) {\n        return;\n    }\n\n    float cx = coord.x - 0.5;\n    float cy = (coord.y - 0.5) * aspect;\n    float ny = (-sinDir * cx + cosDir * cy) / aspect + 0.5;\n\n    // displacementMap: repeat\n    // ny = ny > 1.0 ? ny - 1.0 : (ny < 0.0 ? 1.0 + ny : ny);\n\n    // displacementMap: mirror\n    ny = ny > 1.0 ? 2.0 - ny : (ny < 0.0 ? -ny : ny);\n\n    vec4 dc = texture2D(displacementMap, vec2(0.5, ny));\n\n    float displacement = (dc.r - dc.g) * (offset / filterArea.x);\n\n    coord = vTextureCoord + vec2(cosDir * displacement, sinDir * displacement * aspect);\n\n    if (fillMode == CLAMP) {\n        coord = clamp(coord, filterClamp.xy, filterClamp.zw);\n    } else {\n        if( coord.x > filterClamp.z ) {\n            if (fillMode == ORIGINAL) {\n                gl_FragColor = texture2D(uSampler, vTextureCoord);\n                return;\n            } else if (fillMode == LOOP) {\n                coord.x -= filterClamp.z;\n            } else if (fillMode == MIRROR) {\n                coord.x = filterClamp.z * 2.0 - coord.x;\n            } else {\n                gl_FragColor = vec4(0., 0., 0., 0.);\n                return;\n            }\n        } else if( coord.x < filterClamp.x ) {\n            if (fillMode == ORIGINAL) {\n                gl_FragColor = texture2D(uSampler, vTextureCoord);\n                return;\n            } else if (fillMode == LOOP) {\n                coord.x += filterClamp.z;\n            } else if (fillMode == MIRROR) {\n                coord.x *= -filterClamp.z;\n            } else {\n                gl_FragColor = vec4(0., 0., 0., 0.);\n                return;\n            }\n        }\n\n        if( coord.y > filterClamp.w ) {\n            if (fillMode == ORIGINAL) {\n                gl_FragColor = texture2D(uSampler, vTextureCoord);\n                return;\n            } else if (fillMode == LOOP) {\n                coord.y -= filterClamp.w;\n            } else if (fillMode == MIRROR) {\n                coord.y = filterClamp.w * 2.0 - coord.y;\n            } else {\n                gl_FragColor = vec4(0., 0., 0., 0.);\n                return;\n            }\n        } else if( coord.y < filterClamp.y ) {\n            if (fillMode == ORIGINAL) {\n                gl_FragColor = texture2D(uSampler, vTextureCoord);\n                return;\n            } else if (fillMode == LOOP) {\n                coord.y += filterClamp.w;\n            } else if (fillMode == MIRROR) {\n                coord.y *= -filterClamp.w;\n            } else {\n                gl_FragColor = vec4(0., 0., 0., 0.);\n                return;\n            }\n        }\n    }\n\n    gl_FragColor.r = texture2D(uSampler, coord + red * (1.0 - seed * 0.4) / filterArea.xy).r;\n    gl_FragColor.g = texture2D(uSampler, coord + green * (1.0 - seed * 0.3) / filterArea.xy).g;\n    gl_FragColor.b = texture2D(uSampler, coord + blue * (1.0 - seed * 0.2) / filterArea.xy).b;\n    gl_FragColor.a = texture2D(uSampler, coord).a;\n}\n"),this.uniforms.dimensions=new Float32Array(2),e=Object.assign({slices:5,offset:100,direction:0,fillMode:0,average:!1,seed:0,red:[0,0],green:[0,0],blue:[0,0],minSize:8,sampleSize:512},e),this.direction=e.direction,this.red=e.red,this.green=e.green,this.blue=e.blue,this.offset=e.offset,this.fillMode=e.fillMode,this.average=e.average,this.seed=e.seed,this.minSize=e.minSize,this.sampleSize=e.sampleSize,this._canvas=document.createElement("canvas"),this._canvas.width=4,this._canvas.height=this.sampleSize,this.texture=n.Texture.fromCanvas(this._canvas,n.SCALE_MODES.NEAREST),this._slices=0,this.slices=e.slices}t&&(e.__proto__=t);var r={sizes:{configurable:!0},offsets:{configurable:!0},slices:{configurable:!0},direction:{configurable:!0},red:{configurable:!0},green:{configurable:!0},blue:{configurable:!0}};return((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.apply=function(e,t,r,n){var i=t.sourceFrame.width,o=t.sourceFrame.height;this.uniforms.dimensions[0]=i,this.uniforms.dimensions[1]=o,this.uniforms.aspect=o/i,this.uniforms.seed=this.seed,this.uniforms.offset=this.offset,this.uniforms.fillMode=this.fillMode,e.applyFilter(this,t,r,n)},e.prototype._randomizeSizes=function(){var e=this._sizes,t=this._slices-1,r=this.sampleSize,n=Math.min(this.minSize/r,.9/this._slices);if(this.average){for(var i=this._slices,o=1,a=0;a<t;a++){var s=o/(i-a),l=Math.max(s*(1-.6*Math.random()),n);o-=e[a]=l}e[t]=o}else{for(var u=1,c=Math.sqrt(1/this._slices),h=0;h<t;h++){var d=Math.max(c*u*Math.random(),n);u-=e[h]=d}e[t]=u}this.shuffle()},e.prototype.shuffle=function(){for(var e=this._sizes,t=this._slices-1;0<t;t--){var r=Math.random()*t>>0,n=e[t];e[t]=e[r],e[r]=n}},e.prototype._randomizeOffsets=function(){for(var e=0;e<this._slices;e++)this._offsets[e]=Math.random()*(Math.random()<.5?-1:1)},e.prototype.refresh=function(){this._randomizeSizes(),this._randomizeOffsets(),this.redraw()},e.prototype.redraw=function(){var e,t=this.sampleSize,r=this.texture,n=this._canvas.getContext("2d");n.clearRect(0,0,8,t);for(var i=0,o=0;o<this._slices;o++){e=Math.floor(256*this._offsets[o]);var a=this._sizes[o]*t,s=0<e?e:0,l=e<0?-e:0;n.fillStyle="rgba("+s+", "+l+", 0, 1)",n.fillRect(0,i>>0,t,a+1>>0),i+=a}r.baseTexture.emit("update",r.baseTexture),this.uniforms.displacementMap=r},r.sizes.set=function(e){for(var t=Math.min(this._slices,e.length),r=0;r<t;r++)this._sizes[r]=e[r]},r.sizes.get=function(){return this._sizes},r.offsets.set=function(e){for(var t=Math.min(this._slices,e.length),r=0;r<t;r++)this._offsets[r]=e[r]},r.offsets.get=function(){return this._offsets},r.slices.get=function(){return this._slices},r.slices.set=function(e){this._slices!==e&&(this._slices=e,this.uniforms.slices=e,this._sizes=this.uniforms.slicesWidth=new Float32Array(e),this._offsets=this.uniforms.slicesOffset=new Float32Array(e),this.refresh())},r.direction.get=function(){return this._direction},r.direction.set=function(e){if(this._direction!==e){var t=(this._direction=e)*n.DEG_TO_RAD;this.uniforms.sinDir=Math.sin(t),this.uniforms.cosDir=Math.cos(t)}},r.red.get=function(){return this.uniforms.red},r.red.set=function(e){this.uniforms.red=e},r.green.get=function(){return this.uniforms.green},r.green.set=function(e){this.uniforms.green=e},r.blue.get=function(){return this.uniforms.blue},r.blue.set=function(e){this.uniforms.blue=e},e.prototype.destroy=function(){this.texture.destroy(!0),this.texture=null,this._canvas=null,this.red=null,this.green=null,this.blue=null,this._sizes=null,this._offsets=null},Object.defineProperties(e.prototype,r),e}(n.Filter);t.TRANSPARENT=0,t.ORIGINAL=1,t.LOOP=2,t.CLAMP=3,t.MIRROR=4,e.GlitchFilter=t,Object.defineProperty(e,"__esModule",{value:!0})},"object"==_typeof2(r)&&void 0!==t?i(r,e("pixi.js")):"function"==typeof define&&define.amd?define(["exports","pixi.js"],i):i(n.__filters={},n.PIXI),Object.assign(PIXI.filters,this?this.__filters:__filters)},{"pixi.js":329}],145:[function(e,t,r){var n,i;n=this,i=function(e,r){var t=function(o){function e(e,t,r,n,i){void 0===e&&(e=10),void 0===t&&(t=4),void 0===r&&(r=0),void 0===n&&(n=16777215),void 0===i&&(i=.1),o.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\n\nuniform float distance;\nuniform float outerStrength;\nuniform float innerStrength;\nuniform vec4 glowColor;\nuniform vec4 filterArea;\nuniform vec4 filterClamp;\nconst float PI = 3.14159265358979323846264;\n\nvoid main(void) {\n    vec2 px = vec2(1.0 / filterArea.x, 1.0 / filterArea.y);\n    vec4 ownColor = texture2D(uSampler, vTextureCoord);\n    vec4 curColor;\n    float totalAlpha = 0.0;\n    float maxTotalAlpha = 0.0;\n    float cosAngle;\n    float sinAngle;\n    vec2 displaced;\n    for (float angle = 0.0; angle <= PI * 2.0; angle += %QUALITY_DIST%) {\n       cosAngle = cos(angle);\n       sinAngle = sin(angle);\n       for (float curDistance = 1.0; curDistance <= %DIST%; curDistance++) {\n           displaced.x = vTextureCoord.x + cosAngle * curDistance * px.x;\n           displaced.y = vTextureCoord.y + sinAngle * curDistance * px.y;\n           curColor = texture2D(uSampler, clamp(displaced, filterClamp.xy, filterClamp.zw));\n           totalAlpha += (distance - curDistance) * curColor.a;\n           maxTotalAlpha += (distance - curDistance);\n       }\n    }\n    maxTotalAlpha = max(maxTotalAlpha, 0.0001);\n\n    ownColor.a = max(ownColor.a, 0.0001);\n    ownColor.rgb = ownColor.rgb / ownColor.a;\n    float outerGlowAlpha = (totalAlpha / maxTotalAlpha)  * outerStrength * (1. - ownColor.a);\n    float innerGlowAlpha = ((maxTotalAlpha - totalAlpha) / maxTotalAlpha) * innerStrength * ownColor.a;\n    float resultAlpha = (ownColor.a + outerGlowAlpha);\n    gl_FragColor = vec4(mix(mix(ownColor.rgb, glowColor.rgb, innerGlowAlpha / ownColor.a), glowColor.rgb, outerGlowAlpha / resultAlpha) * resultAlpha, resultAlpha);\n}\n".replace(/%QUALITY_DIST%/gi,""+(1/i/e).toFixed(7)).replace(/%DIST%/gi,""+e.toFixed(7))),this.uniforms.glowColor=new Float32Array([0,0,0,1]),this.distance=e,this.color=n,this.outerStrength=t,this.innerStrength=r}o&&(e.__proto__=o),(e.prototype=Object.create(o&&o.prototype)).constructor=e;var t={color:{configurable:!0},distance:{configurable:!0},outerStrength:{configurable:!0},innerStrength:{configurable:!0}};return t.color.get=function(){return r.utils.rgb2hex(this.uniforms.glowColor)},t.color.set=function(e){r.utils.hex2rgb(e,this.uniforms.glowColor)},t.distance.get=function(){return this.uniforms.distance},t.distance.set=function(e){this.uniforms.distance=e},t.outerStrength.get=function(){return this.uniforms.outerStrength},t.outerStrength.set=function(e){this.uniforms.outerStrength=e},t.innerStrength.get=function(){return this.uniforms.innerStrength},t.innerStrength.set=function(e){this.uniforms.innerStrength=e},Object.defineProperties(e.prototype,t),e}(r.Filter);e.GlowFilter=t,Object.defineProperty(e,"__esModule",{value:!0})},"object"==_typeof2(r)&&void 0!==t?i(r,e("pixi.js")):"function"==typeof define&&define.amd?define(["exports","pixi.js"],i):i(n.__filters={},n.PIXI),Object.assign(PIXI.filters,this.__filters)},{"pixi.js":329}],146:[function(e,t,r){var n,i;n=this,i=function(e,n){var t=function(t){function e(e){t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform vec4 filterArea;\nuniform vec2 dimensions;\n\nuniform vec2 light;\nuniform bool parallel;\nuniform float aspect;\n\nuniform float gain;\nuniform float lacunarity;\nuniform float time;\n\n${perlin}\n\nvoid main(void) {\n    vec2 coord = vTextureCoord * filterArea.xy / dimensions.xy;\n\n    float d;\n\n    if (parallel) {\n        float _cos = light.x;\n        float _sin = light.y;\n        d = (_cos * coord.x) + (_sin * coord.y * aspect);\n    } else {\n        float dx = coord.x - light.x / dimensions.x;\n        float dy = (coord.y - light.y / dimensions.y) * aspect;\n        float dis = sqrt(dx * dx + dy * dy) + 0.00001;\n        d = dy / dis;\n    }\n\n    vec3 dir = vec3(d, d, 0.0);\n\n    float noise = turb(dir + vec3(time, 0.0, 62.1 + time) * 0.05, vec3(480.0, 320.0, 480.0), lacunarity, gain);\n    noise = mix(noise, 0.0, 0.3);\n    //fade vertically.\n    vec4 mist = vec4(noise, noise, noise, 1.0) * (1.0 - coord.y);\n    mist.a = 1.0;\n\n    gl_FragColor = texture2D(uSampler, vTextureCoord) + mist;\n}\n".replace("${perlin}","vec3 mod289(vec3 x)\n{\n    return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\nvec4 mod289(vec4 x)\n{\n    return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\nvec4 permute(vec4 x)\n{\n    return mod289(((x * 34.0) + 1.0) * x);\n}\nvec4 taylorInvSqrt(vec4 r)\n{\n    return 1.79284291400159 - 0.85373472095314 * r;\n}\nvec3 fade(vec3 t)\n{\n    return t * t * t * (t * (t * 6.0 - 15.0) + 10.0);\n}\n// Classic Perlin noise, periodic variant\nfloat pnoise(vec3 P, vec3 rep)\n{\n    vec3 Pi0 = mod(floor(P), rep); // Integer part, modulo period\n    vec3 Pi1 = mod(Pi0 + vec3(1.0), rep); // Integer part + 1, mod period\n    Pi0 = mod289(Pi0);\n    Pi1 = mod289(Pi1);\n    vec3 Pf0 = fract(P); // Fractional part for interpolation\n    vec3 Pf1 = Pf0 - vec3(1.0); // Fractional part - 1.0\n    vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);\n    vec4 iy = vec4(Pi0.yy, Pi1.yy);\n    vec4 iz0 = Pi0.zzzz;\n    vec4 iz1 = Pi1.zzzz;\n    vec4 ixy = permute(permute(ix) + iy);\n    vec4 ixy0 = permute(ixy + iz0);\n    vec4 ixy1 = permute(ixy + iz1);\n    vec4 gx0 = ixy0 * (1.0 / 7.0);\n    vec4 gy0 = fract(floor(gx0) * (1.0 / 7.0)) - 0.5;\n    gx0 = fract(gx0);\n    vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);\n    vec4 sz0 = step(gz0, vec4(0.0));\n    gx0 -= sz0 * (step(0.0, gx0) - 0.5);\n    gy0 -= sz0 * (step(0.0, gy0) - 0.5);\n    vec4 gx1 = ixy1 * (1.0 / 7.0);\n    vec4 gy1 = fract(floor(gx1) * (1.0 / 7.0)) - 0.5;\n    gx1 = fract(gx1);\n    vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);\n    vec4 sz1 = step(gz1, vec4(0.0));\n    gx1 -= sz1 * (step(0.0, gx1) - 0.5);\n    gy1 -= sz1 * (step(0.0, gy1) - 0.5);\n    vec3 g000 = vec3(gx0.x, gy0.x, gz0.x);\n    vec3 g100 = vec3(gx0.y, gy0.y, gz0.y);\n    vec3 g010 = vec3(gx0.z, gy0.z, gz0.z);\n    vec3 g110 = vec3(gx0.w, gy0.w, gz0.w);\n    vec3 g001 = vec3(gx1.x, gy1.x, gz1.x);\n    vec3 g101 = vec3(gx1.y, gy1.y, gz1.y);\n    vec3 g011 = vec3(gx1.z, gy1.z, gz1.z);\n    vec3 g111 = vec3(gx1.w, gy1.w, gz1.w);\n    vec4 norm0 = taylorInvSqrt(vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));\n    g000 *= norm0.x;\n    g010 *= norm0.y;\n    g100 *= norm0.z;\n    g110 *= norm0.w;\n    vec4 norm1 = taylorInvSqrt(vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));\n    g001 *= norm1.x;\n    g011 *= norm1.y;\n    g101 *= norm1.z;\n    g111 *= norm1.w;\n    float n000 = dot(g000, Pf0);\n    float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));\n    float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));\n    float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));\n    float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));\n    float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));\n    float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));\n    float n111 = dot(g111, Pf1);\n    vec3 fade_xyz = fade(Pf0);\n    vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111), fade_xyz.z);\n    vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);\n    float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x);\n    return 2.2 * n_xyz;\n}\nfloat turb(vec3 P, vec3 rep, float lacunarity, float gain)\n{\n    float sum = 0.0;\n    float sc = 1.0;\n    float totalgain = 1.0;\n    for (float i = 0.0; i < 6.0; i++)\n    {\n        sum += totalgain * pnoise(P * sc, rep);\n        sc *= lacunarity;\n        totalgain *= gain;\n    }\n    return abs(sum);\n}\n")),this.uniforms.dimensions=new Float32Array(2),"number"==typeof e&&(console.warn("GodrayFilter now uses options instead of (angle, gain, lacunarity, time)"),e={angle:e},void 0!==arguments[1]&&(e.gain=arguments[1]),void 0!==arguments[2]&&(e.lacunarity=arguments[2]),void 0!==arguments[3]&&(e.time=arguments[3])),e=Object.assign({angle:30,gain:.5,lacunarity:2.5,time:0,parallel:!0,center:[0,0]},e),this._angleLight=new n.Point,this.angle=e.angle,this.gain=e.gain,this.lacunarity=e.lacunarity,this.parallel=e.parallel,this.center=e.center,this.time=e.time}t&&(e.__proto__=t);var r={angle:{configurable:!0},gain:{configurable:!0},lacunarity:{configurable:!0}};return((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.apply=function(e,t,r,n){var i=t.sourceFrame,o=i.width,a=i.height;this.uniforms.light=this.parallel?this._angleLight:this.center,this.uniforms.parallel=this.parallel,this.uniforms.dimensions[0]=o,this.uniforms.dimensions[1]=a,this.uniforms.aspect=a/o,this.uniforms.time=this.time,e.applyFilter(this,t,r,n)},r.angle.get=function(){return this._angle},r.angle.set=function(e){var t=(this._angle=e)*n.DEG_TO_RAD;this._angleLight.x=Math.cos(t),this._angleLight.y=Math.sin(t)},r.gain.get=function(){return this.uniforms.gain},r.gain.set=function(e){this.uniforms.gain=e},r.lacunarity.get=function(){return this.uniforms.lacunarity},r.lacunarity.set=function(e){this.uniforms.lacunarity=e},Object.defineProperties(e.prototype,r),e}(n.Filter);e.GodrayFilter=t,Object.defineProperty(e,"__esModule",{value:!0})},"object"==_typeof2(r)&&void 0!==t?i(r,e("pixi.js")):"function"==typeof define&&define.amd?define(["exports","pixi.js"],i):i(n.__filters={},n.PIXI),Object.assign(PIXI.filters,this.__filters)},{"pixi.js":329}],147:[function(e,t,r){var n,i;n=this,i=function(e,i){var t=function(n){function e(e,t,r){void 0===e&&(e=4),void 0===t&&(t=3),void 0===r&&(r=!1),n.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}",r?"\nvarying vec2 vTextureCoord;\nuniform sampler2D uSampler;\n\nuniform vec2 uOffset;\nuniform vec4 filterClamp;\n\nvoid main(void)\n{\n    vec4 color = vec4(0.0);\n\n    // Sample top left pixel\n    color += texture2D(uSampler, clamp(vec2(vTextureCoord.x - uOffset.x, vTextureCoord.y + uOffset.y), filterClamp.xy, filterClamp.zw));\n\n    // Sample top right pixel\n    color += texture2D(uSampler, clamp(vec2(vTextureCoord.x + uOffset.x, vTextureCoord.y + uOffset.y), filterClamp.xy, filterClamp.zw));\n\n    // Sample bottom right pixel\n    color += texture2D(uSampler, clamp(vec2(vTextureCoord.x + uOffset.x, vTextureCoord.y - uOffset.y), filterClamp.xy, filterClamp.zw));\n\n    // Sample bottom left pixel\n    color += texture2D(uSampler, clamp(vec2(vTextureCoord.x - uOffset.x, vTextureCoord.y - uOffset.y), filterClamp.xy, filterClamp.zw));\n\n    // Average\n    color *= 0.25;\n\n    gl_FragColor = color;\n}\n":"\nvarying vec2 vTextureCoord;\nuniform sampler2D uSampler;\n\nuniform vec2 uOffset;\n\nvoid main(void)\n{\n    vec4 color = vec4(0.0);\n\n    // Sample top left pixel\n    color += texture2D(uSampler, vec2(vTextureCoord.x - uOffset.x, vTextureCoord.y + uOffset.y));\n\n    // Sample top right pixel\n    color += texture2D(uSampler, vec2(vTextureCoord.x + uOffset.x, vTextureCoord.y + uOffset.y));\n\n    // Sample bottom right pixel\n    color += texture2D(uSampler, vec2(vTextureCoord.x + uOffset.x, vTextureCoord.y - uOffset.y));\n\n    // Sample bottom left pixel\n    color += texture2D(uSampler, vec2(vTextureCoord.x - uOffset.x, vTextureCoord.y - uOffset.y));\n\n    // Average\n    color *= 0.25;\n\n    gl_FragColor = color;\n}"),this.uniforms.uOffset=new Float32Array(2),this._pixelSize=new i.Point,this.pixelSize=1,this._clamp=r,this._kernels=null,Array.isArray(e)?this.kernels=e:(this._blur=e,this.quality=t)}n&&(e.__proto__=n);var t={kernels:{configurable:!0},clamp:{configurable:!0},pixelSize:{configurable:!0},quality:{configurable:!0},blur:{configurable:!0}};return((e.prototype=Object.create(n&&n.prototype)).constructor=e).prototype.apply=function(e,t,r,n){var i,o=this.pixelSize.x/t.size.width,a=this.pixelSize.y/t.size.height;if(1===this._quality||0===this._blur)i=this._kernels[0]+.5,this.uniforms.uOffset[0]=i*o,this.uniforms.uOffset[1]=i*a,e.applyFilter(this,t,r,n);else{for(var s,l=e.getRenderTarget(!0),u=t,c=l,h=this._quality-1,d=0;d<h;d++)i=this._kernels[d]+.5,this.uniforms.uOffset[0]=i*o,this.uniforms.uOffset[1]=i*a,e.applyFilter(this,u,c,!0),s=u,u=c,c=s;i=this._kernels[h]+.5,this.uniforms.uOffset[0]=i*o,this.uniforms.uOffset[1]=i*a,e.applyFilter(this,u,r,n),e.returnRenderTarget(l)}},e.prototype._generateKernels=function(){var e=this._blur,t=this._quality,r=[e];if(0<e)for(var n=e,i=e/t,o=1;o<t;o++)n-=i,r.push(n);this._kernels=r},t.kernels.get=function(){return this._kernels},t.kernels.set=function(e){Array.isArray(e)&&0<e.length?(this._kernels=e,this._quality=e.length,this._blur=Math.max.apply(Math,e)):(this._kernels=[0],this._quality=1)},t.clamp.get=function(){return this._clamp},t.pixelSize.set=function(e){"number"==typeof e?(this._pixelSize.x=e,this._pixelSize.y=e):Array.isArray(e)?(this._pixelSize.x=e[0],this._pixelSize.y=e[1]):e instanceof i.Point?(this._pixelSize.x=e.x,this._pixelSize.y=e.y):(this._pixelSize.x=1,this._pixelSize.y=1)},t.pixelSize.get=function(){return this._pixelSize},t.quality.get=function(){return this._quality},t.quality.set=function(e){this._quality=Math.max(1,Math.round(e)),this._generateKernels()},t.blur.get=function(){return this._blur},t.blur.set=function(e){this._blur=e,this._generateKernels()},Object.defineProperties(e.prototype,t),e}(i.Filter);e.KawaseBlurFilter=t,Object.defineProperty(e,"__esModule",{value:!0})},"object"==_typeof2(r)&&void 0!==t?i(r,e("pixi.js")):"function"==typeof define&&define.amd?define(["exports","pixi.js"],i):i(n.__filters={},n.PIXI),Object.assign(PIXI.filters,this.__filters)},{"pixi.js":329}],148:[function(e,t,r){var n,i;n=this,i=function(e,i){var t=function(n){function e(e,t,r){void 0===e&&(e=[0,0]),void 0===t&&(t=5),void 0===r&&(r=0),n.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform vec4 filterArea;\n\nuniform vec2 uVelocity;\nuniform int uKernelSize;\nuniform float uOffset;\n\nconst int MAX_KERNEL_SIZE = 2048;\n\n// Notice:\n// the perfect way:\n//    int kernelSize = min(uKernelSize, MAX_KERNELSIZE);\n// BUT in real use-case , uKernelSize < MAX_KERNELSIZE almost always.\n// So use uKernelSize directly.\n\nvoid main(void)\n{\n    vec4 color = texture2D(uSampler, vTextureCoord);\n\n    if (uKernelSize == 0)\n    {\n        gl_FragColor = color;\n        return;\n    }\n\n    vec2 velocity = uVelocity / filterArea.xy;\n    float offset = -uOffset / length(uVelocity) - 0.5;\n    int k = uKernelSize - 1;\n\n    for(int i = 0; i < MAX_KERNEL_SIZE - 1; i++) {\n        if (i == k) {\n            break;\n        }\n        vec2 bias = velocity * (float(i) / float(k) + offset);\n        color += texture2D(uSampler, vTextureCoord + bias);\n    }\n    gl_FragColor = color / float(uKernelSize);\n}\n"),this.uniforms.uVelocity=new Float32Array(2),this._velocity=new i.ObservablePoint(this.velocityChanged,this),this.velocity=e,this.kernelSize=t,this.offset=r}n&&(e.__proto__=n);var t={velocity:{configurable:!0},offset:{configurable:!0}};return((e.prototype=Object.create(n&&n.prototype)).constructor=e).prototype.apply=function(e,t,r,n){var i=this.velocity,o=i.x,a=i.y;this.uniforms.uKernelSize=0!==o||0!==a?this.kernelSize:0,e.applyFilter(this,t,r,n)},t.velocity.set=function(e){Array.isArray(e)?this._velocity.set(e[0],e[1]):(e instanceof i.Point||e instanceof i.ObservablePoint)&&this._velocity.copy(e)},t.velocity.get=function(){return this._velocity},e.prototype.velocityChanged=function(){this.uniforms.uVelocity[0]=this._velocity.x,this.uniforms.uVelocity[1]=this._velocity.y},t.offset.set=function(e){this.uniforms.uOffset=e},t.offset.get=function(){return this.uniforms.uOffset},Object.defineProperties(e.prototype,t),e}(i.Filter);e.MotionBlurFilter=t,Object.defineProperty(e,"__esModule",{value:!0})},"object"==_typeof2(r)&&void 0!==t?i(r,e("pixi.js")):"function"==typeof define&&define.amd?define(["exports","pixi.js"],i):i(n.__filters={},n.PIXI),Object.assign(PIXI.filters,this?this.__filters:__filters)},{"pixi.js":329}],149:[function(e,t,r){var n,i;n=this,i=function(e,l){var t=function(n){function e(e,t,r){void 0===t&&(t=.05),void 0===r&&(r=null),r=r||e.length,n.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\n\nuniform float epsilon;\n\nconst int MAX_COLORS = %maxColors%;\n\nuniform vec3 originalColors[MAX_COLORS];\nuniform vec3 targetColors[MAX_COLORS];\n\nvoid main(void)\n{\n    gl_FragColor = texture2D(uSampler, vTextureCoord);\n\n    float alpha = gl_FragColor.a;\n    if (alpha < 0.0001)\n    {\n      return;\n    }\n\n    vec3 color = gl_FragColor.rgb / alpha;\n\n    for(int i = 0; i < MAX_COLORS; i++)\n    {\n      vec3 origColor = originalColors[i];\n      if (origColor.r < 0.0)\n      {\n        break;\n      }\n      vec3 colorDiff = origColor - color;\n      if (length(colorDiff) < epsilon)\n      {\n        vec3 targetColor = targetColors[i];\n        gl_FragColor = vec4((targetColor + colorDiff) * alpha, alpha);\n        return;\n      }\n    }\n}\n".replace(/%maxColors%/g,r)),this.epsilon=t,this._maxColors=r,this._replacements=null,this.uniforms.originalColors=new Float32Array(3*r),this.uniforms.targetColors=new Float32Array(3*r),this.replacements=e}n&&(e.__proto__=n),(e.prototype=Object.create(n&&n.prototype)).constructor=e;var t={replacements:{configurable:!0},maxColors:{configurable:!0},epsilon:{configurable:!0}};return t.replacements.set=function(e){var t=this.uniforms.originalColors,r=this.uniforms.targetColors,n=e.length;if(n>this._maxColors)throw"Length of replacements ("+n+") exceeds the maximum colors length ("+this._maxColors+")";t[3*n]=-1;for(var i=0;i<n;i++){var o=e[i],a=o[0];"number"==typeof a?a=l.utils.hex2rgb(a):o[0]=l.utils.rgb2hex(a),t[3*i]=a[0],t[3*i+1]=a[1],t[3*i+2]=a[2];var s=o[1];"number"==typeof s?s=l.utils.hex2rgb(s):o[1]=l.utils.rgb2hex(s),r[3*i]=s[0],r[3*i+1]=s[1],r[3*i+2]=s[2]}this._replacements=e},t.replacements.get=function(){return this._replacements},e.prototype.refresh=function(){this.replacements=this._replacements},t.maxColors.get=function(){return this._maxColors},t.epsilon.set=function(e){this.uniforms.epsilon=e},t.epsilon.get=function(){return this.uniforms.epsilon},Object.defineProperties(e.prototype,t),e}(l.Filter);e.MultiColorReplaceFilter=t,Object.defineProperty(e,"__esModule",{value:!0})},"object"==_typeof2(r)&&void 0!==t?i(r,e("pixi.js")):"function"==typeof define&&define.amd?define(["exports","pixi.js"],i):i(n.__filters={},n.PIXI),Object.assign(PIXI.filters,this.__filters)},{"pixi.js":329}],150:[function(e,t,r){var n,i;n=this,i=function(e,t){var r=function(r){function e(e,t){void 0===t&&(t=0),r.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform vec4 filterArea;\nuniform vec2 dimensions;\n\nuniform float sepia;\nuniform float noise;\nuniform float noiseSize;\nuniform float scratch;\nuniform float scratchDensity;\nuniform float scratchWidth;\nuniform float vignetting;\nuniform float vignettingAlpha;\nuniform float vignettingBlur;\nuniform float seed;\n\nconst float SQRT_2 = 1.414213;\nconst vec3 SEPIA_RGB = vec3(112.0 / 255.0, 66.0 / 255.0, 20.0 / 255.0);\n\nfloat rand(vec2 co) {\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvec3 Overlay(vec3 src, vec3 dst)\n{\n    // if (dst <= 0.5) then: 2 * src * dst\n    // if (dst > 0.5) then: 1 - 2 * (1 - dst) * (1 - src)\n    return vec3((dst.x <= 0.5) ? (2.0 * src.x * dst.x) : (1.0 - 2.0 * (1.0 - dst.x) * (1.0 - src.x)),\n                (dst.y <= 0.5) ? (2.0 * src.y * dst.y) : (1.0 - 2.0 * (1.0 - dst.y) * (1.0 - src.y)),\n                (dst.z <= 0.5) ? (2.0 * src.z * dst.z) : (1.0 - 2.0 * (1.0 - dst.z) * (1.0 - src.z)));\n}\n\n\nvoid main()\n{\n    gl_FragColor = texture2D(uSampler, vTextureCoord);\n    vec3 color = gl_FragColor.rgb;\n\n    if (sepia > 0.0)\n    {\n        float gray = (color.x + color.y + color.z) / 3.0;\n        vec3 grayscale = vec3(gray);\n\n        color = Overlay(SEPIA_RGB, grayscale);\n\n        color = grayscale + sepia * (color - grayscale);\n    }\n\n    vec2 coord = vTextureCoord * filterArea.xy / dimensions.xy;\n\n    if (vignetting > 0.0)\n    {\n        float outter = SQRT_2 - vignetting * SQRT_2;\n        vec2 dir = vec2(vec2(0.5, 0.5) - coord);\n        dir.y *= dimensions.y / dimensions.x;\n        float darker = clamp((outter - length(dir) * SQRT_2) / ( 0.00001 + vignettingBlur * SQRT_2), 0.0, 1.0);\n        color.rgb *= darker + (1.0 - darker) * (1.0 - vignettingAlpha);\n    }\n\n    if (scratchDensity > seed && scratch != 0.0)\n    {\n        float phase = seed * 256.0;\n        float s = mod(floor(phase), 2.0);\n        float dist = 1.0 / scratchDensity;\n        float d = distance(coord, vec2(seed * dist, abs(s - seed * dist)));\n        if (d < seed * 0.6 + 0.4)\n        {\n            highp float period = scratchDensity * 10.0;\n\n            float xx = coord.x * period + phase;\n            float aa = abs(mod(xx, 0.5) * 4.0);\n            float bb = mod(floor(xx / 0.5), 2.0);\n            float yy = (1.0 - bb) * aa + bb * (2.0 - aa);\n\n            float kk = 2.0 * period;\n            float dw = scratchWidth / dimensions.x * (0.75 + seed);\n            float dh = dw * kk;\n\n            float tine = (yy - (2.0 - dh));\n\n            if (tine > 0.0) {\n                float _sign = sign(scratch);\n\n                tine = s * tine / period + scratch + 0.1;\n                tine = clamp(tine + 1.0, 0.5 + _sign * 0.5, 1.5 + _sign * 0.5);\n\n                color.rgb *= tine;\n            }\n        }\n    }\n\n    if (noise > 0.0 && noiseSize > 0.0)\n    {\n        vec2 pixelCoord = vTextureCoord.xy * filterArea.xy;\n        pixelCoord.x = floor(pixelCoord.x / noiseSize);\n        pixelCoord.y = floor(pixelCoord.y / noiseSize);\n        // vec2 d = pixelCoord * noiseSize * vec2(1024.0 + seed * 512.0, 1024.0 - seed * 512.0);\n        // float _noise = snoise(d) * 0.5;\n        float _noise = rand(pixelCoord * noiseSize * seed) - 0.5;\n        color += _noise * noise;\n    }\n\n    gl_FragColor.rgb = color;\n}\n"),this.uniforms.dimensions=new Float32Array(2),"number"==typeof e?(this.seed=e,e=null):this.seed=t,Object.assign(this,{sepia:.3,noise:.3,noiseSize:1,scratch:.5,scratchDensity:.3,scratchWidth:1,vignetting:.3,vignettingAlpha:1,vignettingBlur:.3},e)}r&&(e.__proto__=r);var t={sepia:{configurable:!0},noise:{configurable:!0},noiseSize:{configurable:!0},scratch:{configurable:!0},scratchDensity:{configurable:!0},scratchWidth:{configurable:!0},vignetting:{configurable:!0},vignettingAlpha:{configurable:!0},vignettingBlur:{configurable:!0}};return((e.prototype=Object.create(r&&r.prototype)).constructor=e).prototype.apply=function(e,t,r,n){this.uniforms.dimensions[0]=t.sourceFrame.width,this.uniforms.dimensions[1]=t.sourceFrame.height,this.uniforms.seed=this.seed,e.applyFilter(this,t,r,n)},t.sepia.set=function(e){this.uniforms.sepia=e},t.sepia.get=function(){return this.uniforms.sepia},t.noise.set=function(e){this.uniforms.noise=e},t.noise.get=function(){return this.uniforms.noise},t.noiseSize.set=function(e){this.uniforms.noiseSize=e},t.noiseSize.get=function(){return this.uniforms.noiseSize},t.scratch.set=function(e){this.uniforms.scratch=e},t.scratch.get=function(){return this.uniforms.scratch},t.scratchDensity.set=function(e){this.uniforms.scratchDensity=e},t.scratchDensity.get=function(){return this.uniforms.scratchDensity},t.scratchWidth.set=function(e){this.uniforms.scratchWidth=e},t.scratchWidth.get=function(){return this.uniforms.scratchWidth},t.vignetting.set=function(e){this.uniforms.vignetting=e},t.vignetting.get=function(){return this.uniforms.vignetting},t.vignettingAlpha.set=function(e){this.uniforms.vignettingAlpha=e},t.vignettingAlpha.get=function(){return this.uniforms.vignettingAlpha},t.vignettingBlur.set=function(e){this.uniforms.vignettingBlur=e},t.vignettingBlur.get=function(){return this.uniforms.vignettingBlur},Object.defineProperties(e.prototype,t),e}(t.Filter);e.OldFilmFilter=r,Object.defineProperty(e,"__esModule",{value:!0})},"object"==_typeof2(r)&&void 0!==t?i(r,e("pixi.js")):"function"==typeof define&&define.amd?define(["exports","pixi.js"],i):i(n.__filters={},n.PIXI),Object.assign(PIXI.filters,this.__filters)},{"pixi.js":329}],151:[function(e,t,r){var n,i;n=this,i=function(e,t){var r=function(o){function a(e,t,r){void 0===e&&(e=1),void 0===t&&(t=0),void 0===r&&(r=.1);var n=Math.max(r*a.MAX_SAMPLES,a.MIN_SAMPLES),i=(2*Math.PI/n).toFixed(7);o.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\n\nuniform vec2 thickness;\nuniform vec4 outlineColor;\nuniform vec4 filterClamp;\n\nconst float DOUBLE_PI = 3.14159265358979323846264 * 2.;\n\nvoid main(void) {\n    vec4 ownColor = texture2D(uSampler, vTextureCoord);\n    vec4 curColor;\n    float maxAlpha = 0.;\n    vec2 displaced;\n    for (float angle = 0.; angle <= DOUBLE_PI; angle += ${angleStep}) {\n        displaced.x = vTextureCoord.x + thickness.x * cos(angle);\n        displaced.y = vTextureCoord.y + thickness.y * sin(angle);\n        curColor = texture2D(uSampler, clamp(displaced, filterClamp.xy, filterClamp.zw));\n        maxAlpha = max(maxAlpha, curColor.a);\n    }\n    float resultAlpha = max(maxAlpha, ownColor.a);\n    gl_FragColor = vec4((ownColor.rgb + outlineColor.rgb * (1. - ownColor.a)) * resultAlpha, resultAlpha);\n}\n".replace(/\$\{angleStep\}/,i)),this.uniforms.thickness=new Float32Array([0,0]),this.thickness=e,this.uniforms.outlineColor=new Float32Array([0,0,0,1]),this.color=t,this.quality=r}o&&(a.__proto__=o);var e={color:{configurable:!0}};return((a.prototype=Object.create(o&&o.prototype)).constructor=a).prototype.apply=function(e,t,r,n){this.uniforms.thickness[0]=this.thickness/t.size.width,this.uniforms.thickness[1]=this.thickness/t.size.height,e.applyFilter(this,t,r,n)},e.color.get=function(){return t.utils.rgb2hex(this.uniforms.outlineColor)},e.color.set=function(e){t.utils.hex2rgb(e,this.uniforms.outlineColor)},Object.defineProperties(a.prototype,e),a}(t.Filter);r.MIN_SAMPLES=1,r.MAX_SAMPLES=100,e.OutlineFilter=r,Object.defineProperty(e,"__esModule",{value:!0})},"object"==_typeof2(r)&&void 0!==t?i(r,e("pixi.js")):"function"==typeof define&&define.amd?define(["exports","pixi.js"],i):i(n.__filters={},n.PIXI),Object.assign(PIXI.filters,this.__filters)},{"pixi.js":329}],152:[function(e,t,r){var n,i;n=this,i=function(e,t){var r=function(t){function e(e){void 0===e&&(e=10),t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform vec2 size;\nuniform sampler2D uSampler;\n\nuniform vec4 filterArea;\n\nvec2 mapCoord( vec2 coord )\n{\n    coord *= filterArea.xy;\n    coord += filterArea.zw;\n\n    return coord;\n}\n\nvec2 unmapCoord( vec2 coord )\n{\n    coord -= filterArea.zw;\n    coord /= filterArea.xy;\n\n    return coord;\n}\n\nvec2 pixelate(vec2 coord, vec2 size)\n{\n\treturn floor( coord / size ) * size;\n}\n\nvoid main(void)\n{\n    vec2 coord = mapCoord(vTextureCoord);\n\n    coord = pixelate(coord, size);\n\n    coord = unmapCoord(coord);\n\n    gl_FragColor = texture2D(uSampler, coord);\n}\n"),this.size=e}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var r={size:{configurable:!0}};return r.size.get=function(){return this.uniforms.size},r.size.set=function(e){"number"==typeof e&&(e=[e,e]),this.uniforms.size=e},Object.defineProperties(e.prototype,r),e}(t.Filter);e.PixelateFilter=r,Object.defineProperty(e,"__esModule",{value:!0})},"object"==_typeof2(r)&&void 0!==t?i(r,e("pixi.js")):"function"==typeof define&&define.amd?define(["exports","pixi.js"],i):i(n.__filters={},n.PIXI),Object.assign(PIXI.filters,this.__filters)},{"pixi.js":329}],153:[function(e,t,r){var n,i;n=this,i=function(e,t){var r=function(i){function e(e,t,r,n){void 0===e&&(e=0),void 0===t&&(t=[0,0]),void 0===r&&(r=5),void 0===n&&(n=-1),i.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform vec4 filterArea;\n\nuniform float uRadian;\nuniform vec2 uCenter;\nuniform float uRadius;\nuniform int uKernelSize;\n\nconst int MAX_KERNEL_SIZE = 2048;\n\nvoid main(void)\n{\n    vec4 color = texture2D(uSampler, vTextureCoord);\n\n    if (uKernelSize == 0)\n    {\n        gl_FragColor = color;\n        return;\n    }\n\n    float aspect = filterArea.y / filterArea.x;\n    vec2 center = uCenter.xy / filterArea.xy;\n    float gradient = uRadius / filterArea.x * 0.3;\n    float radius = uRadius / filterArea.x - gradient * 0.5;\n    int k = uKernelSize - 1;\n\n    vec2 coord = vTextureCoord;\n    vec2 dir = vec2(center - coord);\n    float dist = length(vec2(dir.x, dir.y * aspect));\n\n    float radianStep = uRadian;\n    if (radius >= 0.0 && dist > radius) {\n        float delta = dist - radius;\n        float gap = gradient;\n        float scale = 1.0 - abs(delta / gap);\n        if (scale <= 0.0) {\n            gl_FragColor = color;\n            return;\n        }\n        radianStep *= scale;\n    }\n    radianStep /= float(k);\n\n    float s = sin(radianStep);\n    float c = cos(radianStep);\n    mat2 rotationMatrix = mat2(vec2(c, -s), vec2(s, c));\n\n    for(int i = 0; i < MAX_KERNEL_SIZE - 1; i++) {\n        if (i == k) {\n            break;\n        }\n\n        coord -= center;\n        coord.y *= aspect;\n        coord = rotationMatrix * coord;\n        coord.y /= aspect;\n        coord += center;\n\n        vec4 sample = texture2D(uSampler, coord);\n\n        // switch to pre-multiplied alpha to correctly blur transparent images\n        // sample.rgb *= sample.a;\n\n        color += sample;\n    }\n\n    gl_FragColor = color / float(uKernelSize);\n}\n"),this._angle=0,this.angle=e,this.center=t,this.kernelSize=r,this.radius=n}i&&(e.__proto__=i);var t={angle:{configurable:!0},center:{configurable:!0},radius:{configurable:!0}};return((e.prototype=Object.create(i&&i.prototype)).constructor=e).prototype.apply=function(e,t,r,n){this.uniforms.uKernelSize=0!==this._angle?this.kernelSize:0,e.applyFilter(this,t,r,n)},t.angle.set=function(e){this._angle=e,this.uniforms.uRadian=e*Math.PI/180},t.angle.get=function(){return this._angle},t.center.get=function(){return this.uniforms.uCenter},t.center.set=function(e){this.uniforms.uCenter=e},t.radius.get=function(){return this.uniforms.uRadius},t.radius.set=function(e){(e<0||e===1/0)&&(e=-1),this.uniforms.uRadius=e},Object.defineProperties(e.prototype,t),e}(t.Filter);e.RadialBlurFilter=r,Object.defineProperty(e,"__esModule",{value:!0})},"object"==_typeof2(r)&&void 0!==t?i(r,e("pixi.js")):"function"==typeof define&&define.amd?define(["exports","pixi.js"],i):i(n.__filters={},n.PIXI),Object.assign(PIXI.filters,this.__filters)},{"pixi.js":329}],154:[function(e,t,r){var n,i;n=this,i=function(e,t){var r=function(t){function e(e){t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\n\nuniform vec4 filterArea;\nuniform vec4 filterClamp;\nuniform vec2 dimensions;\n\nuniform bool mirror;\nuniform float boundary;\nuniform vec2 amplitude;\nuniform vec2 waveLength;\nuniform vec2 alpha;\nuniform float time;\n\nfloat rand(vec2 co) {\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvoid main(void)\n{\n    vec2 pixelCoord = vTextureCoord.xy * filterArea.xy;\n    vec2 coord = pixelCoord / dimensions;\n\n    if (coord.y < boundary) {\n        gl_FragColor = texture2D(uSampler, vTextureCoord);\n        return;\n    }\n\n    float k = (coord.y - boundary) / (1. - boundary + 0.0001);\n    float areaY = boundary * dimensions.y / filterArea.y;\n    float v = areaY + areaY - vTextureCoord.y;\n    float y = mirror ? v : vTextureCoord.y;\n\n    float _amplitude = ((amplitude.y - amplitude.x) * k + amplitude.x ) / filterArea.x;\n    float _waveLength = ((waveLength.y - waveLength.x) * k + waveLength.x) / filterArea.y;\n    float _alpha = (alpha.y - alpha.x) * k + alpha.x;\n\n    float x = vTextureCoord.x + cos(v * 6.28 / _waveLength - time) * _amplitude;\n    x = clamp(x, filterClamp.x, filterClamp.z);\n\n    vec4 color = texture2D(uSampler, vec2(x, y));\n\n    gl_FragColor = color * _alpha;\n}\n"),this.uniforms.amplitude=new Float32Array(2),this.uniforms.waveLength=new Float32Array(2),this.uniforms.alpha=new Float32Array(2),this.uniforms.dimensions=new Float32Array(2),Object.assign(this,{mirror:!0,boundary:.5,amplitude:[0,20],waveLength:[30,100],alpha:[1,1],time:0},e)}t&&(e.__proto__=t);var r={mirror:{configurable:!0},boundary:{configurable:!0},amplitude:{configurable:!0},waveLength:{configurable:!0},alpha:{configurable:!0}};return((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.apply=function(e,t,r,n){this.uniforms.dimensions[0]=t.sourceFrame.width,this.uniforms.dimensions[1]=t.sourceFrame.height,this.uniforms.time=this.time,e.applyFilter(this,t,r,n)},r.mirror.set=function(e){this.uniforms.mirror=e},r.mirror.get=function(){return this.uniforms.mirror},r.boundary.set=function(e){this.uniforms.boundary=e},r.boundary.get=function(){return this.uniforms.boundary},r.amplitude.set=function(e){this.uniforms.amplitude[0]=e[0],this.uniforms.amplitude[1]=e[1]},r.amplitude.get=function(){return this.uniforms.amplitude},r.waveLength.set=function(e){this.uniforms.waveLength[0]=e[0],this.uniforms.waveLength[1]=e[1]},r.waveLength.get=function(){return this.uniforms.waveLength},r.alpha.set=function(e){this.uniforms.alpha[0]=e[0],this.uniforms.alpha[1]=e[1]},r.alpha.get=function(){return this.uniforms.alpha},Object.defineProperties(e.prototype,r),e}(t.Filter);e.ReflectionFilter=r,Object.defineProperty(e,"__esModule",{value:!0})},"object"==_typeof2(r)&&void 0!==t?i(r,e("pixi.js")):"function"==typeof define&&define.amd?define(["exports","pixi.js"],i):i(n.__filters={},n.PIXI),Object.assign(PIXI.filters,this.__filters)},{"pixi.js":329}],155:[function(e,t,r){var n,i;n=this,i=function(e,t){var r=function(n){function e(e,t,r){void 0===e&&(e=[-10,0]),void 0===t&&(t=[0,10]),void 0===r&&(r=[0,0]),n.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 filterArea;\nuniform vec2 red;\nuniform vec2 green;\nuniform vec2 blue;\n\nvoid main(void)\n{\n   gl_FragColor.r = texture2D(uSampler, vTextureCoord + red/filterArea.xy).r;\n   gl_FragColor.g = texture2D(uSampler, vTextureCoord + green/filterArea.xy).g;\n   gl_FragColor.b = texture2D(uSampler, vTextureCoord + blue/filterArea.xy).b;\n   gl_FragColor.a = texture2D(uSampler, vTextureCoord).a;\n}\n"),this.red=e,this.green=t,this.blue=r}n&&(e.__proto__=n),(e.prototype=Object.create(n&&n.prototype)).constructor=e;var t={red:{configurable:!0},green:{configurable:!0},blue:{configurable:!0}};return t.red.get=function(){return this.uniforms.red},t.red.set=function(e){this.uniforms.red=e},t.green.get=function(){return this.uniforms.green},t.green.set=function(e){this.uniforms.green=e},t.blue.get=function(){return this.uniforms.blue},t.blue.set=function(e){this.uniforms.blue=e},Object.defineProperties(e.prototype,t),e}(t.Filter);e.RGBSplitFilter=r,Object.defineProperty(e,"__esModule",{value:!0})},"object"==_typeof2(r)&&void 0!==t?i(r,e("pixi.js")):"function"==typeof define&&define.amd?define(["exports","pixi.js"],i):i(n.__filters={},n.PIXI),Object.assign(PIXI.filters,this.__filters)},{"pixi.js":329}],156:[function(e,t,r){var n,i;n=this,i=function(e,t){var r=function(n){function e(e,t,r){void 0===e&&(e=[0,0]),void 0===t&&(t={}),void 0===r&&(r=0),n.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform vec4 filterArea;\nuniform vec4 filterClamp;\n\nuniform vec2 center;\n\nuniform float amplitude;\nuniform float wavelength;\n// uniform float power;\nuniform float brightness;\nuniform float speed;\nuniform float radius;\n\nuniform float time;\n\nconst float PI = 3.14159;\n\nvoid main()\n{\n    float halfWavelength = wavelength * 0.5 / filterArea.x;\n    float maxRadius = radius / filterArea.x;\n    float currentRadius = time * speed / filterArea.x;\n\n    float fade = 1.0;\n\n    if (maxRadius > 0.0) {\n        if (currentRadius > maxRadius) {\n            gl_FragColor = texture2D(uSampler, vTextureCoord);\n            return;\n        }\n        fade = 1.0 - pow(currentRadius / maxRadius, 2.0);\n    }\n\n    vec2 dir = vec2(vTextureCoord - center / filterArea.xy);\n    dir.y *= filterArea.y / filterArea.x;\n    float dist = length(dir);\n\n    if (dist <= 0.0 || dist < currentRadius - halfWavelength || dist > currentRadius + halfWavelength) {\n        gl_FragColor = texture2D(uSampler, vTextureCoord);\n        return;\n    }\n\n    vec2 diffUV = normalize(dir);\n\n    float diff = (dist - currentRadius) / halfWavelength;\n\n    float p = 1.0 - pow(abs(diff), 2.0);\n\n    // float powDiff = diff * pow(p, 2.0) * ( amplitude * fade );\n    float powDiff = 1.25 * sin(diff * PI) * p * ( amplitude * fade );\n\n    vec2 offset = diffUV * powDiff / filterArea.xy;\n\n    // Do clamp :\n    vec2 coord = vTextureCoord + offset;\n    vec2 clampedCoord = clamp(coord, filterClamp.xy, filterClamp.zw);\n    vec4 color = texture2D(uSampler, clampedCoord);\n    if (coord != clampedCoord) {\n        color *= max(0.0, 1.0 - length(coord - clampedCoord));\n    }\n\n    // No clamp :\n    // gl_FragColor = texture2D(uSampler, vTextureCoord + offset);\n\n    color.rgb *= 1.0 + (brightness - 1.0) * p * fade;\n\n    gl_FragColor = color;\n}\n"),this.center=e,Array.isArray(t)&&(console.warn("Deprecated Warning: ShockwaveFilter params Array has been changed to options Object."),t={}),t=Object.assign({amplitude:30,wavelength:160,brightness:1,speed:500,radius:-1},t),this.amplitude=t.amplitude,this.wavelength=t.wavelength,this.brightness=t.brightness,this.speed=t.speed,this.radius=t.radius,this.time=r}n&&(e.__proto__=n);var t={center:{configurable:!0},amplitude:{configurable:!0},wavelength:{configurable:!0},brightness:{configurable:!0},speed:{configurable:!0},radius:{configurable:!0}};return((e.prototype=Object.create(n&&n.prototype)).constructor=e).prototype.apply=function(e,t,r,n){this.uniforms.time=this.time,e.applyFilter(this,t,r,n)},t.center.get=function(){return this.uniforms.center},t.center.set=function(e){this.uniforms.center=e},t.amplitude.get=function(){return this.uniforms.amplitude},t.amplitude.set=function(e){this.uniforms.amplitude=e},t.wavelength.get=function(){return this.uniforms.wavelength},t.wavelength.set=function(e){this.uniforms.wavelength=e},t.brightness.get=function(){return this.uniforms.brightness},t.brightness.set=function(e){this.uniforms.brightness=e},t.speed.get=function(){return this.uniforms.speed},t.speed.set=function(e){this.uniforms.speed=e},t.radius.get=function(){return this.uniforms.radius},t.radius.set=function(e){this.uniforms.radius=e},Object.defineProperties(e.prototype,t),e}(t.Filter);e.ShockwaveFilter=r,Object.defineProperty(e,"__esModule",{value:!0})},"object"==_typeof2(r)&&void 0!==t?i(r,e("pixi.js")):"function"==typeof define&&define.amd?define(["exports","pixi.js"],i):i(n.__filters={},n.PIXI),Object.assign(PIXI.filters,this?this.__filters:__filters)},{"pixi.js":329}],157:[function(e,t,r){var n,i;n=this,i=function(e,r){var t=function(n){function e(e,t,r){void 0===t&&(t=0),void 0===r&&(r=1),n.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform sampler2D uLightmap;\nuniform vec4 filterArea;\nuniform vec2 dimensions;\nuniform vec4 ambientColor;\nvoid main() {\n    vec4 diffuseColor = texture2D(uSampler, vTextureCoord);\n    vec2 lightCoord = (vTextureCoord * filterArea.xy) / dimensions;\n    vec4 light = texture2D(uLightmap, lightCoord);\n    vec3 ambient = ambientColor.rgb * ambientColor.a;\n    vec3 intensity = ambient + light.rgb;\n    vec3 finalColor = diffuseColor.rgb * intensity;\n    gl_FragColor = vec4(finalColor, diffuseColor.a);\n}\n"),this.uniforms.dimensions=new Float32Array(2),this.uniforms.ambientColor=new Float32Array([0,0,0,r]),this.texture=e,this.color=t}n&&(e.__proto__=n);var t={texture:{configurable:!0},color:{configurable:!0},alpha:{configurable:!0}};return((e.prototype=Object.create(n&&n.prototype)).constructor=e).prototype.apply=function(e,t,r,n){this.uniforms.dimensions[0]=t.sourceFrame.width,this.uniforms.dimensions[1]=t.sourceFrame.height,e.applyFilter(this,t,r,n)},t.texture.get=function(){return this.uniforms.uLightmap},t.texture.set=function(e){this.uniforms.uLightmap=e},t.color.set=function(e){var t=this.uniforms.ambientColor;this._color="number"==typeof e?(r.utils.hex2rgb(e,t),e):(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],r.utils.rgb2hex(t))},t.color.get=function(){return this._color},t.alpha.get=function(){return this.uniforms.ambientColor[3]},t.alpha.set=function(e){this.uniforms.ambientColor[3]=e},Object.defineProperties(e.prototype,t),e}(r.Filter);e.SimpleLightmapFilter=t,Object.defineProperty(e,"__esModule",{value:!0})},"object"==_typeof2(r)&&void 0!==t?i(r,e("pixi.js")):"function"==typeof define&&define.amd?define(["exports","pixi.js"],i):i(n.__filters={},n.PIXI),Object.assign(PIXI.filters,this.__filters)},{"pixi.js":329}],158:[function(e,t,r){var n,i;n=this,i=function(e,o){var t=function(i){function e(e,t,r,n){void 0===e&&(e=100),void 0===t&&(t=600),void 0===r&&(r=null),void 0===n&&(n=null),i.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float blur;\nuniform float gradientBlur;\nuniform vec2 start;\nuniform vec2 end;\nuniform vec2 delta;\nuniform vec2 texSize;\n\nfloat random(vec3 scale, float seed)\n{\n    return fract(sin(dot(gl_FragCoord.xyz + seed, scale)) * 43758.5453 + seed);\n}\n\nvoid main(void)\n{\n    vec4 color = vec4(0.0);\n    float total = 0.0;\n\n    float offset = random(vec3(12.9898, 78.233, 151.7182), 0.0);\n    vec2 normal = normalize(vec2(start.y - end.y, end.x - start.x));\n    float radius = smoothstep(0.0, 1.0, abs(dot(vTextureCoord * texSize - start, normal)) / gradientBlur) * blur;\n\n    for (float t = -30.0; t <= 30.0; t++)\n    {\n        float percent = (t + offset - 0.5) / 30.0;\n        float weight = 1.0 - abs(percent);\n        vec4 sample = texture2D(uSampler, vTextureCoord + delta / texSize * percent * radius);\n        sample.rgb *= sample.a;\n        color += sample * weight;\n        total += weight;\n    }\n\n    color /= total;\n    color.rgb /= color.a + 0.00001;\n\n    gl_FragColor = color;\n}\n"),this.uniforms.blur=e,this.uniforms.gradientBlur=t,this.uniforms.start=r||new o.Point(0,window.innerHeight/2),this.uniforms.end=n||new o.Point(600,window.innerHeight/2),this.uniforms.delta=new o.Point(30,30),this.uniforms.texSize=new o.Point(window.innerWidth,window.innerHeight),this.updateDelta()}i&&(e.__proto__=i);var t={blur:{configurable:!0},gradientBlur:{configurable:!0},start:{configurable:!0},end:{configurable:!0}};return((e.prototype=Object.create(i&&i.prototype)).constructor=e).prototype.updateDelta=function(){this.uniforms.delta.x=0,this.uniforms.delta.y=0},t.blur.get=function(){return this.uniforms.blur},t.blur.set=function(e){this.uniforms.blur=e},t.gradientBlur.get=function(){return this.uniforms.gradientBlur},t.gradientBlur.set=function(e){this.uniforms.gradientBlur=e},t.start.get=function(){return this.uniforms.start},t.start.set=function(e){this.uniforms.start=e,this.updateDelta()},t.end.get=function(){return this.uniforms.end},t.end.set=function(e){this.uniforms.end=e,this.updateDelta()},Object.defineProperties(e.prototype,t),e}(o.Filter),a=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype.updateDelta=function(){var e=this.uniforms.end.x-this.uniforms.start.x,t=this.uniforms.end.y-this.uniforms.start.y,r=Math.sqrt(e*e+t*t);this.uniforms.delta.x=e/r,this.uniforms.delta.y=t/r},t}(t),s=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype.updateDelta=function(){var e=this.uniforms.end.x-this.uniforms.start.x,t=this.uniforms.end.y-this.uniforms.start.y,r=Math.sqrt(e*e+t*t);this.uniforms.delta.x=-t/r,this.uniforms.delta.y=e/r},t}(t),r=function(i){function e(e,t,r,n){void 0===e&&(e=100),void 0===t&&(t=600),void 0===r&&(r=null),void 0===n&&(n=null),i.call(this),this.tiltShiftXFilter=new a(e,t,r,n),this.tiltShiftYFilter=new s(e,t,r,n)}i&&(e.__proto__=i);var t={blur:{configurable:!0},gradientBlur:{configurable:!0},start:{configurable:!0},end:{configurable:!0}};return((e.prototype=Object.create(i&&i.prototype)).constructor=e).prototype.apply=function(e,t,r){var n=e.getRenderTarget(!0);this.tiltShiftXFilter.apply(e,t,n),this.tiltShiftYFilter.apply(e,n,r),e.returnRenderTarget(n)},t.blur.get=function(){return this.tiltShiftXFilter.blur},t.blur.set=function(e){this.tiltShiftXFilter.blur=this.tiltShiftYFilter.blur=e},t.gradientBlur.get=function(){return this.tiltShiftXFilter.gradientBlur},t.gradientBlur.set=function(e){this.tiltShiftXFilter.gradientBlur=this.tiltShiftYFilter.gradientBlur=e},t.start.get=function(){return this.tiltShiftXFilter.start},t.start.set=function(e){this.tiltShiftXFilter.start=this.tiltShiftYFilter.start=e},t.end.get=function(){return this.tiltShiftXFilter.end},t.end.set=function(e){this.tiltShiftXFilter.end=this.tiltShiftYFilter.end=e},Object.defineProperties(e.prototype,t),e}(o.Filter);e.TiltShiftFilter=r,e.TiltShiftXFilter=a,e.TiltShiftYFilter=s,e.TiltShiftAxisFilter=t,Object.defineProperty(e,"__esModule",{value:!0})},"object"==_typeof2(r)&&void 0!==t?i(r,e("pixi.js")):"function"==typeof define&&define.amd?define(["exports","pixi.js"],i):i(n.__filters={},n.PIXI),Object.assign(PIXI.filters,this.__filters)},{"pixi.js":329}],159:[function(e,t,r){var n,i;n=this,i=function(e,t){var r=function(n){function e(e,t,r){void 0===e&&(e=200),void 0===t&&(t=4),void 0===r&&(r=20),n.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float radius;\nuniform float angle;\nuniform vec2 offset;\nuniform vec4 filterArea;\n\nvec2 mapCoord( vec2 coord )\n{\n    coord *= filterArea.xy;\n    coord += filterArea.zw;\n\n    return coord;\n}\n\nvec2 unmapCoord( vec2 coord )\n{\n    coord -= filterArea.zw;\n    coord /= filterArea.xy;\n\n    return coord;\n}\n\nvec2 twist(vec2 coord)\n{\n    coord -= offset;\n\n    float dist = length(coord);\n\n    if (dist < radius)\n    {\n        float ratioDist = (radius - dist) / radius;\n        float angleMod = ratioDist * ratioDist * angle;\n        float s = sin(angleMod);\n        float c = cos(angleMod);\n        coord = vec2(coord.x * c - coord.y * s, coord.x * s + coord.y * c);\n    }\n\n    coord += offset;\n\n    return coord;\n}\n\nvoid main(void)\n{\n\n    vec2 coord = mapCoord(vTextureCoord);\n\n    coord = twist(coord);\n\n    coord = unmapCoord(coord);\n\n    gl_FragColor = texture2D(uSampler, coord );\n\n}\n"),this.radius=e,this.angle=t,this.padding=r}n&&(e.__proto__=n),(e.prototype=Object.create(n&&n.prototype)).constructor=e;var t={offset:{configurable:!0},radius:{configurable:!0},angle:{configurable:!0}};return t.offset.get=function(){return this.uniforms.offset},t.offset.set=function(e){this.uniforms.offset=e},t.radius.get=function(){return this.uniforms.radius},t.radius.set=function(e){this.uniforms.radius=e},t.angle.get=function(){return this.uniforms.angle},t.angle.set=function(e){this.uniforms.angle=e},Object.defineProperties(e.prototype,t),e}(t.Filter);e.TwistFilter=r,Object.defineProperty(e,"__esModule",{value:!0})},"object"==_typeof2(r)&&void 0!==t?i(r,e("pixi.js")):"function"==typeof define&&define.amd?define(["exports","pixi.js"],i):i(n.__filters={},n.PIXI),Object.assign(PIXI.filters,this.__filters)},{"pixi.js":329}],160:[function(e,t,r){var n,i;n=this,i=function(e,t){var r=function(i){function e(e,t,r,n){void 0===e&&(e=.1),void 0===t&&(t=[0,0]),void 0===r&&(r=0),void 0===n&&(n=-1),i.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform vec4 filterArea;\n\nuniform vec2 uCenter;\nuniform float uStrength;\nuniform float uInnerRadius;\nuniform float uRadius;\n\nconst float MAX_KERNEL_SIZE = 32.0;\n\nfloat random(vec3 scale, float seed) {\n    // use the fragment position for a different seed per-pixel\n    return fract(sin(dot(gl_FragCoord.xyz + seed, scale)) * 43758.5453 + seed);\n}\n\nvoid main() {\n\n    float minGradient = uInnerRadius * 0.3;\n    float innerRadius = (uInnerRadius + minGradient * 0.5) / filterArea.x;\n\n    float gradient = uRadius * 0.3;\n    float radius = (uRadius - gradient * 0.5) / filterArea.x;\n\n    float countLimit = MAX_KERNEL_SIZE;\n\n    vec2 dir = vec2(uCenter.xy / filterArea.xy - vTextureCoord);\n    float dist = length(vec2(dir.x, dir.y * filterArea.y / filterArea.x));\n\n    float strength = uStrength;\n\n    float delta = 0.0;\n    float gap;\n    if (dist < innerRadius) {\n        delta = innerRadius - dist;\n        gap = minGradient;\n    } else if (radius >= 0.0 && dist > radius) { // radius < 0 means it's infinity\n        delta = dist - radius;\n        gap = gradient;\n    }\n\n    if (delta > 0.0) {\n        float normalCount = gap / filterArea.x;\n        delta = (normalCount - delta) / normalCount;\n        countLimit *= delta;\n        strength *= delta;\n        if (countLimit < 1.0)\n        {\n            gl_FragColor = texture2D(uSampler, vTextureCoord);\n            return;\n        }\n    }\n\n    // randomize the lookup values to hide the fixed number of samples\n    float offset = random(vec3(12.9898, 78.233, 151.7182), 0.0);\n\n    float total = 0.0;\n    vec4 color = vec4(0.0);\n\n    dir *= strength;\n\n    for (float t = 0.0; t < MAX_KERNEL_SIZE; t++) {\n        float percent = (t + offset) / MAX_KERNEL_SIZE;\n        float weight = 4.0 * (percent - percent * percent);\n        vec2 p = vTextureCoord + dir * percent;\n        vec4 sample = texture2D(uSampler, p);\n\n        // switch to pre-multiplied alpha to correctly blur transparent images\n        // sample.rgb *= sample.a;\n\n        color += sample * weight;\n        total += weight;\n\n        if (t > countLimit){\n            break;\n        }\n    }\n\n    color /= total;\n    // switch back from pre-multiplied alpha\n    color.rgb /= color.a + 0.00001;\n\n    gl_FragColor = color;\n}\n"),this.center=t,this.strength=e,this.innerRadius=r,this.radius=n}i&&(e.__proto__=i),(e.prototype=Object.create(i&&i.prototype)).constructor=e;var t={center:{configurable:!0},strength:{configurable:!0},innerRadius:{configurable:!0},radius:{configurable:!0}};return t.center.get=function(){return this.uniforms.uCenter},t.center.set=function(e){this.uniforms.uCenter=e},t.strength.get=function(){return this.uniforms.uStrength},t.strength.set=function(e){this.uniforms.uStrength=e},t.innerRadius.get=function(){return this.uniforms.uInnerRadius},t.innerRadius.set=function(e){this.uniforms.uInnerRadius=e},t.radius.get=function(){return this.uniforms.uRadius},t.radius.set=function(e){(e<0||e===1/0)&&(e=-1),this.uniforms.uRadius=e},Object.defineProperties(e.prototype,t),e}(t.Filter);e.ZoomBlurFilter=r,Object.defineProperty(e,"__esModule",{value:!0})},"object"==_typeof2(r)&&void 0!==t?i(r,e("pixi.js")):"function"==typeof define&&define.amd?define(["exports","pixi.js"],i):i(n.__filters={},n.PIXI),Object.assign(PIXI.filters,this.__filters)},{"pixi.js":329}],161:[function(e,t,r){t.exports.Animation=e("./src/animation"),t.exports.DynamicTimeline=e("./src/dynamic-timeline"),t.exports.Timeline=e("./src/timeline"),t.exports.Loop=e("./src/loop"),t.exports.Easing=e("./src/easing"),t.exports.InterpolationPool=e("./src/interpolation-pool")},{"./src/animation":163,"./src/dynamic-timeline":165,"./src/easing":166,"./src/interpolation-pool":167,"./src/loop":168,"./src/timeline":169}],162:[function(e,t,r){var i=e("./base-animation"),n=function(e){_inherits2(n,i);var r=_createSuper(n);function n(e){var t;return _classCallCheck2(this,n),(t=r.call(this))._callback=e,t._called=!1,t}return _createClass2(n,[{key:"cycle",value:function(e){_get(_getPrototypeOf(n.prototype),"cycle",this).call(this,e),this._called=!0,this._callback()}},{key:"finished",get:function(){return _get(_getPrototypeOf(n.prototype),"finished",this)||this._called}}]),n}();t.exports=n},{"./base-animation":164}],163:[function(e,t,r){var i=e("./base-animation"),o=e("./easing"),a=function(e,t,r,n,i){return e(i,r,n-r,t)},n=function(e){_inherits2(n,i);var r=_createSuper(n);function n(e){var t;return _classCallCheck2(this,n),(t=r.call(this))._object=e,t._delay=0,t._duration=1,t._toValue=0,t._fromValue=0,t._easing=null,t._onFinish=null,t._progress=null,t._applyFunction=a,t._overrides=!0,t._elapsed=0,t}return _createClass2(n,[{key:"setProperty",value:function(e){this._property=e,this._propertyParent=this._object;for(var t=e.split("."),r=0;r<=t.length-2;r++)this._propertyParent=this._propertyParent[t[r]];this._actualProperty=t[t.length-1]}},{key:"setFromToEasing",value:function(e,t,r){return this._fromValue=e,this._toValue=t,this._easing=r||o.linear,this}},{key:"currentValue",value:function(){return this._propertyParent[this._actualProperty]}},{key:"interp",value:function(e,t,r,n){return this.setProperty(e),this.setFromToEasing(t,r,n)}},{key:"interpFrom",value:function(e,t,r){return this.setProperty(e),this.setFromToEasing(t,this.currentValue(),r)}},{key:"interpFromOffset",value:function(e,t,r){return this.setProperty(e),this.setFromToEasing(this.currentValue()+t,this.currentValue(),r)}},{key:"interpTo",value:function(e,t,r){return this.setProperty(e),this.setFromToEasing(this.currentValue(),t,r)}},{key:"interpToOffset",value:function(e,t,r){return this.setProperty(e),this.setFromToEasing(this.currentValue(),this.currentValue()+t,r)}},{key:"apply",value:function(e){return this._applyFunction=e,this}},{key:"during",value:function(e){return this._duration=e,this}},{key:"progress",value:function(e){return this._progress=e,this}},{key:"cycle",value:function(e){this.finished||(_get(_getPrototypeOf(n.prototype),"cycle",this).call(this,e),this.applyProgress())}},{key:"skip",value:function(){_get(_getPrototypeOf(n.prototype),"skip",this).call(this),this.applyProgress()}},{key:"applyProgress",value:function(){this._propertyParent[this._actualProperty]=this._applyFunction(this._easing,this._duration,this._fromValue,this._toValue,this._elapsed),this._progress&&this._progress(this._elapsed/this.duration)}},{key:"init",value:function(){return this._propertyParent[this._actualProperty]=this._applyFunction(this._easing,this._duration,this._fromValue,this._toValue,0),this}},{key:"duration",get:function(){return this._duration},set:function(e){this._duration=e}}]),n}();t.exports=n},{"./base-animation":164,"./easing":166}],164:[function(e,t,r){var n=function(){function e(){_classCallCheck2(this,e),this._cancelled=!1,this._elapsed=0,this._actualElapsed=0,this._interpolationPool=null}return _createClass2(e,[{key:"finished",get:function(){return this._cancelled||this._elapsed>=this.duration}},{key:"skip",value:function(){this._elapsed=this.duration}},{key:"cancel",value:function(){this._cancelled=!0,this._interpolationPool=null}},{key:"run",value:function(e){return(this._interpolationPool=e).add(this),this}},{key:"runAsMain",value:function(e){return this.run(e),e.setMainTimeline(this),this}},{key:"cycle",value:function(e){this._elapsed+=e,this._actualElapsed+=e,this._elapsed>=this.duration&&(this._elapsed=this.duration)}},{key:"duration",get:function(){return 0},set:function(e){}},{key:"size",get:function(){return 1}},{key:"elapsed",get:function(){return this._elapsed}},{key:"interpolationPool",get:function(){return this._interpolationPool}}]),e}();t.exports=n},{}],165:[function(e,t,r){var o=e("./base-animation"),n=function(e){_inherits2(i,o);var n=_createSuper(i);function i(e,t){var r;return _classCallCheck2(this,i),(r=n.call(this))._built=null,r._duration=e,r._buildFunc=t,r._builtDurationFactor=1,r}return _createClass2(i,[{key:"cycle",value:function(e){_get(_getPrototypeOf(i.prototype),"cycle",this).call(this,e),this._built||(this._built=this._buildFunc(this),this._built.duration*=this._builtDurationFactor),this._built.cycle(e)}},{key:"skip",value:function(){_get(_getPrototypeOf(i.prototype),"skip",this).call(this),this.cycle(0),this._built.skip()}},{key:"duration",get:function(){return this._duration},set:function(e){var t=e/this._duration;this._duration=e,this._builtDurationFactor*=t,this._built&&(this._built.duration*=t)}},{key:"size",get:function(){return this._built?this._built.size:1}},{key:"finished",get:function(){return!(!this._built||!this._built.finished)}}]),i}();t.exports=n},{"./base-animation":164}],166:[function(e,t,r){var i={linear:function(e,t,r,n){return r*e/n+t},easeInQuad:function(e,t,r,n){return r*(e/=n)*e+t},easeOutQuad:function(e,t,r,n){return-r*(e/=n)*(e-2)+t},easeInOutQuad:function(e,t,r,n){return(e/=n/2)<1?r/2*e*e+t:-r/2*(--e*(e-2)-1)+t},easeInCubic:function(e,t,r,n){return r*(e/=n)*e*e+t},easeOutCubic:function(e,t,r,n){return r*((e=e/n-1)*e*e+1)+t},easeInOutCubic:function(e,t,r,n){return(e/=n/2)<1?r/2*e*e*e+t:r/2*((e-=2)*e*e+2)+t},easeInQuart:function(e,t,r,n){return r*(e/=n)*e*e*e+t},easeOutQuart:function(e,t,r,n){return-r*((e=e/n-1)*e*e*e-1)+t},easeInOutQuart:function(e,t,r,n){return(e/=n/2)<1?r/2*e*e*e*e+t:-r/2*((e-=2)*e*e*e-2)+t},easeInQuint:function(e,t,r,n){return r*(e/=n)*e*e*e*e+t},easeOutQuint:function(e,t,r,n){return r*((e=e/n-1)*e*e*e*e+1)+t},easeInOutQuint:function(e,t,r,n){return(e/=n/2)<1?r/2*e*e*e*e*e+t:r/2*((e-=2)*e*e*e*e+2)+t},easeInSine:function(e,t,r,n){return-r*Math.cos(e/n*(Math.PI/2))+r+t},easeOutSine:function(e,t,r,n){return r*Math.sin(e/n*(Math.PI/2))+t},easeInOutSine:function(e,t,r,n){return-r/2*(Math.cos(Math.PI*e/n)-1)+t},easeInExpo:function(e,t,r,n){return 0==e?t:r*Math.pow(2,10*(e/n-1))+t},easeOutExpo:function(e,t,r,n){return e==n?t+r:r*(1-Math.pow(2,-10*e/n))+t},easeInOutExpo:function(e,t,r,n){return 0==e?t:e==n?t+r:(e/=n/2)<1?r/2*Math.pow(2,10*(e-1))+t:r/2*(2-Math.pow(2,-10*--e))+t},easeInCirc:function(e,t,r,n){return-r*(Math.sqrt(1-(e/=n)*e)-1)+t},easeOutCirc:function(e,t,r,n){return r*Math.sqrt(1-(e=e/n-1)*e)+t},easeInOutCirc:function(e,t,r,n){return(e/=n/2)<1?-r/2*(Math.sqrt(1-e*e)-1)+t:r/2*(Math.sqrt(1-(e-=2)*e)+1)+t},easeInElastic:function(e,t,r,n,i,o){if(0==e)return t;if(1==(e/=n))return t+r;if(o||(o=.3*n),i<Math.abs(r)){i=r;var a=o/4}else a=o/(2*Math.PI)*Math.asin(r/i);return-i*Math.pow(2,10*(e-=1))*Math.sin((e*n-a)*(2*Math.PI)/o)+t},easeOutElastic:function(e,t,r,n,i,o){if(0==e)return t;if(1==(e/=n))return t+r;if(o||(o=.3*n),i<Math.abs(r)){i=r;var a=o/4}else a=o/(2*Math.PI)*Math.asin(r/i);return i*Math.pow(2,-10*e)*Math.sin((e*n-a)*(2*Math.PI)/o)+r+t},easeInOutElastic:function(e,t,r,n,i,o){if(0==e)return t;if(2==(e/=n/2))return t+r;if(o||(o=n*(.3*1.5)),i<Math.abs(r)){i=r;var a=o/4}else a=o/(2*Math.PI)*Math.asin(r/i);return e<1?i*Math.pow(2,10*(e-=1))*Math.sin((e*n-a)*(2*Math.PI)/o)*-.5+t:i*Math.pow(2,-10*(e-=1))*Math.sin((e*n-a)*(2*Math.PI)/o)*.5+r+t},easeInBack:function(e,t,r,n,i){return null==i&&(i=1.70158),r*(e/=n)*e*((i+1)*e-i)+t},easeOutBack:function(e,t,r,n,i){return null==i&&(i=1.70158),r*((e=e/n-1)*e*((i+1)*e+i)+1)+t},easeInOutBack:function(e,t,r,n,i){return null==i&&(i=1.70158),(e/=n/2)<1?r/2*(e*e*((1+(i*=1.525))*e-i))+t:r/2*((e-=2)*e*((1+(i*=1.525))*e+i)+2)+t},easeInBounce:function(e,t,r,n){return r-i.easeOutBounce(n-e,0,r,n)+t},easeOutBounce:function(e,t,r,n){return(e/=n)<1/2.75?r*(7.5625*e*e)+t:e<2/2.75?r*(7.5625*(e-=1.5/2.75)*e+.75)+t:e<2.5/2.75?r*(7.5625*(e-=2.25/2.75)*e+.9375)+t:r*(7.5625*(e-=2.625/2.75)*e+.984375)+t},easeInOutBounce:function(e,t,r,n){return e<n/2?.5*i.easeInBounce(2*e,0,r,n)+t:.5*i.easeOutBounce(2*e-n,0,r,n)+.5*r+t}};t.exports=i},{}],167:[function(e,t,r){var n=e("./timeline"),i=function(){function e(){_classCallCheck2(this,e),this._interpolations=[],this._mainTimeline=null}return _createClass2(e,[{key:"cycle",value:function(e){for(var t=0;this._interpolations[t];){var r=this._interpolations[t];r.finished||r.cycle(e),r.finished?(this._interpolations.splice(t,1),r===this._mainTimeline&&(this._mainTimeline=null)):t++}}},{key:"add",value:function(e){this._interpolations.push(e)}},{key:"skip",value:function(){this._mainTimeline&&this._mainTimeline.skip()}},{key:"delay",value:function(e,t){(new n).add(e,t).run(this)}},{key:"setMainTimeline",value:function(e){this._mainTimeline=e}},{key:"size",get:function(){return this._interpolations.reduce(function(e,t){return e+t.size},0)}}]),e}();t.exports=i},{"./timeline":169}],168:[function(e,t,r){var n=e("./base-animation"),i=function(e){_inherits2(o,n);var i=_createSuper(o);function o(e,t,r){var n;if(_classCallCheck2(this,o),n=i.call(this),e<=0)throw new Error("Cannot create a loop with an interval of zero or less");return n._interval=e,n._nextCall=void 0!==r?r:n._interval,n._callback=t,n._cancelled=!1,n}return _createClass2(o,[{key:"cycle",value:function(e){for(this._nextCall-=e;this._nextCall<=0;)this._nextCall+=this._interval,this._callback()}},{key:"duration",get:function(){return 1/0},set:function(e){throw new Error("Cannot set duration of a loop")}}]),o}();t.exports=i},{"./base-animation":164}],169:[function(e,t,r){var n=e("./base-animation"),o=e("./action"),i=function(e){_inherits2(i,n);var t=_createSuper(i);function i(){var e;return _classCallCheck2(this,i),(e=t.call(this))._children=[],e._runningChildren=[],e._duration=0,e._breakpoints=[],e}return _createClass2(i,[{key:"addBreakpoint",value:function(){return this._breakpoints.push(this._duration),this}},{key:"add",value:function(t,e){var r=this;if(e||(e=t,t=this._duration),e instanceof i)return e._children.forEach(function(e){r.add(t+e.delay,e.animation)}),0<e._breakpoints.length&&(e._breakpoints.forEach(function(e){r._breakpoints.push(e+t)}),this._breakpoints.sort()),this;e.call&&(e=new o(e));for(var n=this._children.length-1;0<=n&&this._children[n].delay>t;)n--;return this._children.splice(n+1,0,{delay:t,animation:e}),this._duration=Math.max(this._duration,t+e.duration),this}},{key:"wait",value:function(e){return this._duration+=e,this}},{key:"cycle",value:function(t){var r=this;for(_get(_getPrototypeOf(i.prototype),"cycle",this).call(this,t);this._breakpoints.length&&this._breakpoints[0]<=this._elapsed;)this._breakpoints.shift();var n=0;for(this._runningChildren.slice().forEach(function(e){e.cycle(t),e.finished?r._runningChildren.splice(n,1):n++});0<this._children.length&&this._children[0].delay<=this._elapsed;)this.startChild(this._children.shift())}},{key:"startChild",value:function(e){e.animation.cycle(this._actualElapsed-e.delay),e.animation.finished||this._runningChildren.push(e.animation)}},{key:"skip",value:function(){var e=(this._breakpoints.shift()||this._duration)-this._elapsed;return this.cycle(e),this}},{key:"cancel",value:function(){_get(_getPrototypeOf(i.prototype),"cancel",this).call(this),this._children.forEach(function(e){e.animation.cancel()}),this._runningChildren.forEach(function(e){e.cancel()})}},{key:"duration",get:function(){return this._duration},set:function(e){var t=e/this._duration;this._duration=e,this._children.forEach(function(e){e.delay*=t,e.animation.duration*=t}),this._runningChildren.forEach(function(e){e.duration*=t})}},{key:"size",get:function(){return this._runningChildren.reduce(function(e,t){return e+t.size},0)+this._children.reduce(function(e,t){return e+t.animation.size},0)}},{key:"finished",get:function(){return _get(_getPrototypeOf(i.prototype),"finished",this)&&0===this._children.length&&0===this._runningChildren.length}}]),i}();t.exports=i},{"./action":162,"./base-animation":164}],170:[function(e,t,r){var n=e("./lang.json").words,i=e("badwords-list").array,o=function(){function t(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck2(this,t),Object.assign(this,{list:e.emptyList&&[]||Array.prototype.concat.apply(n,[i,e.list||[]]),exclude:e.exclude||[],splitRegex:e.splitRegex||/\b/,placeHolder:e.placeHolder||"*",regex:e.regex||/[^a-zA-Z0-9|\$|\@]|\^/g,replaceRegex:e.replaceRegex||/\w/g})}return _createClass2(t,[{key:"isProfane",value:function(r){var n=this;return 0<this.list.filter(function(e){var t=new RegExp("\\b".concat(e.replace(/(\W)/g,"\\$1"),"\\b"),"gi");return!n.exclude.includes(e.toLowerCase())&&t.test(r)}).length||!1}},{key:"replaceWord",value:function(e){return e.replace(this.regex,"").replace(this.replaceRegex,this.placeHolder)}},{key:"clean",value:function(e){var t=this;return e.split(this.splitRegex).map(function(e){return t.isProfane(e)?t.replaceWord(e):e}).join(this.splitRegex.exec(e)[0])}},{key:"addWords",value:function(){var e,t=this,r=Array.from(arguments);(e=this.list).push.apply(e,r),r.map(function(e){return e.toLowerCase()}).forEach(function(e){t.exclude.includes(e)&&t.exclude.splice(t.exclude.indexOf(e),1)})}},{key:"removeWords",value:function(){var e;(e=this.exclude).push.apply(e,_toConsumableArray(Array.from(arguments).map(function(e){return e.toLowerCase()})))}}]),t}();t.exports=o},{"./lang.json":171,"badwords-list":173}],171:[function(e,t,r){t.exports={words:["ahole","anus","ash0le","ash0les","asholes","ass","Ass Monkey","Assface","assh0le","assh0lez","asshole","assholes","assholz","asswipe","azzhole","bassterds","bastard","bastards","bastardz","basterds","basterdz","Biatch","bitch","bitches","Blow Job","boffing","butthole","buttwipe","c0ck","c0cks","c0k","Carpet Muncher","cawk","cawks","Clit","cnts","cntz","cock","cockhead","cock-head","cocks","CockSucker","cock-sucker","crap","cum","cunt","cunts","cuntz","dick","dild0","dild0s","dildo","dildos","dilld0","dilld0s","dominatricks","dominatrics","dominatrix","dyke","enema","f u c k","f u c k e r","fag","fag1t","faget","fagg1t","faggit","faggot","fagg0t","fagit","fags","fagz","faig","faigs","fart","flipping the bird","fuck","fucker","fuckin","fucking","fucks","Fudge Packer","fuk","Fukah","Fuken","fuker","Fukin","Fukk","Fukkah","Fukken","Fukker","Fukkin","g00k","God-damned","h00r","h0ar","h0re","hells","hoar","hoor","hoore","jackoff","jap","japs","jerk-off","jisim","jiss","jizm","jizz","knob","knobs","knobz","kunt","kunts","kuntz","Lezzian","Lipshits","Lipshitz","masochist","masokist","massterbait","masstrbait","masstrbate","masterbaiter","masterbate","masterbates","Motha Fucker","Motha Fuker","Motha Fukkah","Motha Fukker","Mother Fucker","Mother Fukah","Mother Fuker","Mother Fukkah","Mother Fukker","mother-fucker","Mutha Fucker","Mutha Fukah","Mutha Fuker","Mutha Fukkah","Mutha Fukker","n1gr","nastt","nigger;","nigur;","niiger;","niigr;","orafis","orgasim;","orgasm","orgasum","oriface","orifice","orifiss","packi","packie","packy","paki","pakie","paky","pecker","peeenus","peeenusss","peenus","peinus","pen1s","penas","penis","penis-breath","penus","penuus","Phuc","Phuck","Phuk","Phuker","Phukker","polac","polack","polak","Poonani","pr1c","pr1ck","pr1k","pusse","pussee","pussy","puuke","puuker","qweir","recktum","rectum","retard","sadist","scank","schlong","screwing","semen","sex","sexy","Sh!t","sh1t","sh1ter","sh1ts","sh1tter","sh1tz","shit","shits","shitter","Shitty","Shity","shitz","Shyt","Shyte","Shytty","Shyty","skanck","skank","skankee","skankey","skanks","Skanky","slag","slut","sluts","Slutty","slutz","son-of-a-bitch","tit","turd","va1jina","vag1na","vagiina","vagina","vaj1na","vajina","vullva","vulva","w0p","wh00r","wh0re","whore","xrated","xxx","b!+ch","bitch","blowjob","clit","arschloch","fuck","shit","ass","asshole","b!tch","b17ch","b1tch","bastard","bi+ch","boiolas","buceta","c0ck","cawk","chink","cipa","clits","cock","cum","cunt","dildo","dirsa","ejakulate","fatass","fcuk","fuk","fux0r","hoer","hore","jism","kawk","l3itch","l3i+ch","masturbate","masterbat*","masterbat3","motherfucker","s.o.b.","mofo","nazi","nigga","nigger","nutsack","phuck","pimpis","pusse","pussy","scrotum","sh!t","shemale","shi+","sh!+","slut","smut","teets","tits","boobs","b00bs","teez","testical","testicle","titt","w00se","jackoff","wank","whoar","whore","*damn","*dyke","*fuck*","*shit*","@$$","amcik","andskota","arse*","assrammer","ayir","bi7ch","bitch*","bollock*","breasts","butt-pirate","cabron","cazzo","chraa","chuj","Cock*","cunt*","d4mn","daygo","dego","dick*","dike*","dupa","dziwka","ejackulate","Ekrem*","Ekto","enculer","faen","fag*","fanculo","fanny","feces","feg","Felcher","ficken","fitt*","Flikker","foreskin","Fotze","Fu(*","fuk*","futkretzn","gook","guiena","h0r","h4x0r","hell","helvete","hoer*","honkey","Huevon","hui","injun","jizz","kanker*","kike","klootzak","kraut","knulle","kuk","kuksuger","Kurac","kurwa","kusi*","kyrpa*","lesbo","mamhoon","masturbat*","merd*","mibun","monkleigh","mouliewop","muie","mulkku","muschi","nazis","nepesaurio","nigger*","orospu","paska*","perse","picka","pierdol*","pillu*","pimmel","piss*","pizda","poontsee","poop","porn","p0rn","pr0n","preteen","pula","pule","puta","puto","qahbeh","queef*","rautenberg","schaffer","scheiss*","schlampe","schmuck","screw","sh!t*","sharmuta","sharmute","shipal","shiz","skribz","skurwysyn","sphencter","spic","spierdalaj","splooge","suka","b00b*","testicle*","titt*","twat","vittu","wank*","wetback*","wichser","wop*","yed","zabourah"]}},{}],172:[function(e,t,r){t.exports=["4r5e","5h1t","5hit","a55","anal","anus","ar5e","arrse","arse","ass","ass-fucker","asses","assfucker","assfukka","asshole","assholes","asswhole","a_s_s","b!tch","b00bs","b17ch","b1tch","ballbag","balls","ballsack","bastard","beastial","beastiality","bellend","bestial","bestiality","bi+ch","biatch","bitch","bitcher","bitchers","bitches","bitchin","bitching","bloody","blow job","blowjob","blowjobs","boiolas","bollock","bollok","boner","boob","boobs","booobs","boooobs","booooobs","booooooobs","breasts","buceta","bugger","bum","bunny fucker","butt","butthole","buttmuch","buttplug","c0ck","c0cksucker","carpet muncher","cawk","chink","cipa","cl1t","clit","clitoris","clits","cnut","cock","cock-sucker","cockface","cockhead","cockmunch","cockmuncher","cocks","cocksuck","cocksucked","cocksucker","cocksucking","cocksucks","cocksuka","cocksukka","cok","cokmuncher","coksucka","coon","cox","crap","cum","cummer","cumming","cums","cumshot","cunilingus","cunillingus","cunnilingus","cunt","cuntlick","cuntlicker","cuntlicking","cunts","cyalis","cyberfuc","cyberfuck","cyberfucked","cyberfucker","cyberfuckers","cyberfucking","d1ck","damn","dick","dickhead","dildo","dildos","dink","dinks","dirsa","dlck","dog-fucker","doggin","dogging","donkeyribber","doosh","duche","dyke","ejaculate","ejaculated","ejaculates","ejaculating","ejaculatings","ejaculation","ejakulate","f u c k","f u c k e r","f4nny","fag","fagging","faggitt","faggot","faggs","fagot","fagots","fags","fanny","fannyflaps","fannyfucker","fanyy","fatass","fcuk","fcuker","fcuking","feck","fecker","felching","fellate","fellatio","fingerfuck","fingerfucked","fingerfucker","fingerfuckers","fingerfucking","fingerfucks","fistfuck","fistfucked","fistfucker","fistfuckers","fistfucking","fistfuckings","fistfucks","flange","fook","fooker","fuck","fucka","fucked","fucker","fuckers","fuckhead","fuckheads","fuckin","fucking","fuckings","fuckingshitmotherfucker","fuckme","fucks","fuckwhit","fuckwit","fudge packer","fudgepacker","fuk","fuker","fukker","fukkin","fuks","fukwhit","fukwit","fux","fux0r","f_u_c_k","gangbang","gangbanged","gangbangs","gaylord","gaysex","goatse","God","god-dam","god-damned","goddamn","goddamned","hardcoresex","hell","heshe","hoar","hoare","hoer","homo","hore","horniest","horny","hotsex","jack-off","jackoff","jap","jerk-off","jism","jiz","jizm","jizz","kawk","knob","knobead","knobed","knobend","knobhead","knobjocky","knobjokey","kock","kondum","kondums","kum","kummer","kumming","kums","kunilingus","l3i+ch","l3itch","labia","lust","lusting","m0f0","m0fo","m45terbate","ma5terb8","ma5terbate","masochist","master-bate","masterb8","masterbat*","masterbat3","masterbate","masterbation","masterbations","masturbate","mo-fo","mof0","mofo","mothafuck","mothafucka","mothafuckas","mothafuckaz","mothafucked","mothafucker","mothafuckers","mothafuckin","mothafucking","mothafuckings","mothafucks","mother fucker","motherfuck","motherfucked","motherfucker","motherfuckers","motherfuckin","motherfucking","motherfuckings","motherfuckka","motherfucks","muff","mutha","muthafecker","muthafuckker","muther","mutherfucker","n1gga","n1gger","nazi","nigg3r","nigg4h","nigga","niggah","niggas","niggaz","nigger","niggers","nob","nob jokey","nobhead","nobjocky","nobjokey","numbnuts","nutsack","orgasim","orgasims","orgasm","orgasms","p0rn","pawn","pecker","penis","penisfucker","phonesex","phuck","phuk","phuked","phuking","phukked","phukking","phuks","phuq","pigfucker","pimpis","piss","pissed","pisser","pissers","pisses","pissflaps","pissin","pissing","pissoff","poop","porn","porno","pornography","pornos","prick","pricks","pron","pube","pusse","pussi","pussies","pussy","pussys","rectum","retard","rimjaw","rimming","s hit","s.o.b.","sadist","schlong","screwing","scroat","scrote","scrotum","semen","sex","sh!+","sh!t","sh1t","shag","shagger","shaggin","shagging","shemale","shi+","shit","shitdick","shite","shited","shitey","shitfuck","shitfull","shithead","shiting","shitings","shits","shitted","shitter","shitters","shitting","shittings","shitty","skank","slut","sluts","smegma","smut","snatch","son-of-a-bitch","spac","spunk","s_h_i_t","t1tt1e5","t1tties","teets","teez","testical","testicle","tit","titfuck","tits","titt","tittie5","tittiefucker","titties","tittyfuck","tittywank","titwank","tosser","turd","tw4t","twat","twathead","twatty","twunt","twunter","v14gra","v1gra","vagina","viagra","vulva","w00se","wang","wank","wanker","wanky","whoar","whore","willies","willy","xrated","xxx"]},{}],173:[function(e,t,r){t.exports={object:e("./object"),array:e("./array"),regex:e("./regexp")}},{"./array":172,"./object":174,"./regexp":175}],174:[function(e,t,r){t.exports={"4r5e":1,"5h1t":1,"5hit":1,a55:1,anal:1,anus:1,ar5e:1,arrse:1,arse:1,ass:1,"ass-fucker":1,asses:1,assfucker:1,assfukka:1,asshole:1,assholes:1,asswhole:1,a_s_s:1,"b!tch":1,b00bs:1,b17ch:1,b1tch:1,ballbag:1,balls:1,ballsack:1,bastard:1,beastial:1,beastiality:1,bellend:1,bestial:1,bestiality:1,"bi+ch":1,biatch:1,bitch:1,bitcher:1,bitchers:1,bitches:1,bitchin:1,bitching:1,bloody:1,"blow job":1,blowjob:1,blowjobs:1,boiolas:1,bollock:1,bollok:1,boner:1,boob:1,boobs:1,booobs:1,boooobs:1,booooobs:1,booooooobs:1,breasts:1,buceta:1,bugger:1,bum:1,"bunny fucker":1,butt:1,butthole:1,buttmuch:1,buttplug:1,c0ck:1,c0cksucker:1,"carpet muncher":1,cawk:1,chink:1,cipa:1,cl1t:1,clit:1,clitoris:1,clits:1,cnut:1,cock:1,"cock-sucker":1,cockface:1,cockhead:1,cockmunch:1,cockmuncher:1,cocks:1,cocksuck:1,cocksucked:1,cocksucker:1,cocksucking:1,cocksucks:1,cocksuka:1,cocksukka:1,cok:1,cokmuncher:1,coksucka:1,coon:1,cox:1,crap:1,cum:1,cummer:1,cumming:1,cums:1,cumshot:1,cunilingus:1,cunillingus:1,cunnilingus:1,cunt:1,cuntlick:1,cuntlicker:1,cuntlicking:1,cunts:1,cyalis:1,cyberfuc:1,cyberfuck:1,cyberfucked:1,cyberfucker:1,cyberfuckers:1,cyberfucking:1,d1ck:1,damn:1,dick:1,dickhead:1,dildo:1,dildos:1,dink:1,dinks:1,dirsa:1,dlck:1,"dog-fucker":1,doggin:1,dogging:1,donkeyribber:1,doosh:1,duche:1,dyke:1,ejaculate:1,ejaculated:1,ejaculates:1,ejaculating:1,ejaculatings:1,ejaculation:1,ejakulate:1,"f u c k":1,"f u c k e r":1,f4nny:1,fag:1,fagging:1,faggitt:1,faggot:1,faggs:1,fagot:1,fagots:1,fags:1,fanny:1,fannyflaps:1,fannyfucker:1,fanyy:1,fatass:1,fcuk:1,fcuker:1,fcuking:1,feck:1,fecker:1,felching:1,fellate:1,fellatio:1,fingerfuck:1,fingerfucked:1,fingerfucker:1,fingerfuckers:1,fingerfucking:1,fingerfucks:1,fistfuck:1,fistfucked:1,fistfucker:1,fistfuckers:1,fistfucking:1,fistfuckings:1,fistfucks:1,flange:1,fook:1,fooker:1,fuck:1,fucka:1,fucked:1,fucker:1,fuckers:1,fuckhead:1,fuckheads:1,fuckin:1,fucking:1,fuckings:1,fuckingshitmotherfucker:1,fuckme:1,fucks:1,fuckwhit:1,fuckwit:1,"fudge packer":1,fudgepacker:1,fuk:1,fuker:1,fukker:1,fukkin:1,fuks:1,fukwhit:1,fukwit:1,fux:1,fux0r:1,f_u_c_k:1,gangbang:1,gangbanged:1,gangbangs:1,gaylord:1,gaysex:1,goatse:1,God:1,"god-dam":1,"god-damned":1,goddamn:1,goddamned:1,hardcoresex:1,hell:1,heshe:1,hoar:1,hoare:1,hoer:1,homo:1,hore:1,horniest:1,horny:1,hotsex:1,"jack-off":1,jackoff:1,jap:1,"jerk-off":1,jism:1,jiz:1,jizm:1,jizz:1,kawk:1,knob:1,knobead:1,knobed:1,knobend:1,knobhead:1,knobjocky:1,knobjokey:1,kock:1,kondum:1,kondums:1,kum:1,kummer:1,kumming:1,kums:1,kunilingus:1,"l3i+ch":1,l3itch:1,labia:1,lust:1,lusting:1,m0f0:1,m0fo:1,m45terbate:1,ma5terb8:1,ma5terbate:1,masochist:1,"master-bate":1,masterb8:1,"masterbat*":1,masterbat3:1,masterbate:1,masterbation:1,masterbations:1,masturbate:1,"mo-fo":1,mof0:1,mofo:1,mothafuck:1,mothafucka:1,mothafuckas:1,mothafuckaz:1,mothafucked:1,mothafucker:1,mothafuckers:1,mothafuckin:1,mothafucking:1,mothafuckings:1,mothafucks:1,"mother fucker":1,motherfuck:1,motherfucked:1,motherfucker:1,motherfuckers:1,motherfuckin:1,motherfucking:1,motherfuckings:1,motherfuckka:1,motherfucks:1,muff:1,mutha:1,muthafecker:1,muthafuckker:1,muther:1,mutherfucker:1,n1gga:1,n1gger:1,nazi:1,nigg3r:1,nigg4h:1,nigga:1,niggah:1,niggas:1,niggaz:1,nigger:1,niggers:1,nob:1,"nob jokey":1,nobhead:1,nobjocky:1,nobjokey:1,numbnuts:1,nutsack:1,orgasim:1,orgasims:1,orgasm:1,orgasms:1,p0rn:1,pawn:1,pecker:1,penis:1,penisfucker:1,phonesex:1,phuck:1,phuk:1,phuked:1,phuking:1,phukked:1,phukking:1,phuks:1,phuq:1,pigfucker:1,pimpis:1,piss:1,pissed:1,pisser:1,pissers:1,pisses:1,pissflaps:1,pissin:1,pissing:1,pissoff:1,poop:1,porn:1,porno:1,pornography:1,pornos:1,prick:1,pricks:1,pron:1,pube:1,pusse:1,pussi:1,pussies:1,pussy:1,pussys:1,rectum:1,retard:1,rimjaw:1,rimming:1,"s hit":1,"s.o.b.":1,sadist:1,schlong:1,screwing:1,scroat:1,scrote:1,scrotum:1,semen:1,sex:1,"sh!+":1,"sh!t":1,sh1t:1,shag:1,shagger:1,shaggin:1,shagging:1,shemale:1,"shi+":1,shit:1,shitdick:1,shite:1,shited:1,shitey:1,shitfuck:1,shitfull:1,shithead:1,shiting:1,shitings:1,shits:1,shitted:1,shitter:1,shitters:1,shitting:1,shittings:1,shitty:1,skank:1,slut:1,sluts:1,smegma:1,smut:1,snatch:1,"son-of-a-bitch":1,spac:1,spunk:1,s_h_i_t:1,t1tt1e5:1,t1tties:1,teets:1,teez:1,testical:1,testicle:1,tit:1,titfuck:1,tits:1,titt:1,tittie5:1,tittiefucker:1,titties:1,tittyfuck:1,tittywank:1,titwank:1,tosser:1,turd:1,tw4t:1,twat:1,twathead:1,twatty:1,twunt:1,twunter:1,v14gra:1,v1gra:1,vagina:1,viagra:1,vulva:1,w00se:1,wang:1,wank:1,wanker:1,wanky:1,whoar:1,whore:1,willies:1,willy:1,xrated:1,xxx:1}},{}],175:[function(e,t,r){t.exports=/\b(4r5e|5h1t|5hit|a55|anal|anus|ar5e|arrse|arse|ass|ass-fucker|asses|assfucker|assfukka|asshole|assholes|asswhole|a_s_s|b!tch|b00bs|b17ch|b1tch|ballbag|balls|ballsack|bastard|beastial|beastiality|bellend|bestial|bestiality|bi\+ch|biatch|bitch|bitcher|bitchers|bitches|bitchin|bitching|bloody|blow job|blowjob|blowjobs|boiolas|bollock|bollok|boner|boob|boobs|booobs|boooobs|booooobs|booooooobs|breasts|buceta|bugger|bum|bunny fucker|butt|butthole|buttmuch|buttplug|c0ck|c0cksucker|carpet muncher|cawk|chink|cipa|cl1t|clit|clitoris|clits|cnut|cock|cock-sucker|cockface|cockhead|cockmunch|cockmuncher|cocks|cocksuck|cocksucked|cocksucker|cocksucking|cocksucks|cocksuka|cocksukka|cok|cokmuncher|coksucka|coon|cox|crap|cum|cummer|cumming|cums|cumshot|cunilingus|cunillingus|cunnilingus|cunt|cuntlick|cuntlicker|cuntlicking|cunts|cyalis|cyberfuc|cyberfuck|cyberfucked|cyberfucker|cyberfuckers|cyberfucking|d1ck|damn|dick|dickhead|dildo|dildos|dink|dinks|dirsa|dlck|dog-fucker|doggin|dogging|donkeyribber|doosh|duche|dyke|ejaculate|ejaculated|ejaculates|ejaculating|ejaculatings|ejaculation|ejakulate|f u c k|f u c k e r|f4nny|fag|fagging|faggitt|faggot|faggs|fagot|fagots|fags|fanny|fannyflaps|fannyfucker|fanyy|fatass|fcuk|fcuker|fcuking|feck|fecker|felching|fellate|fellatio|fingerfuck|fingerfucked|fingerfucker|fingerfuckers|fingerfucking|fingerfucks|fistfuck|fistfucked|fistfucker|fistfuckers|fistfucking|fistfuckings|fistfucks|flange|fook|fooker|fuck|fucka|fucked|fucker|fuckers|fuckhead|fuckheads|fuckin|fucking|fuckings|fuckingshitmotherfucker|fuckme|fucks|fuckwhit|fuckwit|fudge packer|fudgepacker|fuk|fuker|fukker|fukkin|fuks|fukwhit|fukwit|fux|fux0r|f_u_c_k|gangbang|gangbanged|gangbangs|gaylord|gaysex|goatse|God|god-dam|god-damned|goddamn|goddamned|hardcoresex|hell|heshe|hoar|hoare|hoer|homo|hore|horniest|horny|hotsex|jack-off|jackoff|jap|jerk-off|jism|jiz|jizm|jizz|kawk|knob|knobead|knobed|knobend|knobhead|knobjocky|knobjokey|kock|kondum|kondums|kum|kummer|kumming|kums|kunilingus|l3i\+ch|l3itch|labia|lust|lusting|m0f0|m0fo|m45terbate|ma5terb8|ma5terbate|masochist|master-bate|masterb8|masterbat*|masterbat3|masterbate|masterbation|masterbations|masturbate|mo-fo|mof0|mofo|mothafuck|mothafucka|mothafuckas|mothafuckaz|mothafucked|mothafucker|mothafuckers|mothafuckin|mothafucking|mothafuckings|mothafucks|mother fucker|motherfuck|motherfucked|motherfucker|motherfuckers|motherfuckin|motherfucking|motherfuckings|motherfuckka|motherfucks|muff|mutha|muthafecker|muthafuckker|muther|mutherfucker|n1gga|n1gger|nazi|nigg3r|nigg4h|nigga|niggah|niggas|niggaz|nigger|niggers|nob|nob jokey|nobhead|nobjocky|nobjokey|numbnuts|nutsack|orgasim|orgasims|orgasm|orgasms|p0rn|pawn|pecker|penis|penisfucker|phonesex|phuck|phuk|phuked|phuking|phukked|phukking|phuks|phuq|pigfucker|pimpis|piss|pissed|pisser|pissers|pisses|pissflaps|pissin|pissing|pissoff|poop|porn|porno|pornography|pornos|prick|pricks|pron|pube|pusse|pussi|pussies|pussy|pussys|rectum|retard|rimjaw|rimming|s hit|s.o.b.|sadist|schlong|screwing|scroat|scrote|scrotum|semen|sex|sh!\+|sh!t|sh1t|shag|shagger|shaggin|shagging|shemale|shi\+|shit|shitdick|shite|shited|shitey|shitfuck|shitfull|shithead|shiting|shitings|shits|shitted|shitter|shitters|shitting|shittings|shitty|skank|slut|sluts|smegma|smut|snatch|son-of-a-bitch|spac|spunk|s_h_i_t|t1tt1e5|t1tties|teets|teez|testical|testicle|tit|titfuck|tits|titt|tittie5|tittiefucker|titties|tittyfuck|tittywank|titwank|tosser|turd|tw4t|twat|twathead|twatty|twunt|twunter|v14gra|v1gra|vagina|viagra|vulva|w00se|wang|wank|wanker|wanky|whoar|whore|willies|willy|xrated|xxx)\b/gi},{}],176:[function(e,t,r){function n(e){var t=32;return(e&=-e)&&t--,65535&e&&(t-=16),16711935&e&&(t-=8),252645135&e&&(t-=4),858993459&e&&(t-=2),1431655765&e&&(t-=1),t}r.INT_BITS=32,r.INT_MAX=2147483647,r.INT_MIN=-1<<31,r.sign=function(e){return(0<e)-(e<0)},r.abs=function(e){var t=e>>31;return(e^t)-t},r.min=function(e,t){return t^(e^t)&-(e<t)},r.max=function(e,t){return e^(e^t)&-(e<t)},r.isPow2=function(e){return!(e&e-1||!e)},r.log2=function(e){var t,r;return t=(65535<e)<<4,t|=r=(255<(e>>>=t))<<3,t|=r=(15<(e>>>=r))<<2,(t|=r=(3<(e>>>=r))<<1)|(e>>>=r)>>1},r.log10=function(e){return 1e9<=e?9:1e8<=e?8:1e7<=e?7:1e6<=e?6:1e5<=e?5:1e4<=e?4:1e3<=e?3:100<=e?2:10<=e?1:0},r.popCount=function(e){return 16843009*((e=(858993459&(e-=e>>>1&1431655765))+(e>>>2&858993459))+(e>>>4)&252645135)>>>24},r.countTrailingZeros=n,r.nextPow2=function(e){return e+=0===e,--e,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,(e|=e>>>16)+1},r.prevPow2=function(e){return e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,(e|=e>>>16)-(e>>>1)},r.parity=function(e){return e^=e>>>16,e^=e>>>8,e^=e>>>4,27030>>>(e&=15)&1};var i=new Array(256);!function(e){for(var t=0;t<256;++t){var r=t,n=t,i=7;for(r>>>=1;r;r>>>=1)n<<=1,n|=1&r,--i;e[t]=n<<i&255}}(i),r.reverse=function(e){return i[255&e]<<24|i[e>>>8&255]<<16|i[e>>>16&255]<<8|i[e>>>24&255]},r.interleave2=function(e,t){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e&=65535)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t&=65535)|t<<8))|t<<4))|t<<2))|t<<1))<<1},r.deinterleave2=function(e,t){return(e=65535&((e=16711935&((e=252645135&((e=858993459&((e=e>>>t&1431655765)|e>>>1))|e>>>2))|e>>>4))|e>>>16))<<16>>16},r.interleave3=function(e,t,r){return e=1227133513&((e=3272356035&((e=251719695&((e=4278190335&((e&=1023)|e<<16))|e<<8))|e<<4))|e<<2),(e|=(t=1227133513&((t=3272356035&((t=251719695&((t=4278190335&((t&=1023)|t<<16))|t<<8))|t<<4))|t<<2))<<1)|(r=1227133513&((r=3272356035&((r=251719695&((r=4278190335&((r&=1023)|r<<16))|r<<8))|r<<4))|r<<2))<<2},r.deinterleave3=function(e,t){return(e=1023&((e=4278190335&((e=251719695&((e=3272356035&((e=e>>>t&1227133513)|e>>>2))|e>>>4))|e>>>8))|e>>>16))<<22>>22},r.nextCombination=function(e){var t=e|e-1;return t+1|(~t&-~t)-1>>>n(e)+1}},{}],177:[function(e,g,w){(function(y){!function(){var o=9007199254740992,i="0123456789",a="abcdefghijklmnopqrstuvwxyz",s=a.toUpperCase(),r=i+"abcdef";function n(e){this.name="UnsupportedError",this.message=e||"This feature is not supported on this platform"}(n.prototype=new Error).constructor=n;var c=Array.prototype.slice;function l(e){if(!(this instanceof l))return e||(e=null),null===e?new l:new l(e);if("function"==typeof e)return this.random=e,this;arguments.length&&(this.seed=0);for(var t=0;t<arguments.length;t++){var r=0;if("[object String]"===Object.prototype.toString.call(arguments[t]))for(var n=0;n<arguments[t].length;n++){for(var i=0,o=0;o<arguments[t].length;o++)i=arguments[t].charCodeAt(o)+(i<<6)+(i<<16)-i;r+=i}else r=arguments[t];this.seed+=(arguments.length-t)*r}return this.mt=this.mersenne_twister(this.seed),this.bimd5=this.blueimp_md5(),this.random=function(){return this.mt.random(this.seed)},this}function v(e,t){if(e=e||{},t)for(var r in t)void 0===e[r]&&(e[r]=t[r]);return e}function h(e,t){if(e)throw new RangeError(t)}l.prototype.VERSION="1.0.16";var e=function(){throw new Error("No Base64 encoder available.")};function t(e){return function(){return this.natural(e)}}"function"==typeof btoa?e=btoa:"function"==typeof y&&(e=function(e){return new y(e).toString("base64")}),l.prototype.bool=function(e){return h((e=v(e,{likelihood:50})).likelihood<0||100<e.likelihood,"Chance: Likelihood accepts values from 0 to 100."),100*this.random()<e.likelihood},l.prototype.animal=function(e){return void 0!==(e=v(e)).type?(h(!this.get("animals")[e.type.toLowerCase()],"Please pick from desert, ocean, grassland, forest, zoo, pets, farm."),this.pick(this.get("animals")[e.type.toLowerCase()])):(animalTypeArray=["desert","forest","ocean","zoo","farm","pet","grassland"],this.pick(this.get("animals")[this.pick(animalTypeArray)]))},l.prototype.character=function(e){h((e=v(e)).alpha&&e.symbols,"Chance: Cannot specify both alpha and symbols.");var t,r,n="!@#$%^&*()[]";return t="lower"===e.casing?a:"upper"===e.casing?s:a+s,(r=e.pool?e.pool:e.alpha?t:e.symbols?n:t+i+n).charAt(this.natural({max:r.length-1}))},l.prototype.floating=function(e){h((e=v(e,{fixed:4})).fixed&&e.precision,"Chance: Cannot specify both fixed and precision.");var t=Math.pow(10,e.fixed),r=o/t,n=-r;h(e.min&&e.fixed&&e.min<n,"Chance: Min specified is out of range with fixed. Min should be, at least, "+n),h(e.max&&e.fixed&&e.max>r,"Chance: Max specified is out of range with fixed. Max should be, at most, "+r),e=v(e,{min:n,max:r});var i=(this.integer({min:e.min*t,max:e.max*t})/t).toFixed(e.fixed);return parseFloat(i)},l.prototype.integer=function(e){return h((e=v(e,{min:-9007199254740992,max:o})).min>e.max,"Chance: Min cannot be greater than Max."),Math.floor(this.random()*(e.max-e.min+1)+e.min)},l.prototype.natural=function(e){return"number"==typeof(e=v(e,{min:0,max:o})).numerals&&(h(e.numerals<1,"Chance: Numerals cannot be less than one."),e.min=Math.pow(10,e.numerals-1),e.max=Math.pow(10,e.numerals)-1),h(e.min<0,"Chance: Min cannot be less than zero."),this.integer(e)},l.prototype.hex=function(e){h((e=v(e,{min:0,max:o,casing:"lower"})).min<0,"Chance: Min cannot be less than zero.");var t=this.natural({min:e.min,max:e.max});return"upper"===e.casing?t.toString(16).toUpperCase():t.toString(16)},l.prototype.letter=function(e){e=v(e,{casing:"lower"});var t=this.character({pool:"abcdefghijklmnopqrstuvwxyz"});return"upper"===e.casing&&(t=t.toUpperCase()),t},l.prototype.string=function(e){h((e=v(e,{length:this.natural({min:5,max:20})})).length<0,"Chance: Length cannot be less than zero.");var t=e.length;return this.n(this.character,t,e).join("")},l.prototype.buffer=function(e){if(void 0===y)throw new n("Sorry, the buffer() function is not supported on your platform");h((e=v(e,{length:this.natural({min:5,max:20})})).length<0,"Chance: Length cannot be less than zero.");var t=e.length,r=this.n(this.character,t,e);return y.from(r)},l.prototype.capitalize=function(e){return e.charAt(0).toUpperCase()+e.substr(1)},l.prototype.mixin=function(e){for(var t in e)l.prototype[t]=e[t];return this},l.prototype.unique=function(e,t,r){h("function"!=typeof e,"Chance: The first argument must be a function.");var n=function(e,t){return-1!==e.indexOf(t)};r&&(n=r.comparator||n);for(var i,o=[],a=0,s=50*t,l=c.call(arguments,2);o.length<t;){var u=JSON.parse(JSON.stringify(l));if(n(o,i=e.apply(this,u))||(o.push(i),a=0),++a>s)throw new RangeError("Chance: num is likely too large for sample set")}return o},l.prototype.n=function(e,t){h("function"!=typeof e,"Chance: The first argument must be a function."),void 0===t&&(t=1);var r=t,n=[],i=c.call(arguments,2);for(r=Math.max(0,r);r--;null)n.push(e.apply(this,i));return n},l.prototype.pad=function(e,t,r){return r=r||"0",(e+="").length>=t?e:new Array(t-e.length+1).join(r)+e},l.prototype.pick=function(e,t){if(0===e.length)throw new RangeError("Chance: Cannot pick() from an empty array");return t&&1!==t?this.shuffle(e).slice(0,t):e[this.natural({max:e.length-1})]},l.prototype.pickone=function(e){if(0===e.length)throw new RangeError("Chance: Cannot pickone() from an empty array");return e[this.natural({max:e.length-1})]},l.prototype.pickset=function(e,t){if(0===t)return[];if(0===e.length)throw new RangeError("Chance: Cannot pickset() from an empty array");if(t<0)throw new RangeError("Chance: Count must be a positive number");return t&&1!==t?this.shuffle(e).slice(0,t):[this.pickone(e)]},l.prototype.shuffle=function(e){for(var t,r,n=[],i=0,o=Number(e.length),a=(r=o,Array.apply(null,Array(r)).map(function(e,t){return t})),s=o-1,l=0;l<o;l++)i=a[t=this.natural({max:s})],n[l]=e[i],a[t]=a[s],s-=1;return n},l.prototype.weighted=function(e,t,r){if(e.length!==t.length)throw new RangeError("Chance: Length of array and weights must match");for(var n,i=0,o=0;o<t.length;++o){if(n=t[o],isNaN(n))throw new RangeError("Chance: All weights must be numbers");0<n&&(i+=n)}if(0===i)throw new RangeError("Chance: No valid entries in array weights");var a,s=this.random()*i,l=0,u=-1;for(o=0;o<t.length;++o){if(l+=n=t[o],0<n){if(s<=l){a=o;break}u=o}o===t.length-1&&(a=u)}var c=e[a];return(r=void 0!==r&&r)&&(e.splice(a,1),t.splice(a,1)),c},l.prototype.paragraph=function(e){var t=(e=v(e)).sentences||this.natural({min:3,max:7});return this.n(this.sentence,t).join(" ")},l.prototype.sentence=function(e){var t,r=(e=v(e)).words||this.natural({min:12,max:18}),n=e.punctuation;return t=this.n(this.word,r).join(" "),t=this.capitalize(t),!1===n||/^[\.\?;!:]$/.test(n)||(n="."),n&&(t+=n),t},l.prototype.syllable=function(e){for(var t,r=(e=v(e)).length||this.natural({min:2,max:3}),n="bcdfghjklmnprstvwz",i="",o=0;o<r;o++)i+=t=0===o?this.character({pool:"bcdfghjklmnprstvwzaeiou"}):-1===n.indexOf(t)?this.character({pool:n}):this.character({pool:"aeiou"});return e.capitalize&&(i=this.capitalize(i)),i},l.prototype.word=function(e){h((e=v(e)).syllables&&e.length,"Chance: Cannot specify both syllables AND length.");var t=e.syllables||this.natural({min:1,max:3}),r="";if(e.length){for(;(r+=this.syllable()).length<e.length;);r=r.substring(0,e.length)}else for(var n=0;n<t;n++)r+=this.syllable();return e.capitalize&&(r=this.capitalize(r)),r},l.prototype.age=function(e){var t;switch((e=v(e)).type){case"child":t={min:0,max:12};break;case"teen":t={min:13,max:19};break;case"adult":t={min:18,max:65};break;case"senior":t={min:65,max:100};break;case"all":t={min:0,max:100};break;default:t={min:18,max:65}}return this.natural(t)},l.prototype.birthday=function(e){var t=this.age(e),r=(new Date).getFullYear();if(e&&e.type){var n=new Date,i=new Date;n.setFullYear(r-t-1),i.setFullYear(r-t),e=v(e,{min:n,max:i})}else e=v(e,{year:r-t});return this.date(e)},l.prototype.cpf=function(e){e=v(e,{formatted:!0});var t=this.n(this.natural,9,{max:9}),r=2*t[8]+3*t[7]+4*t[6]+5*t[5]+6*t[4]+7*t[3]+8*t[2]+9*t[1]+10*t[0];10<=(r=11-r%11)&&(r=0);var n=2*r+3*t[8]+4*t[7]+5*t[6]+6*t[5]+7*t[4]+8*t[3]+9*t[2]+10*t[1]+11*t[0];10<=(n=11-n%11)&&(n=0);var i=""+t[0]+t[1]+t[2]+"."+t[3]+t[4]+t[5]+"."+t[6]+t[7]+t[8]+"-"+r+n;return e.formatted?i:i.replace(/\D/g,"")},l.prototype.cnpj=function(e){e=v(e,{formatted:!0});var t=this.n(this.natural,12,{max:12}),r=2*t[11]+3*t[10]+4*t[9]+5*t[8]+6*t[7]+7*t[6]+8*t[5]+9*t[4]+2*t[3]+3*t[2]+4*t[1]+5*t[0];(r=11-r%11)<2&&(r=0);var n=2*r+3*t[11]+4*t[10]+5*t[9]+6*t[8]+7*t[7]+8*t[6]+9*t[5]+2*t[4]+3*t[3]+4*t[2]+5*t[1]+6*t[0];(n=11-n%11)<2&&(n=0);var i=""+t[0]+t[1]+"."+t[2]+t[3]+t[4]+"."+t[5]+t[6]+t[7]+"/"+t[8]+t[9]+t[10]+t[11]+"-"+r+n;return e.formatted?i:i.replace(/\D/g,"")},l.prototype.first=function(e){return e=v(e,{gender:this.gender(),nationality:"en"}),this.pick(this.get("firstNames")[e.gender.toLowerCase()][e.nationality.toLowerCase()])},l.prototype.profession=function(e){return(e=v(e)).rank?this.pick(["Apprentice ","Junior ","Senior ","Lead "])+this.pick(this.get("profession")):this.pick(this.get("profession"))},l.prototype.company=function(){return this.pick(this.get("company"))},l.prototype.gender=function(e){return e=v(e,{extraGenders:[]}),this.pick(["Male","Female"].concat(e.extraGenders))},l.prototype.last=function(e){if("*"!==(e=v(e,{nationality:"*"})).nationality)return this.pick(this.get("lastNames")[e.nationality.toLowerCase()]);var r=[],n=this.get("lastNames");return Object.keys(n).forEach(function(e,t){r=r.concat(n[e])}),this.pick(r)},l.prototype.israelId=function(){for(var e=this.string({pool:"0123456789",length:8}),t=0,r=0;r<e.length;r++){var n=e[r]*(r/2===parseInt(r/2)?1:2);n=this.pad(n,2).toString(),t+=n=parseInt(n[0])+parseInt(n[1])}return e+=(10-parseInt(t.toString().slice(-1))).toString().slice(-1)},l.prototype.mrz=function(e){var t,r,n,i,o,a=function(e){var n="<ABCDEFGHIJKLMNOPQRSTUVWXYXZ".split(""),i=[7,3,1],o=0;return"string"!=typeof e&&(e=e.toString()),e.split("").forEach(function(e,t){var r=n.indexOf(e);e=-1!==r?0===r?0:r+9:parseInt(e,10),o+=e*=i[t%i.length]}),o%10},s=this;return e=v(e,{first:this.first(),last:this.last(),passportNumber:this.integer({min:1e8,max:999999999}),dob:(r=s.birthday({type:"adult"}),[r.getFullYear().toString().substr(2),s.pad(r.getMonth()+1,2),s.pad(r.getDate(),2)].join("")),expiry:(t=new Date,[(t.getFullYear()+5).toString().substr(2),s.pad(t.getMonth()+1,2),s.pad(t.getDate(),2)].join("")),gender:"Female"===this.gender()?"F":"M",issuer:"GBR",nationality:"GBR"}),i=function(e){return new Array(e+1).join("<")},(o=["P<",(n=e).issuer,n.last.toUpperCase(),"<<",n.first.toUpperCase(),i(39-(n.last.length+n.first.length+2)),n.passportNumber,a(n.passportNumber),n.nationality,n.dob,a(n.dob),n.gender,n.expiry,a(n.expiry),i(14),a(i(14))].join(""))+a(o.substr(44,10)+o.substr(57,7)+o.substr(65,7))},l.prototype.name=function(e){e=v(e);var t,r=this.first(e),n=this.last(e);return t=e.middle?r+" "+this.first(e)+" "+n:e.middle_initial?r+" "+this.character({alpha:!0,casing:"upper"})+". "+n:r+" "+n,e.prefix&&(t=this.prefix(e)+" "+t),e.suffix&&(t=t+" "+this.suffix(e)),t},l.prototype.name_prefixes=function(e){var t=[{name:"Doctor",abbreviation:"Dr."}];return"male"!==(e=(e=e||"all").toLowerCase())&&"all"!==e||t.push({name:"Mister",abbreviation:"Mr."}),"female"!==e&&"all"!==e||(t.push({name:"Miss",abbreviation:"Miss"}),t.push({name:"Misses",abbreviation:"Mrs."})),t},l.prototype.prefix=function(e){return this.name_prefix(e)},l.prototype.name_prefix=function(e){return(e=v(e,{gender:"all"})).full?this.pick(this.name_prefixes(e.gender)).name:this.pick(this.name_prefixes(e.gender)).abbreviation},l.prototype.HIDN=function(){var e="";return e+=this.string({pool:"0123456789",length:6}),e+=this.string({pool:"ABCDEFGHIJKLMNOPQRSTUVWXYXZ",length:2})},l.prototype.ssn=function(e){var t="1234567890",r=(e=v(e,{ssnFour:!1,dashes:!0})).dashes?"-":"";return e.ssnFour?this.string({pool:t,length:4}):this.string({pool:t,length:3})+r+this.string({pool:t,length:2})+r+this.string({pool:t,length:4})},l.prototype.aadhar=function(e){var t="1234567890",r=(e=v(e,{onlyLastFour:!1,separatedByWhiteSpace:!0})).separatedByWhiteSpace?" ":"";return e.onlyLastFour?this.string({pool:t,length:4}):this.string({pool:t,length:4})+r+this.string({pool:t,length:4})+r+this.string({pool:t,length:4})},l.prototype.name_suffixes=function(){return[{name:"Doctor of Osteopathic Medicine",abbreviation:"D.O."},{name:"Doctor of Philosophy",abbreviation:"Ph.D."},{name:"Esquire",abbreviation:"Esq."},{name:"Junior",abbreviation:"Jr."},{name:"Juris Doctor",abbreviation:"J.D."},{name:"Master of Arts",abbreviation:"M.A."},{name:"Master of Business Administration",abbreviation:"M.B.A."},{name:"Master of Science",abbreviation:"M.S."},{name:"Medical Doctor",abbreviation:"M.D."},{name:"Senior",abbreviation:"Sr."},{name:"The Third",abbreviation:"III"},{name:"The Fourth",abbreviation:"IV"},{name:"Bachelor of Engineering",abbreviation:"B.E"},{name:"Bachelor of Technology",abbreviation:"B.TECH"}]},l.prototype.suffix=function(e){return this.name_suffix(e)},l.prototype.name_suffix=function(e){return(e=v(e)).full?this.pick(this.name_suffixes()).name:this.pick(this.name_suffixes()).abbreviation},l.prototype.nationalities=function(){return this.get("nationalities")},l.prototype.nationality=function(){return this.pick(this.nationalities()).name},l.prototype.android_id=function(){return"APA91"+this.string({pool:"0123456789abcefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ-_",length:178})},l.prototype.apple_token=function(){return this.string({pool:"abcdef1234567890",length:64})},l.prototype.wp8_anid2=function(){return e(this.hash({length:32}))},l.prototype.wp7_anid=function(){return"A="+this.guid().replace(/-/g,"").toUpperCase()+"&E="+this.hash({length:3})+"&W="+this.integer({min:0,max:9})},l.prototype.bb_pin=function(){return this.hash({length:8})},l.prototype.avatar=function(e){var t={protocol:null,email:null,fileExtension:null,size:null,fallback:null,rating:null};if(e)if("string"==typeof e)t.email=e,e={};else{if("object"!==_typeof2(e))return null;if("Array"===e.constructor)return null}else t.email=this.email(),e={};return(t=v(e,t)).email||(t.email=this.email()),t.protocol={http:"http",https:"https"}[t.protocol]?t.protocol+":":"",t.size=parseInt(t.size,0)?t.size:"",t.rating={g:"g",pg:"pg",r:"r",x:"x"}[t.rating]?t.rating:"",t.fallback={404:"404",mm:"mm",identicon:"identicon",monsterid:"monsterid",wavatar:"wavatar",retro:"retro",blank:"blank"}[t.fallback]?t.fallback:"",t.fileExtension={bmp:"bmp",gif:"gif",jpg:"jpg",png:"png"}[t.fileExtension]?t.fileExtension:"",t.protocol+"//www.gravatar.com/avatar/"+this.bimd5.md5(t.email)+(t.fileExtension?"."+t.fileExtension:"")+(t.size||t.rating||t.fallback?"?":"")+(t.size?"&s="+t.size.toString():"")+(t.rating?"&r="+t.rating:"")+(t.fallback?"&d="+t.fallback:"")},l.prototype.color=function(o){function a(e,t){return[e,e,e].join(t||"")}function e(e){var t=e?"rgba":"rgb",r=e?","+this.floating({min:n,max:i}):"";return t+"("+(s?a(this.natural({min:l,max:u}),","):this.natural({min:d,max:p})+","+this.natural({min:f,max:m})+","+this.natural({max:255}))+r+")"}function t(e,t,r){var n=r?"#":"",i="";return s?(i=a(this.pad(this.hex({min:l,max:u}),2)),"shorthex"===o.format&&(i=a(this.hex({min:0,max:15})))):i="shorthex"===o.format?this.pad(this.hex({min:Math.floor(c/16),max:Math.floor(h/16)}),1)+this.pad(this.hex({min:Math.floor(d/16),max:Math.floor(p/16)}),1)+this.pad(this.hex({min:Math.floor(f/16),max:Math.floor(m/16)}),1):void 0!==c||void 0!==h||void 0!==d||void 0!==p||void 0!==f||void 0!==m?this.pad(this.hex({min:c,max:h}),2)+this.pad(this.hex({min:d,max:p}),2)+this.pad(this.hex({min:f,max:m}),2):this.pad(this.hex({min:l,max:u}),2)+this.pad(this.hex({min:l,max:u}),2)+this.pad(this.hex({min:l,max:u}),2),n+i}var r,s=(o=v(o,{format:this.pick(["hex","shorthex","rgb","rgba","0x","name"]),grayscale:!1,casing:"lower",min:0,max:255,min_red:void 0,max_red:void 0,min_green:void 0,max_green:void 0,min_blue:void 0,max_blue:void 0,min_alpha:0,max_alpha:1})).grayscale,l=o.min,u=o.max,c=o.min_red,h=o.max_red,d=o.min_green,p=o.max_green,f=o.min_blue,m=o.max_blue,n=o.min_alpha,i=o.max_alpha;if(void 0===o.min_red&&(c=l),void 0===o.max_red&&(h=u),void 0===o.min_green&&(d=l),void 0===o.max_green&&(p=u),void 0===o.min_blue&&(f=l),void 0===o.max_blue&&(m=u),void 0===o.min_alpha&&(n=0),void 0===o.max_alpha&&(i=1),s&&0===l&&255===u&&void 0!==c&&void 0!==h&&(l=(c+d+f)/3,u=(h+p+m)/3),"hex"===o.format)r=t.call(this,2,6,!0);else if("shorthex"===o.format)r=t.call(this,1,3,!0);else if("rgb"===o.format)r=e.call(this,!1);else if("rgba"===o.format)r=e.call(this,!0);else{if("0x"!==o.format){if("name"===o.format)return this.pick(this.get("colorNames"));throw new RangeError('Invalid format provided. Please provide one of "hex", "shorthex", "rgb", "rgba", "0x" or "name".')}r="0x"+t.call(this,2,6)}return"upper"===o.casing&&(r=r.toUpperCase()),r},l.prototype.domain=function(e){return e=v(e),this.word()+"."+(e.tld||this.tld())},l.prototype.email=function(e){return e=v(e),this.word({length:e.length})+"@"+(e.domain||this.domain())},l.prototype.fbid=function(){return"10000"+this.string({pool:"1234567890",length:11})},l.prototype.google_analytics=function(){return"UA-"+this.pad(this.natural({max:999999}),6)+"-"+this.pad(this.natural({max:99}),2)},l.prototype.hashtag=function(){return"#"+this.word()},l.prototype.ip=function(){return this.natural({min:1,max:254})+"."+this.natural({max:255})+"."+this.natural({max:255})+"."+this.natural({min:1,max:254})},l.prototype.ipv6=function(){return this.n(this.hash,8,{length:4}).join(":")},l.prototype.klout=function(){return this.natural({min:1,max:99})},l.prototype.semver=function(e){e=v(e,{include_prerelease:!0});var t=this.pickone(["^","~","<",">","<=",">=","="]);e.range&&(t=e.range);var r="";return e.include_prerelease&&(r=this.weighted(["","-dev","-beta","-alpha"],[50,10,5,1])),t+this.rpg("3d10").join(".")+r},l.prototype.tlds=function(){return["com","org","edu","gov","co.uk","net","io","ac","ad","ae","af","ag","ai","al","am","an","ao","aq","ar","as","at","au","aw","ax","az","ba","bb","bd","be","bf","bg","bh","bi","bj","bm","bn","bo","bq","br","bs","bt","bv","bw","by","bz","ca","cc","cd","cf","cg","ch","ci","ck","cl","cm","cn","co","cr","cu","cv","cw","cx","cy","cz","de","dj","dk","dm","do","dz","ec","ee","eg","eh","er","es","et","eu","fi","fj","fk","fm","fo","fr","ga","gb","gd","ge","gf","gg","gh","gi","gl","gm","gn","gp","gq","gr","gs","gt","gu","gw","gy","hk","hm","hn","hr","ht","hu","id","ie","il","im","in","io","iq","ir","is","it","je","jm","jo","jp","ke","kg","kh","ki","km","kn","kp","kr","kw","ky","kz","la","lb","lc","li","lk","lr","ls","lt","lu","lv","ly","ma","mc","md","me","mg","mh","mk","ml","mm","mn","mo","mp","mq","mr","ms","mt","mu","mv","mw","mx","my","mz","na","nc","ne","nf","ng","ni","nl","no","np","nr","nu","nz","om","pa","pe","pf","pg","ph","pk","pl","pm","pn","pr","ps","pt","pw","py","qa","re","ro","rs","ru","rw","sa","sb","sc","sd","se","sg","sh","si","sj","sk","sl","sm","sn","so","sr","ss","st","su","sv","sx","sy","sz","tc","td","tf","tg","th","tj","tk","tl","tm","tn","to","tp","tr","tt","tv","tw","tz","ua","ug","uk","us","uy","uz","va","vc","ve","vg","vi","vn","vu","wf","ws","ye","yt","za","zm","zw"]},l.prototype.tld=function(){return this.pick(this.tlds())},l.prototype.twitter=function(){return"@"+this.word()},l.prototype.url=function(e){var t=0<(e=v(e,{protocol:"http",domain:this.domain(e),domain_prefix:"",path:this.word(),extensions:[]})).extensions.length?"."+this.pick(e.extensions):"",r=e.domain_prefix?e.domain_prefix+"."+e.domain:e.domain;return e.protocol+"://"+r+"/"+e.path+t},l.prototype.port=function(){return this.integer({min:0,max:65535})},l.prototype.locale=function(e){return(e=v(e)).region?this.pick(this.get("locale_regions")):this.pick(this.get("locale_languages"))},l.prototype.locales=function(e){return(e=v(e)).region?this.get("locale_regions"):this.get("locale_languages")},l.prototype.loremPicsum=function(e){var t=(e=v(e,{width:500,height:500,greyscale:!1,blurred:!1})).greyscale?"g/":"",r=e.blurred?"/?blur":"/?random";return"https://picsum.photos/"+t+e.width+"/"+e.height+r},l.prototype.address=function(e){return e=v(e),this.natural({min:5,max:2e3})+" "+this.street(e)},l.prototype.altitude=function(e){return e=v(e,{fixed:5,min:0,max:8848}),this.floating({min:e.min,max:e.max,fixed:e.fixed})},l.prototype.areacode=function(e){e=v(e,{parens:!0});var t=this.natural({min:2,max:9}).toString()+this.natural({min:0,max:8}).toString()+this.natural({min:0,max:9}).toString();return e.parens?"("+t+")":t},l.prototype.city=function(){return this.capitalize(this.word({syllables:3}))},l.prototype.coordinates=function(e){return this.latitude(e)+", "+this.longitude(e)},l.prototype.countries=function(){return this.get("countries")},l.prototype.country=function(e){e=v(e);var t=this.pick(this.countries());return e.raw?t:e.full?t.name:t.abbreviation},l.prototype.depth=function(e){return e=v(e,{fixed:5,min:-10994,max:0}),this.floating({min:e.min,max:e.max,fixed:e.fixed})},l.prototype.geohash=function(e){return e=v(e,{length:7}),this.string({length:e.length,pool:"0123456789bcdefghjkmnpqrstuvwxyz"})},l.prototype.geojson=function(e){return this.latitude(e)+", "+this.longitude(e)+", "+this.altitude(e)},l.prototype.latitude=function(e){return e=v(e,{fixed:5,min:-90,max:90}),this.floating({min:e.min,max:e.max,fixed:e.fixed})},l.prototype.longitude=function(e){return e=v(e,{fixed:5,min:-180,max:180}),this.floating({min:e.min,max:e.max,fixed:e.fixed})},l.prototype.phone=function(e){var t,r,n=this,i=function(e){var t=[];return e.sections.forEach(function(e){t.push(n.string({pool:"0123456789",length:e}))}),e.area+t.join(" ")};switch((e=v(e,{formatted:!0,country:"us",mobile:!1})).formatted||(e.parens=!1),e.country){case"fr":r=(t=e.mobile?this.pick(["06","07"])+n.string({pool:"0123456789",length:8}):this.pick(["01"+this.pick(["30","34","39","40","41","42","43","44","45","46","47","48","49","53","55","56","58","60","64","69","70","72","73","74","75","76","77","78","79","80","81","82","83"])+n.string({pool:"0123456789",length:6}),"02"+this.pick(["14","18","22","23","28","29","30","31","32","33","34","35","36","37","38","40","41","43","44","45","46","47","48","49","50","51","52","53","54","56","57","61","62","69","72","76","77","78","85","90","96","97","98","99"])+n.string({pool:"0123456789",length:6}),"03"+this.pick(["10","20","21","22","23","24","25","26","27","28","29","39","44","45","51","52","54","55","57","58","59","60","61","62","63","64","65","66","67","68","69","70","71","72","73","80","81","82","83","84","85","86","87","88","89","90"])+n.string({pool:"0123456789",length:6}),"04"+this.pick(["11","13","15","20","22","26","27","30","32","34","37","42","43","44","50","56","57","63","66","67","68","69","70","71","72","73","74","75","76","77","78","79","80","81","82","83","84","85","86","88","89","90","91","92","93","94","95","97","98"])+n.string({pool:"0123456789",length:6}),"05"+this.pick(["08","16","17","19","24","31","32","33","34","35","40","45","46","47","49","53","55","56","57","58","59","61","62","63","64","65","67","79","81","82","86","87","90","94"])+n.string({pool:"0123456789",length:6}),"09"+n.string({pool:"0123456789",length:8})]),e.formatted?t.match(/../g).join(" "):t);break;case"uk":r=e.mobile?(t=this.pick([{area:"07"+this.pick(["4","5","7","8","9"]),sections:[2,6]},{area:"07624 ",sections:[6]}]),e.formatted?i(t):i(t).replace(" ","")):(t=this.pick([{area:"01"+this.character({pool:"234569"})+"1 ",sections:[3,4]},{area:"020 "+this.character({pool:"378"}),sections:[3,4]},{area:"023 "+this.character({pool:"89"}),sections:[3,4]},{area:"024 7",sections:[3,4]},{area:"028 "+this.pick(["25","28","37","71","82","90","92","95"]),sections:[2,4]},{area:"012"+this.pick(["04","08","54","76","97","98"])+" ",sections:[6]},{area:"013"+this.pick(["63","64","84","86"])+" ",sections:[6]},{area:"014"+this.pick(["04","20","60","61","80","88"])+" ",sections:[6]},{area:"015"+this.pick(["24","27","62","66"])+" ",sections:[6]},{area:"016"+this.pick(["06","29","35","47","59","95"])+" ",sections:[6]},{area:"017"+this.pick(["26","44","50","68"])+" ",sections:[6]},{area:"018"+this.pick(["27","37","84","97"])+" ",sections:[6]},{area:"019"+this.pick(["00","05","35","46","49","63","95"])+" ",sections:[6]}]),e.formatted?i(t):i(t).replace(" ","","g"));break;case"za":r=(t=e.mobile?this.pick(["060"+this.pick(["3","4","5","6","7","8","9"])+n.string({pool:"0123456789",length:6}),"061"+this.pick(["0","1","2","3","4","5","8"])+n.string({pool:"0123456789",length:6}),"06"+n.string({pool:"0123456789",length:7}),"071"+this.pick(["0","1","2","3","4","5","6","7","8","9"])+n.string({pool:"0123456789",length:6}),"07"+this.pick(["2","3","4","6","7","8","9"])+n.string({pool:"0123456789",length:7}),"08"+this.pick(["0","1","2","3","4","5"])+n.string({pool:"0123456789",length:7})]):this.pick(["01"+this.pick(["0","1","2","3","4","5","6","7","8"])+n.string({pool:"0123456789",length:7}),"02"+this.pick(["1","2","3","4","7","8"])+n.string({pool:"0123456789",length:7}),"03"+this.pick(["1","2","3","5","6","9"])+n.string({pool:"0123456789",length:7}),"04"+this.pick(["1","2","3","4","5","6","7","8","9"])+n.string({pool:"0123456789",length:7}),"05"+this.pick(["1","3","4","6","7","8"])+n.string({pool:"0123456789",length:7})]),e.formatted||t);break;case"us":var o=this.areacode(e).toString(),a=this.natural({min:2,max:9}).toString()+this.natural({min:0,max:9}).toString()+this.natural({min:0,max:9}).toString(),s=this.natural({min:1e3,max:9999}).toString();r=e.formatted?o+" "+a+"-"+s:o+a+s;break;case"br":var l,u=this.pick(["11","12","13","14","15","16","17","18","19","21","22","24","27","28","31","32","33","34","35","37","38","41","42","43","44","45","46","47","48","49","51","53","54","55","61","62","63","64","65","66","67","68","69","71","73","74","75","77","79","81","82","83","84","85","86","87","88","89","91","92","93","94","95","96","97","98","99"]);l=e.mobile?"9"+n.string({pool:"0123456789",length:4}):this.natural({min:2e3,max:5999}).toString();var c=n.string({pool:"0123456789",length:4});r=e.formatted?"("+u+") "+l+"-"+c:u+l+c}return r},l.prototype.postal=function(){return this.character({pool:"XVTSRPNKLMHJGECBA"})+this.natural({max:9})+this.character({alpha:!0,casing:"upper"})+" "+(this.natural({max:9})+this.character({alpha:!0,casing:"upper"})+this.natural({max:9}))},l.prototype.counties=function(e){return e=v(e,{country:"uk"}),this.get("counties")[e.country.toLowerCase()]},l.prototype.county=function(e){return this.pick(this.counties(e)).name},l.prototype.provinces=function(e){return e=v(e,{country:"ca"}),this.get("provinces")[e.country.toLowerCase()]},l.prototype.province=function(e){return e&&e.full?this.pick(this.provinces(e)).name:this.pick(this.provinces(e)).abbreviation},l.prototype.state=function(e){return e&&e.full?this.pick(this.states(e)).name:this.pick(this.states(e)).abbreviation},l.prototype.states=function(e){var t;switch((e=v(e,{country:"us",us_states_and_dc:!0})).country.toLowerCase()){case"us":var r=this.get("us_states_and_dc"),n=this.get("territories"),i=this.get("armed_forces");t=[],e.us_states_and_dc&&(t=t.concat(r)),e.territories&&(t=t.concat(n)),e.armed_forces&&(t=t.concat(i));break;case"it":t=this.get("country_regions")[e.country.toLowerCase()];break;case"uk":t=this.get("counties")[e.country.toLowerCase()]}return t},l.prototype.street=function(e){var t;switch((e=v(e,{country:"us",syllables:2})).country.toLowerCase()){case"us":t=this.word({syllables:e.syllables}),t=this.capitalize(t),t+=" ",t+=e.short_suffix?this.street_suffix(e).abbreviation:this.street_suffix(e).name;break;case"it":t=this.word({syllables:e.syllables}),t=this.capitalize(t),t=(e.short_suffix?this.street_suffix(e).abbreviation:this.street_suffix(e).name)+" "+t}return t},l.prototype.street_suffix=function(e){return e=v(e,{country:"us"}),this.pick(this.street_suffixes(e))},l.prototype.street_suffixes=function(e){return e=v(e,{country:"us"}),this.get("street_suffixes")[e.country.toLowerCase()]},l.prototype.zip=function(e){var t=this.n(this.natural,5,{max:9});return e&&!0===e.plusfour&&(t.push("-"),t=t.concat(this.n(this.natural,4,{max:9}))),t.join("")},l.prototype.ampm=function(){return this.bool()?"am":"pm"},l.prototype.date=function(e){var t,r;if(e&&(e.min||e.max)){var n=void 0!==(e=v(e,{american:!0,string:!1})).min?e.min.getTime():1,i=void 0!==e.max?e.max.getTime():864e13;r=new Date(this.integer({min:n,max:i}))}else{var o=this.month({raw:!0}),a=o.days;e&&e.month&&(a=this.get("months")[(e.month%12+12)%12].days),e=v(e,{year:parseInt(this.year(),10),month:o.numeric-1,day:this.natural({min:1,max:a}),hour:this.hour({twentyfour:!0}),minute:this.minute(),second:this.second(),millisecond:this.millisecond(),american:!0,string:!1}),r=new Date(e.year,e.month,e.day,e.hour,e.minute,e.second,e.millisecond)}return t=e.american?r.getMonth()+1+"/"+r.getDate()+"/"+r.getFullYear():r.getDate()+"/"+(r.getMonth()+1)+"/"+r.getFullYear(),e.string?t:r},l.prototype.hammertime=function(e){return this.date(e).getTime()},l.prototype.hour=function(e){return h((e=v(e,{min:e&&e.twentyfour?0:1,max:e&&e.twentyfour?23:12})).min<0,"Chance: Min cannot be less than 0."),h(e.twentyfour&&23<e.max,"Chance: Max cannot be greater than 23 for twentyfour option."),h(!e.twentyfour&&12<e.max,"Chance: Max cannot be greater than 12."),h(e.min>e.max,"Chance: Min cannot be greater than Max."),this.natural({min:e.min,max:e.max})},l.prototype.millisecond=function(){return this.natural({max:999})},l.prototype.minute=l.prototype.second=function(e){return h((e=v(e,{min:0,max:59})).min<0,"Chance: Min cannot be less than 0."),h(59<e.max,"Chance: Max cannot be greater than 59."),h(e.min>e.max,"Chance: Min cannot be greater than Max."),this.natural({min:e.min,max:e.max})},l.prototype.month=function(e){h((e=v(e,{min:1,max:12})).min<1,"Chance: Min cannot be less than 1."),h(12<e.max,"Chance: Max cannot be greater than 12."),h(e.min>e.max,"Chance: Min cannot be greater than Max.");var t=this.pick(this.months().slice(e.min-1,e.max));return e.raw?t:t.name},l.prototype.months=function(){return this.get("months")},l.prototype.second=function(){return this.natural({max:59})},l.prototype.timestamp=function(){return this.natural({min:1,max:parseInt((new Date).getTime()/1e3,10)})},l.prototype.weekday=function(e){var t=["Monday","Tuesday","Wednesday","Thursday","Friday"];return(e=v(e,{weekday_only:!1})).weekday_only||(t.push("Saturday"),t.push("Sunday")),this.pickone(t)},l.prototype.year=function(e){return(e=v(e,{min:(new Date).getFullYear()})).max=void 0!==e.max?e.max:e.min+100,this.natural(e).toString()},l.prototype.cc=function(e){var t,r,n;return r=(t=(e=v(e)).type?this.cc_type({name:e.type,raw:!0}):this.cc_type({raw:!0})).prefix.split(""),n=t.length-t.prefix.length-1,(r=r.concat(this.n(this.integer,n,{min:0,max:9}))).push(this.luhn_calculate(r.join(""))),r.join("")},l.prototype.cc_types=function(){return this.get("cc_types")},l.prototype.cc_type=function(e){e=v(e);var t=this.cc_types(),r=null;if(e.name){for(var n=0;n<t.length;n++)if(t[n].name===e.name||t[n].short_name===e.name){r=t[n];break}if(null===r)throw new RangeError("Chance: Credit card type '"+e.name+"' is not supported")}else r=this.pick(t);return e.raw?r:r.name},l.prototype.currency_types=function(){return this.get("currency_types")},l.prototype.currency=function(){return this.pick(this.currency_types())},l.prototype.timezones=function(){return this.get("timezones")},l.prototype.timezone=function(){return this.pick(this.timezones())},l.prototype.currency_pair=function(e){var t=this.unique(this.currency,2,{comparator:function(e,r){return e.reduce(function(e,t){return e||t.code===r.code},!1)}});return e?t[0].code+"/"+t[1].code:t},l.prototype.dollar=function(e){e=v(e,{max:1e4,min:0});var t=this.floating({min:e.min,max:e.max,fixed:2}).toString(),r=t.split(".")[1];return void 0===r?t+=".00":r.length<2&&(t+="0"),t<0?"-$"+t.replace("-",""):"$"+t},l.prototype.euro=function(e){return Number(this.dollar(e).replace("$","")).toLocaleString()+""},l.prototype.exp=function(e){e=v(e);var t={};return t.year=this.exp_year(),t.year===(new Date).getFullYear().toString()?t.month=this.exp_month({future:!0}):t.month=this.exp_month(),e.raw?t:t.month+"/"+t.year},l.prototype.exp_month=function(e){e=v(e);var t,r=(new Date).getMonth()+1;if(e.future&&12!==r)for(;t=this.month({raw:!0}).numeric,parseInt(t,10)<=r;);else t=this.month({raw:!0}).numeric;return t},l.prototype.exp_year=function(){var e=(new Date).getMonth()+1,t=(new Date).getFullYear();return this.year({min:12===e?t+1:t,max:t+10})},l.prototype.vat=function(e){switch((e=v(e,{country:"it"})).country.toLowerCase()){case"it":return this.it_vat()}},l.prototype.iban=function(){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZ";return this.string({length:2,pool:e})+this.pad(this.integer({min:0,max:99}),2)+this.string({length:4,pool:"ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789"})+this.pad(this.natural(),this.natural({min:6,max:26}))},l.prototype.it_vat=function(){var e=this.natural({min:1,max:18e5});return(e=this.pad(e,7)+this.pad(this.pick(this.provinces({country:"it"})).code,3))+this.luhn_calculate(e)},l.prototype.cf=function(e){var t,r,n,i=(e=e||{}).gender?e.gender:this.gender(),o=e.first?e.first:this.first({gender:i,nationality:"it"}),a=e.last?e.last:this.last({nationality:"it"}),s=e.birthday?e.birthday:this.birthday(),l=e.city?e.city:this.pickone(["A","B","C","D","E","F","G","H","I","L","M","Z"])+this.pad(this.natural({max:999}),3),u=[],c=function(e,t){var r,n=[];return e.length<3?n=e.split("").concat("XXX".split("")).splice(0,3):(3<(r=e.toUpperCase().split("").map(function(e){return-1!=="BCDFGHJKLMNPRSTVWZ".indexOf(e)?e:void 0}).join("")).length&&(r=t?r.substr(0,3):r[0]+r.substr(2,2)),r.length<3&&(n=r,r=e.toUpperCase().split("").map(function(e){return-1!=="AEIOU".indexOf(e)?e:void 0}).join("").substr(0,3-n.length)),n+=r),n};return u=u.concat(c(a,!0),c(o),(t=s,r=i,n=this,t.getFullYear().toString().substr(2)+["A","B","C","D","E","H","L","M","P","R","S","T"][t.getMonth()]+n.pad(t.getDate()+("female"===r.toLowerCase()?40:0),2)),l.toUpperCase().split("")).join(""),(u+=function(e){for(var t="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ",r="ABCDEFGHIJABCDEFGHIJKLMNOPQRSTUVWXYZ",n="ABCDEFGHIJKLMNOPQRSTUVWXYZ",i=0,o=0;o<15;o++)i+=o%2!=0?n.indexOf(r[t.indexOf(e[o])]):"BAKPLCQDREVOSFTGUHMINJWZYX".indexOf(r[t.indexOf(e[o])]);return n[i%26]}(u.toUpperCase())).toUpperCase()},l.prototype.pl_pesel=function(){for(var e=this.natural({min:1,max:9999999999}),t=this.pad(e,10).split(""),r=0;r<t.length;r++)t[r]=parseInt(t[r]);var n=(1*t[0]+3*t[1]+7*t[2]+9*t[3]+1*t[4]+3*t[5]+7*t[6]+9*t[7]+1*t[8]+3*t[9])%10;return 0!==n&&(n=10-n),t.join("")+n},l.prototype.pl_nip=function(){for(var e=this.natural({min:1,max:999999999}),t=this.pad(e,9).split(""),r=0;r<t.length;r++)t[r]=parseInt(t[r]);var n=(6*t[0]+5*t[1]+7*t[2]+2*t[3]+3*t[4]+4*t[5]+5*t[6]+6*t[7]+7*t[8])%11;return 10===n?this.pl_nip():t.join("")+n},l.prototype.pl_regon=function(){for(var e=this.natural({min:1,max:99999999}),t=this.pad(e,8).split(""),r=0;r<t.length;r++)t[r]=parseInt(t[r]);var n=(8*t[0]+9*t[1]+2*t[2]+3*t[3]+4*t[4]+5*t[5]+6*t[6]+7*t[7])%11;return 10===n&&(n=0),t.join("")+n},l.prototype.note=function(e){e=v(e,{notes:"flatKey"});var t={naturals:["C","D","E","F","G","A","B"],flats:["D","E","G","A","B"],sharps:["C","D","F","G","A"]};return t.all=t.naturals.concat(t.flats.concat(t.sharps)),t.flatKey=t.naturals.concat(t.flats),t.sharpKey=t.naturals.concat(t.sharps),this.pickone(t[e.notes])},l.prototype.midi_note=function(e){return e=v(e,{min:0,max:127}),this.integer({min:e.min,max:e.max})},l.prototype.chord_quality=function(e){var t=["maj","min","aug","dim"];return(e=v(e,{jazz:!0})).jazz&&(t=["maj7","min7","7","sus","dim",""]),this.pickone(t)},l.prototype.chord=function(e){return e=v(e),this.note(e)+this.chord_quality(e)},l.prototype.tempo=function(e){return e=v(e,{min:40,max:320}),this.integer({min:e.min,max:e.max})},l.prototype.coin=function(e){return this.bool()?"heads":"tails"},l.prototype.d4=t({min:1,max:4}),l.prototype.d6=t({min:1,max:6}),l.prototype.d8=t({min:1,max:8}),l.prototype.d10=t({min:1,max:10}),l.prototype.d12=t({min:1,max:12}),l.prototype.d20=t({min:1,max:20}),l.prototype.d30=t({min:1,max:30}),l.prototype.d100=t({min:1,max:100}),l.prototype.rpg=function(e,t){if(t=v(t),e){var r=e.toLowerCase().split("d"),n=[];if(2!==r.length||!parseInt(r[0],10)||!parseInt(r[1],10))throw new Error("Chance: Invalid format provided. Please provide #d# where the first # is the number of dice to roll, the second # is the max of each die");for(var i=r[0];0<i;i--)n[i-1]=this.natural({min:1,max:r[1]});return void 0!==t.sum&&t.sum?n.reduce(function(e,t){return e+t}):n}throw new RangeError("Chance: A type of die roll must be included")},l.prototype.guid=function(e){e=v(e,{version:5});var t="abcdef1234567890";return this.string({pool:t,length:8})+"-"+this.string({pool:t,length:4})+"-"+e.version+this.string({pool:t,length:3})+"-"+this.string({pool:"ab89",length:1})+this.string({pool:t,length:3})+"-"+this.string({pool:t,length:12})},l.prototype.hash=function(e){var t="upper"===(e=v(e,{length:40,casing:"lower"})).casing?r.toUpperCase():r;return this.string({pool:t,length:e.length})},l.prototype.luhn_check=function(e){var t=e.toString();return+t.substring(t.length-1)===this.luhn_calculate(+t.substring(0,t.length-1))},l.prototype.luhn_calculate=function(e){for(var t,r=e.toString().split("").reverse(),n=0,i=0,o=r.length;i<o;++i)t=+r[i],i%2==0&&9<(t*=2)&&(t-=9),n+=t;return 9*n%10},l.prototype.md5=function(e){var t={str:"",key:null,raw:!1};if(e)if("string"==typeof e)t.str=e,e={};else{if("object"!==_typeof2(e))return null;if("Array"===e.constructor)return null}else t.str=this.string(),e={};if(!(t=v(e,t)).str)throw new Error("A parameter is required to return an md5 hash.");return this.bimd5.md5(t.str,t.key,t.raw)};var u={firstNames:{male:{en:["James","John","Robert","Michael","William","David","Richard","Joseph","Charles","Thomas","Christopher","Daniel","Matthew","George","Donald","Anthony","Paul","Mark","Edward","Steven","Kenneth","Andrew","Brian","Joshua","Kevin","Ronald","Timothy","Jason","Jeffrey","Frank","Gary","Ryan","Nicholas","Eric","Stephen","Jacob","Larry","Jonathan","Scott","Raymond","Justin","Brandon","Gregory","Samuel","Benjamin","Patrick","Jack","Henry","Walter","Dennis","Jerry","Alexander","Peter","Tyler","Douglas","Harold","Aaron","Jose","Adam","Arthur","Zachary","Carl","Nathan","Albert","Kyle","Lawrence","Joe","Willie","Gerald","Roger","Keith","Jeremy","Terry","Harry","Ralph","Sean","Jesse","Roy","Louis","Billy","Austin","Bruce","Eugene","Christian","Bryan","Wayne","Russell","Howard","Fred","Ethan","Jordan","Philip","Alan","Juan","Randy","Vincent","Bobby","Dylan","Johnny","Phillip","Victor","Clarence","Ernest","Martin","Craig","Stanley","Shawn","Travis","Bradley","Leonard","Earl","Gabriel","Jimmy","Francis","Todd","Noah","Danny","Dale","Cody","Carlos","Allen","Frederick","Logan","Curtis","Alex","Joel","Luis","Norman","Marvin","Glenn","Tony","Nathaniel","Rodney","Melvin","Alfred","Steve","Cameron","Chad","Edwin","Caleb","Evan","Antonio","Lee","Herbert","Jeffery","Isaac","Derek","Ricky","Marcus","Theodore","Elijah","Luke","Jesus","Eddie","Troy","Mike","Dustin","Ray","Adrian","Bernard","Leroy","Angel","Randall","Wesley","Ian","Jared","Mason","Hunter","Calvin","Oscar","Clifford","Jay","Shane","Ronnie","Barry","Lucas","Corey","Manuel","Leo","Tommy","Warren","Jackson","Isaiah","Connor","Don","Dean","Jon","Julian","Miguel","Bill","Lloyd","Charlie","Mitchell","Leon","Jerome","Darrell","Jeremiah","Alvin","Brett","Seth","Floyd","Jim","Blake","Micheal","Gordon","Trevor","Lewis","Erik","Edgar","Vernon","Devin","Gavin","Jayden","Chris","Clyde","Tom","Derrick","Mario","Brent","Marc","Herman","Chase","Dominic","Ricardo","Franklin","Maurice","Max","Aiden","Owen","Lester","Gilbert","Elmer","Gene","Francisco","Glen","Cory","Garrett","Clayton","Sam","Jorge","Chester","Alejandro","Jeff","Harvey","Milton","Cole","Ivan","Andre","Duane","Landon"],it:["Adolfo","Alberto","Aldo","Alessandro","Alessio","Alfredo","Alvaro","Andrea","Angelo","Angiolo","Antonino","Antonio","Attilio","Benito","Bernardo","Bruno","Carlo","Cesare","Christian","Claudio","Corrado","Cosimo","Cristian","Cristiano","Daniele","Dario","David","Davide","Diego","Dino","Domenico","Duccio","Edoardo","Elia","Elio","Emanuele","Emiliano","Emilio","Enrico","Enzo","Ettore","Fabio","Fabrizio","Federico","Ferdinando","Fernando","Filippo","Francesco","Franco","Gabriele","Giacomo","Giampaolo","Giampiero","Giancarlo","Gianfranco","Gianluca","Gianmarco","Gianni","Gino","Giorgio","Giovanni","Giuliano","Giulio","Giuseppe","Graziano","Gregorio","Guido","Iacopo","Jacopo","Lapo","Leonardo","Lorenzo","Luca","Luciano","Luigi","Manuel","Marcello","Marco","Marino","Mario","Massimiliano","Massimo","Matteo","Mattia","Maurizio","Mauro","Michele","Mirko","Mohamed","Nello","Neri","Niccol","Nicola","Osvaldo","Otello","Paolo","Pier Luigi","Piero","Pietro","Raffaele","Remo","Renato","Renzo","Riccardo","Roberto","Rolando","Romano","Salvatore","Samuele","Sandro","Sergio","Silvano","Simone","Stefano","Thomas","Tommaso","Ubaldo","Ugo","Umberto","Valerio","Valter","Vasco","Vincenzo","Vittorio"],nl:["Aaron","Abel","Adam","Adriaan","Albert","Alexander","Ali","Arjen","Arno","Bart","Bas","Bastiaan","Benjamin","Bob","Boris","Bram","Brent","Cas","Casper","Chris","Christiaan","Cornelis","Daan","Daley","Damian","Dani","Daniel","Danil","David","Dean","Dirk","Dylan","Egbert","Elijah","Erik","Erwin","Evert","Ezra","Fabian","Fedde","Finn","Florian","Floris","Frank","Frans","Frederik","Freek","Geert","Gerard","Gerben","Gerrit","Gijs","Guus","Hans","Hendrik","Henk","Herman","Hidde","Hugo","Jaap","Jan Jaap","Jan-Willem","Jack","Jacob","Jan","Jason","Jasper","Jayden","Jelle","Jelte","Jens","Jeroen","Jesse","Jim","Job","Joep","Johannes","John","Jonathan","Joris","Joshua","Jol","Julian","Kees","Kevin","Koen","Lars","Laurens","Leendert","Lennard","Lodewijk","Luc","Luca","Lucas","Lukas","Luuk","Maarten","Marcus","Martijn","Martin","Matthijs","Maurits","Max","Mees","Melle","Mick","Mika","Milan","Mohamed","Mohammed","Morris","Muhammed","Nathan","Nick","Nico","Niek","Niels","Noah","Noud","Olivier","Oscar","Owen","Paul","Pepijn","Peter","Pieter","Pim","Quinten","Reinier","Rens","Robin","Ruben","Sam","Samuel","Sander","Sebastiaan","Sem","Sep","Sepp","Siem","Simon","Stan","Stef","Steven","Stijn","Sven","Teun","Thijmen","Thijs","Thomas","Tijn","Tim","Timo","Tobias","Tom","Victor","Vince","Willem","Wim","Wouter","Yusuf"],fr:["Aaron","Abdon","Abel","Ablard","Abelin","Abondance","Abraham","Absalon","Acace","Achaire","Achille","Adalard","Adalbald","Adalbron","Adalbert","Adalric","Adam","Adegrin","Adel","Adelin","Andelin","Adelphe","Adam","Adodat","Adhmar","Adjutor","Adolphe","Adonis","Adon","Adrien","Agapet","Agathange","Agathon","Agilbert","Agnor","Agnan","Aignan","Agrippin","Aimable","Aim","Alain","Alban","Albin","Aubin","Albric","Albert","Albertet","Alcibiade","Alcide","Alce","Alcime","Aldonce","Aldric","Aldric","Aleaume","Alexandre","Alexis","Alix","Alliaume","Aleaume","Almine","Almire","Alos","Alphe","Alphonse","Alpinien","Alverde","Amalric","Amaury","Amandin","Amant","Ambroise","Amde","Amlien","Amiel","Amour","Anal","Anastase","Anatole","Ancelin","Andol","Andoche","Andr","Andoche","Ange","Angelin","Angilbe","Anglebert","Angoustan","Anicet","Anne","Annibal","Ansbert","Anselme","Anthelme","Antheaume","Anthime","Antide","Antoine","Antonius","Antonin","Apollinaire","Apollon","Aquilin","Arcade","Archambaud","Archambeau","Archange","Archibald","Arian","Ariel","Ariste","Aristide","Armand","Armel","Armin","Arnould","Arnaud","Arolde","Arsne","Arsino","Arthaud","Arthme","Arthur","Ascelin","Athanase","Aubry","Audebert","Audouin","Audran","Audric","Auguste","Augustin","Aurle","Aurlien","Aurian","Auxence","Axel","Aymard","Aymeric","Aymon","Aymond","Balthazar","Baptiste","Barnab","Barthlemy","Bartime","Basile","Bastien","Baudouin","Bnigne","Benjamin","Benot","Brenger","Brard","Bernard","Bertrand","Blaise","Bon","Boniface","Bouchard","Brice","Brieuc","Bruno","Brunon","Calixte","Calliste","Camlien","Camille","Camillien","Candide","Caribert","Carloman","Cassandre","Cassien","Cdric","Cleste","Clestin","Clien","Csaire","Csar","Charles","Charlemagne","Childebert","Chilpric","Chrtien","Christian","Christodule","Christophe","Chrysostome","Clarence","Claude","Claudien","Clandre","Clment","Clotaire","Cme","Constance","Constant","Constantin","Corentin","Cyprien","Cyriaque","Cyrille","Cyril","Damien","Daniel","David","Delphin","Denis","Dsir","Didier","Dieudonn","Dimitri","Dominique","Dorian","Dorothe","Edgard","Edmond","douard","leuthre","lie","lise","meric","mile","milien","Emmanuel","Enguerrand","piphane","ric","Esprit","Ernest","tienne","Eubert","Eudes","Eudoxe","Eugne","Eusbe","Eustache","variste","vrard","Fabien","Fabrice","Falba","Flicit","Flix","Ferdinand","Fiacre","Fidle","Firmin","Flavien","Flodoard","Florent","Florentin","Florestan","Florian","Fortun","Foulques","Francisque","Franois","Franais","Franciscus","Francs","Frdric","Fulbert","Fulcran","Fulgence","Gabin","Gabriel","Gal","Garnier","Gaston","Gaspard","Gatien","Gaud","Gautier","Gdon","Geoffroy","Georges","Graud","Grard","Gerbert","Germain","Gervais","Ghislain","Gilbert","Gilles","Girart","Gislebert","Gondebaud","Gonthier","Gontran","Gonzague","Grgoire","Gurin","Gui","Guillaume","Gustave","Guy","Guyot","Hardouin","Hector","Hdelin","Hlier","Henri","Herbert","Herluin","Herv","Hilaire","Hildebert","Hincmar","Hippolyte","Honor","Hubert","Hugues","Innocent","Isabeau","Isidore","Jacques","Japhet","Jason","Jean","Jeannel","Jeannot","Jrmie","Jrme","Joachim","Joanny","Job","Jocelyn","Jol","Johan","Jonas","Jonathan","Joseph","Josse","Josselin","Jourdain","Jude","Judical","Jules","Julien","Juste","Justin","Lambert","Landry","Laurent","Lazare","Landre","Lon","Lonard","Lopold","Leu","Loup","Leufroy","Libre","Litald","Lionel","Loc","Longin","Lorrain","Lorraine","Lothaire","Louis","Loup","Luc","Lucas","Lucien","Ludolphe","Ludovic","Macaire","Malo","Mamert","Manass","Marc","Marceau","Marcel","Marcelin","Marius","Marseille","Martial","Martin","Mathurin","Matthias","Mathias","Matthieu","Maugis","Maurice","Mauricet","Maxence","Maxime","Maximilien","Mayeul","Mdric","Melchior","Mence","Merlin","Mrove","Michal","Michel","Mose","Morgan","Nathan","Nathanal","Narcisse","Nhmie","Nestor","Nestor","Nicphore","Nicolas","No","Nol","Norbert","Normand","Normands","Octave","Odilon","Odon","Oger","Olivier","Oury","Pacme","Palmon","Parfait","Pascal","Paterne","Patrice","Paul","Ppin","Perceval","Philmon","Philibert","Philippe","Philothe","Pie","Pierre","Pierrick","Prosper","Quentin","Raoul","Raphal","Raymond","Rgis","Rjean","Rmi","Renaud","Ren","Reybaud","Richard","Robert","Roch","Rodolphe","Rodrigue","Roger","Roland","Romain","Romuald","Romo","Rome","Ronan","Roselin","Salomon","Samuel","Savin","Savinien","Scholastique","Sbastien","Sraphin","Serge","Sverin","Sidoine","Sigebert","Sigismond","Silvre","Simon","Simon","Sixte","Stanislas","Stphane","Stephan","Sylvain","Sylvestre","Tancrde","Tanguy","Taurin","Thodore","Thodose","Thophile","Thophraste","Thibault","Thibert","Thierry","Thomas","Timolon","Timothe","Titien","Tonnin","Toussaint","Trajan","Tristan","Turold","Tim","Ulysse","Urbain","Valentin","Valre","Valry","Venance","Venant","Venceslas","Vianney","Victor","Victorien","Victorin","Vigile","Vincent","Vital","Vitalien","Vivien","Waleran","Wandrille","Xavier","Xnophon","Yves","Zacharie","Zach","Zphirin"]},female:{en:["Mary","Emma","Elizabeth","Minnie","Margaret","Ida","Alice","Bertha","Sarah","Annie","Clara","Ella","Florence","Cora","Martha","Laura","Nellie","Grace","Carrie","Maude","Mabel","Bessie","Jennie","Gertrude","Julia","Hattie","Edith","Mattie","Rose","Catherine","Lillian","Ada","Lillie","Helen","Jessie","Louise","Ethel","Lula","Myrtle","Eva","Frances","Lena","Lucy","Edna","Maggie","Pearl","Daisy","Fannie","Josephine","Dora","Rosa","Katherine","Agnes","Marie","Nora","May","Mamie","Blanche","Stella","Ellen","Nancy","Effie","Sallie","Nettie","Della","Lizzie","Flora","Susie","Maud","Mae","Etta","Harriet","Sadie","Caroline","Katie","Lydia","Elsie","Kate","Susan","Mollie","Alma","Addie","Georgia","Eliza","Lulu","Nannie","Lottie","Amanda","Belle","Charlotte","Rebecca","Ruth","Viola","Olive","Amelia","Hannah","Jane","Virginia","Emily","Matilda","Irene","Kathryn","Esther","Willie","Henrietta","Ollie","Amy","Rachel","Sara","Estella","Theresa","Augusta","Ora","Pauline","Josie","Lola","Sophia","Leona","Anne","Mildred","Ann","Beulah","Callie","Lou","Delia","Eleanor","Barbara","Iva","Louisa","Maria","Mayme","Evelyn","Estelle","Nina","Betty","Marion","Bettie","Dorothy","Luella","Inez","Lela","Rosie","Allie","Millie","Janie","Cornelia","Victoria","Ruby","Winifred","Alta","Celia","Christine","Beatrice","Birdie","Harriett","Mable","Myra","Sophie","Tillie","Isabel","Sylvia","Carolyn","Isabelle","Leila","Sally","Ina","Essie","Bertie","Nell","Alberta","Katharine","Lora","Rena","Mina","Rhoda","Mathilda","Abbie","Eula","Dollie","Hettie","Eunice","Fanny","Ola","Lenora","Adelaide","Christina","Lelia","Nelle","Sue","Johanna","Lilly","Lucinda","Minerva","Lettie","Roxie","Cynthia","Helena","Hilda","Hulda","Bernice","Genevieve","Jean","Cordelia","Marian","Francis","Jeanette","Adeline","Gussie","Leah","Lois","Lura","Mittie","Hallie","Isabella","Olga","Phoebe","Teresa","Hester","Lida","Lina","Winnie","Claudia","Marguerite","Vera","Cecelia","Bess","Emilie","Rosetta","Verna","Myrtie","Cecilia","Elva","Olivia","Ophelia","Georgie","Elnora","Violet","Adele","Lily","Linnie","Loretta","Madge","Polly","Virgie","Eugenia","Lucile","Lucille","Mabelle","Rosalie"],it:["Ada","Adriana","Alessandra","Alessia","Alice","Angela","Anna","Anna Maria","Annalisa","Annita","Annunziata","Antonella","Arianna","Asia","Assunta","Aurora","Barbara","Beatrice","Benedetta","Bianca","Bruna","Camilla","Carla","Carlotta","Carmela","Carolina","Caterina","Catia","Cecilia","Chiara","Cinzia","Clara","Claudia","Costanza","Cristina","Daniela","Debora","Diletta","Dina","Donatella","Elena","Eleonora","Elisa","Elisabetta","Emanuela","Emma","Eva","Federica","Fernanda","Fiorella","Fiorenza","Flora","Franca","Francesca","Gabriella","Gaia","Gemma","Giada","Gianna","Gina","Ginevra","Giorgia","Giovanna","Giulia","Giuliana","Giuseppa","Giuseppina","Grazia","Graziella","Greta","Ida","Ilaria","Ines","Iolanda","Irene","Irma","Isabella","Jessica","Laura","Lea","Letizia","Licia","Lidia","Liliana","Lina","Linda","Lisa","Livia","Loretta","Luana","Lucia","Luciana","Lucrezia","Luisa","Manuela","Mara","Marcella","Margherita","Maria","Maria Cristina","Maria Grazia","Maria Luisa","Maria Pia","Maria Teresa","Marina","Marisa","Marta","Martina","Marzia","Matilde","Melissa","Michela","Milena","Mirella","Monica","Natalina","Nella","Nicoletta","Noemi","Olga","Paola","Patrizia","Piera","Pierina","Raffaella","Rebecca","Renata","Rina","Rita","Roberta","Rosa","Rosanna","Rossana","Rossella","Sabrina","Sandra","Sara","Serena","Silvana","Silvia","Simona","Simonetta","Sofia","Sonia","Stefania","Susanna","Teresa","Tina","Tiziana","Tosca","Valentina","Valeria","Vanda","Vanessa","Vanna","Vera","Veronica","Vilma","Viola","Virginia","Vittoria"],nl:["Ada","Arianne","Afke","Amanda","Amber","Amy","Aniek","Anita","Anja","Anna","Anne","Annelies","Annemarie","Annette","Anouk","Astrid","Aukje","Barbara","Bianca","Carla","Carlijn","Carolien","Chantal","Charlotte","Claudia","Danille","Debora","Diane","Dora","Eline","Elise","Ella","Ellen","Emma","Esmee","Evelien","Esther","Erica","Eva","Femke","Fleur","Floor","Froukje","Gea","Gerda","Hanna","Hanneke","Heleen","Hilde","Ilona","Ina","Inge","Ingrid","Iris","Isabel","Isabelle","Janneke","Jasmijn","Jeanine","Jennifer","Jessica","Johanna","Joke","Julia","Julie","Karen","Karin","Katja","Kim","Lara","Laura","Lena","Lianne","Lieke","Lilian","Linda","Lisa","Lisanne","Lotte","Louise","Maaike","Manon","Marga","Maria","Marissa","Marit","Marjolein","Martine","Marleen","Melissa","Merel","Miranda","Michelle","Mirjam","Mirthe","Naomi","Natalie","Nienke","Nina","Noortje","Olivia","Patricia","Paula","Paulien","Ramona","Ria","Rianne","Roos","Rosanne","Ruth","Sabrina","Sandra","Sanne","Sara","Saskia","Silvia","Sofia","Sophie","Sonja","Suzanne","Tamara","Tess","Tessa","Tineke","Valerie","Vanessa","Veerle","Vera","Victoria","Wendy","Willeke","Yvonne","Zo"],fr:["Abdon","Abel","Abigalle","Abigal","Acacius","Acanthe","Adalbert","Adalsinde","Adegrine","Adlade","Adle","Adlie","Adeline","Adeltrude","Adolphe","Adonis","Adraste","Adrehilde","Adrienne","Agathe","Agilbert","Agla","Aignan","Agneflte","Agns","Agrippine","Aim","Alaine","Alas","Albane","Albrade","Alberte","Alcide","Alcine","Alcyone","Aldegonde","Aleth","Alexandrine","Alexine","Alice","Alinor","Aliette","Aline","Alix","Aliz","Alose","Aloyse","Alphonsine","Althe","Amaliane","Amalthe","Amande","Amandine","Amant","Amarande","Amaranthe","Amaryllis","Ambre","Ambroisie","Amlie","Amthyste","Aminte","Anal","Anas","Anastasie","Anatole","Ancelin","Andre","Anmone","Angadrme","Angle","Angeline","Anglique","Angilbert","Anicet","Annabelle","Anne","Annette","Annick","Annie","Annonciade","Ansbert","Anstrudie","Anthelme","Antigone","Antoinette","Antonine","Aphlie","Apolline","Apollonie","Aquiline","Arabelle","Arcadie","Archange","Argine","Ariane","Aricie","Ariel","Arielle","Arlette","Armance","Armande","Armandine","Armelle","Armide","Armelle","Armin","Arnaud","Arsne","Arsino","Artmis","Arthur","Ascelin","Ascension","Assomption","Astart","Astrie","Astre","Astrid","Athalie","Athanasie","Athina","Aube","Albert","Aude","Audrey","Augustine","Aure","Aurlie","Aurlien","Aurle","Aurore","Auxence","Aveline","Abigalle","Avoye","Axelle","Aymard","Azale","Adle","Adeline","Barbe","Basilisse","Bathilde","Batrice","Batrix","Bndicte","Brengre","Bernadette","Berthe","Bertille","Beuve","Blanche","Blanc","Blandine","Brigitte","Brune","Brunehilde","Callista","Camille","Capucine","Carine","Caroline","Cassandre","Catherine","Ccile","Cleste","Clestine","Cline","Chantal","Charlne","Charline","Charlotte","Chlo","Christelle","Christiane","Christine","Claire","Clara","Claude","Claudine","Clarisse","Clmence","Clmentine","Clo","Clio","Clotilde","Coline","Conception","Constance","Coralie","Coraline","Corentine","Corinne","Cyrielle","Daniel","Daniel","Daphn","Dbora","Delphine","Denise","Diane","Dieudonn","Dominique","Doriane","Dorothe","Douce","dith","Edme","lonore","liane","lia","liette","lisabeth","lise","Ella","lodie","lose","Elsa","meline","mrance","mrentienne","mrencie","milie","Emma","Emmanuelle","Emmelie","Ernestine","Esther","Estelle","Eudoxie","Eugnie","Eulalie","Euphrasie","Eusbie","vangline","Eva","ve","velyne","Fanny","Fantine","Faustine","Flicie","Fernande","Flavie","Fleur","Flore","Florence","Florie","Fortun","France","Francia","Franoise","Francine","Gabrielle","Galle","Garance","Genevive","Georgette","Gerberge","Germaine","Gertrude","Gisle","Guenivre","Guilhemine","Guillemette","Gustave","Gwenael","Hlne","Hlose","Henriette","Hermine","Hermione","Hippolyte","Honorine","Hortense","Huguette","Ines","Irne","Irina","Iris","Isabeau","Isabelle","Iseult","Isolde","Ismrie","Jacinthe","Jacqueline","Jade","Janine","Jeanne","Jocelyne","Jolle","Josphine","Judith","Julia","Julie","Jules","Juliette","Justine","Katy","Kathy","Katie","Laura","Laure","Laureline","Laurence","Laurene","Lauriane","Laurianne","Laurine","La","Lna","Lonie","Lon","Lontine","Lorraine","Lucie","Lucienne","Lucille","Ludivine","Lydie","Lydie","Megane","Madeleine","Magali","Maguelone","Mallaury","Manon","Marceline","Margot","Marguerite","Marianne","Marie","Myriam","Marie","Marine","Marion","Marlne","Marthe","Martine","Mathilde","Maud","Maureen","Mauricette","Maxime","Mlanie","Melissa","Mlissandre","Mlisande","Mlodie","Michel","Micheline","Mireille","Miriam","Mose","Monique","Morgane","Muriel","Mylne","Nadge","Nadine","Nathalie","Nicole","Nicolette","Nine","Nol","Nomie","Ocane","Odette","Odile","Olive","Olivia","Olympe","Ombline","Ombeline","Ophlie","Oriande","Oriane","Ozanne","Pascale","Pascaline","Paule","Paulette","Pauline","Priscille","Prisca","Prisque","Pcine","Plagie","Pnlope","Perrine","Ptronille","Philippine","Philomne","Philothe","Primerose","Prudence","Pulchrie","Quentine","Quita","Quintia","Quintilla","Rachel","Raphalle","Raymonde","Rebecca","Rgine","Rjeanne","Ren","Rita","Rita","Rolande","Romane","Rosalie","Rose","Roseline","Sabine","Salom","Sandra","Sandrine","Sarah","Sgolne","Sverine","Sibylle","Simone","Sixt","Solange","Soline","Solne","Sophie","Stphanie","Suzanne","Sylvain","Sylvie","Tatiana","Thas","Thodora","Thrse","Tiphaine","Ursule","Valentine","Valrie","Vronique","Victoire","Victorine","Vinciane","Violette","Virginie","Viviane","Xavire","Yolande","Ysaline","Yvette","Yvonne","Zlie","Zita","Zo"]}},lastNames:{en:["Smith","Johnson","Williams","Jones","Brown","Davis","Miller","Wilson","Moore","Taylor","Anderson","Thomas","Jackson","White","Harris","Martin","Thompson","Garcia","Martinez","Robinson","Clark","Rodriguez","Lewis","Lee","Walker","Hall","Allen","Young","Hernandez","King","Wright","Lopez","Hill","Scott","Green","Adams","Baker","Gonzalez","Nelson","Carter","Mitchell","Perez","Roberts","Turner","Phillips","Campbell","Parker","Evans","Edwards","Collins","Stewart","Sanchez","Morris","Rogers","Reed","Cook","Morgan","Bell","Murphy","Bailey","Rivera","Cooper","Richardson","Cox","Howard","Ward","Torres","Peterson","Gray","Ramirez","James","Watson","Brooks","Kelly","Sanders","Price","Bennett","Wood","Barnes","Ross","Henderson","Coleman","Jenkins","Perry","Powell","Long","Patterson","Hughes","Flores","Washington","Butler","Simmons","Foster","Gonzales","Bryant","Alexander","Russell","Griffin","Diaz","Hayes","Myers","Ford","Hamilton","Graham","Sullivan","Wallace","Woods","Cole","West","Jordan","Owens","Reynolds","Fisher","Ellis","Harrison","Gibson","McDonald","Cruz","Marshall","Ortiz","Gomez","Murray","Freeman","Wells","Webb","Simpson","Stevens","Tucker","Porter","Hunter","Hicks","Crawford","Henry","Boyd","Mason","Morales","Kennedy","Warren","Dixon","Ramos","Reyes","Burns","Gordon","Shaw","Holmes","Rice","Robertson","Hunt","Black","Daniels","Palmer","Mills","Nichols","Grant","Knight","Ferguson","Rose","Stone","Hawkins","Dunn","Perkins","Hudson","Spencer","Gardner","Stephens","Payne","Pierce","Berry","Matthews","Arnold","Wagner","Willis","Ray","Watkins","Olson","Carroll","Duncan","Snyder","Hart","Cunningham","Bradley","Lane","Andrews","Ruiz","Harper","Fox","Riley","Armstrong","Carpenter","Weaver","Greene","Lawrence","Elliott","Chavez","Sims","Austin","Peters","Kelley","Franklin","Lawson","Fields","Gutierrez","Ryan","Schmidt","Carr","Vasquez","Castillo","Wheeler","Chapman","Oliver","Montgomery","Richards","Williamson","Johnston","Banks","Meyer","Bishop","McCoy","Howell","Alvarez","Morrison","Hansen","Fernandez","Garza","Harvey","Little","Burton","Stanley","Nguyen","George","Jacobs","Reid","Kim","Fuller","Lynch","Dean","Gilbert","Garrett","Romero","Welch","Larson","Frazier","Burke","Hanson","Day","Mendoza","Moreno","Bowman","Medina","Fowler","Brewer","Hoffman","Carlson","Silva","Pearson","Holland","Douglas","Fleming","Jensen","Vargas","Byrd","Davidson","Hopkins","May","Terry","Herrera","Wade","Soto","Walters","Curtis","Neal","Caldwell","Lowe","Jennings","Barnett","Graves","Jimenez","Horton","Shelton","Barrett","Obrien","Castro","Sutton","Gregory","McKinney","Lucas","Miles","Craig","Rodriquez","Chambers","Holt","Lambert","Fletcher","Watts","Bates","Hale","Rhodes","Pena","Beck","Newman","Haynes","McDaniel","Mendez","Bush","Vaughn","Parks","Dawson","Santiago","Norris","Hardy","Love","Steele","Curry","Powers","Schultz","Barker","Guzman","Page","Munoz","Ball","Keller","Chandler","Weber","Leonard","Walsh","Lyons","Ramsey","Wolfe","Schneider","Mullins","Benson","Sharp","Bowen","Daniel","Barber","Cummings","Hines","Baldwin","Griffith","Valdez","Hubbard","Salazar","Reeves","Warner","Stevenson","Burgess","Santos","Tate","Cross","Garner","Mann","Mack","Moss","Thornton","Dennis","McGee","Farmer","Delgado","Aguilar","Vega","Glover","Manning","Cohen","Harmon","Rodgers","Robbins","Newton","Todd","Blair","Higgins","Ingram","Reese","Cannon","Strickland","Townsend","Potter","Goodwin","Walton","Rowe","Hampton","Ortega","Patton","Swanson","Joseph","Francis","Goodman","Maldonado","Yates","Becker","Erickson","Hodges","Rios","Conner","Adkins","Webster","Norman","Malone","Hammond","Flowers","Cobb","Moody","Quinn","Blake","Maxwell","Pope","Floyd","Osborne","Paul","McCarthy","Guerrero","Lindsey","Estrada","Sandoval","Gibbs","Tyler","Gross","Fitzgerald","Stokes","Doyle","Sherman","Saunders","Wise","Colon","Gill","Alvarado","Greer","Padilla","Simon","Waters","Nunez","Ballard","Schwartz","McBride","Houston","Christensen","Klein","Pratt","Briggs","Parsons","McLaughlin","Zimmerman","French","Buchanan","Moran","Copeland","Roy","Pittman","Brady","McCormick","Holloway","Brock","Poole","Frank","Logan","Owen","Bass","Marsh","Drake","Wong","Jefferson","Park","Morton","Abbott","Sparks","Patrick","Norton","Huff","Clayton","Massey","Lloyd","Figueroa","Carson","Bowers","Roberson","Barton","Tran","Lamb","Harrington","Casey","Boone","Cortez","Clarke","Mathis","Singleton","Wilkins","Cain","Bryan","Underwood","Hogan","McKenzie","Collier","Luna","Phelps","McGuire","Allison","Bridges","Wilkerson","Nash","Summers","Atkins"],it:["Acciai","Aglietti","Agostini","Agresti","Ahmed","Aiazzi","Albanese","Alberti","Alessi","Alfani","Alinari","Alterini","Amato","Ammannati","Ancillotti","Andrei","Andreini","Andreoni","Angeli","Anichini","Antonelli","Antonini","Arena","Ariani","Arnetoli","Arrighi","Baccani","Baccetti","Bacci","Bacherini","Badii","Baggiani","Baglioni","Bagni","Bagnoli","Baldassini","Baldi","Baldini","Ballerini","Balli","Ballini","Balloni","Bambi","Banchi","Bandinelli","Bandini","Bani","Barbetti","Barbieri","Barchielli","Bardazzi","Bardelli","Bardi","Barducci","Bargellini","Bargiacchi","Barni","Baroncelli","Baroncini","Barone","Baroni","Baronti","Bartalesi","Bartoletti","Bartoli","Bartolini","Bartoloni","Bartolozzi","Basagni","Basile","Bassi","Batacchi","Battaglia","Battaglini","Bausi","Becagli","Becattini","Becchi","Becucci","Bellandi","Bellesi","Belli","Bellini","Bellucci","Bencini","Benedetti","Benelli","Beni","Benini","Bensi","Benucci","Benvenuti","Berlincioni","Bernacchioni","Bernardi","Bernardini","Berni","Bernini","Bertelli","Berti","Bertini","Bessi","Betti","Bettini","Biagi","Biagini","Biagioni","Biagiotti","Biancalani","Bianchi","Bianchini","Bianco","Biffoli","Bigazzi","Bigi","Biliotti","Billi","Binazzi","Bindi","Bini","Biondi","Bizzarri","Bocci","Bogani","Bolognesi","Bonaiuti","Bonanni","Bonciani","Boncinelli","Bondi","Bonechi","Bongini","Boni","Bonini","Borchi","Boretti","Borghi","Borghini","Borgioli","Borri","Borselli","Boschi","Bottai","Bracci","Braccini","Brandi","Braschi","Bravi","Brazzini","Breschi","Brilli","Brizzi","Brogelli","Brogi","Brogioni","Brunelli","Brunetti","Bruni","Bruno","Brunori","Bruschi","Bucci","Bucciarelli","Buccioni","Bucelli","Bulli","Burberi","Burchi","Burgassi","Burroni","Bussotti","Buti","Caciolli","Caiani","Calabrese","Calamai","Calamandrei","Caldini","Calo'","Calonaci","Calosi","Calvelli","Cambi","Camiciottoli","Cammelli","Cammilli","Campolmi","Cantini","Capanni","Capecchi","Caponi","Cappelletti","Cappelli","Cappellini","Cappugi","Capretti","Caputo","Carbone","Carboni","Cardini","Carlesi","Carletti","Carli","Caroti","Carotti","Carrai","Carraresi","Carta","Caruso","Casalini","Casati","Caselli","Casini","Castagnoli","Castellani","Castelli","Castellucci","Catalano","Catarzi","Catelani","Cavaciocchi","Cavallaro","Cavallini","Cavicchi","Cavini","Ceccarelli","Ceccatelli","Ceccherelli","Ceccherini","Cecchi","Cecchini","Cecconi","Cei","Cellai","Celli","Cellini","Cencetti","Ceni","Cenni","Cerbai","Cesari","Ceseri","Checcacci","Checchi","Checcucci","Cheli","Chellini","Chen","Cheng","Cherici","Cherubini","Chiaramonti","Chiarantini","Chiarelli","Chiari","Chiarini","Chiarugi","Chiavacci","Chiesi","Chimenti","Chini","Chirici","Chiti","Ciabatti","Ciampi","Cianchi","Cianfanelli","Cianferoni","Ciani","Ciapetti","Ciappi","Ciardi","Ciatti","Cicali","Ciccone","Cinelli","Cini","Ciobanu","Ciolli","Cioni","Cipriani","Cirillo","Cirri","Ciucchi","Ciuffi","Ciulli","Ciullini","Clemente","Cocchi","Cognome","Coli","Collini","Colombo","Colzi","Comparini","Conforti","Consigli","Conte","Conti","Contini","Coppini","Coppola","Corsi","Corsini","Corti","Cortini","Cosi","Costa","Costantini","Costantino","Cozzi","Cresci","Crescioli","Cresti","Crini","Curradi","D'Agostino","D'Alessandro","D'Amico","D'Angelo","Daddi","Dainelli","Dallai","Danti","Davitti","De Angelis","De Luca","De Marco","De Rosa","De Santis","De Simone","De Vita","Degl'Innocenti","Degli Innocenti","Dei","Del Lungo","Del Re","Di Marco","Di Stefano","Dini","Diop","Dobre","Dolfi","Donati","Dondoli","Dong","Donnini","Ducci","Dumitru","Ermini","Esposito","Evangelisti","Fabbri","Fabbrini","Fabbrizzi","Fabbroni","Fabbrucci","Fabiani","Facchini","Faggi","Fagioli","Failli","Faini","Falciani","Falcini","Falcone","Fallani","Falorni","Falsini","Falugiani","Fancelli","Fanelli","Fanetti","Fanfani","Fani","Fantappie'","Fantechi","Fanti","Fantini","Fantoni","Farina","Fattori","Favilli","Fedi","Fei","Ferrante","Ferrara","Ferrari","Ferraro","Ferretti","Ferri","Ferrini","Ferroni","Fiaschi","Fibbi","Fiesoli","Filippi","Filippini","Fini","Fioravanti","Fiore","Fiorentini","Fiorini","Fissi","Focardi","Foggi","Fontana","Fontanelli","Fontani","Forconi","Formigli","Forte","Forti","Fortini","Fossati","Fossi","Francalanci","Franceschi","Franceschini","Franchi","Franchini","Franci","Francini","Francioni","Franco","Frassineti","Frati","Fratini","Frilli","Frizzi","Frosali","Frosini","Frullini","Fusco","Fusi","Gabbrielli","Gabellini","Gagliardi","Galanti","Galardi","Galeotti","Galletti","Galli","Gallo","Gallori","Gambacciani","Gargani","Garofalo","Garuglieri","Gashi","Gasperini","Gatti","Gelli","Gensini","Gentile","Gentili","Geri","Gerini","Gheri","Ghini","Giachetti","Giachi","Giacomelli","Gianassi","Giani","Giannelli","Giannetti","Gianni","Giannini","Giannoni","Giannotti","Giannozzi","Gigli","Giordano","Giorgetti","Giorgi","Giovacchini","Giovannelli","Giovannetti","Giovannini","Giovannoni","Giuliani","Giunti","Giuntini","Giusti","Gonnelli","Goretti","Gori","Gradi","Gramigni","Grassi","Grasso","Graziani","Grazzini","Greco","Grifoni","Grillo","Grimaldi","Grossi","Gualtieri","Guarducci","Guarino","Guarnieri","Guasti","Guerra","Guerri","Guerrini","Guidi","Guidotti","He","Hoxha","Hu","Huang","Iandelli","Ignesti","Innocenti","Jin","La Rosa","Lai","Landi","Landini","Lanini","Lapi","Lapini","Lari","Lascialfari","Lastrucci","Latini","Lazzeri","Lazzerini","Lelli","Lenzi","Leonardi","Leoncini","Leone","Leoni","Lepri","Li","Liao","Lin","Linari","Lippi","Lisi","Livi","Lombardi","Lombardini","Lombardo","Longo","Lopez","Lorenzi","Lorenzini","Lorini","Lotti","Lu","Lucchesi","Lucherini","Lunghi","Lupi","Madiai","Maestrini","Maffei","Maggi","Maggini","Magherini","Magini","Magnani","Magnelli","Magni","Magnolfi","Magrini","Malavolti","Malevolti","Manca","Mancini","Manetti","Manfredi","Mangani","Mannelli","Manni","Mannini","Mannucci","Manuelli","Manzini","Marcelli","Marchese","Marchetti","Marchi","Marchiani","Marchionni","Marconi","Marcucci","Margheri","Mari","Mariani","Marilli","Marinai","Marinari","Marinelli","Marini","Marino","Mariotti","Marsili","Martelli","Martinelli","Martini","Martino","Marzi","Masi","Masini","Masoni","Massai","Materassi","Mattei","Matteini","Matteucci","Matteuzzi","Mattioli","Mattolini","Matucci","Mauro","Mazzanti","Mazzei","Mazzetti","Mazzi","Mazzini","Mazzocchi","Mazzoli","Mazzoni","Mazzuoli","Meacci","Mecocci","Meini","Melani","Mele","Meli","Mengoni","Menichetti","Meoni","Merlini","Messeri","Messina","Meucci","Miccinesi","Miceli","Micheli","Michelini","Michelozzi","Migliori","Migliorini","Milani","Miniati","Misuri","Monaco","Montagnani","Montagni","Montanari","Montelatici","Monti","Montigiani","Montini","Morandi","Morandini","Morelli","Moretti","Morganti","Mori","Morini","Moroni","Morozzi","Mugnai","Mugnaini","Mustafa","Naldi","Naldini","Nannelli","Nanni","Nannini","Nannucci","Nardi","Nardini","Nardoni","Natali","Ndiaye","Nencetti","Nencini","Nencioni","Neri","Nesi","Nesti","Niccolai","Niccoli","Niccolini","Nigi","Nistri","Nocentini","Noferini","Novelli","Nucci","Nuti","Nutini","Oliva","Olivieri","Olmi","Orlandi","Orlandini","Orlando","Orsini","Ortolani","Ottanelli","Pacciani","Pace","Paci","Pacini","Pagani","Pagano","Paggetti","Pagliai","Pagni","Pagnini","Paladini","Palagi","Palchetti","Palloni","Palmieri","Palumbo","Pampaloni","Pancani","Pandolfi","Pandolfini","Panerai","Panichi","Paoletti","Paoli","Paolini","Papi","Papini","Papucci","Parenti","Parigi","Parisi","Parri","Parrini","Pasquini","Passeri","Pecchioli","Pecorini","Pellegrini","Pepi","Perini","Perrone","Peruzzi","Pesci","Pestelli","Petri","Petrini","Petrucci","Pettini","Pezzati","Pezzatini","Piani","Piazza","Piazzesi","Piazzini","Piccardi","Picchi","Piccini","Piccioli","Pieraccini","Pieraccioni","Pieralli","Pierattini","Pieri","Pierini","Pieroni","Pietrini","Pini","Pinna","Pinto","Pinzani","Pinzauti","Piras","Pisani","Pistolesi","Poggesi","Poggi","Poggiali","Poggiolini","Poli","Pollastri","Porciani","Pozzi","Pratellesi","Pratesi","Prosperi","Pruneti","Pucci","Puccini","Puccioni","Pugi","Pugliese","Puliti","Querci","Quercioli","Raddi","Radu","Raffaelli","Ragazzini","Ranfagni","Ranieri","Rastrelli","Raugei","Raveggi","Renai","Renzi","Rettori","Ricci","Ricciardi","Ridi","Ridolfi","Rigacci","Righi","Righini","Rinaldi","Risaliti","Ristori","Rizzo","Rocchi","Rocchini","Rogai","Romagnoli","Romanelli","Romani","Romano","Romei","Romeo","Romiti","Romoli","Romolini","Rontini","Rosati","Roselli","Rosi","Rossetti","Rossi","Rossini","Rovai","Ruggeri","Ruggiero","Russo","Sabatini","Saccardi","Sacchetti","Sacchi","Sacco","Salerno","Salimbeni","Salucci","Salvadori","Salvestrini","Salvi","Salvini","Sanesi","Sani","Sanna","Santi","Santini","Santoni","Santoro","Santucci","Sardi","Sarri","Sarti","Sassi","Sbolci","Scali","Scarpelli","Scarselli","Scopetani","Secci","Selvi","Senatori","Senesi","Serafini","Sereni","Serra","Sestini","Sguanci","Sieni","Signorini","Silvestri","Simoncini","Simonetti","Simoni","Singh","Sodi","Soldi","Somigli","Sorbi","Sorelli","Sorrentino","Sottili","Spina","Spinelli","Staccioli","Staderini","Stefanelli","Stefani","Stefanini","Stella","Susini","Tacchi","Tacconi","Taddei","Tagliaferri","Tamburini","Tanganelli","Tani","Tanini","Tapinassi","Tarchi","Tarchiani","Targioni","Tassi","Tassini","Tempesti","Terzani","Tesi","Testa","Testi","Tilli","Tinti","Tirinnanzi","Toccafondi","Tofanari","Tofani","Tognaccini","Tonelli","Tonini","Torelli","Torrini","Tosi","Toti","Tozzi","Trambusti","Trapani","Tucci","Turchi","Ugolini","Ulivi","Valente","Valenti","Valentini","Vangelisti","Vanni","Vannini","Vannoni","Vannozzi","Vannucchi","Vannucci","Ventura","Venturi","Venturini","Vestri","Vettori","Vichi","Viciani","Vieri","Vigiani","Vignoli","Vignolini","Vignozzi","Villani","Vinci","Visani","Vitale","Vitali","Viti","Viviani","Vivoli","Volpe","Volpi","Wang","Wu","Xu","Yang","Ye","Zagli","Zani","Zanieri","Zanobini","Zecchi","Zetti","Zhang","Zheng","Zhou","Zhu","Zingoni","Zini","Zoppi"],nl:["Albers","Alblas","Appelman","Baars","Baas","Bakker","Blank","Bleeker","Blok","Blom","Boer","Boers","Boldewijn","Boon","Boot","Bos","Bosch","Bosma","Bosman","Bouma","Bouman","Bouwman","Brands","Brouwer","Burger","Buijs","Buitenhuis","Ceder","Cohen","Dekker","Dekkers","Dijkman","Dijkstra","Driessen","Drost","Engel","Evers","Faber","Franke","Gerritsen","Goedhart","Goossens","Groen","Groenenberg","Groot","Haan","Hart","Heemskerk","Hendriks","Hermans","Hoekstra","Hofman","Hopman","Huisman","Jacobs","Jansen","Janssen","Jonker","Jaspers","Keijzer","Klaassen","Klein","Koek","Koenders","Kok","Kool","Koopman","Koopmans","Koning","Koster","Kramer","Kroon","Kuijpers","Kuiper","Kuipers","Kurt","Koster","Kwakman","Los","Lubbers","Maas","Markus","Martens","Meijer","Mol","Molenaar","Mulder","Nieuwenhuis","Peeters","Peters","Pengel","Pieters","Pool","Post","Postma","Prins","Pronk","Reijnders","Rietveld","Roest","Roos","Sanders","Schaap","Scheffer","Schenk","Schilder","Schipper","Schmidt","Scholten","Schouten","Schut","Schutte","Schuurman","Simons","Smeets","Smit","Smits","Snel","Swinkels","Tas","Terpstra","Timmermans","Tol","Tromp","Troost","Valk","Veenstra","Veldkamp","Verbeek","Verheul","Verhoeven","Vermeer","Vermeulen","Verweij","Vink","Visser","Voorn","Vos","Wagenaar","Wiersema","Willems","Willemsen","Witteveen","Wolff","Wolters","Zijlstra","Zwart","de Beer","de Boer","de Bruijn","de Bruin","de Graaf","de Groot","de Haan","de Haas","de Jager","de Jong","de Jonge","de Koning","de Lange","de Leeuw","de Ridder","de Rooij","de Ruiter","de Vos","de Vries","de Waal","de Wit","de Zwart","van Beek","van Boven","van Dam","van Dijk","van Dongen","van Doorn","van Egmond","van Eijk","van Es","van Gelder","van Gelderen","van Houten","van Hulst","van Kempen","van Kesteren","van Leeuwen","van Loon","van Mill","van Noord","van Ommen","van Ommeren","van Oosten","van Oostveen","van Rijn","van Schaik","van Veen","van Vliet","van Wijk","van Wijngaarden","van den Poel","van de Pol","van den Ploeg","van de Ven","van den Berg","van den Bosch","van den Brink","van den Broek","van den Heuvel","van der Heijden","van der Horst","van der Hulst","van der Kroon","van der Laan","van der Linden","van der Meer","van der Meij","van der Meulen","van der Molen","van der Sluis","van der Spek","van der Veen","van der Velde","van der Velden","van der Vliet","van der Wal"],uk:["Smith","Jones","Williams","Taylor","Brown","Davies","Evans","Wilson","Thomas","Johnson","Roberts","Robinson","Thompson","Wright","Walker","White","Edwards","Hughes","Green","Hall","Lewis","Harris","Clarke","Patel","Jackson","Wood","Turner","Martin","Cooper","Hill","Ward","Morris","Moore","Clark","Lee","King","Baker","Harrison","Morgan","Allen","James","Scott","Phillips","Watson","Davis","Parker","Price","Bennett","Young","Griffiths","Mitchell","Kelly","Cook","Carter","Richardson","Bailey","Collins","Bell","Shaw","Murphy","Miller","Cox","Richards","Khan","Marshall","Anderson","Simpson","Ellis","Adams","Singh","Begum","Wilkinson","Foster","Chapman","Powell","Webb","Rogers","Gray","Mason","Ali","Hunt","Hussain","Campbell","Matthews","Owen","Palmer","Holmes","Mills","Barnes","Knight","Lloyd","Butler","Russell","Barker","Fisher","Stevens","Jenkins","Murray","Dixon","Harvey","Graham","Pearson","Ahmed","Fletcher","Walsh","Kaur","Gibson","Howard","Andrews","Stewart","Elliott","Reynolds","Saunders","Payne","Fox","Ford","Pearce","Day","Brooks","West","Lawrence","Cole","Atkinson","Bradley","Spencer","Gill","Dawson","Ball","Burton","O'brien","Watts","Rose","Booth","Perry","Ryan","Grant","Wells","Armstrong","Francis","Rees","Hayes","Hart","Hudson","Newman","Barrett","Webster","Hunter","Gregory","Carr","Lowe","Page","Marsh","Riley","Dunn","Woods","Parsons","Berry","Stone","Reid","Holland","Hawkins","Harding","Porter","Robertson","Newton","Oliver","Reed","Kennedy","Williamson","Bird","Gardner","Shah","Dean","Lane","Cooke","Bates","Henderson","Parry","Burgess","Bishop","Walton","Burns","Nicholson","Shepherd","Ross","Cross","Long","Freeman","Warren","Nicholls","Hamilton","Byrne","Sutton","Mcdonald","Yates","Hodgson","Robson","Curtis","Hopkins","O'connor","Harper","Coleman","Watkins","Moss","Mccarthy","Chambers","O'neill","Griffin","Sharp","Hardy","Wheeler","Potter","Osborne","Johnston","Gordon","Doyle","Wallace","George","Jordan","Hutchinson","Rowe","Burke","May","Pritchard","Gilbert","Willis","Higgins","Read","Miles","Stevenson","Stephenson","Hammond","Arnold","Buckley","Walters","Hewitt","Barber","Nelson","Slater","Austin","Sullivan","Whitehead","Mann","Frost","Lambert","Stephens","Blake","Akhtar","Lynch","Goodwin","Barton","Woodward","Thomson","Cunningham","Quinn","Barnett","Baxter","Bibi","Clayton","Nash","Greenwood","Jennings","Holt","Kemp","Poole","Gallagher","Bond","Stokes","Tucker","Davidson","Fowler","Heath","Norman","Middleton","Lawson","Banks","French","Stanley","Jarvis","Gibbs","Ferguson","Hayward","Carroll","Douglas","Dickinson","Todd","Barlow","Peters","Lucas","Knowles","Hartley","Miah","Simmons","Morton","Alexander","Field","Morrison","Norris","Townsend","Preston","Hancock","Thornton","Baldwin","Burrows","Briggs","Parkinson","Reeves","Macdonald","Lamb","Black","Abbott","Sanders","Thorpe","Holden","Tomlinson","Perkins","Ashton","Rhodes","Fuller","Howe","Bryant","Vaughan","Dale","Davey","Weston","Bartlett","Whittaker","Davison","Kent","Skinner","Birch","Morley","Daniels","Glover","Howell","Cartwright","Pugh","Humphreys","Goddard","Brennan","Wall","Kirby","Bowen","Savage","Bull","Wong","Dobson","Smart","Wilkins","Kirk","Fraser","Duffy","Hicks","Patterson","Bradshaw","Little","Archer","Warner","Waters","O'sullivan","Farrell","Brookes","Atkins","Kay","Dodd","Bentley","Flynn","John","Schofield","Short","Haynes","Wade","Butcher","Henry","Sanderson","Crawford","Sheppard","Bolton","Coates","Giles","Gould","Houghton","Gibbons","Pratt","Manning","Law","Hooper","Noble","Dyer","Rahman","Clements","Moran","Sykes","Chan","Doherty","Connolly","Joyce","Franklin","Hobbs","Coles","Herbert","Steele","Kerr","Leach","Winter","Owens","Duncan","Naylor","Fleming","Horton","Finch","Fitzgerald","Randall","Carpenter","Marsden","Browne","Garner","Pickering","Hale","Dennis","Vincent","Chadwick","Chandler","Sharpe","Nolan","Lyons","Hurst","Collier","Peacock","Howarth","Faulkner","Rice","Pollard","Welch","Norton","Gough","Sinclair","Blackburn","Bryan","Conway","Power","Cameron","Daly","Allan","Hanson","Gardiner","Boyle","Myers","Turnbull","Wallis","Mahmood","Sims","Swift","Iqbal","Pope","Brady","Chamberlain","Rowley","Tyler","Farmer","Metcalfe","Hilton","Godfrey","Holloway","Parkin","Bray","Talbot","Donnelly","Nixon","Charlton","Benson","Whitehouse","Barry","Hope","Lord","North","Storey","Connor","Potts","Bevan","Hargreaves","Mclean","Mistry","Bruce","Howells","Hyde","Parkes","Wyatt","Fry","Lees","O'donnell","Craig","Forster","Mckenzie","Humphries","Mellor","Carey","Ingram","Summers","Leonard"],de:["Mller","Schmidt","Schneider","Fischer","Weber","Meyer","Wagner","Becker","Schulz","Hoffmann","Schfer","Koch","Bauer","Richter","Klein","Wolf","Schrder","Neumann","Schwarz","Zimmermann","Braun","Krger","Hofmann","Hartmann","Lange","Schmitt","Werner","Schmitz","Krause","Meier","Lehmann","Schmid","Schulze","Maier","Khler","Herrmann","Knig","Walter","Mayer","Huber","Kaiser","Fuchs","Peters","Lang","Scholz","Mller","Wei","Jung","Hahn","Schubert","Vogel","Friedrich","Keller","Gnther","Frank","Berger","Winkler","Roth","Beck","Lorenz","Baumann","Franke","Albrecht","Schuster","Simon","Ludwig","Bhm","Winter","Kraus","Martin","Schumacher","Krmer","Vogt","Stein","Jger","Otto","Sommer","Gro","Seidel","Heinrich","Brandt","Haas","Schreiber","Graf","Schulte","Dietrich","Ziegler","Kuhn","Khn","Pohl","Engel","Horn","Busch","Bergmann","Thomas","Voigt","Sauer","Arnold","Wolff","Pfeiffer"],jp:["Sato","Suzuki","Takahashi","Tanaka","Watanabe","Ito","Yamamoto","Nakamura","Kobayashi","Kato","Yoshida","Yamada","Sasaki","Yamaguchi","Saito","Matsumoto","Inoue","Kimura","Hayashi","Shimizu","Yamazaki","Mori","Abe","Ikeda","Hashimoto","Yamashita","Ishikawa","Nakajima","Maeda","Fujita","Ogawa","Goto","Okada","Hasegawa","Murakami","Kondo","Ishii","Saito","Sakamoto","Endo","Aoki","Fujii","Nishimura","Fukuda","Ota","Miura","Fujiwara","Okamoto","Matsuda","Nakagawa","Nakano","Harada","Ono","Tamura","Takeuchi","Kaneko","Wada","Nakayama","Ishida","Ueda","Morita","Hara","Shibata","Sakai","Kudo","Yokoyama","Miyazaki","Miyamoto","Uchida","Takagi","Ando","Taniguchi","Ohno","Maruyama","Imai","Takada","Fujimoto","Takeda","Murata","Ueno","Sugiyama","Masuda","Sugawara","Hirano","Kojima","Otsuka","Chiba","Kubo","Matsui","Iwasaki","Sakurai","Kinoshita","Noguchi","Matsuo","Nomura","Kikuchi","Sano","Onishi","Sugimoto","Arai"],es:["Garcia","Fernandez","Lopez","Martinez","Gonzalez","Rodriguez","Sanchez","Perez","Martin","Gomez","Ruiz","Diaz","Hernandez","Alvarez","Jimenez","Moreno","Munoz","Alonso","Romero","Navarro","Gutierrez","Torres","Dominguez","Gil","Vazquez","Blanco","Serrano","Ramos","Castro","Suarez","Sanz","Rubio","Ortega","Molina","Delgado","Ortiz","Morales","Ramirez","Marin","Iglesias","Santos","Castillo","Garrido","Calvo","Pena","Cruz","Cano","Nunez","Prieto","Diez","Lozano","Vidal","Pascual","Ferrer","Medina","Vega","Leon","Herrero","Vicente","Mendez","Guerrero","Fuentes","Campos","Nieto","Cortes","Caballero","Ibanez","Lorenzo","Pastor","Gimenez","Saez","Soler","Marquez","Carrasco","Herrera","Montero","Arias","Crespo","Flores","Andres","Aguilar","Hidalgo","Cabrera","Mora","Duran","Velasco","Rey","Pardo","Roman","Vila","Bravo","Merino","Moya","Soto","Izquierdo","Reyes","Redondo","Marcos","Carmona","Menendez"],fr:["Martin","Bernard","Thomas","Petit","Robert","Richard","Durand","Dubois","Moreau","Laurent","Simon","Michel","Lefvre","Leroy","Roux","David","Bertrand","Morel","Fournier","Girard","Bonnet","Dupont","Lambert","Fontaine","Rousseau","Vincent","Mller","Lefvre","Faure","Andr","Mercier","Blanc","Gurin","Boyer","Garnier","Chevalier","Franois","Legrand","Gauthier","Garcia","Perrin","Robin","Clment","Morin","Nicolas","Henry","Roussel","Matthieu","Gautier","Masson","Marchand","Duval","Denis","Dumont","Marie","Lemaire","Nol","Meyer","Dufour","Meunier","Brun","Blanchard","Giraud","Joly","Rivire","Lucas","Brunet","Gaillard","Barbier","Arnaud","Martnez","Grard","Roche","Renard","Schmitt","Roy","Leroux","Colin","Vidal","Caron","Picard","Roger","Fabre","Aubert","Lemoine","Renaud","Dumas","Lacroix","Olivier","Philippe","Bourgeois","Pierre","Benot","Rey","Leclerc","Payet","Rolland","Leclercq","Guillaume","Lecomte","Lpez","Jean","Dupuy","Guillot","Hubert","Berger","Carpentier","Snchez","Dupuis","Moulin","Louis","Deschamps","Huet","Vasseur","Perez","Boucher","Fleury","Royer","Klein","Jacquet","Adam","Paris","Poirier","Marty","Aubry","Guyot","Carr","Charles","Renault","Charpentier","Mnard","Maillard","Baron","Bertin","Bailly","Herv","Schneider","Fernndez","Le GallGall","Collet","Lger","Bouvier","Julien","Prvost","Millet","Perrot","Daniel","Le RouxRoux","Cousin","Germain","Breton","Besson","Langlois","Rmi","Le GoffGoff","Pelletier","Lvque","Perrier","Leblanc","Barr","Lebrun","Marchal","Weber","Mallet","Hamon","Boulanger","Jacob","Monnier","Michaud","Rodrguez","Guichard","Gillet","tienne","Grondin","Poulain","Tessier","Chevallier","Collin","Chauvin","Da SilvaSilva","Bouchet","Gay","Lematre","Bnard","Marchal","Humbert","Reynaud","Antoine","Hoarau","Perret","Barthlemy","Cordier","Pichon","Lejeune","Gilbert","Lamy","Delaunay","Pasquier","Carlier","LaporteLaporte"]},countries:[{name:"Afghanistan",abbreviation:"AF"},{name:"land Islands",abbreviation:"AX"},{name:"Albania",abbreviation:"AL"},{name:"Algeria",abbreviation:"DZ"},{name:"American Samoa",abbreviation:"AS"},{name:"Andorra",abbreviation:"AD"},{name:"Angola",abbreviation:"AO"},{name:"Anguilla",abbreviation:"AI"},{name:"Antarctica",abbreviation:"AQ"},{name:"Antigua & Barbuda",abbreviation:"AG"},{name:"Argentina",abbreviation:"AR"},{name:"Armenia",abbreviation:"AM"},{name:"Aruba",abbreviation:"AW"},{name:"Ascension Island",abbreviation:"AC"},{name:"Australia",abbreviation:"AU"},{name:"Austria",abbreviation:"AT"},{name:"Azerbaijan",abbreviation:"AZ"},{name:"Bahamas",abbreviation:"BS"},{name:"Bahrain",abbreviation:"BH"},{name:"Bangladesh",abbreviation:"BD"},{name:"Barbados",abbreviation:"BB"},{name:"Belarus",abbreviation:"BY"},{name:"Belgium",abbreviation:"BE"},{name:"Belize",abbreviation:"BZ"},{name:"Benin",abbreviation:"BJ"},{name:"Bermuda",abbreviation:"BM"},{name:"Bhutan",abbreviation:"BT"},{name:"Bolivia",abbreviation:"BO"},{name:"Bosnia & Herzegovina",abbreviation:"BA"},{name:"Botswana",abbreviation:"BW"},{name:"Brazil",abbreviation:"BR"},{name:"British Indian Ocean Territory",abbreviation:"IO"},{name:"British Virgin Islands",abbreviation:"VG"},{name:"Brunei",abbreviation:"BN"},{name:"Bulgaria",abbreviation:"BG"},{name:"Burkina Faso",abbreviation:"BF"},{name:"Burundi",abbreviation:"BI"},{name:"Cambodia",abbreviation:"KH"},{name:"Cameroon",abbreviation:"CM"},{name:"Canada",abbreviation:"CA"},{name:"Canary Islands",abbreviation:"IC"},{name:"Cape Verde",abbreviation:"CV"},{name:"Caribbean Netherlands",abbreviation:"BQ"},{name:"Cayman Islands",abbreviation:"KY"},{name:"Central African Republic",abbreviation:"CF"},{name:"Ceuta & Melilla",abbreviation:"EA"},{name:"Chad",abbreviation:"TD"},{name:"Chile",abbreviation:"CL"},{name:"China",abbreviation:"CN"},{name:"Christmas Island",abbreviation:"CX"},{name:"Cocos (Keeling) Islands",abbreviation:"CC"},{name:"Colombia",abbreviation:"CO"},{name:"Comoros",abbreviation:"KM"},{name:"Congo - Brazzaville",abbreviation:"CG"},{name:"Congo - Kinshasa",abbreviation:"CD"},{name:"Cook Islands",abbreviation:"CK"},{name:"Costa Rica",abbreviation:"CR"},{name:"Cte d'Ivoire",abbreviation:"CI"},{name:"Croatia",abbreviation:"HR"},{name:"Cuba",abbreviation:"CU"},{name:"Curaao",abbreviation:"CW"},{name:"Cyprus",abbreviation:"CY"},{name:"Czech Republic",abbreviation:"CZ"},{name:"Denmark",abbreviation:"DK"},{name:"Diego Garcia",abbreviation:"DG"},{name:"Djibouti",abbreviation:"DJ"},{name:"Dominica",abbreviation:"DM"},{name:"Dominican Republic",abbreviation:"DO"},{name:"Ecuador",abbreviation:"EC"},{name:"Egypt",abbreviation:"EG"},{name:"El Salvador",abbreviation:"SV"},{name:"Equatorial Guinea",abbreviation:"GQ"},{name:"Eritrea",abbreviation:"ER"},{name:"Estonia",abbreviation:"EE"},{name:"Ethiopia",abbreviation:"ET"},{name:"Falkland Islands",abbreviation:"FK"},{name:"Faroe Islands",abbreviation:"FO"},{name:"Fiji",abbreviation:"FJ"},{name:"Finland",abbreviation:"FI"},{name:"France",abbreviation:"FR"},{name:"French Guiana",abbreviation:"GF"},{name:"French Polynesia",abbreviation:"PF"},{name:"French Southern Territories",abbreviation:"TF"},{name:"Gabon",abbreviation:"GA"},{name:"Gambia",abbreviation:"GM"},{name:"Georgia",abbreviation:"GE"},{name:"Germany",abbreviation:"DE"},{name:"Ghana",abbreviation:"GH"},{name:"Gibraltar",abbreviation:"GI"},{name:"Greece",abbreviation:"GR"},{name:"Greenland",abbreviation:"GL"},{name:"Grenada",abbreviation:"GD"},{name:"Guadeloupe",abbreviation:"GP"},{name:"Guam",abbreviation:"GU"},{name:"Guatemala",abbreviation:"GT"},{name:"Guernsey",abbreviation:"GG"},{name:"Guinea",abbreviation:"GN"},{name:"Guinea-Bissau",abbreviation:"GW"},{name:"Guyana",abbreviation:"GY"},{name:"Haiti",abbreviation:"HT"},{name:"Honduras",abbreviation:"HN"},{name:"Hong Kong SAR China",abbreviation:"HK"},{name:"Hungary",abbreviation:"HU"},{name:"Iceland",abbreviation:"IS"},{name:"India",abbreviation:"IN"},{name:"Indonesia",abbreviation:"ID"},{name:"Iran",abbreviation:"IR"},{name:"Iraq",abbreviation:"IQ"},{name:"Ireland",abbreviation:"IE"},{name:"Isle of Man",abbreviation:"IM"},{name:"Israel",abbreviation:"IL"},{name:"Italy",abbreviation:"IT"},{name:"Jamaica",abbreviation:"JM"},{name:"Japan",abbreviation:"JP"},{name:"Jersey",abbreviation:"JE"},{name:"Jordan",abbreviation:"JO"},{name:"Kazakhstan",abbreviation:"KZ"},{name:"Kenya",abbreviation:"KE"},{name:"Kiribati",abbreviation:"KI"},{name:"Kosovo",abbreviation:"XK"},{name:"Kuwait",abbreviation:"KW"},{name:"Kyrgyzstan",abbreviation:"KG"},{name:"Laos",abbreviation:"LA"},{name:"Latvia",abbreviation:"LV"},{name:"Lebanon",abbreviation:"LB"},{name:"Lesotho",abbreviation:"LS"},{name:"Liberia",abbreviation:"LR"},{name:"Libya",abbreviation:"LY"},{name:"Liechtenstein",abbreviation:"LI"},{name:"Lithuania",abbreviation:"LT"},{name:"Luxembourg",abbreviation:"LU"},{name:"Macau SAR China",abbreviation:"MO"},{name:"Macedonia",abbreviation:"MK"},{name:"Madagascar",abbreviation:"MG"},{name:"Malawi",abbreviation:"MW"},{name:"Malaysia",abbreviation:"MY"},{name:"Maldives",abbreviation:"MV"},{name:"Mali",abbreviation:"ML"},{name:"Malta",abbreviation:"MT"},{name:"Marshall Islands",abbreviation:"MH"},{name:"Martinique",abbreviation:"MQ"},{name:"Mauritania",abbreviation:"MR"},{name:"Mauritius",abbreviation:"MU"},{name:"Mayotte",abbreviation:"YT"},{name:"Mexico",abbreviation:"MX"},{name:"Micronesia",abbreviation:"FM"},{name:"Moldova",abbreviation:"MD"},{name:"Monaco",abbreviation:"MC"},{name:"Mongolia",abbreviation:"MN"},{name:"Montenegro",abbreviation:"ME"},{name:"Montserrat",abbreviation:"MS"},{name:"Morocco",abbreviation:"MA"},{name:"Mozambique",abbreviation:"MZ"},{name:"Myanmar (Burma)",abbreviation:"MM"},{name:"Namibia",abbreviation:"NA"},{name:"Nauru",abbreviation:"NR"},{name:"Nepal",abbreviation:"NP"},{name:"Netherlands",abbreviation:"NL"},{name:"New Caledonia",abbreviation:"NC"},{name:"New Zealand",abbreviation:"NZ"},{name:"Nicaragua",abbreviation:"NI"},{name:"Niger",abbreviation:"NE"},{name:"Nigeria",abbreviation:"NG"},{name:"Niue",abbreviation:"NU"},{name:"Norfolk Island",abbreviation:"NF"},{name:"North Korea",abbreviation:"KP"},{name:"Northern Mariana Islands",abbreviation:"MP"},{name:"Norway",abbreviation:"NO"},{name:"Oman",abbreviation:"OM"},{name:"Pakistan",abbreviation:"PK"},{name:"Palau",abbreviation:"PW"},{name:"Palestinian Territories",abbreviation:"PS"},{name:"Panama",abbreviation:"PA"},{name:"Papua New Guinea",abbreviation:"PG"},{name:"Paraguay",abbreviation:"PY"},{name:"Peru",abbreviation:"PE"},{name:"Philippines",abbreviation:"PH"},{name:"Pitcairn Islands",abbreviation:"PN"},{name:"Poland",abbreviation:"PL"},{name:"Portugal",abbreviation:"PT"},{name:"Puerto Rico",abbreviation:"PR"},{name:"Qatar",abbreviation:"QA"},{name:"Runion",abbreviation:"RE"},{name:"Romania",abbreviation:"RO"},{name:"Russia",abbreviation:"RU"},{name:"Rwanda",abbreviation:"RW"},{name:"Samoa",abbreviation:"WS"},{name:"San Marino",abbreviation:"SM"},{name:"So Tom and Prncipe",abbreviation:"ST"},{name:"Saudi Arabia",abbreviation:"SA"},{name:"Senegal",abbreviation:"SN"},{name:"Serbia",abbreviation:"RS"},{name:"Seychelles",abbreviation:"SC"},{name:"Sierra Leone",abbreviation:"SL"},{name:"Singapore",abbreviation:"SG"},{name:"Sint Maarten",abbreviation:"SX"},{name:"Slovakia",abbreviation:"SK"},{name:"Slovenia",abbreviation:"SI"},{name:"Solomon Islands",abbreviation:"SB"},{name:"Somalia",abbreviation:"SO"},{name:"South Africa",abbreviation:"ZA"},{name:"South Georgia & South Sandwich Islands",abbreviation:"GS"},{name:"South Korea",abbreviation:"KR"},{name:"South Sudan",abbreviation:"SS"},{name:"Spain",abbreviation:"ES"},{name:"Sri Lanka",abbreviation:"LK"},{name:"St. Barthlemy",abbreviation:"BL"},{name:"St. Helena",abbreviation:"SH"},{name:"St. Kitts & Nevis",abbreviation:"KN"},{name:"St. Lucia",abbreviation:"LC"},{name:"St. Martin",abbreviation:"MF"},{name:"St. Pierre & Miquelon",abbreviation:"PM"},{name:"St. Vincent & Grenadines",abbreviation:"VC"},{name:"Sudan",abbreviation:"SD"},{name:"Suriname",abbreviation:"SR"},{name:"Svalbard & Jan Mayen",abbreviation:"SJ"},{name:"Swaziland",abbreviation:"SZ"},{name:"Sweden",abbreviation:"SE"},{name:"Switzerland",abbreviation:"CH"},{name:"Syria",abbreviation:"SY"},{name:"Taiwan",abbreviation:"TW"},{name:"Tajikistan",abbreviation:"TJ"},{name:"Tanzania",abbreviation:"TZ"},{name:"Thailand",abbreviation:"TH"},{name:"Timor-Leste",abbreviation:"TL"},{name:"Togo",abbreviation:"TG"},{name:"Tokelau",abbreviation:"TK"},{name:"Tonga",abbreviation:"TO"},{name:"Trinidad & Tobago",abbreviation:"TT"},{name:"Tristan da Cunha",abbreviation:"TA"},{name:"Tunisia",abbreviation:"TN"},{name:"Turkey",abbreviation:"TR"},{name:"Turkmenistan",abbreviation:"TM"},{name:"Turks & Caicos Islands",abbreviation:"TC"},{name:"Tuvalu",abbreviation:"TV"},{name:"U.S. Outlying Islands",abbreviation:"UM"},{name:"U.S. Virgin Islands",abbreviation:"VI"},{name:"Uganda",abbreviation:"UG"},{name:"Ukraine",abbreviation:"UA"},{name:"United Arab Emirates",abbreviation:"AE"},{name:"United Kingdom",abbreviation:"GB"},{name:"United States",abbreviation:"US"},{name:"Uruguay",abbreviation:"UY"},{name:"Uzbekistan",abbreviation:"UZ"},{name:"Vanuatu",abbreviation:"VU"},{name:"Vatican City",abbreviation:"VA"},{name:"Venezuela",abbreviation:"VE"},{name:"Vietnam",abbreviation:"VN"},{name:"Wallis & Futuna",abbreviation:"WF"},{name:"Western Sahara",abbreviation:"EH"},{name:"Yemen",abbreviation:"YE"},{name:"Zambia",abbreviation:"ZM"},{name:"Zimbabwe",abbreviation:"ZW"}],counties:{uk:[{name:"Bath and North East Somerset"},{name:"Aberdeenshire"},{name:"Anglesey"},{name:"Angus"},{name:"Bedford"},{name:"Blackburn with Darwen"},{name:"Blackpool"},{name:"Bournemouth"},{name:"Bracknell Forest"},{name:"Brighton & Hove"},{name:"Bristol"},{name:"Buckinghamshire"},{name:"Cambridgeshire"},{name:"Carmarthenshire"},{name:"Central Bedfordshire"},{name:"Ceredigion"},{name:"Cheshire East"},{name:"Cheshire West and Chester"},{name:"Clackmannanshire"},{name:"Conwy"},{name:"Cornwall"},{name:"County Antrim"},{name:"County Armagh"},{name:"County Down"},{name:"County Durham"},{name:"County Fermanagh"},{name:"County Londonderry"},{name:"County Tyrone"},{name:"Cumbria"},{name:"Darlington"},{name:"Denbighshire"},{name:"Derby"},{name:"Derbyshire"},{name:"Devon"},{name:"Dorset"},{name:"Dumfries and Galloway"},{name:"Dundee"},{name:"East Lothian"},{name:"East Riding of Yorkshire"},{name:"East Sussex"},{name:"Edinburgh?"},{name:"Essex"},{name:"Falkirk"},{name:"Fife"},{name:"Flintshire"},{name:"Gloucestershire"},{name:"Greater London"},{name:"Greater Manchester"},{name:"Gwent"},{name:"Gwynedd"},{name:"Halton"},{name:"Hampshire"},{name:"Hartlepool"},{name:"Herefordshire"},{name:"Hertfordshire"},{name:"Highlands"},{name:"Hull"},{name:"Isle of Wight"},{name:"Isles of Scilly"},{name:"Kent"},{name:"Lancashire"},{name:"Leicester"},{name:"Leicestershire"},{name:"Lincolnshire"},{name:"Lothian"},{name:"Luton"},{name:"Medway"},{name:"Merseyside"},{name:"Mid Glamorgan"},{name:"Middlesbrough"},{name:"Milton Keynes"},{name:"Monmouthshire"},{name:"Moray"},{name:"Norfolk"},{name:"North East Lincolnshire"},{name:"North Lincolnshire"},{name:"North Somerset"},{name:"North Yorkshire"},{name:"Northamptonshire"},{name:"Northumberland"},{name:"Nottingham"},{name:"Nottinghamshire"},{name:"Oxfordshire"},{name:"Pembrokeshire"},{name:"Perth and Kinross"},{name:"Peterborough"},{name:"Plymouth"},{name:"Poole"},{name:"Portsmouth"},{name:"Powys"},{name:"Reading"},{name:"Redcar and Cleveland"},{name:"Rutland"},{name:"Scottish Borders"},{name:"Shropshire"},{name:"Slough"},{name:"Somerset"},{name:"South Glamorgan"},{name:"South Gloucestershire"},{name:"South Yorkshire"},{name:"Southampton"},{name:"Southend-on-Sea"},{name:"Staffordshire"},{name:"Stirlingshire"},{name:"Stockton-on-Tees"},{name:"Stoke-on-Trent"},{name:"Strathclyde"},{name:"Suffolk"},{name:"Surrey"},{name:"Swindon"},{name:"Telford and Wrekin"},{name:"Thurrock"},{name:"Torbay"},{name:"Tyne and Wear"},{name:"Warrington"},{name:"Warwickshire"},{name:"West Berkshire"},{name:"West Glamorgan"},{name:"West Lothian"},{name:"West Midlands"},{name:"West Sussex"},{name:"West Yorkshire"},{name:"Western Isles"},{name:"Wiltshire"},{name:"Windsor and Maidenhead"},{name:"Wokingham"},{name:"Worcestershire"},{name:"Wrexham"},{name:"York"}]},provinces:{ca:[{name:"Alberta",abbreviation:"AB"},{name:"British Columbia",abbreviation:"BC"},{name:"Manitoba",abbreviation:"MB"},{name:"New Brunswick",abbreviation:"NB"},{name:"Newfoundland and Labrador",abbreviation:"NL"},{name:"Nova Scotia",abbreviation:"NS"},{name:"Ontario",abbreviation:"ON"},{name:"Prince Edward Island",abbreviation:"PE"},{name:"Quebec",abbreviation:"QC"},{name:"Saskatchewan",abbreviation:"SK"},{name:"Northwest Territories",abbreviation:"NT"},{name:"Nunavut",abbreviation:"NU"},{name:"Yukon",abbreviation:"YT"}],it:[{name:"Agrigento",abbreviation:"AG",code:84},{name:"Alessandria",abbreviation:"AL",code:6},{name:"Ancona",abbreviation:"AN",code:42},{name:"Aosta",abbreviation:"AO",code:7},{name:"L'Aquila",abbreviation:"AQ",code:66},{name:"Arezzo",abbreviation:"AR",code:51},{name:"Ascoli-Piceno",abbreviation:"AP",code:44},{name:"Asti",abbreviation:"AT",code:5},{name:"Avellino",abbreviation:"AV",code:64},{name:"Bari",abbreviation:"BA",code:72},{name:"Barletta-Andria-Trani",abbreviation:"BT",code:72},{name:"Belluno",abbreviation:"BL",code:25},{name:"Benevento",abbreviation:"BN",code:62},{name:"Bergamo",abbreviation:"BG",code:16},{name:"Biella",abbreviation:"BI",code:96},{name:"Bologna",abbreviation:"BO",code:37},{name:"Bolzano",abbreviation:"BZ",code:21},{name:"Brescia",abbreviation:"BS",code:17},{name:"Brindisi",abbreviation:"BR",code:74},{name:"Cagliari",abbreviation:"CA",code:92},{name:"Caltanissetta",abbreviation:"CL",code:85},{name:"Campobasso",abbreviation:"CB",code:70},{name:"Carbonia Iglesias",abbreviation:"CI",code:70},{name:"Caserta",abbreviation:"CE",code:61},{name:"Catania",abbreviation:"CT",code:87},{name:"Catanzaro",abbreviation:"CZ",code:79},{name:"Chieti",abbreviation:"CH",code:69},{name:"Como",abbreviation:"CO",code:13},{name:"Cosenza",abbreviation:"CS",code:78},{name:"Cremona",abbreviation:"CR",code:19},{name:"Crotone",abbreviation:"KR",code:101},{name:"Cuneo",abbreviation:"CN",code:4},{name:"Enna",abbreviation:"EN",code:86},{name:"Fermo",abbreviation:"FM",code:86},{name:"Ferrara",abbreviation:"FE",code:38},{name:"Firenze",abbreviation:"FI",code:48},{name:"Foggia",abbreviation:"FG",code:71},{name:"Forli-Cesena",abbreviation:"FC",code:71},{name:"Frosinone",abbreviation:"FR",code:60},{name:"Genova",abbreviation:"GE",code:10},{name:"Gorizia",abbreviation:"GO",code:31},{name:"Grosseto",abbreviation:"GR",code:53},{name:"Imperia",abbreviation:"IM",code:8},{name:"Isernia",abbreviation:"IS",code:94},{name:"La-Spezia",abbreviation:"SP",code:66},{name:"Latina",abbreviation:"LT",code:59},{name:"Lecce",abbreviation:"LE",code:75},{name:"Lecco",abbreviation:"LC",code:97},{name:"Livorno",abbreviation:"LI",code:49},{name:"Lodi",abbreviation:"LO",code:98},{name:"Lucca",abbreviation:"LU",code:46},{name:"Macerata",abbreviation:"MC",code:43},{name:"Mantova",abbreviation:"MN",code:20},{name:"Massa-Carrara",abbreviation:"MS",code:45},{name:"Matera",abbreviation:"MT",code:77},{name:"Medio Campidano",abbreviation:"VS",code:77},{name:"Messina",abbreviation:"ME",code:83},{name:"Milano",abbreviation:"MI",code:15},{name:"Modena",abbreviation:"MO",code:36},{name:"Monza-Brianza",abbreviation:"MB",code:36},{name:"Napoli",abbreviation:"NA",code:63},{name:"Novara",abbreviation:"NO",code:3},{name:"Nuoro",abbreviation:"NU",code:91},{name:"Ogliastra",abbreviation:"OG",code:91},{name:"Olbia Tempio",abbreviation:"OT",code:91},{name:"Oristano",abbreviation:"OR",code:95},{name:"Padova",abbreviation:"PD",code:28},{name:"Palermo",abbreviation:"PA",code:82},{name:"Parma",abbreviation:"PR",code:34},{name:"Pavia",abbreviation:"PV",code:18},{name:"Perugia",abbreviation:"PG",code:54},{name:"Pesaro-Urbino",abbreviation:"PU",code:41},{name:"Pescara",abbreviation:"PE",code:68},{name:"Piacenza",abbreviation:"PC",code:33},{name:"Pisa",abbreviation:"PI",code:50},{name:"Pistoia",abbreviation:"PT",code:47},{name:"Pordenone",abbreviation:"PN",code:93},{name:"Potenza",abbreviation:"PZ",code:76},{name:"Prato",abbreviation:"PO",code:100},{name:"Ragusa",abbreviation:"RG",code:88},{name:"Ravenna",abbreviation:"RA",code:39},{name:"Reggio-Calabria",abbreviation:"RC",code:35},{name:"Reggio-Emilia",abbreviation:"RE",code:35},{name:"Rieti",abbreviation:"RI",code:57},{name:"Rimini",abbreviation:"RN",code:99},{name:"Roma",abbreviation:"Roma",code:58},{name:"Rovigo",abbreviation:"RO",code:29},{name:"Salerno",abbreviation:"SA",code:65},{name:"Sassari",abbreviation:"SS",code:90},{name:"Savona",abbreviation:"SV",code:9},{name:"Siena",abbreviation:"SI",code:52},{name:"Siracusa",abbreviation:"SR",code:89},{name:"Sondrio",abbreviation:"SO",code:14},{name:"Taranto",abbreviation:"TA",code:73},{name:"Teramo",abbreviation:"TE",code:67},{name:"Terni",abbreviation:"TR",code:55},{name:"Torino",abbreviation:"TO",code:1},{name:"Trapani",abbreviation:"TP",code:81},{name:"Trento",abbreviation:"TN",code:22},{name:"Treviso",abbreviation:"TV",code:26},{name:"Trieste",abbreviation:"TS",code:32},{name:"Udine",abbreviation:"UD",code:30},{name:"Varese",abbreviation:"VA",code:12},{name:"Venezia",abbreviation:"VE",code:27},{name:"Verbania",abbreviation:"VB",code:27},{name:"Vercelli",abbreviation:"VC",code:2},{name:"Verona",abbreviation:"VR",code:23},{name:"Vibo-Valentia",abbreviation:"VV",code:102},{name:"Vicenza",abbreviation:"VI",code:24},{name:"Viterbo",abbreviation:"VT",code:56}]},nationalities:[{name:"Afghan"},{name:"Albanian"},{name:"Algerian"},{name:"American"},{name:"Andorran"},{name:"Angolan"},{name:"Antiguans"},{name:"Argentinean"},{name:"Armenian"},{name:"Australian"},{name:"Austrian"},{name:"Azerbaijani"},{name:"Bahami"},{name:"Bahraini"},{name:"Bangladeshi"},{name:"Barbadian"},{name:"Barbudans"},{name:"Batswana"},{name:"Belarusian"},{name:"Belgian"},{name:"Belizean"},{name:"Beninese"},{name:"Bhutanese"},{name:"Bolivian"},{name:"Bosnian"},{name:"Brazilian"},{name:"British"},{name:"Bruneian"},{name:"Bulgarian"},{name:"Burkinabe"},{name:"Burmese"},{name:"Burundian"},{name:"Cambodian"},{name:"Cameroonian"},{name:"Canadian"},{name:"Cape Verdean"},{name:"Central African"},{name:"Chadian"},{name:"Chilean"},{name:"Chinese"},{name:"Colombian"},{name:"Comoran"},{name:"Congolese"},{name:"Costa Rican"},{name:"Croatian"},{name:"Cuban"},{name:"Cypriot"},{name:"Czech"},{name:"Danish"},{name:"Djibouti"},{name:"Dominican"},{name:"Dutch"},{name:"East Timorese"},{name:"Ecuadorean"},{name:"Egyptian"},{name:"Emirian"},{name:"Equatorial Guinean"},{name:"Eritrean"},{name:"Estonian"},{name:"Ethiopian"},{name:"Fijian"},{name:"Filipino"},{name:"Finnish"},{name:"French"},{name:"Gabonese"},{name:"Gambian"},{name:"Georgian"},{name:"German"},{name:"Ghanaian"},{name:"Greek"},{name:"Grenadian"},{name:"Guatemalan"},{name:"Guinea-Bissauan"},{name:"Guinean"},{name:"Guyanese"},{name:"Haitian"},{name:"Herzegovinian"},{name:"Honduran"},{name:"Hungarian"},{name:"I-Kiribati"},{name:"Icelander"},{name:"Indian"},{name:"Indonesian"},{name:"Iranian"},{name:"Iraqi"},{name:"Irish"},{name:"Israeli"},{name:"Italian"},{name:"Ivorian"},{name:"Jamaican"},{name:"Japanese"},{name:"Jordanian"},{name:"Kazakhstani"},{name:"Kenyan"},{name:"Kittian and Nevisian"},{name:"Kuwaiti"},{name:"Kyrgyz"},{name:"Laotian"},{name:"Latvian"},{name:"Lebanese"},{name:"Liberian"},{name:"Libyan"},{name:"Liechtensteiner"},{name:"Lithuanian"},{name:"Luxembourger"},{name:"Macedonian"},{name:"Malagasy"},{name:"Malawian"},{name:"Malaysian"},{name:"Maldivan"},{name:"Malian"},{name:"Maltese"},{name:"Marshallese"},{name:"Mauritanian"},{name:"Mauritian"},{name:"Mexican"},{name:"Micronesian"},{name:"Moldovan"},{name:"Monacan"},{name:"Mongolian"},{name:"Moroccan"},{name:"Mosotho"},{name:"Motswana"},{name:"Mozambican"},{name:"Namibian"},{name:"Nauruan"},{name:"Nepalese"},{name:"New Zealander"},{name:"Nicaraguan"},{name:"Nigerian"},{name:"Nigerien"},{name:"North Korean"},{name:"Northern Irish"},{name:"Norwegian"},{name:"Omani"},{name:"Pakistani"},{name:"Palauan"},{name:"Panamanian"},{name:"Papua New Guinean"},{name:"Paraguayan"},{name:"Peruvian"},{name:"Polish"},{name:"Portuguese"},{name:"Qatari"},{name:"Romani"},{name:"Russian"},{name:"Rwandan"},{name:"Saint Lucian"},{name:"Salvadoran"},{name:"Samoan"},{name:"San Marinese"},{name:"Sao Tomean"},{name:"Saudi"},{name:"Scottish"},{name:"Senegalese"},{name:"Serbian"},{name:"Seychellois"},{name:"Sierra Leonean"},{name:"Singaporean"},{name:"Slovakian"},{name:"Slovenian"},{name:"Solomon Islander"},{name:"Somali"},{name:"South African"},{name:"South Korean"},{name:"Spanish"},{name:"Sri Lankan"},{name:"Sudanese"},{name:"Surinamer"},{name:"Swazi"},{name:"Swedish"},{name:"Swiss"},{name:"Syrian"},{name:"Taiwanese"},{name:"Tajik"},{name:"Tanzanian"},{name:"Thai"},{name:"Togolese"},{name:"Tongan"},{name:"Trinidadian or Tobagonian"},{name:"Tunisian"},{name:"Turkish"},{name:"Tuvaluan"},{name:"Ugandan"},{name:"Ukrainian"},{name:"Uruguaya"},{name:"Uzbekistani"},{name:"Venezuela"},{name:"Vietnamese"},{name:"Wels"},{name:"Yemenit"},{name:"Zambia"},{name:"Zimbabwe"}],locale_languages:["aa","ab","ae","af","ak","am","an","ar","as","av","ay","az","ba","be","bg","bh","bi","bm","bn","bo","br","bs","ca","ce","ch","co","cr","cs","cu","cv","cy","da","de","dv","dz","ee","el","en","eo","es","et","eu","fa","ff","fi","fj","fo","fr","fy","ga","gd","gl","gn","gu","gv","ha","he","hi","ho","hr","ht","hu","hy","hz","ia","id","ie","ig","ii","ik","io","is","it","iu","ja","jv","ka","kg","ki","kj","kk","kl","km","kn","ko","kr","ks","ku","kv","kw","ky","la","lb","lg","li","ln","lo","lt","lu","lv","mg","mh","mi","mk","ml","mn","mr","ms","mt","my","na","nb","nd","ne","ng","nl","nn","no","nr","nv","ny","oc","oj","om","or","os","pa","pi","pl","ps","pt","qu","rm","rn","ro","ru","rw","sa","sc","sd","se","sg","si","sk","sl","sm","sn","so","sq","sr","ss","st","su","sv","sw","ta","te","tg","th","ti","tk","tl","tn","to","tr","ts","tt","tw","ty","ug","uk","ur","uz","ve","vi","vo","wa","wo","xh","yi","yo","za","zh","zu"],locale_regions:["agq-CM","asa-TZ","ast-ES","bas-CM","bem-ZM","bez-TZ","brx-IN","cgg-UG","chr-US","dav-KE","dje-NE","dsb-DE","dua-CM","dyo-SN","ebu-KE","ewo-CM","fil-PH","fur-IT","gsw-CH","gsw-FR","gsw-LI","guz-KE","haw-US","hsb-DE","jgo-CM","jmc-TZ","kab-DZ","kam-KE","kde-TZ","kea-CV","khq-ML","kkj-CM","kln-KE","kok-IN","ksb-TZ","ksf-CM","ksh-DE","lag-TZ","lkt-US","luo-KE","luy-KE","mas-KE","mas-TZ","mer-KE","mfe-MU","mgh-MZ","mgo-CM","mua-CM","naq-NA","nmg-CM","nnh-CM","nus-SD","nyn-UG","rof-TZ","rwk-TZ","sah-RU","saq-KE","sbp-TZ","seh-MZ","ses-ML","shi-Latn","shi-Latn-MA","shi-Tfng","shi-Tfng-MA","smn-FI","teo-KE","teo-UG","twq-NE","tzm-Latn","tzm-Latn-MA","vai-Latn","vai-Latn-LR","vai-Vaii","vai-Vaii-LR","vun-TZ","wae-CH","xog-UG","yav-CM","zgh-MA","af-NA","af-ZA","ak-GH","am-ET","ar-001","ar-AE","ar-BH","ar-DJ","ar-DZ","ar-EG","ar-EH","ar-ER","ar-IL","ar-IQ","ar-JO","ar-KM","ar-KW","ar-LB","ar-LY","ar-MA","ar-MR","ar-OM","ar-PS","ar-QA","ar-SA","ar-SD","ar-SO","ar-SS","ar-SY","ar-TD","ar-TN","ar-YE","as-IN","az-Cyrl","az-Cyrl-AZ","az-Latn","az-Latn-AZ","be-BY","bg-BG","bm-Latn","bm-Latn-ML","bn-BD","bn-IN","bo-CN","bo-IN","br-FR","bs-Cyrl","bs-Cyrl-BA","bs-Latn","bs-Latn-BA","ca-AD","ca-ES","ca-ES-VALENCIA","ca-FR","ca-IT","cs-CZ","cy-GB","da-DK","da-GL","de-AT","de-BE","de-CH","de-DE","de-LI","de-LU","dz-BT","ee-GH","ee-TG","el-CY","el-GR","en-001","en-150","en-AG","en-AI","en-AS","en-AU","en-BB","en-BE","en-BM","en-BS","en-BW","en-BZ","en-CA","en-CC","en-CK","en-CM","en-CX","en-DG","en-DM","en-ER","en-FJ","en-FK","en-FM","en-GB","en-GD","en-GG","en-GH","en-GI","en-GM","en-GU","en-GY","en-HK","en-IE","en-IM","en-IN","en-IO","en-JE","en-JM","en-KE","en-KI","en-KN","en-KY","en-LC","en-LR","en-LS","en-MG","en-MH","en-MO","en-MP","en-MS","en-MT","en-MU","en-MW","en-MY","en-NA","en-NF","en-NG","en-NR","en-NU","en-NZ","en-PG","en-PH","en-PK","en-PN","en-PR","en-PW","en-RW","en-SB","en-SC","en-SD","en-SG","en-SH","en-SL","en-SS","en-SX","en-SZ","en-TC","en-TK","en-TO","en-TT","en-TV","en-TZ","en-UG","en-UM","en-US","en-US-POSIX","en-VC","en-VG","en-VI","en-VU","en-WS","en-ZA","en-ZM","en-ZW","eo-001","es-419","es-AR","es-BO","es-CL","es-CO","es-CR","es-CU","es-DO","es-EA","es-EC","es-ES","es-GQ","es-GT","es-HN","es-IC","es-MX","es-NI","es-PA","es-PE","es-PH","es-PR","es-PY","es-SV","es-US","es-UY","es-VE","et-EE","eu-ES","fa-AF","fa-IR","ff-CM","ff-GN","ff-MR","ff-SN","fi-FI","fo-FO","fr-BE","fr-BF","fr-BI","fr-BJ","fr-BL","fr-CA","fr-CD","fr-CF","fr-CG","fr-CH","fr-CI","fr-CM","fr-DJ","fr-DZ","fr-FR","fr-GA","fr-GF","fr-GN","fr-GP","fr-GQ","fr-HT","fr-KM","fr-LU","fr-MA","fr-MC","fr-MF","fr-MG","fr-ML","fr-MQ","fr-MR","fr-MU","fr-NC","fr-NE","fr-PF","fr-PM","fr-RE","fr-RW","fr-SC","fr-SN","fr-SY","fr-TD","fr-TG","fr-TN","fr-VU","fr-WF","fr-YT","fy-NL","ga-IE","gd-GB","gl-ES","gu-IN","gv-IM","ha-Latn","ha-Latn-GH","ha-Latn-NE","ha-Latn-NG","he-IL","hi-IN","hr-BA","hr-HR","hu-HU","hy-AM","id-ID","ig-NG","ii-CN","is-IS","it-CH","it-IT","it-SM","ja-JP","ka-GE","ki-KE","kk-Cyrl","kk-Cyrl-KZ","kl-GL","km-KH","kn-IN","ko-KP","ko-KR","ks-Arab","ks-Arab-IN","kw-GB","ky-Cyrl","ky-Cyrl-KG","lb-LU","lg-UG","ln-AO","ln-CD","ln-CF","ln-CG","lo-LA","lt-LT","lu-CD","lv-LV","mg-MG","mk-MK","ml-IN","mn-Cyrl","mn-Cyrl-MN","mr-IN","ms-Latn","ms-Latn-BN","ms-Latn-MY","ms-Latn-SG","mt-MT","my-MM","nb-NO","nb-SJ","nd-ZW","ne-IN","ne-NP","nl-AW","nl-BE","nl-BQ","nl-CW","nl-NL","nl-SR","nl-SX","nn-NO","om-ET","om-KE","or-IN","os-GE","os-RU","pa-Arab","pa-Arab-PK","pa-Guru","pa-Guru-IN","pl-PL","ps-AF","pt-AO","pt-BR","pt-CV","pt-GW","pt-MO","pt-MZ","pt-PT","pt-ST","pt-TL","qu-BO","qu-EC","qu-PE","rm-CH","rn-BI","ro-MD","ro-RO","ru-BY","ru-KG","ru-KZ","ru-MD","ru-RU","ru-UA","rw-RW","se-FI","se-NO","se-SE","sg-CF","si-LK","sk-SK","sl-SI","sn-ZW","so-DJ","so-ET","so-KE","so-SO","sq-AL","sq-MK","sq-XK","sr-Cyrl","sr-Cyrl-BA","sr-Cyrl-ME","sr-Cyrl-RS","sr-Cyrl-XK","sr-Latn","sr-Latn-BA","sr-Latn-ME","sr-Latn-RS","sr-Latn-XK","sv-AX","sv-FI","sv-SE","sw-CD","sw-KE","sw-TZ","sw-UG","ta-IN","ta-LK","ta-MY","ta-SG","te-IN","th-TH","ti-ER","ti-ET","to-TO","tr-CY","tr-TR","ug-Arab","ug-Arab-CN","uk-UA","ur-IN","ur-PK","uz-Arab","uz-Arab-AF","uz-Cyrl","uz-Cyrl-UZ","uz-Latn","uz-Latn-UZ","vi-VN","yi-001","yo-BJ","yo-NG","zh-Hans","zh-Hans-CN","zh-Hans-HK","zh-Hans-MO","zh-Hans-SG","zh-Hant","zh-Hant-HK","zh-Hant-MO","zh-Hant-TW","zu-ZA"],us_states_and_dc:[{name:"Alabama",abbreviation:"AL"},{name:"Alaska",abbreviation:"AK"},{name:"Arizona",abbreviation:"AZ"},{name:"Arkansas",abbreviation:"AR"},{name:"California",abbreviation:"CA"},{name:"Colorado",abbreviation:"CO"},{name:"Connecticut",abbreviation:"CT"},{name:"Delaware",abbreviation:"DE"},{name:"District of Columbia",abbreviation:"DC"},{name:"Florida",abbreviation:"FL"},{name:"Georgia",abbreviation:"GA"},{name:"Hawaii",abbreviation:"HI"},{name:"Idaho",abbreviation:"ID"},{name:"Illinois",abbreviation:"IL"},{name:"Indiana",abbreviation:"IN"},{name:"Iowa",abbreviation:"IA"},{name:"Kansas",abbreviation:"KS"},{name:"Kentucky",abbreviation:"KY"},{name:"Louisiana",abbreviation:"LA"},{name:"Maine",abbreviation:"ME"},{name:"Maryland",abbreviation:"MD"},{name:"Massachusetts",abbreviation:"MA"},{name:"Michigan",abbreviation:"MI"},{name:"Minnesota",abbreviation:"MN"},{name:"Mississippi",abbreviation:"MS"},{name:"Missouri",abbreviation:"MO"},{name:"Montana",abbreviation:"MT"},{name:"Nebraska",abbreviation:"NE"},{name:"Nevada",abbreviation:"NV"},{name:"New Hampshire",abbreviation:"NH"},{name:"New Jersey",abbreviation:"NJ"},{name:"New Mexico",abbreviation:"NM"},{name:"New York",abbreviation:"NY"},{name:"North Carolina",abbreviation:"NC"},{name:"North Dakota",abbreviation:"ND"},{name:"Ohio",abbreviation:"OH"},{name:"Oklahoma",abbreviation:"OK"},{name:"Oregon",abbreviation:"OR"},{name:"Pennsylvania",abbreviation:"PA"},{name:"Rhode Island",abbreviation:"RI"},{name:"South Carolina",abbreviation:"SC"},{name:"South Dakota",abbreviation:"SD"},{name:"Tennessee",abbreviation:"TN"},{name:"Texas",abbreviation:"TX"},{name:"Utah",abbreviation:"UT"},{name:"Vermont",abbreviation:"VT"},{name:"Virginia",abbreviation:"VA"},{name:"Washington",abbreviation:"WA"},{name:"West Virginia",abbreviation:"WV"},{name:"Wisconsin",abbreviation:"WI"},{name:"Wyoming",abbreviation:"WY"}],territories:[{name:"American Samoa",abbreviation:"AS"},{name:"Federated States of Micronesia",abbreviation:"FM"},{name:"Guam",abbreviation:"GU"},{name:"Marshall Islands",abbreviation:"MH"},{name:"Northern Mariana Islands",abbreviation:"MP"},{name:"Puerto Rico",abbreviation:"PR"},{name:"Virgin Islands, U.S.",abbreviation:"VI"}],armed_forces:[{name:"Armed Forces Europe",abbreviation:"AE"},{name:"Armed Forces Pacific",abbreviation:"AP"},{name:"Armed Forces the Americas",abbreviation:"AA"}],country_regions:{it:[{name:"Valle d'Aosta",abbreviation:"VDA"},{name:"Piemonte",abbreviation:"PIE"},{name:"Lombardia",abbreviation:"LOM"},{name:"Veneto",abbreviation:"VEN"},{name:"Trentino Alto Adige",abbreviation:"TAA"},{name:"Friuli Venezia Giulia",abbreviation:"FVG"},{name:"Liguria",abbreviation:"LIG"},{name:"Emilia Romagna",abbreviation:"EMR"},{name:"Toscana",abbreviation:"TOS"},{name:"Umbria",abbreviation:"UMB"},{name:"Marche",abbreviation:"MAR"},{name:"Abruzzo",abbreviation:"ABR"},{name:"Lazio",abbreviation:"LAZ"},{name:"Campania",abbreviation:"CAM"},{name:"Puglia",abbreviation:"PUG"},{name:"Basilicata",abbreviation:"BAS"},{name:"Molise",abbreviation:"MOL"},{name:"Calabria",abbreviation:"CAL"},{name:"Sicilia",abbreviation:"SIC"},{name:"Sardegna",abbreviation:"SAR"}]},street_suffixes:{us:[{name:"Avenue",abbreviation:"Ave"},{name:"Boulevard",abbreviation:"Blvd"},{name:"Center",abbreviation:"Ctr"},{name:"Circle",abbreviation:"Cir"},{name:"Court",abbreviation:"Ct"},{name:"Drive",abbreviation:"Dr"},{name:"Extension",abbreviation:"Ext"},{name:"Glen",abbreviation:"Gln"},{name:"Grove",abbreviation:"Grv"},{name:"Heights",abbreviation:"Hts"},{name:"Highway",abbreviation:"Hwy"},{name:"Junction",abbreviation:"Jct"},{name:"Key",abbreviation:"Key"},{name:"Lane",abbreviation:"Ln"},{name:"Loop",abbreviation:"Loop"},{name:"Manor",abbreviation:"Mnr"},{name:"Mill",abbreviation:"Mill"},{name:"Park",abbreviation:"Park"},{name:"Parkway",abbreviation:"Pkwy"},{name:"Pass",abbreviation:"Pass"},{name:"Path",abbreviation:"Path"},{name:"Pike",abbreviation:"Pike"},{name:"Place",abbreviation:"Pl"},{name:"Plaza",abbreviation:"Plz"},{name:"Point",abbreviation:"Pt"},{name:"Ridge",abbreviation:"Rdg"},{name:"River",abbreviation:"Riv"},{name:"Road",abbreviation:"Rd"},{name:"Square",abbreviation:"Sq"},{name:"Street",abbreviation:"St"},{name:"Terrace",abbreviation:"Ter"},{name:"Trail",abbreviation:"Trl"},{name:"Turnpike",abbreviation:"Tpke"},{name:"View",abbreviation:"Vw"},{name:"Way",abbreviation:"Way"}],it:[{name:"Accesso",abbreviation:"Acc."},{name:"Alzaia",abbreviation:"Alz."},{name:"Arco",abbreviation:"Arco"},{name:"Archivolto",abbreviation:"Acv."},{name:"Arena",abbreviation:"Arena"},{name:"Argine",abbreviation:"Argine"},{name:"Bacino",abbreviation:"Bacino"},{name:"Banchi",abbreviation:"Banchi"},{name:"Banchina",abbreviation:"Ban."},{name:"Bastioni",abbreviation:"Bas."},{name:"Belvedere",abbreviation:"Belv."},{name:"Borgata",abbreviation:"B.ta"},{name:"Borgo",abbreviation:"B.go"},{name:"Calata",abbreviation:"Cal."},{name:"Calle",abbreviation:"Calle"},{name:"Campiello",abbreviation:"Cam."},{name:"Campo",abbreviation:"Cam."},{name:"Canale",abbreviation:"Can."},{name:"Carraia",abbreviation:"Carr."},{name:"Cascina",abbreviation:"Cascina"},{name:"Case sparse",abbreviation:"c.s."},{name:"Cavalcavia",abbreviation:"Cv."},{name:"Circonvallazione",abbreviation:"Cv."},{name:"Complanare",abbreviation:"C.re"},{name:"Contrada",abbreviation:"C.da"},{name:"Corso",abbreviation:"C.so"},{name:"Corte",abbreviation:"C.te"},{name:"Cortile",abbreviation:"C.le"},{name:"Diramazione",abbreviation:"Dir."},{name:"Fondaco",abbreviation:"F.co"},{name:"Fondamenta",abbreviation:"F.ta"},{name:"Fondo",abbreviation:"F.do"},{name:"Frazione",abbreviation:"Fr."},{name:"Isola",abbreviation:"Is."},{name:"Largo",abbreviation:"L.go"},{name:"Litoranea",abbreviation:"Lit."},{name:"Lungolago",abbreviation:"L.go lago"},{name:"Lungo Po",abbreviation:"l.go Po"},{name:"Molo",abbreviation:"Molo"},{name:"Mura",abbreviation:"Mura"},{name:"Passaggio privato",abbreviation:"pass. priv."},{name:"Passeggiata",abbreviation:"Pass."},{name:"Piazza",abbreviation:"P.zza"},{name:"Piazzale",abbreviation:"P.le"},{name:"Ponte",abbreviation:"P.te"},{name:"Portico",abbreviation:"P.co"},{name:"Rampa",abbreviation:"Rampa"},{name:"Regione",abbreviation:"Reg."},{name:"Rione",abbreviation:"R.ne"},{name:"Rio",abbreviation:"Rio"},{name:"Ripa",abbreviation:"Ripa"},{name:"Riva",abbreviation:"Riva"},{name:"Rond",abbreviation:"Rond"},{name:"Rotonda",abbreviation:"Rot."},{name:"Sagrato",abbreviation:"Sagr."},{name:"Salita",abbreviation:"Sal."},{name:"Scalinata",abbreviation:"Scal."},{name:"Scalone",abbreviation:"Scal."},{name:"Slargo",abbreviation:"Sl."},{name:"Sottoportico",abbreviation:"Sott."},{name:"Strada",abbreviation:"Str."},{name:"Stradale",abbreviation:"Str.le"},{name:"Strettoia",abbreviation:"Strett."},{name:"Traversa",abbreviation:"Trav."},{name:"Via",abbreviation:"V."},{name:"Viale",abbreviation:"V.le"},{name:"Vicinale",abbreviation:"Vic.le"},{name:"Vicolo",abbreviation:"Vic."}],uk:[{name:"Avenue",abbreviation:"Ave"},{name:"Close",abbreviation:"Cl"},{name:"Court",abbreviation:"Ct"},{name:"Crescent",abbreviation:"Cr"},{name:"Drive",abbreviation:"Dr"},{name:"Garden",abbreviation:"Gdn"},{name:"Gardens",abbreviation:"Gdns"},{name:"Green",abbreviation:"Gn"},{name:"Grove",abbreviation:"Gr"},{name:"Lane",abbreviation:"Ln"},{name:"Mount",abbreviation:"Mt"},{name:"Place",abbreviation:"Pl"},{name:"Park",abbreviation:"Pk"},{name:"Ridge",abbreviation:"Rdg"},{name:"Road",abbreviation:"Rd"},{name:"Square",abbreviation:"Sq"},{name:"Street",abbreviation:"St"},{name:"Terrace",abbreviation:"Ter"},{name:"Valley",abbreviation:"Val"}]},months:[{name:"January",short_name:"Jan",numeric:"01",days:31},{name:"February",short_name:"Feb",numeric:"02",days:28},{name:"March",short_name:"Mar",numeric:"03",days:31},{name:"April",short_name:"Apr",numeric:"04",days:30},{name:"May",short_name:"May",numeric:"05",days:31},{name:"June",short_name:"Jun",numeric:"06",days:30},{name:"July",short_name:"Jul",numeric:"07",days:31},{name:"August",short_name:"Aug",numeric:"08",days:31},{name:"September",short_name:"Sep",numeric:"09",days:30},{name:"October",short_name:"Oct",numeric:"10",days:31},{name:"November",short_name:"Nov",numeric:"11",days:30},{name:"December",short_name:"Dec",numeric:"12",days:31}],cc_types:[{name:"American Express",short_name:"amex",prefix:"34",length:15},{name:"Bankcard",short_name:"bankcard",prefix:"5610",length:16},{name:"China UnionPay",short_name:"chinaunion",prefix:"62",length:16},{name:"Diners Club Carte Blanche",short_name:"dccarte",prefix:"300",length:14},{name:"Diners Club enRoute",short_name:"dcenroute",prefix:"2014",length:15},{name:"Diners Club International",short_name:"dcintl",prefix:"36",length:14},{name:"Diners Club United States & Canada",short_name:"dcusc",prefix:"54",length:16},{name:"Discover Card",short_name:"discover",prefix:"6011",length:16},{name:"InstaPayment",short_name:"instapay",prefix:"637",length:16},{name:"JCB",short_name:"jcb",prefix:"3528",length:16},{name:"Laser",short_name:"laser",prefix:"6304",length:16},{name:"Maestro",short_name:"maestro",prefix:"5018",length:16},{name:"Mastercard",short_name:"mc",prefix:"51",length:16},{name:"Solo",short_name:"solo",prefix:"6334",length:16},{name:"Switch",short_name:"switch",prefix:"4903",length:16},{name:"Visa",short_name:"visa",prefix:"4",length:16},{name:"Visa Electron",short_name:"electron",prefix:"4026",length:16}],currency_types:[{code:"AED",name:"United Arab Emirates Dirham"},{code:"AFN",name:"Afghanistan Afghani"},{code:"ALL",name:"Albania Lek"},{code:"AMD",name:"Armenia Dram"},{code:"ANG",name:"Netherlands Antilles Guilder"},{code:"AOA",name:"Angola Kwanza"},{code:"ARS",name:"Argentina Peso"},{code:"AUD",name:"Australia Dollar"},{code:"AWG",name:"Aruba Guilder"},{code:"AZN",name:"Azerbaijan New Manat"},{code:"BAM",name:"Bosnia and Herzegovina Convertible Marka"},{code:"BBD",name:"Barbados Dollar"},{code:"BDT",name:"Bangladesh Taka"},{code:"BGN",name:"Bulgaria Lev"},{code:"BHD",name:"Bahrain Dinar"},{code:"BIF",name:"Burundi Franc"},{code:"BMD",name:"Bermuda Dollar"},{code:"BND",name:"Brunei Darussalam Dollar"},{code:"BOB",name:"Bolivia Boliviano"},{code:"BRL",name:"Brazil Real"},{code:"BSD",name:"Bahamas Dollar"},{code:"BTN",name:"Bhutan Ngultrum"},{code:"BWP",name:"Botswana Pula"},{code:"BYR",name:"Belarus Ruble"},{code:"BZD",name:"Belize Dollar"},{code:"CAD",name:"Canada Dollar"},{code:"CDF",name:"Congo/Kinshasa Franc"},{code:"CHF",name:"Switzerland Franc"},{code:"CLP",name:"Chile Peso"},{code:"CNY",name:"China Yuan Renminbi"},{code:"COP",name:"Colombia Peso"},{code:"CRC",name:"Costa Rica Colon"},{code:"CUC",name:"Cuba Convertible Peso"},{code:"CUP",name:"Cuba Peso"},{code:"CVE",name:"Cape Verde Escudo"},{code:"CZK",name:"Czech Republic Koruna"},{code:"DJF",name:"Djibouti Franc"},{code:"DKK",name:"Denmark Krone"},{code:"DOP",name:"Dominican Republic Peso"},{code:"DZD",name:"Algeria Dinar"},{code:"EGP",name:"Egypt Pound"},{code:"ERN",name:"Eritrea Nakfa"},{code:"ETB",name:"Ethiopia Birr"},{code:"EUR",name:"Euro Member Countries"},{code:"FJD",name:"Fiji Dollar"},{code:"FKP",name:"Falkland Islands (Malvinas) Pound"},{code:"GBP",name:"United Kingdom Pound"},{code:"GEL",name:"Georgia Lari"},{code:"GGP",name:"Guernsey Pound"},{code:"GHS",name:"Ghana Cedi"},{code:"GIP",name:"Gibraltar Pound"},{code:"GMD",name:"Gambia Dalasi"},{code:"GNF",name:"Guinea Franc"},{code:"GTQ",name:"Guatemala Quetzal"},{code:"GYD",name:"Guyana Dollar"},{code:"HKD",name:"Hong Kong Dollar"},{code:"HNL",name:"Honduras Lempira"},{code:"HRK",name:"Croatia Kuna"},{code:"HTG",name:"Haiti Gourde"},{code:"HUF",name:"Hungary Forint"},{code:"IDR",name:"Indonesia Rupiah"},{code:"ILS",name:"Israel Shekel"},{code:"IMP",name:"Isle of Man Pound"},{code:"INR",name:"India Rupee"},{code:"IQD",name:"Iraq Dinar"},{code:"IRR",name:"Iran Rial"},{code:"ISK",name:"Iceland Krona"},{code:"JEP",name:"Jersey Pound"},{code:"JMD",name:"Jamaica Dollar"},{code:"JOD",name:"Jordan Dinar"},{code:"JPY",name:"Japan Yen"},{code:"KES",name:"Kenya Shilling"},{code:"KGS",name:"Kyrgyzstan Som"},{code:"KHR",name:"Cambodia Riel"},{code:"KMF",name:"Comoros Franc"},{code:"KPW",name:"Korea (North) Won"},{code:"KRW",name:"Korea (South) Won"},{code:"KWD",name:"Kuwait Dinar"},{code:"KYD",name:"Cayman Islands Dollar"},{code:"KZT",name:"Kazakhstan Tenge"},{code:"LAK",name:"Laos Kip"},{code:"LBP",name:"Lebanon Pound"},{code:"LKR",name:"Sri Lanka Rupee"},{code:"LRD",name:"Liberia Dollar"},{code:"LSL",name:"Lesotho Loti"},{code:"LTL",name:"Lithuania Litas"},{code:"LYD",name:"Libya Dinar"},{code:"MAD",name:"Morocco Dirham"},{code:"MDL",name:"Moldova Leu"},{code:"MGA",name:"Madagascar Ariary"},{code:"MKD",name:"Macedonia Denar"},{code:"MMK",name:"Myanmar (Burma) Kyat"},{code:"MNT",name:"Mongolia Tughrik"},{code:"MOP",name:"Macau Pataca"},{code:"MRO",name:"Mauritania Ouguiya"},{code:"MUR",name:"Mauritius Rupee"},{code:"MVR",name:"Maldives (Maldive Islands) Rufiyaa"},{code:"MWK",name:"Malawi Kwacha"},{code:"MXN",name:"Mexico Peso"},{code:"MYR",name:"Malaysia Ringgit"},{code:"MZN",name:"Mozambique Metical"},{code:"NAD",name:"Namibia Dollar"},{code:"NGN",name:"Nigeria Naira"},{code:"NIO",name:"Nicaragua Cordoba"},{code:"NOK",name:"Norway Krone"},{code:"NPR",name:"Nepal Rupee"},{code:"NZD",name:"New Zealand Dollar"},{code:"OMR",name:"Oman Rial"},{code:"PAB",name:"Panama Balboa"},{code:"PEN",name:"Peru Nuevo Sol"},{code:"PGK",name:"Papua New Guinea Kina"},{code:"PHP",name:"Philippines Peso"},{code:"PKR",name:"Pakistan Rupee"},{code:"PLN",name:"Poland Zloty"},{code:"PYG",name:"Paraguay Guarani"},{code:"QAR",name:"Qatar Riyal"},{code:"RON",name:"Romania New Leu"},{code:"RSD",name:"Serbia Dinar"},{code:"RUB",name:"Russia Ruble"},{code:"RWF",name:"Rwanda Franc"},{code:"SAR",name:"Saudi Arabia Riyal"},{code:"SBD",name:"Solomon Islands Dollar"},{code:"SCR",name:"Seychelles Rupee"},{code:"SDG",name:"Sudan Pound"},{code:"SEK",name:"Sweden Krona"},{code:"SGD",name:"Singapore Dollar"},{code:"SHP",name:"Saint Helena Pound"},{code:"SLL",name:"Sierra Leone Leone"},{code:"SOS",name:"Somalia Shilling"},{code:"SPL",name:"Seborga Luigino"},{code:"SRD",name:"Suriname Dollar"},{code:"STD",name:"So Tom and Prncipe Dobra"},{code:"SVC",name:"El Salvador Colon"},{code:"SYP",name:"Syria Pound"},{code:"SZL",name:"Swaziland Lilangeni"},{code:"THB",name:"Thailand Baht"},{code:"TJS",name:"Tajikistan Somoni"},{code:"TMT",name:"Turkmenistan Manat"},{code:"TND",name:"Tunisia Dinar"},{code:"TOP",name:"Tonga Pa'anga"},{code:"TRY",name:"Turkey Lira"},{code:"TTD",name:"Trinidad and Tobago Dollar"},{code:"TVD",name:"Tuvalu Dollar"},{code:"TWD",name:"Taiwan New Dollar"},{code:"TZS",name:"Tanzania Shilling"},{code:"UAH",name:"Ukraine Hryvnia"},{code:"UGX",name:"Uganda Shilling"},{code:"USD",name:"United States Dollar"},{code:"UYU",name:"Uruguay Peso"},{code:"UZS",name:"Uzbekistan Som"},{code:"VEF",name:"Venezuela Bolivar"},{code:"VND",name:"Viet Nam Dong"},{code:"VUV",name:"Vanuatu Vatu"},{code:"WST",name:"Samoa Tala"},{code:"XAF",name:"Communaut Financire Africaine (BEAC) CFA Franc BEAC"},{code:"XCD",name:"East Caribbean Dollar"},{code:"XDR",name:"International Monetary Fund (IMF) Special Drawing Rights"},{code:"XOF",name:"Communaut Financire Africaine (BCEAO) Franc"},{code:"XPF",name:"Comptoirs Franais du Pacifique (CFP) Franc"},{code:"YER",name:"Yemen Rial"},{code:"ZAR",name:"South Africa Rand"},{code:"ZMW",name:"Zambia Kwacha"},{code:"ZWD",name:"Zimbabwe Dollar"}],colorNames:["AliceBlue","Black","Navy","DarkBlue","MediumBlue","Blue","DarkGreen","Green","Teal","DarkCyan","DeepSkyBlue","DarkTurquoise","MediumSpringGreen","Lime","SpringGreen","Aqua","Cyan","MidnightBlue","DodgerBlue","LightSeaGreen","ForestGreen","SeaGreen","DarkSlateGray","LimeGreen","MediumSeaGreen","Turquoise","RoyalBlue","SteelBlue","DarkSlateBlue","MediumTurquoise","Indigo","DarkOliveGreen","CadetBlue","CornflowerBlue","RebeccaPurple","MediumAquaMarine","DimGray","SlateBlue","OliveDrab","SlateGray","LightSlateGray","MediumSlateBlue","LawnGreen","Chartreuse","Aquamarine","Maroon","Purple","Olive","Gray","SkyBlue","LightSkyBlue","BlueViolet","DarkRed","DarkMagenta","SaddleBrown","Ivory","White","DarkSeaGreen","LightGreen","MediumPurple","DarkViolet","PaleGreen","DarkOrchid","YellowGreen","Sienna","Brown","DarkGray","LightBlue","GreenYellow","PaleTurquoise","LightSteelBlue","PowderBlue","FireBrick","DarkGoldenRod","MediumOrchid","RosyBrown","DarkKhaki","Silver","MediumVioletRed","IndianRed","Peru","Chocolate","Tan","LightGray","Thistle","Orchid","GoldenRod","PaleVioletRed","Crimson","Gainsboro","Plum","BurlyWood","LightCyan","Lavender","DarkSalmon","Violet","PaleGoldenRod","LightCoral","Khaki","AliceBlue","HoneyDew","Azure","SandyBrown","Wheat","Beige","WhiteSmoke","MintCream","GhostWhite","Salmon","AntiqueWhite","Linen","LightGoldenRodYellow","OldLace","Red","Fuchsia","Magenta","DeepPink","OrangeRed","Tomato","HotPink","Coral","DarkOrange","LightSalmon","Orange","LightPink","Pink","Gold","PeachPuff","NavajoWhite","Moccasin","Bisque","MistyRose","BlanchedAlmond","PapayaWhip","LavenderBlush","SeaShell","Cornsilk","LemonChiffon","FloralWhite","Snow","Yellow","LightYellow"],company:["3Com Corp","3M Company","A.G. Edwards Inc.","Abbott Laboratories","Abercrombie & Fitch Co.","ABM Industries Incorporated","Ace Hardware Corporation","ACT Manufacturing Inc.","Acterna Corp.","Adams Resources & Energy, Inc.","ADC Telecommunications, Inc.","Adelphia Communications Corporation","Administaff, Inc.","Adobe Systems Incorporated","Adolph Coors Company","Advance Auto Parts, Inc.","Advanced Micro Devices, Inc.","AdvancePCS, Inc.","Advantica Restaurant Group, Inc.","The AES Corporation","Aetna Inc.","Affiliated Computer Services, Inc.","AFLAC Incorporated","AGCO Corporation","Agilent Technologies, Inc.","Agway Inc.","Apartment Investment and Management Company","Air Products and Chemicals, Inc.","Airborne, Inc.","Airgas, Inc.","AK Steel Holding Corporation","Alaska Air Group, Inc.","Alberto-Culver Company","Albertson's, Inc.","Alcoa Inc.","Alleghany Corporation","Allegheny Energy, Inc.","Allegheny Technologies Incorporated","Allergan, Inc.","ALLETE, Inc.","Alliant Energy Corporation","Allied Waste Industries, Inc.","Allmerica Financial Corporation","The Allstate Corporation","ALLTEL Corporation","The Alpine Group, Inc.","Amazon.com, Inc.","AMC Entertainment Inc.","American Power Conversion Corporation","Amerada Hess Corporation","AMERCO","Ameren Corporation","America West Holdings Corporation","American Axle & Manufacturing Holdings, Inc.","American Eagle Outfitters, Inc.","American Electric Power Company, Inc.","American Express Company","American Financial Group, Inc.","American Greetings Corporation","American International Group, Inc.","American Standard Companies Inc.","American Water Works Company, Inc.","AmerisourceBergen Corporation","Ames Department Stores, Inc.","Amgen Inc.","Amkor Technology, Inc.","AMR Corporation","AmSouth Bancorp.","Amtran, Inc.","Anadarko Petroleum Corporation","Analog Devices, Inc.","Anheuser-Busch Companies, Inc.","Anixter International Inc.","AnnTaylor Inc.","Anthem, Inc.","AOL Time Warner Inc.","Aon Corporation","Apache Corporation","Apple Computer, Inc.","Applera Corporation","Applied Industrial Technologies, Inc.","Applied Materials, Inc.","Aquila, Inc.","ARAMARK Corporation","Arch Coal, Inc.","Archer Daniels Midland Company","Arkansas Best Corporation","Armstrong Holdings, Inc.","Arrow Electronics, Inc.","ArvinMeritor, Inc.","Ashland Inc.","Astoria Financial Corporation","AT&T Corp.","Atmel Corporation","Atmos Energy Corporation","Audiovox Corporation","Autoliv, Inc.","Automatic Data Processing, Inc.","AutoNation, Inc.","AutoZone, Inc.","Avaya Inc.","Avery Dennison Corporation","Avista Corporation","Avnet, Inc.","Avon Products, Inc.","Baker Hughes Incorporated","Ball Corporation","Bank of America Corporation","The Bank of New York Company, Inc.","Bank One Corporation","Banknorth Group, Inc.","Banta Corporation","Barnes & Noble, Inc.","Bausch & Lomb Incorporated","Baxter International Inc.","BB&T Corporation","The Bear Stearns Companies Inc.","Beazer Homes USA, Inc.","Beckman Coulter, Inc.","Becton, Dickinson and Company","Bed Bath & Beyond Inc.","Belk, Inc.","Bell Microproducts Inc.","BellSouth Corporation","Belo Corp.","Bemis Company, Inc.","Benchmark Electronics, Inc.","Berkshire Hathaway Inc.","Best Buy Co., Inc.","Bethlehem Steel Corporation","Beverly Enterprises, Inc.","Big Lots, Inc.","BJ Services Company","BJ's Wholesale Club, Inc.","The Black & Decker Corporation","Black Hills Corporation","BMC Software, Inc.","The Boeing Company","Boise Cascade Corporation","Borders Group, Inc.","BorgWarner Inc.","Boston Scientific Corporation","Bowater Incorporated","Briggs & Stratton Corporation","Brightpoint, Inc.","Brinker International, Inc.","Bristol-Myers Squibb Company","Broadwing, Inc.","Brown Shoe Company, Inc.","Brown-Forman Corporation","Brunswick Corporation","Budget Group, Inc.","Burlington Coat Factory Warehouse Corporation","Burlington Industries, Inc.","Burlington Northern Santa Fe Corporation","Burlington Resources Inc.","C. H. Robinson Worldwide Inc.","Cablevision Systems Corp","Cabot Corp","Cadence Design Systems, Inc.","Calpine Corp.","Campbell Soup Co.","Capital One Financial Corp.","Cardinal Health Inc.","Caremark Rx Inc.","Carlisle Cos. Inc.","Carpenter Technology Corp.","Casey's General Stores Inc.","Caterpillar Inc.","CBRL Group Inc.","CDI Corp.","CDW Computer Centers Inc.","CellStar Corp.","Cendant Corp","Cenex Harvest States Cooperatives","Centex Corp.","CenturyTel Inc.","Ceridian Corp.","CH2M Hill Cos. Ltd.","Champion Enterprises Inc.","Charles Schwab Corp.","Charming Shoppes Inc.","Charter Communications Inc.","Charter One Financial Inc.","ChevronTexaco Corp.","Chiquita Brands International Inc.","Chubb Corp","Ciena Corp.","Cigna Corp","Cincinnati Financial Corp.","Cinergy Corp.","Cintas Corp.","Circuit City Stores Inc.","Cisco Systems Inc.","Citigroup, Inc","Citizens Communications Co.","CKE Restaurants Inc.","Clear Channel Communications Inc.","The Clorox Co.","CMGI Inc.","CMS Energy Corp.","CNF Inc.","Coca-Cola Co.","Coca-Cola Enterprises Inc.","Colgate-Palmolive Co.","Collins & Aikman Corp.","Comcast Corp.","Comdisco Inc.","Comerica Inc.","Comfort Systems USA Inc.","Commercial Metals Co.","Community Health Systems Inc.","Compass Bancshares Inc","Computer Associates International Inc.","Computer Sciences Corp.","Compuware Corp.","Comverse Technology Inc.","ConAgra Foods Inc.","Concord EFS Inc.","Conectiv, Inc","Conoco Inc","Conseco Inc.","Consolidated Freightways Corp.","Consolidated Edison Inc.","Constellation Brands Inc.","Constellation Emergy Group Inc.","Continental Airlines Inc.","Convergys Corp.","Cooper Cameron Corp.","Cooper Industries Ltd.","Cooper Tire & Rubber Co.","Corn Products International Inc.","Corning Inc.","Costco Wholesale Corp.","Countrywide Credit Industries Inc.","Coventry Health Care Inc.","Cox Communications Inc.","Crane Co.","Crompton Corp.","Crown Cork & Seal Co. Inc.","CSK Auto Corp.","CSX Corp.","Cummins Inc.","CVS Corp.","Cytec Industries Inc.","D&K Healthcare Resources, Inc.","D.R. Horton Inc.","Dana Corporation","Danaher Corporation","Darden Restaurants Inc.","DaVita Inc.","Dean Foods Company","Deere & Company","Del Monte Foods Co","Dell Computer Corporation","Delphi Corp.","Delta Air Lines Inc.","Deluxe Corporation","Devon Energy Corporation","Di Giorgio Corporation","Dial Corporation","Diebold Incorporated","Dillard's Inc.","DIMON Incorporated","Dole Food Company, Inc.","Dollar General Corporation","Dollar Tree Stores, Inc.","Dominion Resources, Inc.","Domino's Pizza LLC","Dover Corporation, Inc.","Dow Chemical Company","Dow Jones & Company, Inc.","DPL Inc.","DQE Inc.","Dreyer's Grand Ice Cream, Inc.","DST Systems, Inc.","DTE Energy Co.","E.I. Du Pont de Nemours and Company","Duke Energy Corp","Dun & Bradstreet Inc.","DURA Automotive Systems Inc.","DynCorp","Dynegy Inc.","E*Trade Group, Inc.","E.W. Scripps Company","Earthlink, Inc.","Eastman Chemical Company","Eastman Kodak Company","Eaton Corporation","Echostar Communications Corporation","Ecolab Inc.","Edison International","EGL Inc.","El Paso Corporation","Electronic Arts Inc.","Electronic Data Systems Corp.","Eli Lilly and Company","EMC Corporation","Emcor Group Inc.","Emerson Electric Co.","Encompass Services Corporation","Energizer Holdings Inc.","Energy East Corporation","Engelhard Corporation","Enron Corp.","Entergy Corporation","Enterprise Products Partners L.P.","EOG Resources, Inc.","Equifax Inc.","Equitable Resources Inc.","Equity Office Properties Trust","Equity Residential Properties Trust","Estee Lauder Companies Inc.","Exelon Corporation","Exide Technologies","Expeditors International of Washington Inc.","Express Scripts Inc.","ExxonMobil Corporation","Fairchild Semiconductor International Inc.","Family Dollar Stores Inc.","Farmland Industries Inc.","Federal Mogul Corp.","Federated Department Stores Inc.","Federal Express Corp.","Felcor Lodging Trust Inc.","Ferro Corp.","Fidelity National Financial Inc.","Fifth Third Bancorp","First American Financial Corp.","First Data Corp.","First National of Nebraska Inc.","First Tennessee National Corp.","FirstEnergy Corp.","Fiserv Inc.","Fisher Scientific International Inc.","FleetBoston Financial Co.","Fleetwood Enterprises Inc.","Fleming Companies Inc.","Flowers Foods Inc.","Flowserv Corp","Fluor Corp","FMC Corp","Foamex International Inc","Foot Locker Inc","Footstar Inc.","Ford Motor Co","Forest Laboratories Inc.","Fortune Brands Inc.","Foster Wheeler Ltd.","FPL Group Inc.","Franklin Resources Inc.","Freeport McMoran Copper & Gold Inc.","Frontier Oil Corp","Furniture Brands International Inc.","Gannett Co., Inc.","Gap Inc.","Gateway Inc.","GATX Corporation","Gemstar-TV Guide International Inc.","GenCorp Inc.","General Cable Corporation","General Dynamics Corporation","General Electric Company","General Mills Inc","General Motors Corporation","Genesis Health Ventures Inc.","Gentek Inc.","Gentiva Health Services Inc.","Genuine Parts Company","Genuity Inc.","Genzyme Corporation","Georgia Gulf Corporation","Georgia-Pacific Corporation","Gillette Company","Gold Kist Inc.","Golden State Bancorp Inc.","Golden West Financial Corporation","Goldman Sachs Group Inc.","Goodrich Corporation","The Goodyear Tire & Rubber Company","Granite Construction Incorporated","Graybar Electric Company Inc.","Great Lakes Chemical Corporation","Great Plains Energy Inc.","GreenPoint Financial Corp.","Greif Bros. Corporation","Grey Global Group Inc.","Group 1 Automotive Inc.","Guidant Corporation","H&R Block Inc.","H.B. Fuller Company","H.J. Heinz Company","Halliburton Co.","Harley-Davidson Inc.","Harman International Industries Inc.","Harrah's Entertainment Inc.","Harris Corp.","Harsco Corp.","Hartford Financial Services Group Inc.","Hasbro Inc.","Hawaiian Electric Industries Inc.","HCA Inc.","Health Management Associates Inc.","Health Net Inc.","Healthsouth Corp","Henry Schein Inc.","Hercules Inc.","Herman Miller Inc.","Hershey Foods Corp.","Hewlett-Packard Company","Hibernia Corp.","Hillenbrand Industries Inc.","Hilton Hotels Corp.","Hollywood Entertainment Corp.","Home Depot Inc.","Hon Industries Inc.","Honeywell International Inc.","Hormel Foods Corp.","Host Marriott Corp.","Household International Corp.","Hovnanian Enterprises Inc.","Hub Group Inc.","Hubbell Inc.","Hughes Supply Inc.","Humana Inc.","Huntington Bancshares Inc.","Idacorp Inc.","IDT Corporation","IKON Office Solutions Inc.","Illinois Tool Works Inc.","IMC Global Inc.","Imperial Sugar Company","IMS Health Inc.","Ingles Market Inc","Ingram Micro Inc.","Insight Enterprises Inc.","Integrated Electrical Services Inc.","Intel Corporation","International Paper Co.","Interpublic Group of Companies Inc.","Interstate Bakeries Corporation","International Business Machines Corp.","International Flavors & Fragrances Inc.","International Multifoods Corporation","Intuit Inc.","IT Group Inc.","ITT Industries Inc.","Ivax Corp.","J.B. Hunt Transport Services Inc.","J.C. Penny Co.","J.P. Morgan Chase & Co.","Jabil Circuit Inc.","Jack In The Box Inc.","Jacobs Engineering Group Inc.","JDS Uniphase Corp.","Jefferson-Pilot Co.","John Hancock Financial Services Inc.","Johnson & Johnson","Johnson Controls Inc.","Jones Apparel Group Inc.","KB Home","Kellogg Company","Kellwood Company","Kelly Services Inc.","Kemet Corp.","Kennametal Inc.","Kerr-McGee Corporation","KeyCorp","KeySpan Corp.","Kimball International Inc.","Kimberly-Clark Corporation","Kindred Healthcare Inc.","KLA-Tencor Corporation","K-Mart Corp.","Knight-Ridder Inc.","Kohl's Corp.","KPMG Consulting Inc.","Kroger Co.","L-3 Communications Holdings Inc.","Laboratory Corporation of America Holdings","Lam Research Corporation","LandAmerica Financial Group Inc.","Lands' End Inc.","Landstar System Inc.","La-Z-Boy Inc.","Lear Corporation","Legg Mason Inc.","Leggett & Platt Inc.","Lehman Brothers Holdings Inc.","Lennar Corporation","Lennox International Inc.","Level 3 Communications Inc.","Levi Strauss & Co.","Lexmark International Inc.","Limited Inc.","Lincoln National Corporation","Linens 'n Things Inc.","Lithia Motors Inc.","Liz Claiborne Inc.","Lockheed Martin Corporation","Loews Corporation","Longs Drug Stores Corporation","Louisiana-Pacific Corporation","Lowe's Companies Inc.","LSI Logic Corporation","The LTV Corporation","The Lubrizol Corporation","Lucent Technologies Inc.","Lyondell Chemical Company","M & T Bank Corporation","Magellan Health Services Inc.","Mail-Well Inc.","Mandalay Resort Group","Manor Care Inc.","Manpower Inc.","Marathon Oil Corporation","Mariner Health Care Inc.","Markel Corporation","Marriott International Inc.","Marsh & McLennan Companies Inc.","Marsh Supermarkets Inc.","Marshall & Ilsley Corporation","Martin Marietta Materials Inc.","Masco Corporation","Massey Energy Company","MasTec Inc.","Mattel Inc.","Maxim Integrated Products Inc.","Maxtor Corporation","Maxxam Inc.","The May Department Stores Company","Maytag Corporation","MBNA Corporation","McCormick & Company Incorporated","McDonald's Corporation","The McGraw-Hill Companies Inc.","McKesson Corporation","McLeodUSA Incorporated","M.D.C. Holdings Inc.","MDU Resources Group Inc.","MeadWestvaco Corporation","Medtronic Inc.","Mellon Financial Corporation","The Men's Wearhouse Inc.","Merck & Co., Inc.","Mercury General Corporation","Merrill Lynch & Co. Inc.","Metaldyne Corporation","Metals USA Inc.","MetLife Inc.","Metris Companies Inc","MGIC Investment Corporation","MGM Mirage","Michaels Stores Inc.","Micron Technology Inc.","Microsoft Corporation","Milacron Inc.","Millennium Chemicals Inc.","Mirant Corporation","Mohawk Industries Inc.","Molex Incorporated","The MONY Group Inc.","Morgan Stanley Dean Witter & Co.","Motorola Inc.","MPS Group Inc.","Murphy Oil Corporation","Nabors Industries Inc","Nacco Industries Inc","Nash Finch Company","National City Corp.","National Commerce Financial Corporation","National Fuel Gas Company","National Oilwell Inc","National Rural Utilities Cooperative Finance Corporation","National Semiconductor Corporation","National Service Industries Inc","Navistar International Corporation","NCR Corporation","The Neiman Marcus Group Inc.","New Jersey Resources Corporation","New York Times Company","Newell Rubbermaid Inc","Newmont Mining Corporation","Nextel Communications Inc","Nicor Inc","Nike Inc","NiSource Inc","Noble Energy Inc","Nordstrom Inc","Norfolk Southern Corporation","Nortek Inc","North Fork Bancorporation Inc","Northeast Utilities System","Northern Trust Corporation","Northrop Grumman Corporation","NorthWestern Corporation","Novellus Systems Inc","NSTAR","NTL Incorporated","Nucor Corp","Nvidia Corp","NVR Inc","Northwest Airlines Corp","Occidental Petroleum Corp","Ocean Energy Inc","Office Depot Inc.","OfficeMax Inc","OGE Energy Corp","Oglethorpe Power Corp.","Ohio Casualty Corp.","Old Republic International Corp.","Olin Corp.","OM Group Inc","Omnicare Inc","Omnicom Group","On Semiconductor Corp","ONEOK Inc","Oracle Corp","Oshkosh Truck Corp","Outback Steakhouse Inc.","Owens & Minor Inc.","Owens Corning","Owens-Illinois Inc","Oxford Health Plans Inc","Paccar Inc","PacifiCare Health Systems Inc","Packaging Corp. of America","Pactiv Corp","Pall Corp","Pantry Inc","Park Place Entertainment Corp","Parker Hannifin Corp.","Pathmark Stores Inc.","Paychex Inc","Payless Shoesource Inc","Penn Traffic Co.","Pennzoil-Quaker State Company","Pentair Inc","Peoples Energy Corp.","PeopleSoft Inc","Pep Boys Manny, Moe & Jack","Potomac Electric Power Co.","Pepsi Bottling Group Inc.","PepsiAmericas Inc.","PepsiCo Inc.","Performance Food Group Co.","Perini Corp","PerkinElmer Inc","Perot Systems Corp","Petco Animal Supplies Inc.","Peter Kiewit Sons', Inc.","PETsMART Inc","Pfizer Inc","Pacific Gas & Electric Corp.","Pharmacia Corp","Phar Mor Inc.","Phelps Dodge Corp.","Philip Morris Companies Inc.","Phillips Petroleum Co","Phillips Van Heusen Corp.","Phoenix Companies Inc","Pier 1 Imports Inc.","Pilgrim's Pride Corporation","Pinnacle West Capital Corp","Pioneer-Standard Electronics Inc.","Pitney Bowes Inc.","Pittston Brinks Group","Plains All American Pipeline LP","PNC Financial Services Group Inc.","PNM Resources Inc","Polaris Industries Inc.","Polo Ralph Lauren Corp","PolyOne Corp","Popular Inc","Potlatch Corp","PPG Industries Inc","PPL Corp","Praxair Inc","Precision Castparts Corp","Premcor Inc.","Pride International Inc","Primedia Inc","Principal Financial Group Inc.","Procter & Gamble Co.","Pro-Fac Cooperative Inc.","Progress Energy Inc","Progressive Corporation","Protective Life Corp","Provident Financial Group","Providian Financial Corp.","Prudential Financial Inc.","PSS World Medical Inc","Public Service Enterprise Group Inc.","Publix Super Markets Inc.","Puget Energy Inc.","Pulte Homes Inc","Qualcomm Inc","Quanta Services Inc.","Quantum Corp","Quest Diagnostics Inc.","Questar Corp","Quintiles Transnational","Qwest Communications Intl Inc","R.J. Reynolds Tobacco Company","R.R. Donnelley & Sons Company","Radio Shack Corporation","Raymond James Financial Inc.","Raytheon Company","Reader's Digest Association Inc.","Reebok International Ltd.","Regions Financial Corp.","Regis Corporation","Reliance Steel & Aluminum Co.","Reliant Energy Inc.","Rent A Center Inc","Republic Services Inc","Revlon Inc","RGS Energy Group Inc","Rite Aid Corp","Riverwood Holding Inc.","RoadwayCorp","Robert Half International Inc.","Rock-Tenn Co","Rockwell Automation Inc","Rockwell Collins Inc","Rohm & Haas Co.","Ross Stores Inc","RPM Inc.","Ruddick Corp","Ryder System Inc","Ryerson Tull Inc","Ryland Group Inc.","Sabre Holdings Corp","Safeco Corp","Safeguard Scientifics Inc.","Safeway Inc","Saks Inc","Sanmina-SCI Inc","Sara Lee Corp","SBC Communications Inc","Scana Corp.","Schering-Plough Corp","Scholastic Corp","SCI Systems Onc.","Science Applications Intl. Inc.","Scientific-Atlanta Inc","Scotts Company","Seaboard Corp","Sealed Air Corp","Sears Roebuck & Co","Sempra Energy","Sequa Corp","Service Corp. International","ServiceMaster Co","Shaw Group Inc","Sherwin-Williams Company","Shopko Stores Inc","Siebel Systems Inc","Sierra Health Services Inc","Sierra Pacific Resources","Silgan Holdings Inc.","Silicon Graphics Inc","Simon Property Group Inc","SLM Corporation","Smith International Inc","Smithfield Foods Inc","Smurfit-Stone Container Corp","Snap-On Inc","Solectron Corp","Solutia Inc","Sonic Automotive Inc.","Sonoco Products Co.","Southern Company","Southern Union Company","SouthTrust Corp.","Southwest Airlines Co","Southwest Gas Corp","Sovereign Bancorp Inc.","Spartan Stores Inc","Spherion Corp","Sports Authority Inc","Sprint Corp.","SPX Corp","St. Jude Medical Inc","St. Paul Cos.","Staff Leasing Inc.","StanCorp Financial Group Inc","Standard Pacific Corp.","Stanley Works","Staples Inc","Starbucks Corp","Starwood Hotels & Resorts Worldwide Inc","State Street Corp.","Stater Bros. Holdings Inc.","Steelcase Inc","Stein Mart Inc","Stewart & Stevenson Services Inc","Stewart Information Services Corp","Stilwell Financial Inc","Storage Technology Corporation","Stryker Corp","Sun Healthcare Group Inc.","Sun Microsystems Inc.","SunGard Data Systems Inc.","Sunoco Inc.","SunTrust Banks Inc","Supervalu Inc","Swift Transportation, Co., Inc","Symbol Technologies Inc","Synovus Financial Corp.","Sysco Corp","Systemax Inc.","Target Corp.","Tech Data Corporation","TECO Energy Inc","Tecumseh Products Company","Tektronix Inc","Teleflex Incorporated","Telephone & Data Systems Inc","Tellabs Inc.","Temple-Inland Inc","Tenet Healthcare Corporation","Tenneco Automotive Inc.","Teradyne Inc","Terex Corp","Tesoro Petroleum Corp.","Texas Industries Inc.","Texas Instruments Incorporated","Textron Inc","Thermo Electron Corporation","Thomas & Betts Corporation","Tiffany & Co","Timken Company","TJX Companies Inc","TMP Worldwide Inc","Toll Brothers Inc","Torchmark Corporation","Toro Company","Tower Automotive Inc.","Toys 'R' Us Inc","Trans World Entertainment Corp.","TransMontaigne Inc","Transocean Inc","TravelCenters of America Inc.","Triad Hospitals Inc","Tribune Company","Trigon Healthcare Inc.","Trinity Industries Inc","Trump Hotels & Casino Resorts Inc.","TruServ Corporation","TRW Inc","TXU Corp","Tyson Foods Inc","U.S. Bancorp","U.S. Industries Inc.","UAL Corporation","UGI Corporation","Unified Western Grocers Inc","Union Pacific Corporation","Union Planters Corp","Unisource Energy Corp","Unisys Corporation","United Auto Group Inc","United Defense Industries Inc.","United Parcel Service Inc","United Rentals Inc","United Stationers Inc","United Technologies Corporation","UnitedHealth Group Incorporated","Unitrin Inc","Universal Corporation","Universal Forest Products Inc","Universal Health Services Inc","Unocal Corporation","Unova Inc","UnumProvident Corporation","URS Corporation","US Airways Group Inc","US Oncology Inc","USA Interactive","USFreighways Corporation","USG Corporation","UST Inc","Valero Energy Corporation","Valspar Corporation","Value City Department Stores Inc","Varco International Inc","Vectren Corporation","Veritas Software Corporation","Verizon Communications Inc","VF Corporation","Viacom Inc","Viad Corp","Viasystems Group Inc","Vishay Intertechnology Inc","Visteon Corporation","Volt Information Sciences Inc","Vulcan Materials Company","W.R. Berkley Corporation","W.R. Grace & Co","W.W. Grainger Inc","Wachovia Corporation","Wakenhut Corporation","Walgreen Co","Wallace Computer Services Inc","Wal-Mart Stores Inc","Walt Disney Co","Walter Industries Inc","Washington Mutual Inc","Washington Post Co.","Waste Management Inc","Watsco Inc","Weatherford International Inc","Weis Markets Inc.","Wellpoint Health Networks Inc","Wells Fargo & Company","Wendy's International Inc","Werner Enterprises Inc","WESCO International Inc","Western Digital Inc","Western Gas Resources Inc","WestPoint Stevens Inc","Weyerhauser Company","WGL Holdings Inc","Whirlpool Corporation","Whole Foods Market Inc","Willamette Industries Inc.","Williams Companies Inc","Williams Sonoma Inc","Winn Dixie Stores Inc","Wisconsin Energy Corporation","Wm Wrigley Jr Company","World Fuel Services Corporation","WorldCom Inc","Worthington Industries Inc","WPS Resources Corporation","Wyeth","Wyndham International Inc","Xcel Energy Inc","Xerox Corp","Xilinx Inc","XO Communications Inc","Yellow Corporation","York International Corp","Yum Brands Inc.","Zale Corporation","Zions Bancorporation"],fileExtension:{raster:["bmp","gif","gpl","ico","jpeg","psd","png","psp","raw","tiff"],vector:["3dv","amf","awg","ai","cgm","cdr","cmx","dxf","e2d","egt","eps","fs","odg","svg","xar"],"3d":["3dmf","3dm","3mf","3ds","an8","aoi","blend","cal3d","cob","ctm","iob","jas","max","mb","mdx","obj","x","x3d"],document:["doc","docx","dot","html","xml","odt","odm","ott","csv","rtf","tex","xhtml","xps"]},timezones:[{name:"Dateline Standard Time",abbr:"DST",offset:-12,isdst:!(l.prototype.file=function(e){var t,r=e||{},n="fileExtension",i=Object.keys(this.get("fileExtension"));if(t=this.word({length:r.length}),r.extension)return t+"."+r.extension;if(r.extensions){if(Array.isArray(r.extensions))return t+"."+this.pickone(r.extensions);if(r.extensions.constructor!==Object)throw new Error("Chance: Extensions must be an Array or Object");var o=r.extensions,a=Object.keys(o);return t+"."+this.pickone(o[this.pickone(a)])}if(r.fileType){var s=r.fileType;if(-1!==i.indexOf(s))return t+"."+this.pickone(this.get(n)[s]);throw new RangeError("Chance: Expect file type value to be 'raster', 'vector', '3d' or 'document'")}return t+"."+this.pickone(this.get(n)[this.pickone(i)])}),text:"(UTC-12:00) International Date Line West",utc:["Etc/GMT+12"]},{name:"UTC-11",abbr:"U",offset:-11,isdst:!1,text:"(UTC-11:00) Coordinated Universal Time-11",utc:["Etc/GMT+11","Pacific/Midway","Pacific/Niue","Pacific/Pago_Pago"]},{name:"Hawaiian Standard Time",abbr:"HST",offset:-10,isdst:!1,text:"(UTC-10:00) Hawaii",utc:["Etc/GMT+10","Pacific/Honolulu","Pacific/Johnston","Pacific/Rarotonga","Pacific/Tahiti"]},{name:"Alaskan Standard Time",abbr:"AKDT",offset:-8,isdst:!0,text:"(UTC-09:00) Alaska",utc:["America/Anchorage","America/Juneau","America/Nome","America/Sitka","America/Yakutat"]},{name:"Pacific Standard Time (Mexico)",abbr:"PDT",offset:-7,isdst:!0,text:"(UTC-08:00) Baja California",utc:["America/Santa_Isabel"]},{name:"Pacific Standard Time",abbr:"PDT",offset:-7,isdst:!0,text:"(UTC-08:00) Pacific Time (US & Canada)",utc:["America/Dawson","America/Los_Angeles","America/Tijuana","America/Vancouver","America/Whitehorse","PST8PDT"]},{name:"US Mountain Standard Time",abbr:"UMST",offset:-7,isdst:!1,text:"(UTC-07:00) Arizona",utc:["America/Creston","America/Dawson_Creek","America/Hermosillo","America/Phoenix","Etc/GMT+7"]},{name:"Mountain Standard Time (Mexico)",abbr:"MDT",offset:-6,isdst:!0,text:"(UTC-07:00) Chihuahua, La Paz, Mazatlan",utc:["America/Chihuahua","America/Mazatlan"]},{name:"Mountain Standard Time",abbr:"MDT",offset:-6,isdst:!0,text:"(UTC-07:00) Mountain Time (US & Canada)",utc:["America/Boise","America/Cambridge_Bay","America/Denver","America/Edmonton","America/Inuvik","America/Ojinaga","America/Yellowknife","MST7MDT"]},{name:"Central America Standard Time",abbr:"CAST",offset:-6,isdst:!1,text:"(UTC-06:00) Central America",utc:["America/Belize","America/Costa_Rica","America/El_Salvador","America/Guatemala","America/Managua","America/Tegucigalpa","Etc/GMT+6","Pacific/Galapagos"]},{name:"Central Standard Time",abbr:"CDT",offset:-5,isdst:!0,text:"(UTC-06:00) Central Time (US & Canada)",utc:["America/Chicago","America/Indiana/Knox","America/Indiana/Tell_City","America/Matamoros","America/Menominee","America/North_Dakota/Beulah","America/North_Dakota/Center","America/North_Dakota/New_Salem","America/Rainy_River","America/Rankin_Inlet","America/Resolute","America/Winnipeg","CST6CDT"]},{name:"Central Standard Time (Mexico)",abbr:"CDT",offset:-5,isdst:!0,text:"(UTC-06:00) Guadalajara, Mexico City, Monterrey",utc:["America/Bahia_Banderas","America/Cancun","America/Merida","America/Mexico_City","America/Monterrey"]},{name:"Canada Central Standard Time",abbr:"CCST",offset:-6,isdst:!1,text:"(UTC-06:00) Saskatchewan",utc:["America/Regina","America/Swift_Current"]},{name:"SA Pacific Standard Time",abbr:"SPST",offset:-5,isdst:!1,text:"(UTC-05:00) Bogota, Lima, Quito",utc:["America/Bogota","America/Cayman","America/Coral_Harbour","America/Eirunepe","America/Guayaquil","America/Jamaica","America/Lima","America/Panama","America/Rio_Branco","Etc/GMT+5"]},{name:"Eastern Standard Time",abbr:"EDT",offset:-4,isdst:!0,text:"(UTC-05:00) Eastern Time (US & Canada)",utc:["America/Detroit","America/Havana","America/Indiana/Petersburg","America/Indiana/Vincennes","America/Indiana/Winamac","America/Iqaluit","America/Kentucky/Monticello","America/Louisville","America/Montreal","America/Nassau","America/New_York","America/Nipigon","America/Pangnirtung","America/Port-au-Prince","America/Thunder_Bay","America/Toronto","EST5EDT"]},{name:"US Eastern Standard Time",abbr:"UEDT",offset:-4,isdst:!0,text:"(UTC-05:00) Indiana (East)",utc:["America/Indiana/Marengo","America/Indiana/Vevay","America/Indianapolis"]},{name:"Venezuela Standard Time",abbr:"VST",offset:-4.5,isdst:!1,text:"(UTC-04:30) Caracas",utc:["America/Caracas"]},{name:"Paraguay Standard Time",abbr:"PST",offset:-4,isdst:!1,text:"(UTC-04:00) Asuncion",utc:["America/Asuncion"]},{name:"Atlantic Standard Time",abbr:"ADT",offset:-3,isdst:!0,text:"(UTC-04:00) Atlantic Time (Canada)",utc:["America/Glace_Bay","America/Goose_Bay","America/Halifax","America/Moncton","America/Thule","Atlantic/Bermuda"]},{name:"Central Brazilian Standard Time",abbr:"CBST",offset:-4,isdst:!1,text:"(UTC-04:00) Cuiaba",utc:["America/Campo_Grande","America/Cuiaba"]},{name:"SA Western Standard Time",abbr:"SWST",offset:-4,isdst:!1,text:"(UTC-04:00) Georgetown, La Paz, Manaus, San Juan",utc:["America/Anguilla","America/Antigua","America/Aruba","America/Barbados","America/Blanc-Sablon","America/Boa_Vista","America/Curacao","America/Dominica","America/Grand_Turk","America/Grenada","America/Guadeloupe","America/Guyana","America/Kralendijk","America/La_Paz","America/Lower_Princes","America/Manaus","America/Marigot","America/Martinique","America/Montserrat","America/Port_of_Spain","America/Porto_Velho","America/Puerto_Rico","America/Santo_Domingo","America/St_Barthelemy","America/St_Kitts","America/St_Lucia","America/St_Thomas","America/St_Vincent","America/Tortola","Etc/GMT+4"]},{name:"Pacific SA Standard Time",abbr:"PSST",offset:-4,isdst:!1,text:"(UTC-04:00) Santiago",utc:["America/Santiago","Antarctica/Palmer"]},{name:"Newfoundland Standard Time",abbr:"NDT",offset:-2.5,isdst:!0,text:"(UTC-03:30) Newfoundland",utc:["America/St_Johns"]},{name:"E. South America Standard Time",abbr:"ESAST",offset:-3,isdst:!1,text:"(UTC-03:00) Brasilia",utc:["America/Sao_Paulo"]},{name:"Argentina Standard Time",abbr:"AST",offset:-3,isdst:!1,text:"(UTC-03:00) Buenos Aires",utc:["America/Argentina/La_Rioja","America/Argentina/Rio_Gallegos","America/Argentina/Salta","America/Argentina/San_Juan","America/Argentina/San_Luis","America/Argentina/Tucuman","America/Argentina/Ushuaia","America/Buenos_Aires","America/Catamarca","America/Cordoba","America/Jujuy","America/Mendoza"]},{name:"SA Eastern Standard Time",abbr:"SEST",offset:-3,isdst:!1,text:"(UTC-03:00) Cayenne, Fortaleza",utc:["America/Araguaina","America/Belem","America/Cayenne","America/Fortaleza","America/Maceio","America/Paramaribo","America/Recife","America/Santarem","Antarctica/Rothera","Atlantic/Stanley","Etc/GMT+3"]},{name:"Greenland Standard Time",abbr:"GDT",offset:-2,isdst:!0,text:"(UTC-03:00) Greenland",utc:["America/Godthab"]},{name:"Montevideo Standard Time",abbr:"MST",offset:-3,isdst:!1,text:"(UTC-03:00) Montevideo",utc:["America/Montevideo"]},{name:"Bahia Standard Time",abbr:"BST",offset:-3,isdst:!1,text:"(UTC-03:00) Salvador",utc:["America/Bahia"]},{name:"UTC-02",abbr:"U",offset:-2,isdst:!1,text:"(UTC-02:00) Coordinated Universal Time-02",utc:["America/Noronha","Atlantic/South_Georgia","Etc/GMT+2"]},{name:"Mid-Atlantic Standard Time",abbr:"MDT",offset:-1,isdst:!0,text:"(UTC-02:00) Mid-Atlantic - Old"},{name:"Azores Standard Time",abbr:"ADT",offset:0,isdst:!0,text:"(UTC-01:00) Azores",utc:["America/Scoresbysund","Atlantic/Azores"]},{name:"Cape Verde Standard Time",abbr:"CVST",offset:-1,isdst:!1,text:"(UTC-01:00) Cape Verde Is.",utc:["Atlantic/Cape_Verde","Etc/GMT+1"]},{name:"Morocco Standard Time",abbr:"MDT",offset:1,isdst:!0,text:"(UTC) Casablanca",utc:["Africa/Casablanca","Africa/El_Aaiun"]},{name:"UTC",abbr:"CUT",offset:0,isdst:!1,text:"(UTC) Coordinated Universal Time",utc:["America/Danmarkshavn","Etc/GMT"]},{name:"GMT Standard Time",abbr:"GDT",offset:1,isdst:!0,text:"(UTC) Dublin, Edinburgh, Lisbon, London",utc:["Atlantic/Canary","Atlantic/Faeroe","Atlantic/Madeira","Europe/Dublin","Europe/Guernsey","Europe/Isle_of_Man","Europe/Jersey","Europe/Lisbon","Europe/London"]},{name:"Greenwich Standard Time",abbr:"GST",offset:0,isdst:!1,text:"(UTC) Monrovia, Reykjavik",utc:["Africa/Abidjan","Africa/Accra","Africa/Bamako","Africa/Banjul","Africa/Bissau","Africa/Conakry","Africa/Dakar","Africa/Freetown","Africa/Lome","Africa/Monrovia","Africa/Nouakchott","Africa/Ouagadougou","Africa/Sao_Tome","Atlantic/Reykjavik","Atlantic/St_Helena"]},{name:"W. Europe Standard Time",abbr:"WEDT",offset:2,isdst:!0,text:"(UTC+01:00) Amsterdam, Berlin, Bern, Rome, Stockholm, Vienna",utc:["Arctic/Longyearbyen","Europe/Amsterdam","Europe/Andorra","Europe/Berlin","Europe/Busingen","Europe/Gibraltar","Europe/Luxembourg","Europe/Malta","Europe/Monaco","Europe/Oslo","Europe/Rome","Europe/San_Marino","Europe/Stockholm","Europe/Vaduz","Europe/Vatican","Europe/Vienna","Europe/Zurich"]},{name:"Central Europe Standard Time",abbr:"CEDT",offset:2,isdst:!0,text:"(UTC+01:00) Belgrade, Bratislava, Budapest, Ljubljana, Prague",utc:["Europe/Belgrade","Europe/Bratislava","Europe/Budapest","Europe/Ljubljana","Europe/Podgorica","Europe/Prague","Europe/Tirane"]},{name:"Romance Standard Time",abbr:"RDT",offset:2,isdst:!0,text:"(UTC+01:00) Brussels, Copenhagen, Madrid, Paris",utc:["Africa/Ceuta","Europe/Brussels","Europe/Copenhagen","Europe/Madrid","Europe/Paris"]},{name:"Central European Standard Time",abbr:"CEDT",offset:2,isdst:!0,text:"(UTC+01:00) Sarajevo, Skopje, Warsaw, Zagreb",utc:["Europe/Sarajevo","Europe/Skopje","Europe/Warsaw","Europe/Zagreb"]},{name:"W. Central Africa Standard Time",abbr:"WCAST",offset:1,isdst:!1,text:"(UTC+01:00) West Central Africa",utc:["Africa/Algiers","Africa/Bangui","Africa/Brazzaville","Africa/Douala","Africa/Kinshasa","Africa/Lagos","Africa/Libreville","Africa/Luanda","Africa/Malabo","Africa/Ndjamena","Africa/Niamey","Africa/Porto-Novo","Africa/Tunis","Etc/GMT-1"]},{name:"Namibia Standard Time",abbr:"NST",offset:1,isdst:!1,text:"(UTC+01:00) Windhoek",utc:["Africa/Windhoek"]},{name:"GTB Standard Time",abbr:"GDT",offset:3,isdst:!0,text:"(UTC+02:00) Athens, Bucharest",utc:["Asia/Nicosia","Europe/Athens","Europe/Bucharest","Europe/Chisinau"]},{name:"Middle East Standard Time",abbr:"MEDT",offset:3,isdst:!0,text:"(UTC+02:00) Beirut",utc:["Asia/Beirut"]},{name:"Egypt Standard Time",abbr:"EST",offset:2,isdst:!1,text:"(UTC+02:00) Cairo",utc:["Africa/Cairo"]},{name:"Syria Standard Time",abbr:"SDT",offset:3,isdst:!0,text:"(UTC+02:00) Damascus",utc:["Asia/Damascus"]},{name:"E. Europe Standard Time",abbr:"EEDT",offset:3,isdst:!0,text:"(UTC+02:00) E. Europe"},{name:"South Africa Standard Time",abbr:"SAST",offset:2,isdst:!1,text:"(UTC+02:00) Harare, Pretoria",utc:["Africa/Blantyre","Africa/Bujumbura","Africa/Gaborone","Africa/Harare","Africa/Johannesburg","Africa/Kigali","Africa/Lubumbashi","Africa/Lusaka","Africa/Maputo","Africa/Maseru","Africa/Mbabane","Etc/GMT-2"]},{name:"FLE Standard Time",abbr:"FDT",offset:3,isdst:!0,text:"(UTC+02:00) Helsinki, Kyiv, Riga, Sofia, Tallinn, Vilnius",utc:["Europe/Helsinki","Europe/Kiev","Europe/Mariehamn","Europe/Riga","Europe/Sofia","Europe/Tallinn","Europe/Uzhgorod","Europe/Vilnius","Europe/Zaporozhye"]},{name:"Turkey Standard Time",abbr:"TDT",offset:3,isdst:!0,text:"(UTC+02:00) Istanbul",utc:["Europe/Istanbul"]},{name:"Israel Standard Time",abbr:"JDT",offset:3,isdst:!0,text:"(UTC+02:00) Jerusalem",utc:["Asia/Jerusalem"]},{name:"Libya Standard Time",abbr:"LST",offset:2,isdst:!1,text:"(UTC+02:00) Tripoli",utc:["Africa/Tripoli"]},{name:"Jordan Standard Time",abbr:"JST",offset:3,isdst:!1,text:"(UTC+03:00) Amman",utc:["Asia/Amman"]},{name:"Arabic Standard Time",abbr:"AST",offset:3,isdst:!1,text:"(UTC+03:00) Baghdad",utc:["Asia/Baghdad"]},{name:"Kaliningrad Standard Time",abbr:"KST",offset:3,isdst:!1,text:"(UTC+03:00) Kaliningrad, Minsk",utc:["Europe/Kaliningrad","Europe/Minsk"]},{name:"Arab Standard Time",abbr:"AST",offset:3,isdst:!1,text:"(UTC+03:00) Kuwait, Riyadh",utc:["Asia/Aden","Asia/Bahrain","Asia/Kuwait","Asia/Qatar","Asia/Riyadh"]},{name:"E. Africa Standard Time",abbr:"EAST",offset:3,isdst:!1,text:"(UTC+03:00) Nairobi",utc:["Africa/Addis_Ababa","Africa/Asmera","Africa/Dar_es_Salaam","Africa/Djibouti","Africa/Juba","Africa/Kampala","Africa/Khartoum","Africa/Mogadishu","Africa/Nairobi","Antarctica/Syowa","Etc/GMT-3","Indian/Antananarivo","Indian/Comoro","Indian/Mayotte"]},{name:"Iran Standard Time",abbr:"IDT",offset:4.5,isdst:!0,text:"(UTC+03:30) Tehran",utc:["Asia/Tehran"]},{name:"Arabian Standard Time",abbr:"AST",offset:4,isdst:!1,text:"(UTC+04:00) Abu Dhabi, Muscat",utc:["Asia/Dubai","Asia/Muscat","Etc/GMT-4"]},{name:"Azerbaijan Standard Time",abbr:"ADT",offset:5,isdst:!0,text:"(UTC+04:00) Baku",utc:["Asia/Baku"]},{name:"Russian Standard Time",abbr:"RST",offset:4,isdst:!1,text:"(UTC+04:00) Moscow, St. Petersburg, Volgograd",utc:["Europe/Moscow","Europe/Samara","Europe/Simferopol","Europe/Volgograd"]},{name:"Mauritius Standard Time",abbr:"MST",offset:4,isdst:!1,text:"(UTC+04:00) Port Louis",utc:["Indian/Mahe","Indian/Mauritius","Indian/Reunion"]},{name:"Georgian Standard Time",abbr:"GST",offset:4,isdst:!1,text:"(UTC+04:00) Tbilisi",utc:["Asia/Tbilisi"]},{name:"Caucasus Standard Time",abbr:"CST",offset:4,isdst:!1,text:"(UTC+04:00) Yerevan",utc:["Asia/Yerevan"]},{name:"Afghanistan Standard Time",abbr:"AST",offset:4.5,isdst:!1,text:"(UTC+04:30) Kabul",utc:["Asia/Kabul"]},{name:"West Asia Standard Time",abbr:"WAST",offset:5,isdst:!1,text:"(UTC+05:00) Ashgabat, Tashkent",utc:["Antarctica/Mawson","Asia/Aqtau","Asia/Aqtobe","Asia/Ashgabat","Asia/Dushanbe","Asia/Oral","Asia/Samarkand","Asia/Tashkent","Etc/GMT-5","Indian/Kerguelen","Indian/Maldives"]},{name:"Pakistan Standard Time",abbr:"PST",offset:5,isdst:!1,text:"(UTC+05:00) Islamabad, Karachi",utc:["Asia/Karachi"]},{name:"India Standard Time",abbr:"IST",offset:5.5,isdst:!1,text:"(UTC+05:30) Chennai, Kolkata, Mumbai, New Delhi",utc:["Asia/Calcutta"]},{name:"Sri Lanka Standard Time",abbr:"SLST",offset:5.5,isdst:!1,text:"(UTC+05:30) Sri Jayawardenepura",utc:["Asia/Colombo"]},{name:"Nepal Standard Time",abbr:"NST",offset:5.75,isdst:!1,text:"(UTC+05:45) Kathmandu",utc:["Asia/Katmandu"]},{name:"Central Asia Standard Time",abbr:"CAST",offset:6,isdst:!1,text:"(UTC+06:00) Astana",utc:["Antarctica/Vostok","Asia/Almaty","Asia/Bishkek","Asia/Qyzylorda","Asia/Urumqi","Etc/GMT-6","Indian/Chagos"]},{name:"Bangladesh Standard Time",abbr:"BST",offset:6,isdst:!1,text:"(UTC+06:00) Dhaka",utc:["Asia/Dhaka","Asia/Thimphu"]},{name:"Ekaterinburg Standard Time",abbr:"EST",offset:6,isdst:!1,text:"(UTC+06:00) Ekaterinburg",utc:["Asia/Yekaterinburg"]},{name:"Myanmar Standard Time",abbr:"MST",offset:6.5,isdst:!1,text:"(UTC+06:30) Yangon (Rangoon)",utc:["Asia/Rangoon","Indian/Cocos"]},{name:"SE Asia Standard Time",abbr:"SAST",offset:7,isdst:!1,text:"(UTC+07:00) Bangkok, Hanoi, Jakarta",utc:["Antarctica/Davis","Asia/Bangkok","Asia/Hovd","Asia/Jakarta","Asia/Phnom_Penh","Asia/Pontianak","Asia/Saigon","Asia/Vientiane","Etc/GMT-7","Indian/Christmas"]},{name:"N. Central Asia Standard Time",abbr:"NCAST",offset:7,isdst:!1,text:"(UTC+07:00) Novosibirsk",utc:["Asia/Novokuznetsk","Asia/Novosibirsk","Asia/Omsk"]},{name:"China Standard Time",abbr:"CST",offset:8,isdst:!1,text:"(UTC+08:00) Beijing, Chongqing, Hong Kong, Urumqi",utc:["Asia/Hong_Kong","Asia/Macau","Asia/Shanghai"]},{name:"North Asia Standard Time",abbr:"NAST",offset:8,isdst:!1,text:"(UTC+08:00) Krasnoyarsk",utc:["Asia/Krasnoyarsk"]},{name:"Singapore Standard Time",abbr:"MPST",offset:8,isdst:!1,text:"(UTC+08:00) Kuala Lumpur, Singapore",utc:["Asia/Brunei","Asia/Kuala_Lumpur","Asia/Kuching","Asia/Makassar","Asia/Manila","Asia/Singapore","Etc/GMT-8"]},{name:"W. Australia Standard Time",abbr:"WAST",offset:8,isdst:!1,text:"(UTC+08:00) Perth",utc:["Antarctica/Casey","Australia/Perth"]},{name:"Taipei Standard Time",abbr:"TST",offset:8,isdst:!1,text:"(UTC+08:00) Taipei",utc:["Asia/Taipei"]},{name:"Ulaanbaatar Standard Time",abbr:"UST",offset:8,isdst:!1,text:"(UTC+08:00) Ulaanbaatar",utc:["Asia/Choibalsan","Asia/Ulaanbaatar"]},{name:"North Asia East Standard Time",abbr:"NAEST",offset:9,isdst:!1,text:"(UTC+09:00) Irkutsk",utc:["Asia/Irkutsk"]},{name:"Tokyo Standard Time",abbr:"TST",offset:9,isdst:!1,text:"(UTC+09:00) Osaka, Sapporo, Tokyo",utc:["Asia/Dili","Asia/Jayapura","Asia/Tokyo","Etc/GMT-9","Pacific/Palau"]},{name:"Korea Standard Time",abbr:"KST",offset:9,isdst:!1,text:"(UTC+09:00) Seoul",utc:["Asia/Pyongyang","Asia/Seoul"]},{name:"Cen. Australia Standard Time",abbr:"CAST",offset:9.5,isdst:!1,text:"(UTC+09:30) Adelaide",utc:["Australia/Adelaide","Australia/Broken_Hill"]},{name:"AUS Central Standard Time",abbr:"ACST",offset:9.5,isdst:!1,text:"(UTC+09:30) Darwin",utc:["Australia/Darwin"]},{name:"E. Australia Standard Time",abbr:"EAST",offset:10,isdst:!1,text:"(UTC+10:00) Brisbane",utc:["Australia/Brisbane","Australia/Lindeman"]},{name:"AUS Eastern Standard Time",abbr:"AEST",offset:10,isdst:!1,text:"(UTC+10:00) Canberra, Melbourne, Sydney",utc:["Australia/Melbourne","Australia/Sydney"]},{name:"West Pacific Standard Time",abbr:"WPST",offset:10,isdst:!1,text:"(UTC+10:00) Guam, Port Moresby",utc:["Antarctica/DumontDUrville","Etc/GMT-10","Pacific/Guam","Pacific/Port_Moresby","Pacific/Saipan","Pacific/Truk"]},{name:"Tasmania Standard Time",abbr:"TST",offset:10,isdst:!1,text:"(UTC+10:00) Hobart",utc:["Australia/Currie","Australia/Hobart"]},{name:"Yakutsk Standard Time",abbr:"YST",offset:10,isdst:!1,text:"(UTC+10:00) Yakutsk",utc:["Asia/Chita","Asia/Khandyga","Asia/Yakutsk"]},{name:"Central Pacific Standard Time",abbr:"CPST",offset:11,isdst:!1,text:"(UTC+11:00) Solomon Is., New Caledonia",utc:["Antarctica/Macquarie","Etc/GMT-11","Pacific/Efate","Pacific/Guadalcanal","Pacific/Kosrae","Pacific/Noumea","Pacific/Ponape"]},{name:"Vladivostok Standard Time",abbr:"VST",offset:11,isdst:!1,text:"(UTC+11:00) Vladivostok",utc:["Asia/Sakhalin","Asia/Ust-Nera","Asia/Vladivostok"]},{name:"New Zealand Standard Time",abbr:"NZST",offset:12,isdst:!1,text:"(UTC+12:00) Auckland, Wellington",utc:["Antarctica/McMurdo","Pacific/Auckland"]},{name:"UTC+12",abbr:"U",offset:12,isdst:!1,text:"(UTC+12:00) Coordinated Universal Time+12",utc:["Etc/GMT-12","Pacific/Funafuti","Pacific/Kwajalein","Pacific/Majuro","Pacific/Nauru","Pacific/Tarawa","Pacific/Wake","Pacific/Wallis"]},{name:"Fiji Standard Time",abbr:"FST",offset:12,isdst:!1,text:"(UTC+12:00) Fiji",utc:["Pacific/Fiji"]},{name:"Magadan Standard Time",abbr:"MST",offset:12,isdst:!1,text:"(UTC+12:00) Magadan",utc:["Asia/Anadyr","Asia/Kamchatka","Asia/Magadan","Asia/Srednekolymsk"]},{name:"Kamchatka Standard Time",abbr:"KDT",offset:13,isdst:!0,text:"(UTC+12:00) Petropavlovsk-Kamchatsky - Old"},{name:"Tonga Standard Time",abbr:"TST",offset:13,isdst:!1,text:"(UTC+13:00) Nuku'alofa",utc:["Etc/GMT-13","Pacific/Enderbury","Pacific/Fakaofo","Pacific/Tongatapu"]},{name:"Samoa Standard Time",abbr:"SST",offset:13,isdst:!1,text:"(UTC+13:00) Samoa",utc:["Pacific/Apia"]}],profession:["Airline Pilot","Academic Team","Accountant","Account Executive","Actor","Actuary","Acquisition Analyst","Administrative Asst.","Administrative Analyst","Administrator","Advertising Director","Aerospace Engineer","Agent","Agricultural Inspector","Agricultural Scientist","Air Traffic Controller","Animal Trainer","Anthropologist","Appraiser","Architect","Art Director","Artist","Astronomer","Athletic Coach","Auditor","Author","Baker","Banker","Bankruptcy Attorney","Benefits Manager","Biologist","Bio-feedback Specialist","Biomedical Engineer","Biotechnical Researcher","Broadcaster","Broker","Building Manager","Building Contractor","Building Inspector","Business Analyst","Business Planner","Business Manager","Buyer","Call Center Manager","Career Counselor","Cash Manager","Ceramic Engineer","Chief Executive Officer","Chief Operation Officer","Chef","Chemical Engineer","Chemist","Child Care Manager","Chief Medical Officer","Chiropractor","Cinematographer","City Housing Manager","City Manager","Civil Engineer","Claims Manager","Clinical Research Assistant","Collections Manager.","Compliance Manager","Comptroller","Computer Manager","Commercial Artist","Communications Affairs Director","Communications Director","Communications Engineer","Compensation Analyst","Computer Programmer","Computer Ops. Manager","Computer Engineer","Computer Operator","Computer Graphics Specialist","Construction Engineer","Construction Manager","Consultant","Consumer Relations Manager","Contract Administrator","Copyright Attorney","Copywriter","Corporate Planner","Corrections Officer","Cosmetologist","Credit Analyst","Cruise Director","Chief Information Officer","Chief Technology Officer","Customer Service Manager","Cryptologist","Dancer","Data Security Manager","Database Manager","Day Care Instructor","Dentist","Designer","Design Engineer","Desktop Publisher","Developer","Development Officer","Diamond Merchant","Dietitian","Direct Marketer","Director","Distribution Manager","Diversity Manager","Economist","EEO Compliance Manager","Editor","Education Adminator","Electrical Engineer","Electro Optical Engineer","Electronics Engineer","Embassy Management","Employment Agent","Engineer Technician","Entrepreneur","Environmental Analyst","Environmental Attorney","Environmental Engineer","Environmental Specialist","Escrow Officer","Estimator","Executive Assistant","Executive Director","Executive Recruiter","Facilities Manager","Family Counselor","Fashion Events Manager","Fashion Merchandiser","Fast Food Manager","Film Producer","Film Production Assistant","Financial Analyst","Financial Planner","Financier","Fine Artist","Wildlife Specialist","Fitness Consultant","Flight Attendant","Flight Engineer","Floral Designer","Food & Beverage Director","Food Service Manager","Forestry Technician","Franchise Management","Franchise Sales","Fraud Investigator","Freelance Writer","Fund Raiser","General Manager","Geologist","General Counsel","Geriatric Specialist","Gerontologist","Glamour Photographer","Golf Club Manager","Gourmet Chef","Graphic Designer","Grounds Keeper","Hazardous Waste Manager","Health Care Manager","Health Therapist","Health Service Administrator","Hearing Officer","Home Economist","Horticulturist","Hospital Administrator","Hotel Manager","Human Resources Manager","Importer","Industrial Designer","Industrial Engineer","Information Director","Inside Sales","Insurance Adjuster","Interior Decorator","Internal Controls Director","International Acct.","International Courier","International Lawyer","Interpreter","Investigator","Investment Banker","Investment Manager","IT Architect","IT Project Manager","IT Systems Analyst","Jeweler","Joint Venture Manager","Journalist","Labor Negotiator","Labor Organizer","Labor Relations Manager","Lab Services Director","Lab Technician","Land Developer","Landscape Architect","Law Enforcement Officer","Lawyer","Lead Software Engineer","Lead Software Test Engineer","Leasing Manager","Legal Secretary","Library Manager","Litigation Attorney","Loan Officer","Lobbyist","Logistics Manager","Maintenance Manager","Management Consultant","Managed Care Director","Managing Partner","Manufacturing Director","Manpower Planner","Marine Biologist","Market Res. Analyst","Marketing Director","Materials Manager","Mathematician","Membership Chairman","Mechanic","Mechanical Engineer","Media Buyer","Medical Investor","Medical Secretary","Medical Technician","Mental Health Counselor","Merchandiser","Metallurgical Engineering","Meteorologist","Microbiologist","MIS Manager","Motion Picture Director","Multimedia Director","Musician","Network Administrator","Network Specialist","Network Operator","New Product Manager","Novelist","Nuclear Engineer","Nuclear Specialist","Nutritionist","Nursing Administrator","Occupational Therapist","Oceanographer","Office Manager","Operations Manager","Operations Research Director","Optical Technician","Optometrist","Organizational Development Manager","Outplacement Specialist","Paralegal","Park Ranger","Patent Attorney","Payroll Specialist","Personnel Specialist","Petroleum Engineer","Pharmacist","Photographer","Physical Therapist","Physician","Physician Assistant","Physicist","Planning Director","Podiatrist","Political Analyst","Political Scientist","Politician","Portfolio Manager","Preschool Management","Preschool Teacher","Principal","Private Banker","Private Investigator","Probation Officer","Process Engineer","Producer","Product Manager","Product Engineer","Production Engineer","Production Planner","Professional Athlete","Professional Coach","Professor","Project Engineer","Project Manager","Program Manager","Property Manager","Public Administrator","Public Safety Director","PR Specialist","Publisher","Purchasing Agent","Publishing Director","Quality Assurance Specialist","Quality Control Engineer","Quality Control Inspector","Radiology Manager","Railroad Engineer","Real Estate Broker","Recreational Director","Recruiter","Redevelopment Specialist","Regulatory Affairs Manager","Registered Nurse","Rehabilitation Counselor","Relocation Manager","Reporter","Research Specialist","Restaurant Manager","Retail Store Manager","Risk Analyst","Safety Engineer","Sales Engineer","Sales Trainer","Sales Promotion Manager","Sales Representative","Sales Manager","Service Manager","Sanitation Engineer","Scientific Programmer","Scientific Writer","Securities Analyst","Security Consultant","Security Director","Seminar Presenter","Ship's Officer","Singer","Social Director","Social Program Planner","Social Research","Social Scientist","Social Worker","Sociologist","Software Developer","Software Engineer","Software Test Engineer","Soil Scientist","Special Events Manager","Special Education Teacher","Special Projects Director","Speech Pathologist","Speech Writer","Sports Event Manager","Statistician","Store Manager","Strategic Alliance Director","Strategic Planning Director","Stress Reduction Specialist","Stockbroker","Surveyor","Structural Engineer","Superintendent","Supply Chain Director","System Engineer","Systems Analyst","Systems Programmer","System Administrator","Tax Specialist","Teacher","Technical Support Specialist","Technical Illustrator","Technical Writer","Technology Director","Telecom Analyst","Telemarketer","Theatrical Director","Title Examiner","Tour Escort","Tour Guide Director","Traffic Manager","Trainer Translator","Transportation Manager","Travel Agent","Treasurer","TV Programmer","Underwriter","Union Representative","University Administrator","University Dean","Urban Planner","Veterinarian","Vendor Relations Director","Viticulturist","Warehouse Manager"],animals:{ocean:["Acantharea","Anemone","Angelfish King","Ahi Tuna","Albacore","American Oyster","Anchovy","Armored Snail","Arctic Char","Atlantic Bluefin Tuna","Atlantic Cod","Atlantic Goliath Grouper","Atlantic Trumpetfish","Atlantic Wolffish","Baleen Whale","Banded Butterflyfish","Banded Coral Shrimp","Banded Sea Krait","Barnacle","Barndoor Skate","Barracuda","Basking Shark","Bass","Beluga Whale","Bluebanded Goby","Bluehead Wrasse","Bluefish","Bluestreak Cleaner-Wrasse","Blue Marlin","Blue Shark","Blue Spiny Lobster","Blue Tang","Blue Whale","Broadclub Cuttlefish","Bull Shark","Chambered Nautilus","Chilean Basket Star","Chilean Jack Mackerel","Chinook Salmon","Christmas Tree Worm","Clam","Clown Anemonefish","Clown Triggerfish","Cod","Coelacanth","Cockscomb Cup Coral","Common Fangtooth","Conch","Cookiecutter Shark","Copepod","Coral","Corydoras","Cownose Ray","Crab","Crown-of-Thorns Starfish","Cushion Star","Cuttlefish","California Sea Otters","Dolphin","Dolphinfish","Dory","Devil Fish","Dugong","Dumbo Octopus","Dungeness Crab","Eccentric Sand Dollar","Edible Sea Cucumber","Eel","Elephant Seal","Elkhorn Coral","Emperor Shrimp","Estuarine Crocodile","Fathead Sculpin","Fiddler Crab","Fin Whale","Flameback","Flamingo Tongue Snail","Flashlight Fish","Flatback Turtle","Flatfish","Flying Fish","Flounder","Fluke","French Angelfish","Frilled Shark","Fugu (also called Pufferfish)","Gar","Geoduck","Giant Barrel Sponge","Giant Caribbean Sea Anemone","Giant Clam","Giant Isopod","Giant Kingfish","Giant Oarfish","Giant Pacific Octopus","Giant Pyrosome","Giant Sea Star","Giant Squid","Glowing Sucker Octopus","Giant Tube Worm","Goblin Shark","Goosefish","Great White Shark","Greenland Shark","Grey Atlantic Seal","Grouper","Grunion","Guineafowl Puffer","Haddock","Hake","Halibut","Hammerhead Shark","Hapuka","Harbor Porpoise","Harbor Seal","Hatchetfish","Hawaiian Monk Seal","Hawksbill Turtle","Hector's Dolphin","Hermit Crab","Herring","Hoki","Horn Shark","Horseshoe Crab","Humpback Anglerfish","Humpback Whale","Icefish","Imperator Angelfish","Irukandji Jellyfish","Isopod","Ivory Bush Coral","Japanese Spider Crab","Jellyfish","John Dory","Juan Fernandez Fur Seal","Killer Whale","Kiwa Hirsuta","Krill","Lagoon Triggerfish","Lamprey","Leafy Seadragon","Leopard Seal","Limpet","Ling","Lionfish","Lions Mane Jellyfish","Lobe Coral","Lobster","Loggerhead Turtle","Longnose Sawshark","Longsnout Seahorse","Lophelia Coral","Marrus Orthocanna","Manatee","Manta Ray","Marlin","Megamouth Shark","Mexican Lookdown","Mimic Octopus","Moon Jelly","Mollusk","Monkfish","Moray Eel","Mullet","Mussel","Megaladon","Napoleon Wrasse","Nassau Grouper","Narwhal","Nautilus","Needlefish","Northern Seahorse","North Atlantic Right Whale","Northern Red Snapper","Norway Lobster","Nudibranch","Nurse Shark","Oarfish","Ocean Sunfish","Oceanic Whitetip Shark","Octopus","Olive Sea Snake","Orange Roughy","Ostracod","Otter","Oyster","Pacific Angelshark","Pacific Blackdragon","Pacific Halibut","Pacific Sardine","Pacific Sea Nettle Jellyfish","Pacific White Sided Dolphin","Pantropical Spotted Dolphin","Patagonian Toothfish","Peacock Mantis Shrimp","Pelagic Thresher Shark","Penguin","Peruvian Anchoveta","Pilchard","Pink Salmon","Pinniped","Plankton","Porpoise","Polar Bear","Portuguese Man o' War","Pycnogonid Sea Spider","Quahog","Queen Angelfish","Queen Conch","Queen Parrotfish","Queensland Grouper","Ragfish","Ratfish","Rattail Fish","Ray","Red Drum","Red King Crab","Ringed Seal","Risso's Dolphin","Ross Seals","Sablefish","Salmon","Sand Dollar","Sandbar Shark","Sawfish","Sarcastic Fringehead","Scalloped Hammerhead Shark","Seahorse","Sea Cucumber","Sea Lion","Sea Urchin","Seal","Shark","Shortfin Mako Shark","Shovelnose Guitarfish","Shrimp","Silverside Fish","Skipjack Tuna","Slender Snipe Eel","Smalltooth Sawfish","Smelts","Sockeye Salmon","Southern Stingray","Sponge","Spotted Porcupinefish","Spotted Dolphin","Spotted Eagle Ray","Spotted Moray","Squid","Squidworm","Starfish","Stickleback","Stonefish","Stoplight Loosejaw","Sturgeon","Swordfish","Tan Bristlemouth","Tasseled Wobbegong","Terrible Claw Lobster","Threespot Damselfish","Tiger Prawn","Tiger Shark","Tilefish","Toadfish","Tropical Two-Wing Flyfish","Tuna","Umbrella Squid","Velvet Crab","Venus Flytrap Sea Anemone","Vigtorniella Worm","Viperfish","Vampire Squid","Vaquita","Wahoo","Walrus","West Indian Manatee","Whale","Whale Shark","Whiptail Gulper","White-Beaked Dolphin","White-Ring Garden Eel","White Shrimp","Wobbegong","Wrasse","Wreckfish","Xiphosura","Yellowtail Damselfish","Yelloweye Rockfish","Yellow Cup Black Coral","Yellow Tube Sponge","Yellowfin Tuna","Zebrashark","Zooplankton"],desert:["Aardwolf","Addax","African Wild Ass","Ant","Antelope","Armadillo","Baboon","Badger","Bat","Bearded Dragon","Beetle","Bird","Black-footed Cat","Boa","Brown Bear","Bustard","Butterfly","Camel","Caracal","Caracara","Caterpillar","Centipede","Cheetah","Chipmunk","Chuckwalla","Climbing Mouse","Coati","Cobra","Cotton Rat","Cougar","Courser","Crane Fly","Crow","Dassie Rat","Dove","Dunnart","Eagle","Echidna","Elephant","Emu","Falcon","Fly","Fox","Frogmouth","Gecko","Geoffroy's Cat","Gerbil","Grasshopper","Guanaco","Gundi","Hamster","Hawk","Hedgehog","Hyena","Hyrax","Jackal","Kangaroo","Kangaroo Rat","Kestrel","Kowari","Kultarr","Leopard","Lion","Macaw","Meerkat","Mouse","Oryx","Ostrich","Owl","Pronghorn","Python","Rabbit","Raccoon","Rattlesnake","Rhinoceros","Sand Cat","Spectacled Bear","Spiny Mouse","Starling","Stick Bug","Tarantula","Tit","Toad","Tortoise","Tyrant Flycatcher","Viper","Vulture","Waxwing","Xerus","Zebra"],grassland:["Aardvark","Aardwolf","Accentor","African Buffalo","African Wild Dog","Alpaca","Anaconda","Ant","Anteater","Antelope","Armadillo","Baboon","Badger","Bandicoot","Barbet","Bat","Bee","Bee-eater","Beetle","Bird","Bison","Black-footed Cat","Black-footed Ferret","Bluebird","Boa","Bowerbird","Brown Bear","Bush Dog","Bushshrike","Bustard","Butterfly","Buzzard","Caracal","Caracara","Cardinal","Caterpillar","Cheetah","Chipmunk","Civet","Climbing Mouse","Clouded Leopard","Coati","Cobra","Cockatoo","Cockroach","Common Genet","Cotton Rat","Cougar","Courser","Coyote","Crane","Crane Fly","Cricket","Crow","Culpeo","Death Adder","Deer","Deer Mouse","Dingo","Dinosaur","Dove","Drongo","Duck","Duiker","Dunnart","Eagle","Echidna","Elephant","Elk","Emu","Falcon","Finch","Flea","Fly","Flying Frog","Fox","Frog","Frogmouth","Garter Snake","Gazelle","Gecko","Geoffroy's Cat","Gerbil","Giant Tortoise","Giraffe","Grasshopper","Grison","Groundhog","Grouse","Guanaco","Guinea Pig","Hamster","Harrier","Hartebeest","Hawk","Hedgehog","Helmetshrike","Hippopotamus","Hornbill","Hyena","Hyrax","Impala","Jackal","Jaguar","Jaguarundi","Kangaroo","Kangaroo Rat","Kestrel","Kultarr","Ladybug","Leopard","Lion","Macaw","Meerkat","Mouse","Newt","Oryx","Ostrich","Owl","Pangolin","Pheasant","Prairie Dog","Pronghorn","Przewalski's Horse","Python","Quoll","Rabbit","Raven","Rhinoceros","Shelduck","Sloth Bear","Spectacled Bear","Squirrel","Starling","Stick Bug","Tamandua","Tasmanian Devil","Thornbill","Thrush","Toad","Tortoise"],forest:["Agouti","Anaconda","Anoa","Ant","Anteater","Antelope","Armadillo","Asian Black Bear","Aye-aye","Babirusa","Baboon","Badger","Bandicoot","Banteng","Barbet","Basilisk","Bat","Bearded Dragon","Bee","Bee-eater","Beetle","Bettong","Binturong","Bird-of-paradise","Bongo","Bowerbird","Bulbul","Bush Dog","Bushbaby","Bushshrike","Butterfly","Buzzard","Caecilian","Cardinal","Cassowary","Caterpillar","Centipede","Chameleon","Chimpanzee","Cicada","Civet","Clouded Leopard","Coati","Cobra","Cockatoo","Cockroach","Colugo","Cotinga","Cotton Rat","Cougar","Crane Fly","Cricket","Crocodile","Crow","Cuckoo","Cuscus","Death Adder","Deer","Dhole","Dingo","Dinosaur","Drongo","Duck","Duiker","Eagle","Echidna","Elephant","Finch","Flat-headed Cat","Flea","Flowerpecker","Fly","Flying Frog","Fossa","Frog","Frogmouth","Gaur","Gecko","Gorilla","Grison","Hawaiian Honeycreeper","Hawk","Hedgehog","Helmetshrike","Hornbill","Hyrax","Iguana","Jackal","Jaguar","Jaguarundi","Kestrel","Ladybug","Lemur","Leopard","Lion","Macaw","Mandrill","Margay","Monkey","Mouse","Mouse Deer","Newt","Okapi","Old World Flycatcher","Orangutan","Owl","Pangolin","Peafowl","Pheasant","Possum","Python","Quokka","Rabbit","Raccoon","Red Panda","Red River Hog","Rhinoceros","Sloth Bear","Spectacled Bear","Squirrel","Starling","Stick Bug","Sun Bear","Tamandua","Tamarin","Tapir","Tarantula","Thrush","Tiger","Tit","Toad","Tortoise","Toucan","Trogon","Trumpeter","Turaco","Turtle","Tyrant Flycatcher","Viper","Vulture","Wallaby","Warbler","Wasp","Waxwing","Weaver","Weaver-finch","Whistler","White-eye","Whydah","Woodswallow","Worm","Wren","Xenops","Yellowjacket","Accentor","African Buffalo","American Black Bear","Anole","Bird","Bison","Boa","Brown Bear","Chipmunk","Common Genet","Copperhead","Coyote","Deer Mouse","Dormouse","Elk","Emu","Fisher","Fox","Garter Snake","Giant Panda","Giant Tortoise","Groundhog","Grouse","Guanaco","Himalayan Tahr","Kangaroo","Koala","Numbat","Quoll","Raccoon dog","Tasmanian Devil","Thornbill","Turkey","Vole","Weasel","Wildcat","Wolf","Wombat","Woodchuck","Woodpecker"],farm:["Alpaca","Buffalo","Banteng","Cow","Cat","Chicken","Carp","Camel","Donkey","Dog","Duck","Emu","Goat","Gayal","Guinea","Goose","Horse","Honey","Llama","Pig","Pigeon","Rhea","Rabbit","Sheep","Silkworm","Turkey","Yak","Zebu"],pet:["Bearded Dragon","Birds","Burro","Cats","Chameleons","Chickens","Chinchillas","Chinese Water Dragon","Cows","Dogs","Donkey","Ducks","Ferrets","Fish","Geckos","Geese","Gerbils","Goats","Guinea Fowl","Guinea Pigs","Hamsters","Hedgehogs","Horses","Iguanas","Llamas","Lizards","Mice","Mule","Peafowl","Pigs and Hogs","Pigeons","Ponies","Pot Bellied Pig","Rabbits","Rats","Sheep","Skinks","Snakes","Stick Insects","Sugar Gliders","Tarantula","Turkeys","Turtles"],zoo:["Aardvark","African Wild Dog","Aldabra Tortoise","American Alligator","American Bison","Amur Tiger","Anaconda","Andean Condor","Asian Elephant","Baby Doll Sheep","Bald Eagle","Barred Owl","Blue Iguana","Boer Goat","California Sea Lion","Caribbean Flamingo","Chinchilla","Collared Lemur","Coquerel's Sifaka","Cuban Amazon Parrot","Ebony Langur","Fennec Fox","Fossa","Gelada","Giant Anteater","Giraffe","Gorilla","Grizzly Bear","Henkel's Leaf-tailed Gecko","Indian Gharial","Indian Rhinoceros","King Cobra","King Vulture","Komodo Dragon","Linne's Two-toed Sloth","Lion","Little Penguin","Madagascar Tree Boa","Magellanic Penguin","Malayan Tapir","Malayan Tiger","Matschies Tree Kangaroo","Mini Donkey","Monarch Butterfly","Nile crocodile","North American Porcupine","Nubian Ibex","Okapi","Poison Dart Frog","Polar Bear","Pygmy Marmoset","Radiated Tortoise","Red Panda","Red Ruffed Lemur","Ring-tailed Lemur","Ring-tailed Mongoose","Rock Hyrax","Small Clawed Asian Otter","Snow Leopard","Snowy Owl","Southern White-faced Owl","Southern White Rhinocerous","Squirrel Monkey","Tufted Puffin","White Cheeked Gibbon","White-throated Bee Eater","Zebra"]}},d=Object.prototype.hasOwnProperty,p=Object.keys||function(e){var t=[];for(var r in e)d.call(e,r)&&t.push(r);return t};function f(e,t){var r=Array.isArray(e),n=t||(r?new Array(e.length):{});return r?function(e,t){for(var r=0,n=e.length;r<n;r++)t[r]=e[r]}(e,n):function(e,t){for(var r,n=p(e),i=0,o=n.length;i<o;i++)t[r=n[i]]=e[r]||t[r]}(e,n),n}l.prototype.get=function(e){return f(u[e])},l.prototype.mac_address=function(e){(e=v(e)).separator||(e.separator=e.networkVersion?".":":");var t="ABCDEF1234567890";return e.networkVersion?this.n(this.string,3,{pool:t,length:4}).join(e.separator):this.n(this.string,6,{pool:t,length:2}).join(e.separator)},l.prototype.normal=function(e){if(h((e=v(e,{mean:0,dev:1,pool:[]})).pool.constructor!==Array,"Chance: The pool option must be a valid array."),h("number"!=typeof e.mean,"Chance: Mean (mean) must be a number"),h("number"!=typeof e.dev,"Chance: Standard deviation (dev) must be a number"),0<e.pool.length)return this.normal_pool(e);for(var t,r,n,i=e.mean,o=e.dev;1<=(t=(r=2*this.random()-1)*r+(n=2*this.random()-1)*n););return o*(r*Math.sqrt(-2*Math.log(t)/t))+i},l.prototype.normal_pool=function(e){var t=0;do{var r=Math.round(this.normal({mean:e.mean,dev:e.dev}));if(r<e.pool.length&&0<=r)return e.pool[r];t++}while(t<100);throw new RangeError("Chance: Your pool is too small for the given mean and standard deviation. Please adjust.")},l.prototype.radio=function(e){var t="";switch((e=v(e,{side:"?"})).side.toLowerCase()){case"east":case"e":t="W";break;case"west":case"w":t="K";break;default:t=this.character({pool:"KW"})}return t+this.character({alpha:!0,casing:"upper"})+this.character({alpha:!0,casing:"upper"})+this.character({alpha:!0,casing:"upper"})},l.prototype.set=function(e,t){"string"==typeof e?u[e]=t:u=f(e,u)},l.prototype.tv=function(e){return this.radio(e)},l.prototype.cnpj=function(){var e=this.n(this.natural,8,{max:9}),t=2+6*e[7]+7*e[6]+8*e[5]+9*e[4]+2*e[3]+3*e[2]+4*e[1]+5*e[0];10<=(t=11-t%11)&&(t=0);var r=2*t+3+7*e[7]+8*e[6]+9*e[5]+2*e[4]+3*e[3]+4*e[2]+5*e[1]+6*e[0];return 10<=(r=11-r%11)&&(r=0),""+e[0]+e[1]+"."+e[2]+e[3]+e[4]+"."+e[5]+e[6]+e[7]+"/0001-"+t+r},l.prototype.mersenne_twister=function(e){return new m(e)},l.prototype.blueimp_md5=function(){return new b};var m=function(e){void 0===e&&(e=Math.floor(Math.random()*Math.pow(10,13))),this.N=624,this.M=397,this.MATRIX_A=2567483615,this.UPPER_MASK=2147483648,this.LOWER_MASK=2147483647,this.mt=new Array(this.N),this.mti=this.N+1,this.init_genrand(e)};m.prototype.init_genrand=function(e){for(this.mt[0]=e>>>0,this.mti=1;this.mti<this.N;this.mti++)e=this.mt[this.mti-1]^this.mt[this.mti-1]>>>30,this.mt[this.mti]=(1812433253*((4294901760&e)>>>16)<<16)+1812433253*(65535&e)+this.mti,this.mt[this.mti]>>>=0},m.prototype.init_by_array=function(e,t){var r,n,i=1,o=0;for(this.init_genrand(19650218),r=this.N>t?this.N:t;r;r--)n=this.mt[i-1]^this.mt[i-1]>>>30,this.mt[i]=(this.mt[i]^(1664525*((4294901760&n)>>>16)<<16)+1664525*(65535&n))+e[o]+o,this.mt[i]>>>=0,o++,++i>=this.N&&(this.mt[0]=this.mt[this.N-1],i=1),t<=o&&(o=0);for(r=this.N-1;r;r--)n=this.mt[i-1]^this.mt[i-1]>>>30,this.mt[i]=(this.mt[i]^(1566083941*((4294901760&n)>>>16)<<16)+1566083941*(65535&n))-i,this.mt[i]>>>=0,++i>=this.N&&(this.mt[0]=this.mt[this.N-1],i=1);this.mt[0]=2147483648},m.prototype.genrand_int32=function(){var e,t=new Array(0,this.MATRIX_A);if(this.mti>=this.N){var r;for(this.mti===this.N+1&&this.init_genrand(5489),r=0;r<this.N-this.M;r++)e=this.mt[r]&this.UPPER_MASK|this.mt[r+1]&this.LOWER_MASK,this.mt[r]=this.mt[r+this.M]^e>>>1^t[1&e];for(;r<this.N-1;r++)e=this.mt[r]&this.UPPER_MASK|this.mt[r+1]&this.LOWER_MASK,this.mt[r]=this.mt[r+(this.M-this.N)]^e>>>1^t[1&e];e=this.mt[this.N-1]&this.UPPER_MASK|this.mt[0]&this.LOWER_MASK,this.mt[this.N-1]=this.mt[this.M-1]^e>>>1^t[1&e],this.mti=0}return e=this.mt[this.mti++],e^=e>>>11,e^=e<<7&2636928640,e^=e<<15&4022730752,(e^=e>>>18)>>>0},m.prototype.genrand_int31=function(){return this.genrand_int32()>>>1},m.prototype.genrand_real1=function(){return this.genrand_int32()*(1/4294967295)},m.prototype.random=function(){return this.genrand_int32()*(1/4294967296)},m.prototype.genrand_real3=function(){return(this.genrand_int32()+.5)*(1/4294967296)},m.prototype.genrand_res53=function(){return(67108864*(this.genrand_int32()>>>5)+(this.genrand_int32()>>>6))*(1/9007199254740992)};var b=function(){};b.prototype.VERSION="1.0.1",b.prototype.safe_add=function(e,t){var r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r},b.prototype.bit_roll=function(e,t){return e<<t|e>>>32-t},b.prototype.md5_cmn=function(e,t,r,n,i,o){return this.safe_add(this.bit_roll(this.safe_add(this.safe_add(t,e),this.safe_add(n,o)),i),r)},b.prototype.md5_ff=function(e,t,r,n,i,o,a){return this.md5_cmn(t&r|~t&n,e,t,i,o,a)},b.prototype.md5_gg=function(e,t,r,n,i,o,a){return this.md5_cmn(t&n|r&~n,e,t,i,o,a)},b.prototype.md5_hh=function(e,t,r,n,i,o,a){return this.md5_cmn(t^r^n,e,t,i,o,a)},b.prototype.md5_ii=function(e,t,r,n,i,o,a){return this.md5_cmn(r^(t|~n),e,t,i,o,a)},b.prototype.binl_md5=function(e,t){e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;var r,n,i,o,a,s=1732584193,l=-271733879,u=-1732584194,c=271733878;for(r=0;r<e.length;r+=16)n=s,i=l,o=u,a=c,s=this.md5_ff(s,l,u,c,e[r],7,-680876936),c=this.md5_ff(c,s,l,u,e[r+1],12,-389564586),u=this.md5_ff(u,c,s,l,e[r+2],17,606105819),l=this.md5_ff(l,u,c,s,e[r+3],22,-1044525330),s=this.md5_ff(s,l,u,c,e[r+4],7,-176418897),c=this.md5_ff(c,s,l,u,e[r+5],12,1200080426),u=this.md5_ff(u,c,s,l,e[r+6],17,-1473231341),l=this.md5_ff(l,u,c,s,e[r+7],22,-45705983),s=this.md5_ff(s,l,u,c,e[r+8],7,1770035416),c=this.md5_ff(c,s,l,u,e[r+9],12,-1958414417),u=this.md5_ff(u,c,s,l,e[r+10],17,-42063),l=this.md5_ff(l,u,c,s,e[r+11],22,-1990404162),s=this.md5_ff(s,l,u,c,e[r+12],7,1804603682),c=this.md5_ff(c,s,l,u,e[r+13],12,-40341101),u=this.md5_ff(u,c,s,l,e[r+14],17,-1502002290),l=this.md5_ff(l,u,c,s,e[r+15],22,1236535329),s=this.md5_gg(s,l,u,c,e[r+1],5,-165796510),c=this.md5_gg(c,s,l,u,e[r+6],9,-1069501632),u=this.md5_gg(u,c,s,l,e[r+11],14,643717713),l=this.md5_gg(l,u,c,s,e[r],20,-373897302),s=this.md5_gg(s,l,u,c,e[r+5],5,-701558691),c=this.md5_gg(c,s,l,u,e[r+10],9,38016083),u=this.md5_gg(u,c,s,l,e[r+15],14,-660478335),l=this.md5_gg(l,u,c,s,e[r+4],20,-405537848),s=this.md5_gg(s,l,u,c,e[r+9],5,568446438),c=this.md5_gg(c,s,l,u,e[r+14],9,-1019803690),u=this.md5_gg(u,c,s,l,e[r+3],14,-187363961),l=this.md5_gg(l,u,c,s,e[r+8],20,1163531501),s=this.md5_gg(s,l,u,c,e[r+13],5,-1444681467),c=this.md5_gg(c,s,l,u,e[r+2],9,-51403784),u=this.md5_gg(u,c,s,l,e[r+7],14,1735328473),l=this.md5_gg(l,u,c,s,e[r+12],20,-1926607734),s=this.md5_hh(s,l,u,c,e[r+5],4,-378558),c=this.md5_hh(c,s,l,u,e[r+8],11,-2022574463),u=this.md5_hh(u,c,s,l,e[r+11],16,1839030562),l=this.md5_hh(l,u,c,s,e[r+14],23,-35309556),s=this.md5_hh(s,l,u,c,e[r+1],4,-1530992060),c=this.md5_hh(c,s,l,u,e[r+4],11,1272893353),u=this.md5_hh(u,c,s,l,e[r+7],16,-155497632),l=this.md5_hh(l,u,c,s,e[r+10],23,-1094730640),s=this.md5_hh(s,l,u,c,e[r+13],4,681279174),c=this.md5_hh(c,s,l,u,e[r],11,-358537222),u=this.md5_hh(u,c,s,l,e[r+3],16,-722521979),l=this.md5_hh(l,u,c,s,e[r+6],23,76029189),s=this.md5_hh(s,l,u,c,e[r+9],4,-640364487),c=this.md5_hh(c,s,l,u,e[r+12],11,-421815835),u=this.md5_hh(u,c,s,l,e[r+15],16,530742520),l=this.md5_hh(l,u,c,s,e[r+2],23,-995338651),s=this.md5_ii(s,l,u,c,e[r],6,-198630844),c=this.md5_ii(c,s,l,u,e[r+7],10,1126891415),u=this.md5_ii(u,c,s,l,e[r+14],15,-1416354905),l=this.md5_ii(l,u,c,s,e[r+5],21,-57434055),s=this.md5_ii(s,l,u,c,e[r+12],6,1700485571),c=this.md5_ii(c,s,l,u,e[r+3],10,-1894986606),u=this.md5_ii(u,c,s,l,e[r+10],15,-1051523),l=this.md5_ii(l,u,c,s,e[r+1],21,-2054922799),s=this.md5_ii(s,l,u,c,e[r+8],6,1873313359),c=this.md5_ii(c,s,l,u,e[r+15],10,-30611744),u=this.md5_ii(u,c,s,l,e[r+6],15,-1560198380),l=this.md5_ii(l,u,c,s,e[r+13],21,1309151649),s=this.md5_ii(s,l,u,c,e[r+4],6,-145523070),c=this.md5_ii(c,s,l,u,e[r+11],10,-1120210379),u=this.md5_ii(u,c,s,l,e[r+2],15,718787259),l=this.md5_ii(l,u,c,s,e[r+9],21,-343485551),s=this.safe_add(s,n),l=this.safe_add(l,i),u=this.safe_add(u,o),c=this.safe_add(c,a);return[s,l,u,c]},b.prototype.binl2rstr=function(e){var t,r="";for(t=0;t<32*e.length;t+=8)r+=String.fromCharCode(e[t>>5]>>>t%32&255);return r},b.prototype.rstr2binl=function(e){var t,r=[];for(r[(e.length>>2)-1]=void 0,t=0;t<r.length;t+=1)r[t]=0;for(t=0;t<8*e.length;t+=8)r[t>>5]|=(255&e.charCodeAt(t/8))<<t%32;return r},b.prototype.rstr_md5=function(e){return this.binl2rstr(this.binl_md5(this.rstr2binl(e),8*e.length))},b.prototype.rstr_hmac_md5=function(e,t){var r,n,i=this.rstr2binl(e),o=[],a=[];for(o[15]=a[15]=void 0,16<i.length&&(i=this.binl_md5(i,8*e.length)),r=0;r<16;r+=1)o[r]=909522486^i[r],a[r]=1549556828^i[r];return n=this.binl_md5(o.concat(this.rstr2binl(t)),512+8*t.length),this.binl2rstr(this.binl_md5(a.concat(n),640))},b.prototype.rstr2hex=function(e){var t,r,n="0123456789abcdef",i="";for(r=0;r<e.length;r+=1)t=e.charCodeAt(r),i+=n.charAt(t>>>4&15)+n.charAt(15&t);return i},b.prototype.str2rstr_utf8=function(e){return unescape(encodeURIComponent(e))},b.prototype.raw_md5=function(e){return this.rstr_md5(this.str2rstr_utf8(e))},b.prototype.hex_md5=function(e){return this.rstr2hex(this.raw_md5(e))},b.prototype.raw_hmac_md5=function(e,t){return this.rstr_hmac_md5(this.str2rstr_utf8(e),this.str2rstr_utf8(t))},b.prototype.hex_hmac_md5=function(e,t){return this.rstr2hex(this.raw_hmac_md5(e,t))},b.prototype.md5=function(e,t,r){return t?r?this.raw_hmac_md5(t,e):this.hex_hmac_md5(t,e):r?this.raw_md5(e):this.hex_md5(e)},void 0!==w&&(void 0!==g&&g.exports&&(w=g.exports=l),w.Chance=l),"function"==typeof define&&define.amd&&define([],function(){return l}),"undefined"!=typeof importScripts&&(chance=new l,self.Chance=l),"object"===("undefined"==typeof window?"undefined":_typeof2(window))&&"object"===_typeof2(window.document)&&(window.Chance=l,window.chance=new l)}()}).call(this,e("buffer").Buffer)},{buffer:182}],178:[function(e,t,r){function n(e,t,r){r=r||2;var n,i,o,a,s,l,u,c=t&&t.length,h=c?t[0]*r:e.length,d=m(e,0,h,r,!0),p=[];if(!d||d.next===d.prev)return p;if(c&&(d=function(e,t,r,n){var i,o,a,s,l,u=[];for(i=0,o=t.length;i<o;i++)a=t[i]*n,s=i<o-1?t[i+1]*n:e.length,(l=m(e,a,s,n,!1))===l.next&&(l.steiner=!0),u.push(_(l));for(u.sort(y),i=0;i<u.length;i++)g(u[i],r),r=v(r,r.next);return r}(e,t,d,r)),e.length>80*r){n=o=e[0],i=a=e[1];for(var f=r;f<h;f+=r)(s=e[f])<n&&(n=s),(l=e[f+1])<i&&(i=l),o<s&&(o=s),a<l&&(a=l);u=0!==(u=Math.max(o-n,a-i))?1/u:0}return b(d,p,r,n,i,u),p}function m(e,t,r,n,i){var o,a;if(i===0<A(e,t,r,n))for(o=t;o<r;o+=n)a=l(o,e[o],e[o+1],a);else for(o=r-n;t<=o;o-=n)a=l(o,e[o],e[o+1],a);return a&&s(a,a.next)&&(T(a),a=a.next),a}function v(e,t){if(!e)return e;t||(t=e);var r,n=e;do{if(r=!1,n.steiner||!s(n,n.next)&&0!==S(n.prev,n,n.next))n=n.next;else{if(T(n),(n=t=n.prev)===n.next)break;r=!0}}while(r||n!==t);return t}function b(e,t,r,n,i,o,a){if(e){!a&&o&&function(e,t,r,n){var i=e;for(;null===i.z&&(i.z=w(i.x,i.y,t,r,n)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next,i!==e;);i.prevZ.nextZ=null,i.prevZ=null,function(e){var t,r,n,i,o,a,s,l,u=1;do{for(r=e,o=e=null,a=0;r;){for(a++,n=r,t=s=0;t<u&&(s++,n=n.nextZ);t++);for(l=u;0<s||0<l&&n;)0!==s&&(0===l||!n||r.z<=n.z)?(r=(i=r).nextZ,s--):(n=(i=n).nextZ,l--),o?o.nextZ=i:e=i,i.prevZ=o,o=i;r=n}o.nextZ=null,u*=2}while(1<a)}(i)}(e,n,i,o);for(var s,l,u=e;e.prev!==e.next;)if(s=e.prev,l=e.next,o?h(e,n,i,o):c(e))t.push(s.i/r),t.push(e.i/r),t.push(l.i/r),T(e),e=l.next,u=l.next;else if((e=l)===u){a?1===a?b(e=d(e,t,r),t,r,n,i,o,2):2===a&&p(e,t,r,n,i,o):b(v(e),t,r,n,i,o,1);break}}}function c(e){var t=e.prev,r=e,n=e.next;if(0<=S(t,r,n))return!1;for(var i=e.next.next;i!==e.prev;){if(x(t.x,t.y,r.x,r.y,n.x,n.y,i.x,i.y)&&0<=S(i.prev,i,i.next))return!1;i=i.next}return!0}function h(e,t,r,n){var i=e.prev,o=e,a=e.next;if(0<=S(i,o,a))return!1;for(var s=i.x<o.x?i.x<a.x?i.x:a.x:o.x<a.x?o.x:a.x,l=i.y<o.y?i.y<a.y?i.y:a.y:o.y<a.y?o.y:a.y,u=i.x>o.x?i.x>a.x?i.x:a.x:o.x>a.x?o.x:a.x,c=i.y>o.y?i.y>a.y?i.y:a.y:o.y>a.y?o.y:a.y,h=w(s,l,t,r,n),d=w(u,c,t,r,n),p=e.prevZ,f=e.nextZ;p&&p.z>=h&&f&&f.z<=d;){if(p!==e.prev&&p!==e.next&&x(i.x,i.y,o.x,o.y,a.x,a.y,p.x,p.y)&&0<=S(p.prev,p,p.next))return!1;if(p=p.prevZ,f!==e.prev&&f!==e.next&&x(i.x,i.y,o.x,o.y,a.x,a.y,f.x,f.y)&&0<=S(f.prev,f,f.next))return!1;f=f.nextZ}for(;p&&p.z>=h;){if(p!==e.prev&&p!==e.next&&x(i.x,i.y,o.x,o.y,a.x,a.y,p.x,p.y)&&0<=S(p.prev,p,p.next))return!1;p=p.prevZ}for(;f&&f.z<=d;){if(f!==e.prev&&f!==e.next&&x(i.x,i.y,o.x,o.y,a.x,a.y,f.x,f.y)&&0<=S(f.prev,f,f.next))return!1;f=f.nextZ}return!0}function d(e,t,r){var n=e;do{var i=n.prev,o=n.next.next;!s(i,o)&&f(i,n,n.next,o)&&C(i,o)&&C(o,i)&&(t.push(i.i/r),t.push(n.i/r),t.push(o.i/r),T(n),T(n.next),n=e=o),n=n.next}while(n!==e);return n}function p(e,t,r,n,i,o){var a,s,l=e;do{for(var u=l.next.next;u!==l.prev;){if(l.i!==u.i&&(s=u,(a=l).next.i!==s.i&&a.prev.i!==s.i&&!function(e,t){var r=e;do{if(r.i!==e.i&&r.next.i!==e.i&&r.i!==t.i&&r.next.i!==t.i&&f(r,r.next,e,t))return!0;r=r.next}while(r!==e);return!1}(a,s)&&C(a,s)&&C(s,a)&&function(e,t){var r=e,n=!1,i=(e.x+t.x)/2,o=(e.y+t.y)/2;for(;r.y>o!=r.next.y>o&&r.next.y!==r.y&&i<(r.next.x-r.x)*(o-r.y)/(r.next.y-r.y)+r.x&&(n=!n),r=r.next,r!==e;);return n}(a,s))){var c=k(l,u);return l=v(l,l.next),c=v(c,c.next),b(l,t,r,n,i,o),void b(c,t,r,n,i,o)}u=u.next}l=l.next}while(l!==e)}function y(e,t){return e.x-t.x}function g(e,t){if(t=function(e,t){var r,n=t,i=e.x,o=e.y,a=-1/0;do{if(o<=n.y&&o>=n.next.y&&n.next.y!==n.y){var s=n.x+(o-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(s<=i&&a<s){if((a=s)===i){if(o===n.y)return n;if(o===n.next.y)return n.next}r=n.x<n.next.x?n:n.next}}n=n.next}while(n!==t);if(!r)return null;if(i===a)return r.prev;var l,u=r,c=r.x,h=r.y,d=1/0;n=r.next;for(;n!==u;)i>=n.x&&n.x>=c&&i!==n.x&&x(o<h?i:a,o,c,h,o<h?a:i,o,n.x,n.y)&&((l=Math.abs(o-n.y)/(i-n.x))<d||l===d&&n.x>r.x)&&C(n,e)&&(r=n,d=l),n=n.next;return r}(e,t)){var r=k(t,e);v(r,r.next)}}function w(e,t,r,n,i){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-r)*i)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)*i)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function _(e){for(var t=e,r=e;t.x<r.x&&(r=t),(t=t.next)!==e;);return r}function x(e,t,r,n,i,o,a,s){return 0<=(i-a)*(t-s)-(e-a)*(o-s)&&0<=(e-a)*(n-s)-(r-a)*(t-s)&&0<=(r-a)*(o-s)-(i-a)*(n-s)}function S(e,t,r){return(t.y-e.y)*(r.x-t.x)-(t.x-e.x)*(r.y-t.y)}function s(e,t){return e.x===t.x&&e.y===t.y}function f(e,t,r,n){return!!(s(e,t)&&s(r,n)||s(e,n)&&s(r,t))||0<S(e,t,r)!=0<S(e,t,n)&&0<S(r,n,e)!=0<S(r,n,t)}function C(e,t){return S(e.prev,e,e.next)<0?0<=S(e,t,e.next)&&0<=S(e,e.prev,t):S(e,t,e.prev)<0||S(e,e.next,t)<0}function k(e,t){var r=new a(e.i,e.x,e.y),n=new a(t.i,t.x,t.y),i=e.next,o=t.prev;return(e.next=t).prev=e,(r.next=i).prev=r,(n.next=r).prev=n,(o.next=n).prev=o,n}function l(e,t,r,n){var i=new a(e,t,r);return n?(i.next=n.next,(i.prev=n).next.prev=i,n.next=i):(i.prev=i).next=i,i}function T(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function a(e,t,r){this.i=e,this.x=t,this.y=r,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function A(e,t,r,n){for(var i=0,o=t,a=r-n;o<r;o+=n)i+=(e[a]-e[o])*(e[o+1]+e[a+1]),a=o;return i}t.exports=n,(t.exports.default=n).deviation=function(e,t,r,n){var i=t&&t.length,o=i?t[0]*r:e.length,a=Math.abs(A(e,0,o,r));if(i)for(var s=0,l=t.length;s<l;s++){var u=t[s]*r,c=s<l-1?t[s+1]*r:e.length;a-=Math.abs(A(e,u,c,r))}var h=0;for(s=0;s<n.length;s+=3){var d=n[s]*r,p=n[s+1]*r,f=n[s+2]*r;h+=Math.abs((e[d]-e[f])*(e[p+1]-e[d+1])-(e[d]-e[p])*(e[f+1]-e[d+1]))}return 0===a&&0===h?0:Math.abs((h-a)/a)},n.flatten=function(e){for(var t=e[0][0].length,r={vertices:[],holes:[],dimensions:t},n=0,i=0;i<e.length;i++){for(var o=0;o<e[i].length;o++)for(var a=0;a<t;a++)r.vertices.push(e[i][o][a]);0<i&&(n+=e[i-1].length,r.holes.push(n))}return r}},{}],179:[function(e,t,r){var n=Object.prototype.hasOwnProperty,p="~";function u(){}function o(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function i(){this._events=new u,this._eventsCount=0}Object.create&&(u.prototype=Object.create(null),(new u).__proto__||(p=!1)),i.prototype.eventNames=function(){var e,t,r=[];if(0===this._eventsCount)return r;for(t in e=this._events)n.call(e,t)&&r.push(p?t.slice(1):t);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(e)):r},i.prototype.listeners=function(e,t){var r=p?p+e:e,n=this._events[r];if(t)return!!n;if(!n)return[];if(n.fn)return[n.fn];for(var i=0,o=n.length,a=new Array(o);i<o;i++)a[i]=n[i].fn;return a},i.prototype.emit=function(e,t,r,n,i,o){var a=p?p+e:e;if(!this._events[a])return!1;var s,l,u=this._events[a],c=arguments.length;if(u.fn){switch(u.once&&this.removeListener(e,u.fn,void 0,!0),c){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,t),!0;case 3:return u.fn.call(u.context,t,r),!0;case 4:return u.fn.call(u.context,t,r,n),!0;case 5:return u.fn.call(u.context,t,r,n,i),!0;case 6:return u.fn.call(u.context,t,r,n,i,o),!0}for(l=1,s=new Array(c-1);l<c;l++)s[l-1]=arguments[l];u.fn.apply(u.context,s)}else{var h,d=u.length;for(l=0;l<d;l++)switch(u[l].once&&this.removeListener(e,u[l].fn,void 0,!0),c){case 1:u[l].fn.call(u[l].context);break;case 2:u[l].fn.call(u[l].context,t);break;case 3:u[l].fn.call(u[l].context,t,r);break;case 4:u[l].fn.call(u[l].context,t,r,n);break;default:if(!s)for(h=1,s=new Array(c-1);h<c;h++)s[h-1]=arguments[h];u[l].fn.apply(u[l].context,s)}}return!0},i.prototype.on=function(e,t,r){var n=new o(t,r||this),i=p?p+e:e;return this._events[i]?this._events[i].fn?this._events[i]=[this._events[i],n]:this._events[i].push(n):(this._events[i]=n,this._eventsCount++),this},i.prototype.once=function(e,t,r){var n=new o(t,r||this,!0),i=p?p+e:e;return this._events[i]?this._events[i].fn?this._events[i]=[this._events[i],n]:this._events[i].push(n):(this._events[i]=n,this._eventsCount++),this},i.prototype.removeListener=function(e,t,r,n){var i=p?p+e:e;if(!this._events[i])return this;if(!t)return 0==--this._eventsCount?this._events=new u:delete this._events[i],this;var o=this._events[i];if(o.fn)o.fn!==t||n&&!o.once||r&&o.context!==r||(0==--this._eventsCount?this._events=new u:delete this._events[i]);else{for(var a=0,s=[],l=o.length;a<l;a++)(o[a].fn!==t||n&&!o[a].once||r&&o[a].context!==r)&&s.push(o[a]);s.length?this._events[i]=1===s.length?s[0]:s:0==--this._eventsCount?this._events=new u:delete this._events[i]}return this},i.prototype.removeAllListeners=function(e){var t;return e?(t=p?p+e:e,this._events[t]&&(0==--this._eventsCount?this._events=new u:delete this._events[t])):(this._events=new u,this._eventsCount=0),this},i.prototype.off=i.prototype.removeListener,i.prototype.addListener=i.prototype.on,i.prototype.setMaxListeners=function(){return this},i.prefixed=p,i.EventEmitter=i,void 0!==t&&(t.exports=i)},{}],180:[function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n={fullscreenEnabled:0,fullscreenElement:1,requestFullscreen:2,exitFullscreen:3,fullscreenchange:4,fullscreenerror:5},i=["webkitFullscreenEnabled","webkitFullscreenElement","webkitRequestFullscreen","webkitExitFullscreen","webkitfullscreenchange","webkitfullscreenerror"],o=["mozFullScreenEnabled","mozFullScreenElement","mozRequestFullScreen","mozCancelFullScreen","mozfullscreenchange","mozfullscreenerror"],a=["msFullscreenEnabled","msFullscreenElement","msRequestFullscreen","msExitFullscreen","MSFullscreenChange","MSFullscreenError"],s="undefined"!=typeof window&&void 0!==window.document?window.document:{},l="fullscreenEnabled"in s&&Object.keys(n)||i[0]in s&&i||o[0]in s&&o||a[0]in s&&a||[];r.default={requestFullscreen:function(e){return e[l[n.requestFullscreen]]()},requestFullscreenFunction:function(e){return e[l[n.requestFullscreen]]},get exitFullscreen(){return s[l[n.exitFullscreen]].bind(s)},addEventListener:function(e,t,r){return s.addEventListener(l[n[e]],t,r)},removeEventListener:function(e,t,r){return s.removeEventListener(l[n[e]],t,r)},get fullscreenEnabled(){return Boolean(s[l[n.fullscreenEnabled]])},set fullscreenEnabled(e){},get fullscreenElement(){return s[l[n.fullscreenElement]]},set fullscreenElement(e){},get onfullscreenchange(){return s[("on"+l[n.fullscreenchange]).toLowerCase()]},set onfullscreenchange(e){return s[("on"+l[n.fullscreenchange]).toLowerCase()]=e},get onfullscreenerror(){return s[("on"+l[n.fullscreenerror]).toLowerCase()]},set onfullscreenerror(e){return s[("on"+l[n.fullscreenerror]).toLowerCase()]=e}}},{}],181:[function(e,t,r){!function(e){var c="undefined"!=typeof Uint8Array?Uint8Array:Array,r="+".charCodeAt(0),n="/".charCodeAt(0),i="0".charCodeAt(0),o="a".charCodeAt(0),a="A".charCodeAt(0),s="-".charCodeAt(0),l="_".charCodeAt(0);function h(e){var t=e.charCodeAt(0);return t===r||t===s?62:t===n||t===l?63:t<i?-1:t<i+10?t-i+26+26:t<a+26?t-a:t<o+26?t-o+26:void 0}e.toByteArray=function(e){var t,r,n,i,o,a;if(0<e.length%4)throw new Error("Invalid string. Length must be a multiple of 4");var s=e.length;o="="===e.charAt(s-2)?2:"="===e.charAt(s-1)?1:0,a=new c(3*e.length/4-o),n=0<o?e.length-4:e.length;var l=0;function u(e){a[l++]=e}for(r=t=0;t<n;t+=4,r+=3)u((16711680&(i=h(e.charAt(t))<<18|h(e.charAt(t+1))<<12|h(e.charAt(t+2))<<6|h(e.charAt(t+3))))>>16),u((65280&i)>>8),u(255&i);return 2===o?u(255&(i=h(e.charAt(t))<<2|h(e.charAt(t+1))>>4)):1===o&&(u((i=h(e.charAt(t))<<10|h(e.charAt(t+1))<<4|h(e.charAt(t+2))>>2)>>8&255),u(255&i)),a},e.fromByteArray=function(e){var t,r,n,i,o=e.length%3,a="";function s(e){return"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(e)}for(t=0,n=e.length-o;t<n;t+=3)r=(e[t]<<16)+(e[t+1]<<8)+e[t+2],a+=s((i=r)>>18&63)+s(i>>12&63)+s(i>>6&63)+s(63&i);switch(o){case 1:a+=s((r=e[e.length-1])>>2),a+=s(r<<4&63),a+="==";break;case 2:a+=s((r=(e[e.length-2]<<8)+e[e.length-1])>>10),a+=s(r>>4&63),a+=s(r<<2&63),a+="="}return a}}(void 0===r?this.base64js={}:r)},{}],182:[function(e,t,n){var s=e("base64-js"),o=e("ieee754");function v(e,t,r){if(!(this instanceof v))return new v(e,t,r);var n,i,o,a,s,l=_typeof2(e);if("base64"===t&&"string"===l)for(e=(n=e).trim?n.trim():n.replace(/^\s+|\s+$/g,"");e.length%4!=0;)e+="=";if("number"===l)i=x(e);else if("string"===l)i=v.byteLength(e,t);else{if("object"!==l)throw new Error("First argument needs to be a number, array or string.");i=x(e.length)}if(v._useTypedArrays?o=v._augment(new Uint8Array(i)):((o=this).length=i,o._isBuffer=!0),v._useTypedArrays&&"number"==typeof e.byteLength)o._set(e);else if(S(s=e)||v.isBuffer(s)||s&&"object"===_typeof2(s)&&"number"==typeof s.length)for(a=0;a<i;a++)v.isBuffer(e)?o[a]=e.readUInt8(a):o[a]=e[a];else if("string"===l)o.write(e,0,t);else if("number"===l&&!v._useTypedArrays&&!r)for(a=0;a<i;a++)o[a]=0;return o}function b(e,t,r,n){return v._charsWritten=A(function(e){for(var t=[],r=0;r<e.length;r++)t.push(255&e.charCodeAt(r));return t}(t),e,r,n)}function l(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;i++)n+=String.fromCharCode(e[i]);return n}function a(e,t,r,n){n||(I("boolean"==typeof r,"missing or invalid endian"),I(null!=t,"missing offset"),I(t+1<e.length,"Trying to read beyond buffer length"));var i,o=e.length;if(!(o<=t))return r?(i=e[t],t+1<o&&(i|=e[t+1]<<8)):(i=e[t]<<8,t+1<o&&(i|=e[t+1])),i}function u(e,t,r,n){n||(I("boolean"==typeof r,"missing or invalid endian"),I(null!=t,"missing offset"),I(t+3<e.length,"Trying to read beyond buffer length"));var i,o=e.length;if(!(o<=t))return r?(t+2<o&&(i=e[t+2]<<16),t+1<o&&(i|=e[t+1]<<8),i|=e[t],t+3<o&&(i+=e[t+3]<<24>>>0)):(t+1<o&&(i=e[t+1]<<16),t+2<o&&(i|=e[t+2]<<8),t+3<o&&(i|=e[t+3]),i+=e[t]<<24>>>0),i}function r(e,t,r,n){if(n||(I("boolean"==typeof r,"missing or invalid endian"),I(null!=t,"missing offset"),I(t+1<e.length,"Trying to read beyond buffer length")),!(e.length<=t)){var i=a(e,t,r,!0);return 32768&i?-1*(65535-i+1):i}}function i(e,t,r,n){if(n||(I("boolean"==typeof r,"missing or invalid endian"),I(null!=t,"missing offset"),I(t+3<e.length,"Trying to read beyond buffer length")),!(e.length<=t)){var i=u(e,t,r,!0);return 2147483648&i?-1*(4294967295-i+1):i}}function c(e,t,r,n){return n||(I("boolean"==typeof r,"missing or invalid endian"),I(t+3<e.length,"Trying to read beyond buffer length")),o.read(e,t,r,23,4)}function h(e,t,r,n){return n||(I("boolean"==typeof r,"missing or invalid endian"),I(t+7<e.length,"Trying to read beyond buffer length")),o.read(e,t,r,52,8)}function d(e,t,r,n,i){i||(I(null!=t,"missing value"),I("boolean"==typeof n,"missing or invalid endian"),I(null!=r,"missing offset"),I(r+1<e.length,"trying to write beyond buffer length"),O(t,65535));var o=e.length;if(!(o<=r))for(var a=0,s=Math.min(o-r,2);a<s;a++)e[r+a]=(t&255<<8*(n?a:1-a))>>>8*(n?a:1-a)}function p(e,t,r,n,i){i||(I(null!=t,"missing value"),I("boolean"==typeof n,"missing or invalid endian"),I(null!=r,"missing offset"),I(r+3<e.length,"trying to write beyond buffer length"),O(t,4294967295));var o=e.length;if(!(o<=r))for(var a=0,s=Math.min(o-r,4);a<s;a++)e[r+a]=t>>>8*(n?a:3-a)&255}function f(e,t,r,n,i){i||(I(null!=t,"missing value"),I("boolean"==typeof n,"missing or invalid endian"),I(null!=r,"missing offset"),I(r+1<e.length,"Trying to write beyond buffer length"),M(t,32767,-32768)),e.length<=r||d(e,0<=t?t:65535+t+1,r,n,i)}function m(e,t,r,n,i){i||(I(null!=t,"missing value"),I("boolean"==typeof n,"missing or invalid endian"),I(null!=r,"missing offset"),I(r+3<e.length,"Trying to write beyond buffer length"),M(t,2147483647,-2147483648)),e.length<=r||p(e,0<=t?t:4294967295+t+1,r,n,i)}function y(e,t,r,n,i){i||(I(null!=t,"missing value"),I("boolean"==typeof n,"missing or invalid endian"),I(null!=r,"missing offset"),I(r+3<e.length,"Trying to write beyond buffer length"),P(t,34028234663852886e22,-34028234663852886e22)),e.length<=r||o.write(e,t,r,n,23,4)}function g(e,t,r,n,i){i||(I(null!=t,"missing value"),I("boolean"==typeof n,"missing or invalid endian"),I(null!=r,"missing offset"),I(r+7<e.length,"Trying to write beyond buffer length"),P(t,17976931348623157e292,-17976931348623157e292)),e.length<=r||o.write(e,t,r,n,52,8)}n.Buffer=v,n.SlowBuffer=v,n.INSPECT_MAX_BYTES=50,v.poolSize=8192,v._useTypedArrays=function(){try{var e=new ArrayBuffer(0),t=new Uint8Array(e);return t.foo=function(){return 42},42===t.foo()&&"function"==typeof t.subarray}catch(e){return!1}}(),v.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},v.isBuffer=function(e){return!(null==e||!e._isBuffer)},v.byteLength=function(e,t){var r;switch(e+="",t||"utf8"){case"hex":r=e.length/2;break;case"utf8":case"utf-8":r=k(e).length;break;case"ascii":case"binary":case"raw":r=e.length;break;case"base64":r=T(e).length;break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":r=2*e.length;break;default:throw new Error("Unknown encoding")}return r},v.concat=function(e,t){if(I(S(e),"Usage: Buffer.concat(list, [totalLength])\nlist should be an Array."),0===e.length)return new v(0);if(1===e.length)return e[0];var r;if("number"!=typeof t)for(r=t=0;r<e.length;r++)t+=e[r].length;var n=new v(t),i=0;for(r=0;r<e.length;r++){var o=e[r];o.copy(n,i),i+=o.length}return n},v.prototype.write=function(e,t,r,n){if(isFinite(t))isFinite(r)||(n=r,r=void 0);else{var i=n;n=t,t=r,r=i}t=Number(t)||0;var o,a,s,l,u,c,h,d,p,f,m=this.length-t;switch(r?m<(r=Number(r))&&(r=m):r=m,n=String(n||"utf8").toLowerCase()){case"hex":o=function(e,t,r,n){r=Number(r)||0;var i=e.length-r;n?i<(n=Number(n))&&(n=i):n=i;var o=t.length;I(o%2==0,"Invalid hex string"),o/2<n&&(n=o/2);for(var a=0;a<n;a++){var s=parseInt(t.substr(2*a,2),16);I(!isNaN(s),"Invalid hex string"),e[r+a]=s}return v._charsWritten=2*a,a}(this,e,t,r);break;case"utf8":case"utf-8":d=this,p=t,f=r,o=v._charsWritten=A(k(e),d,p,f);break;case"ascii":o=b(this,e,t,r);break;case"binary":o=b(this,e,t,r);break;case"base64":u=this,c=t,h=r,o=v._charsWritten=A(T(e),u,c,h);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":a=this,s=t,l=r,o=v._charsWritten=A(function(e){for(var t,r,n,i=[],o=0;o<e.length;o++)t=e.charCodeAt(o),r=t>>8,n=t%256,i.push(n),i.push(r);return i}(e),a,s,l);break;default:throw new Error("Unknown encoding")}return o},v.prototype.toString=function(e,t,r){var n,i,o,a;if(e=String(e||"utf8").toLowerCase(),t=Number(t)||0,(r=void 0!==r?Number(r):r=this.length)===t)return"";switch(e){case"hex":n=function(e,t,r){var n=e.length;(!t||t<0)&&(t=0);(!r||r<0||n<r)&&(r=n);for(var i="",o=t;o<r;o++)i+=C(e[o]);return i}(this,t,r);break;case"utf8":case"utf-8":n=function(e,t,r){var n="",i="";r=Math.min(e.length,r);for(var o=t;o<r;o++)e[o]<=127?(n+=E(i)+String.fromCharCode(e[o]),i=""):i+="%"+e[o].toString(16);return n+E(i)}(this,t,r);break;case"ascii":n=l(this,t,r);break;case"binary":n=l(this,t,r);break;case"base64":i=this,a=r,n=0===(o=t)&&a===i.length?s.fromByteArray(i):s.fromByteArray(i.slice(o,a));break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":n=function(e,t,r){for(var n=e.slice(t,r),i="",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}(this,t,r);break;default:throw new Error("Unknown encoding")}return n},v.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},v.prototype.copy=function(e,t,r,n){if(r||(r=0),n||0===n||(n=this.length),t||(t=0),n!==r&&0!==e.length&&0!==this.length){I(r<=n,"sourceEnd < sourceStart"),I(0<=t&&t<e.length,"targetStart out of bounds"),I(0<=r&&r<this.length,"sourceStart out of bounds"),I(0<=n&&n<=this.length,"sourceEnd out of bounds"),n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);var i=n-r;if(i<100||!v._useTypedArrays)for(var o=0;o<i;o++)e[o+t]=this[o+r];else e._set(this.subarray(r,r+i),t)}},v.prototype.slice=function(e,t){var r=this.length;if(e=_(e,r,0),t=_(t,r,r),v._useTypedArrays)return v._augment(this.subarray(e,t));for(var n=t-e,i=new v(n,void 0,!0),o=0;o<n;o++)i[o]=this[o+e];return i},v.prototype.get=function(e){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(e)},v.prototype.set=function(e,t){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(e,t)},v.prototype.readUInt8=function(e,t){if(t||(I(null!=e,"missing offset"),I(e<this.length,"Trying to read beyond buffer length")),!(e>=this.length))return this[e]},v.prototype.readUInt16LE=function(e,t){return a(this,e,!0,t)},v.prototype.readUInt16BE=function(e,t){return a(this,e,!1,t)},v.prototype.readUInt32LE=function(e,t){return u(this,e,!0,t)},v.prototype.readUInt32BE=function(e,t){return u(this,e,!1,t)},v.prototype.readInt8=function(e,t){if(t||(I(null!=e,"missing offset"),I(e<this.length,"Trying to read beyond buffer length")),!(e>=this.length))return 128&this[e]?-1*(255-this[e]+1):this[e]},v.prototype.readInt16LE=function(e,t){return r(this,e,!0,t)},v.prototype.readInt16BE=function(e,t){return r(this,e,!1,t)},v.prototype.readInt32LE=function(e,t){return i(this,e,!0,t)},v.prototype.readInt32BE=function(e,t){return i(this,e,!1,t)},v.prototype.readFloatLE=function(e,t){return c(this,e,!0,t)},v.prototype.readFloatBE=function(e,t){return c(this,e,!1,t)},v.prototype.readDoubleLE=function(e,t){return h(this,e,!0,t)},v.prototype.readDoubleBE=function(e,t){return h(this,e,!1,t)},v.prototype.writeUInt8=function(e,t,r){r||(I(null!=e,"missing value"),I(null!=t,"missing offset"),I(t<this.length,"trying to write beyond buffer length"),O(e,255)),t>=this.length||(this[t]=e)},v.prototype.writeUInt16LE=function(e,t,r){d(this,e,t,!0,r)},v.prototype.writeUInt16BE=function(e,t,r){d(this,e,t,!1,r)},v.prototype.writeUInt32LE=function(e,t,r){p(this,e,t,!0,r)},v.prototype.writeUInt32BE=function(e,t,r){p(this,e,t,!1,r)},v.prototype.writeInt8=function(e,t,r){r||(I(null!=e,"missing value"),I(null!=t,"missing offset"),I(t<this.length,"Trying to write beyond buffer length"),M(e,127,-128)),t>=this.length||(0<=e?this.writeUInt8(e,t,r):this.writeUInt8(255+e+1,t,r))},v.prototype.writeInt16LE=function(e,t,r){f(this,e,t,!0,r)},v.prototype.writeInt16BE=function(e,t,r){f(this,e,t,!1,r)},v.prototype.writeInt32LE=function(e,t,r){m(this,e,t,!0,r)},v.prototype.writeInt32BE=function(e,t,r){m(this,e,t,!1,r)},v.prototype.writeFloatLE=function(e,t,r){y(this,e,t,!0,r)},v.prototype.writeFloatBE=function(e,t,r){y(this,e,t,!1,r)},v.prototype.writeDoubleLE=function(e,t,r){g(this,e,t,!0,r)},v.prototype.writeDoubleBE=function(e,t,r){g(this,e,t,!1,r)},v.prototype.fill=function(e,t,r){if(e||(e=0),t||(t=0),r||(r=this.length),"string"==typeof e&&(e=e.charCodeAt(0)),I("number"==typeof e&&!isNaN(e),"value is not a number"),I(t<=r,"end < start"),r!==t&&0!==this.length){I(0<=t&&t<this.length,"start out of bounds"),I(0<=r&&r<=this.length,"end out of bounds");for(var n=t;n<r;n++)this[n]=e}},v.prototype.inspect=function(){for(var e=[],t=this.length,r=0;r<t;r++)if(e[r]=C(this[r]),r===n.INSPECT_MAX_BYTES){e[r+1]="...";break}return"<Buffer "+e.join(" ")+">"},v.prototype.toArrayBuffer=function(){if("undefined"==typeof Uint8Array)throw new Error("Buffer.toArrayBuffer not supported in this browser");if(v._useTypedArrays)return new v(this).buffer;for(var e=new Uint8Array(this.length),t=0,r=e.length;t<r;t+=1)e[t]=this[t];return e.buffer};var w=v.prototype;function _(e,t,r){return"number"!=typeof e?r:t<=(e=~~e)?t:0<=e?e:0<=(e+=t)?e:0}function x(e){return(e=~~Math.ceil(+e))<0?0:e}function S(e){return(Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)})(e)}function C(e){return e<16?"0"+e.toString(16):e.toString(16)}function k(e){for(var t=[],r=0;r<e.length;r++){var n=e.charCodeAt(r);if(n<=127)t.push(e.charCodeAt(r));else{var i=r;55296<=n&&n<=57343&&r++;for(var o=encodeURIComponent(e.slice(i,r+1)).substr(1).split("%"),a=0;a<o.length;a++)t.push(parseInt(o[a],16))}}return t}function T(e){return s.toByteArray(e)}function A(e,t,r,n){for(var i=0;i<n&&!(i+r>=t.length||i>=e.length);i++)t[i+r]=e[i];return i}function E(e){try{return decodeURIComponent(e)}catch(e){return String.fromCharCode(65533)}}function O(e,t){I("number"==typeof e,"cannot write a non-number as a number"),I(0<=e,"specified a negative value for writing an unsigned value"),I(e<=t,"value is larger than maximum value for type"),I(Math.floor(e)===e,"value has a fractional component")}function M(e,t,r){I("number"==typeof e,"cannot write a non-number as a number"),I(e<=t,"value larger than maximum allowed value"),I(r<=e,"value smaller than minimum allowed value"),I(Math.floor(e)===e,"value has a fractional component")}function P(e,t,r){I("number"==typeof e,"cannot write a non-number as a number"),I(e<=t,"value larger than maximum allowed value"),I(r<=e,"value smaller than minimum allowed value")}function I(e,t){if(!e)throw new Error(t||"Failed assertion")}v._augment=function(e){return e._isBuffer=!0,e._get=e.get,e._set=e.set,e.get=w.get,e.set=w.set,e.write=w.write,e.toString=w.toString,e.toLocaleString=w.toString,e.toJSON=w.toJSON,e.copy=w.copy,e.slice=w.slice,e.readUInt8=w.readUInt8,e.readUInt16LE=w.readUInt16LE,e.readUInt16BE=w.readUInt16BE,e.readUInt32LE=w.readUInt32LE,e.readUInt32BE=w.readUInt32BE,e.readInt8=w.readInt8,e.readInt16LE=w.readInt16LE,e.readInt16BE=w.readInt16BE,e.readInt32LE=w.readInt32LE,e.readInt32BE=w.readInt32BE,e.readFloatLE=w.readFloatLE,e.readFloatBE=w.readFloatBE,e.readDoubleLE=w.readDoubleLE,e.readDoubleBE=w.readDoubleBE,e.writeUInt8=w.writeUInt8,e.writeUInt16LE=w.writeUInt16LE,e.writeUInt16BE=w.writeUInt16BE,e.writeUInt32LE=w.writeUInt32LE,e.writeUInt32BE=w.writeUInt32BE,e.writeInt8=w.writeInt8,e.writeInt16LE=w.writeInt16LE,e.writeInt16BE=w.writeInt16BE,e.writeInt32LE=w.writeInt32LE,e.writeInt32BE=w.writeInt32BE,e.writeFloatLE=w.writeFloatLE,e.writeFloatBE=w.writeFloatBE,e.writeDoubleLE=w.writeDoubleLE,e.writeDoubleBE=w.writeDoubleBE,e.fill=w.fill,e.inspect=w.inspect,e.toArrayBuffer=w.toArrayBuffer,e}},{"base64-js":181,ieee754:190}],183:[function(e,t,r){var n=t.exports={};function i(){}n.nextTick=function(){var e="undefined"!=typeof window&&window.setImmediate,t="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(e)return function(e){return window.setImmediate(e)};if(t){var r=[];return window.addEventListener("message",function(e){var t=e.source;t!==window&&null!==t||"process-tick"!==e.data||(e.stopPropagation(),0<r.length&&r.shift()())},!0),function(e){r.push(e),window.postMessage("process-tick","*")}}return function(e){setTimeout(e,0)}}(),n.title="browser",n.browser=!0,n.env={},n.argv=[],n.on=i,n.addListener=i,n.once=i,n.off=i,n.removeListener=i,n.removeAllListeners=i,n.emit=i,n.binding=function(e){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(e){throw new Error("process.chdir is not supported")}},{}],184:[function(e,I,R){(function(P){!function(e){var t="object"==_typeof2(R)&&R,r="object"==_typeof2(I)&&I&&I.exports==t&&I,n="object"==_typeof2(P)&&P;n.global!==n&&n.window!==n||(e=n);var i,o,b=2147483647,y=36,g=1,w=26,a=38,s=700,_=72,x=128,S="-",l=/^xn--/,u=/[^ -~]/,c=/\x2E|\u3002|\uFF0E|\uFF61/g,h={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},d=y-g,C=Math.floor,k=String.fromCharCode;function T(e){throw RangeError(h[e])}function p(e,t){for(var r=e.length;r--;)e[r]=t(e[r]);return e}function f(e,t){return p(e.split(c),t).join(".")}function A(e){for(var t,r,n=[],i=0,o=e.length;i<o;)55296<=(t=e.charCodeAt(i++))&&t<=56319&&i<o?56320==(64512&(r=e.charCodeAt(i++)))?n.push(((1023&t)<<10)+(1023&r)+65536):(n.push(t),i--):n.push(t);return n}function E(e){return p(e,function(e){var t="";return 65535<e&&(t+=k((e-=65536)>>>10&1023|55296),e=56320|1023&e),t+=k(e)}).join("")}function O(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function M(e,t,r){var n=0;for(e=r?C(e/s):e>>1,e+=C(e/t);d*w>>1<e;n+=y)e=C(e/d);return C(n+(d+1)*e/(e+a))}function m(e){var t,r,n,i,o,a,s,l,u,c,h,d=[],p=e.length,f=0,m=x,v=_;for((r=e.lastIndexOf(S))<0&&(r=0),n=0;n<r;++n)128<=e.charCodeAt(n)&&T("not-basic"),d.push(e.charCodeAt(n));for(i=0<r?r+1:0;i<p;){for(o=f,a=1,s=y;p<=i&&T("invalid-input"),h=e.charCodeAt(i++),(y<=(l=h-48<10?h-22:h-65<26?h-65:h-97<26?h-97:y)||l>C((b-f)/a))&&T("overflow"),f+=l*a,!(l<(u=s<=v?g:v+w<=s?w:s-v));s+=y)a>C(b/(c=y-u))&&T("overflow"),a*=c;v=M(f-o,t=d.length+1,0==o),C(f/t)>b-m&&T("overflow"),m+=C(f/t),f%=t,d.splice(f++,0,m)}return E(d)}function v(e){var t,r,n,i,o,a,s,l,u,c,h,d,p,f,m,v=[];for(d=(e=A(e)).length,t=x,o=_,a=r=0;a<d;++a)(h=e[a])<128&&v.push(k(h));for(n=i=v.length,i&&v.push(S);n<d;){for(s=b,a=0;a<d;++a)t<=(h=e[a])&&h<s&&(s=h);for(s-t>C((b-r)/(p=n+1))&&T("overflow"),r+=(s-t)*p,t=s,a=0;a<d;++a)if((h=e[a])<t&&++r>b&&T("overflow"),h==t){for(l=r,u=y;!(l<(c=u<=o?g:o+w<=u?w:u-o));u+=y)m=l-c,f=y-c,v.push(k(O(c+m%f,0))),l=C(m/f);v.push(k(O(l,0))),o=M(r,p,n==i),r=0,++n}++r,++t}return v.join("")}if(i={version:"1.2.4",ucs2:{decode:A,encode:E},decode:m,encode:v,toASCII:function(e){return f(e,function(e){return u.test(e)?"xn--"+v(e):e})},toUnicode:function(e){return f(e,function(e){return l.test(e)?m(e.slice(4).toLowerCase()):e})}},"function"==typeof define&&"object"==_typeof2(define.amd)&&define.amd)define("punycode",function(){return i});else if(t&&!t.nodeType)if(r)r.exports=i;else for(o in i)i.hasOwnProperty(o)&&(t[o]=i[o]);else e.punycode=i}(this)}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],185:[function(e,t,r){t.exports=function(e,t,r,n){t=t||"&",r=r||"=";var i={};if("string"!=typeof e||0===e.length)return i;var o=/\+/g;e=e.split(t);var a=1e3;n&&"number"==typeof n.maxKeys&&(a=n.maxKeys);var s,l,u=e.length;0<a&&a<u&&(u=a);for(var c=0;c<u;++c){var h,d,p,f,m=e[c].replace(o,"%20"),v=m.indexOf(r);d=0<=v?(h=m.substr(0,v),m.substr(v+1)):(h=m,""),p=decodeURIComponent(h),f=decodeURIComponent(d),s=i,l=p,Object.prototype.hasOwnProperty.call(s,l)?b(i[p])?i[p].push(f):i[p]=[i[p],f]:i[p]=f}return i};var b=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},{}],186:[function(e,t,r){var o=function(e){switch(_typeof2(e)){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};t.exports=function(r,n,i,e){return n=n||"&",i=i||"=",null===r&&(r=void 0),"object"===_typeof2(r)?function(e,t){if(e.map)return e.map(t);for(var r=[],n=0;n<e.length;n++)r.push(t(e[n],n));return r}(s(r),function(e){var t=encodeURIComponent(o(e))+i;return a(r[e])?r[e].map(function(e){return t+encodeURIComponent(o(e))}).join(n):t+encodeURIComponent(o(r[e]))}).join(n):e?encodeURIComponent(o(e))+i+encodeURIComponent(o(r)):""};var a=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};var s=Object.keys||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return t}},{}],187:[function(e,t,r){r.decode=r.parse=e("./decode"),r.encode=r.stringify=e("./encode")},{"./decode":185,"./encode":186}],188:[function(e,t,r){var P=e("punycode");function y(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}r.parse=o,r.resolve=function(e,t){return o(e,!1,!0).resolve(t)},r.resolveObject=function(e,t){return e?o(e,!1,!0).resolveObject(t):t},r.format=function(e){U(e)&&(e=o(e));return e instanceof y?e.format():y.prototype.format.call(e)},r.Url=y;var I=/^([a-z0-9.+-]+:)/i,n=/:[0-9]*$/,i=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),R=["'"].concat(i),D=["%","/","?",";","#"].concat(R),B=["/","?","#"],L=/^[a-z0-9A-Z_-]{0,63}$/,F=/^([a-z0-9A-Z_-]{0,63})(.*)$/,j={javascript:!0,"javascript:":!0},N={javascript:!0,"javascript:":!0},G={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},z=e("querystring");function o(e,t,r){if(e&&s(e)&&e instanceof y)return e;var n=new y;return n.parse(e,t,r),n}function U(e){return"string"==typeof e}function s(e){return"object"===_typeof2(e)&&null!==e}function g(e){return null===e}y.prototype.parse=function(e,t,r){if(!U(e))throw new TypeError("Parameter 'url' must be a string, not "+_typeof2(e));var n=e;n=n.trim();var i=I.exec(n);if(i){var o=(i=i[0]).toLowerCase();this.protocol=o,n=n.substr(i.length)}if(r||i||n.match(/^\/\/[^@\/]+@[^@\/]+/)){var a="//"===n.substr(0,2);!a||i&&N[i]||(n=n.substr(2),this.slashes=!0)}if(!N[i]&&(a||i&&!G[i])){for(var s,l,u=-1,c=0;c<B.length;c++){-1!==(h=n.indexOf(B[c]))&&(-1===u||h<u)&&(u=h)}-1!==(l=-1===u?n.lastIndexOf("@"):n.lastIndexOf("@",u))&&(s=n.slice(0,l),n=n.slice(l+1),this.auth=decodeURIComponent(s)),u=-1;for(c=0;c<D.length;c++){var h;-1!==(h=n.indexOf(D[c]))&&(-1===u||h<u)&&(u=h)}-1===u&&(u=n.length),this.host=n.slice(0,u),n=n.slice(u),this.parseHost(),this.hostname=this.hostname||"";var d="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!d)for(var p=this.hostname.split(/\./),f=(c=0,p.length);c<f;c++){var m=p[c];if(m&&!m.match(L)){for(var v="",b=0,y=m.length;b<y;b++)127<m.charCodeAt(b)?v+="x":v+=m[b];if(!v.match(L)){var g=p.slice(0,c),w=p.slice(c+1),_=m.match(F);_&&(g.push(_[1]),w.unshift(_[2])),w.length&&(n="/"+w.join(".")+n),this.hostname=g.join(".");break}}}if(255<this.hostname.length?this.hostname="":this.hostname=this.hostname.toLowerCase(),!d){var x=this.hostname.split("."),S=[];for(c=0;c<x.length;++c){var C=x[c];S.push(C.match(/[^A-Za-z0-9_-]/)?"xn--"+P.encode(C):C)}this.hostname=S.join(".")}var k=this.port?":"+this.port:"",T=this.hostname||"";this.host=T+k,this.href+=this.host,d&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==n[0]&&(n="/"+n))}if(!j[o])for(c=0,f=R.length;c<f;c++){var A=R[c],E=encodeURIComponent(A);E===A&&(E=escape(A)),n=n.split(A).join(E)}var O=n.indexOf("#");-1!==O&&(this.hash=n.substr(O),n=n.slice(0,O));var M=n.indexOf("?");if(-1!==M?(this.search=n.substr(M),this.query=n.substr(M+1),t&&(this.query=z.parse(this.query)),n=n.slice(0,M)):t&&(this.search="",this.query={}),n&&(this.pathname=n),G[o]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){k=this.pathname||"",C=this.search||"";this.path=k+C}return this.href=this.format(),this},y.prototype.format=function(){var e=this.auth||"";e&&(e=(e=encodeURIComponent(e)).replace(/%3A/i,":"),e+="@");var t=this.protocol||"",r=this.pathname||"",n=this.hash||"",i=!1,o="";this.host?i=e+this.host:this.hostname&&(i=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&s(this.query)&&Object.keys(this.query).length&&(o=z.stringify(this.query));var a=this.search||o&&"?"+o||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||G[t])&&!1!==i?(i="//"+(i||""),r&&"/"!==r.charAt(0)&&(r="/"+r)):i||(i=""),n&&"#"!==n.charAt(0)&&(n="#"+n),a&&"?"!==a.charAt(0)&&(a="?"+a),t+i+(r=r.replace(/[?#]/g,function(e){return encodeURIComponent(e)}))+(a=a.replace("#","%23"))+n},y.prototype.resolve=function(e){return this.resolveObject(o(e,!1,!0)).format()},y.prototype.resolveObject=function(t){if(U(t)){var e=new y;e.parse(t,!1,!0),t=e}var r=new y;if(Object.keys(this).forEach(function(e){r[e]=this[e]},this),r.hash=t.hash,""===t.href)return r.href=r.format(),r;if(t.slashes&&!t.protocol)return Object.keys(t).forEach(function(e){"protocol"!==e&&(r[e]=t[e])}),G[r.protocol]&&r.hostname&&!r.pathname&&(r.path=r.pathname="/"),r.href=r.format(),r;if(t.protocol&&t.protocol!==r.protocol){if(!G[t.protocol])return Object.keys(t).forEach(function(e){r[e]=t[e]}),r.href=r.format(),r;if(r.protocol=t.protocol,t.host||N[t.protocol])r.pathname=t.pathname;else{for(var n=(t.pathname||"").split("/");n.length&&!(t.host=n.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==n[0]&&n.unshift(""),n.length<2&&n.unshift(""),r.pathname=n.join("/")}if(r.search=t.search,r.query=t.query,r.host=t.host||"",r.auth=t.auth,r.hostname=t.hostname||t.host,r.port=t.port,r.pathname||r.search){var i=r.pathname||"",o=r.search||"";r.path=i+o}return r.slashes=r.slashes||t.slashes,r.href=r.format(),r}var a=r.pathname&&"/"===r.pathname.charAt(0),s=t.host||t.pathname&&"/"===t.pathname.charAt(0),l=s||a||r.host&&t.pathname,u=l,c=r.pathname&&r.pathname.split("/")||[],h=(n=t.pathname&&t.pathname.split("/")||[],r.protocol&&!G[r.protocol]);if(h&&(r.hostname="",r.port=null,r.host&&(""===c[0]?c[0]=r.host:c.unshift(r.host)),r.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===n[0]?n[0]=t.host:n.unshift(t.host)),t.host=null),l=l&&(""===n[0]||""===c[0])),s)r.host=t.host||""===t.host?t.host:r.host,r.hostname=t.hostname||""===t.hostname?t.hostname:r.hostname,r.search=t.search,r.query=t.query,c=n;else if(n.length)c||(c=[]),c.pop(),c=c.concat(n),r.search=t.search,r.query=t.query;else if(null!=t.search){if(h)r.hostname=r.host=c.shift(),(v=!!(r.host&&0<r.host.indexOf("@"))&&r.host.split("@"))&&(r.auth=v.shift(),r.host=r.hostname=v.shift());return r.search=t.search,r.query=t.query,g(r.pathname)&&g(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.href=r.format(),r}if(!c.length)return r.pathname=null,r.search?r.path="/"+r.search:r.path=null,r.href=r.format(),r;for(var d=c.slice(-1)[0],p=(r.host||t.host)&&("."===d||".."===d)||""===d,f=0,m=c.length;0<=m;m--)"."==(d=c[m])?c.splice(m,1):".."===d?(c.splice(m,1),f++):f&&(c.splice(m,1),f--);if(!l&&!u)for(;f--;f)c.unshift("..");!l||""===c[0]||c[0]&&"/"===c[0].charAt(0)||c.unshift(""),p&&"/"!==c.join("/").substr(-1)&&c.push("");var v,b=""===c[0]||c[0]&&"/"===c[0].charAt(0);h&&(r.hostname=r.host=b?"":c.length?c.shift():"",(v=!!(r.host&&0<r.host.indexOf("@"))&&r.host.split("@"))&&(r.auth=v.shift(),r.host=r.hostname=v.shift()));return(l=l||r.host&&c.length)&&!b&&c.unshift(""),c.length?r.pathname=c.join("/"):(r.pathname=null,r.path=null),g(r.pathname)&&g(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.auth=t.auth||r.auth,r.slashes=r.slashes||t.slashes,r.href=r.format(),r},y.prototype.parseHost=function(){var e=this.host,t=n.exec(e);t&&(":"!==(t=t[0])&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},{punycode:184,querystring:187}],189:[function(e,t,n){(function(r){!function(){var e=function(){this.init()};e.prototype={init:function(){var e=this||g;return e._counter=1e3,e._html5AudioPool=[],e.html5PoolSize=10,e._codecs={},e._howls=[],e._muted=!1,e._volume=1,e._canPlayEvent="canplaythrough",e._navigator="undefined"!=typeof window&&window.navigator?window.navigator:null,e.masterGain=null,e.noAudio=!1,e.usingWebAudio=!0,e.autoSuspend=!0,e.ctx=null,e.autoUnlock=!0,e._setup(),e},volume:function(e){var t=this||g;if(e=parseFloat(e),t.ctx||h(),void 0!==e&&0<=e&&e<=1){if(t._volume=e,t._muted)return t;t.usingWebAudio&&t.masterGain.gain.setValueAtTime(e,g.ctx.currentTime);for(var r=0;r<t._howls.length;r++)if(!t._howls[r]._webAudio)for(var n=t._howls[r]._getSoundIds(),i=0;i<n.length;i++){var o=t._howls[r]._soundById(n[i]);o&&o._node&&(o._node.volume=o._volume*e)}return t}return t._volume},mute:function(e){var t=this||g;t.ctx||h(),t._muted=e,t.usingWebAudio&&t.masterGain.gain.setValueAtTime(e?0:t._volume,g.ctx.currentTime);for(var r=0;r<t._howls.length;r++)if(!t._howls[r]._webAudio)for(var n=t._howls[r]._getSoundIds(),i=0;i<n.length;i++){var o=t._howls[r]._soundById(n[i]);o&&o._node&&(o._node.muted=!!e||o._muted)}return t},unload:function(){for(var e=this||g,t=e._howls.length-1;0<=t;t--)e._howls[t].unload();return e.usingWebAudio&&e.ctx&&void 0!==e.ctx.close&&(e.ctx.close(),e.ctx=null,h()),e},codecs:function(e){return(this||g)._codecs[e.replace(/^x-/,"")]},_setup:function(){var t=this||g;if(t.state=t.ctx&&t.ctx.state||"suspended",t._autoSuspend(),!t.usingWebAudio)if("undefined"!=typeof Audio)try{void 0===(new Audio).oncanplaythrough&&(t._canPlayEvent="canplay")}catch(e){t.noAudio=!0}else t.noAudio=!0;try{(new Audio).muted&&(t.noAudio=!0)}catch(e){}return t.noAudio||t._setupCodecs(),t},_setupCodecs:function(){var t=this||g,e=null;try{e="undefined"!=typeof Audio?new Audio:null}catch(e){return t}if(!e||"function"!=typeof e.canPlayType)return t;var r=e.canPlayType("audio/mpeg;").replace(/^no$/,""),n=t._navigator&&t._navigator.userAgent.match(/OPR\/([0-6].)/g),i=n&&parseInt(n[0].split("/")[1],10)<33;return t._codecs={mp3:!(i||!r&&!e.canPlayType("audio/mp3;").replace(/^no$/,"")),mpeg:!!r,opus:!!e.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!e.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!e.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!e.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),aac:!!e.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!e.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(e.canPlayType("audio/x-m4a;")||e.canPlayType("audio/m4a;")||e.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(e.canPlayType("audio/x-mp4;")||e.canPlayType("audio/mp4;")||e.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!e.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,""),webm:!!e.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,""),dolby:!!e.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(e.canPlayType("audio/x-flac;")||e.canPlayType("audio/flac;")).replace(/^no$/,"")},t},_unlockAudio:function(){var l=this||g,e=/iPhone|iPad|iPod|Android|BlackBerry|BB10|Silk|Mobi|Chrome|Safari/i.test(l._navigator&&l._navigator.userAgent);if(!l._audioUnlocked&&l.ctx&&e){l._audioUnlocked=!1,l.autoUnlock=!1,l._mobileUnloaded||44100===l.ctx.sampleRate||(l._mobileUnloaded=!0,l.unload()),l._scratchBuffer=l.ctx.createBuffer(1,1,22050);var t=function t(e){for(var r=0;r<l.html5PoolSize;r++){var n=new Audio;n._unlocked=!0,l._releaseHtml5Audio(n)}for(r=0;r<l._howls.length;r++)if(!l._howls[r]._webAudio)for(var i=l._howls[r]._getSoundIds(),o=0;o<i.length;o++){var a=l._howls[r]._soundById(i[o]);a&&a._node&&!a._node._unlocked&&(a._node._unlocked=!0,a._node.load())}l._autoResume();var s=l.ctx.createBufferSource();s.buffer=l._scratchBuffer,s.connect(l.ctx.destination),void 0===s.start?s.noteOn(0):s.start(0),"function"==typeof l.ctx.resume&&l.ctx.resume(),s.onended=function(){s.disconnect(0),l._audioUnlocked=!0,document.removeEventListener("touchstart",t,!0),document.removeEventListener("touchend",t,!0),document.removeEventListener("click",t,!0);for(var e=0;e<l._howls.length;e++)l._howls[e]._emit("unlock")}};return document.addEventListener("touchstart",t,!0),document.addEventListener("touchend",t,!0),document.addEventListener("click",t,!0),l}},_obtainHtml5Audio:function(){var e=this||g;if(e._html5AudioPool.length)return e._html5AudioPool.pop();var t=(new Audio).play();return t&&"undefined"!=typeof Promise&&(t instanceof Promise||"function"==typeof t.then)&&t.catch(function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")}),new Audio},_releaseHtml5Audio:function(e){var t=this||g;return e._unlocked&&t._html5AudioPool.push(e),t},_autoSuspend:function(){var e=this;if(e.autoSuspend&&e.ctx&&void 0!==e.ctx.suspend&&g.usingWebAudio){for(var t=0;t<e._howls.length;t++)if(e._howls[t]._webAudio)for(var r=0;r<e._howls[t]._sounds.length;r++)if(!e._howls[t]._sounds[r]._paused)return e;return e._suspendTimer&&clearTimeout(e._suspendTimer),e._suspendTimer=setTimeout(function(){e.autoSuspend&&(e._suspendTimer=null,e.state="suspending",e.ctx.suspend().then(function(){e.state="suspended",e._resumeAfterSuspend&&(delete e._resumeAfterSuspend,e._autoResume())}))},3e4),e}},_autoResume:function(){var t=this;if(t.ctx&&void 0!==t.ctx.resume&&g.usingWebAudio)return"running"===t.state&&t._suspendTimer?(clearTimeout(t._suspendTimer),t._suspendTimer=null):"suspended"===t.state?(t.ctx.resume().then(function(){t.state="running";for(var e=0;e<t._howls.length;e++)t._howls[e]._emit("resume")}),t._suspendTimer&&(clearTimeout(t._suspendTimer),t._suspendTimer=null)):"suspending"===t.state&&(t._resumeAfterSuspend=!0),t}};var g=new e,t=function(e){e.src&&0!==e.src.length?this.init(e):console.error("An array of source files must be passed with any new Howl.")};t.prototype={init:function(e){var t=this;return g.ctx||h(),t._autoplay=e.autoplay||!1,t._format="string"!=typeof e.format?e.format:[e.format],t._html5=e.html5||!1,t._muted=e.mute||!1,t._loop=e.loop||!1,t._pool=e.pool||5,t._preload="boolean"!=typeof e.preload||e.preload,t._rate=e.rate||1,t._sprite=e.sprite||{},t._src="string"!=typeof e.src?e.src:[e.src],t._volume=void 0!==e.volume?e.volume:1,t._xhrWithCredentials=e.xhrWithCredentials||!1,t._duration=0,t._state="unloaded",t._sounds=[],t._endTimers={},t._queue=[],t._playLock=!1,t._onend=e.onend?[{fn:e.onend}]:[],t._onfade=e.onfade?[{fn:e.onfade}]:[],t._onload=e.onload?[{fn:e.onload}]:[],t._onloaderror=e.onloaderror?[{fn:e.onloaderror}]:[],t._onplayerror=e.onplayerror?[{fn:e.onplayerror}]:[],t._onpause=e.onpause?[{fn:e.onpause}]:[],t._onplay=e.onplay?[{fn:e.onplay}]:[],t._onstop=e.onstop?[{fn:e.onstop}]:[],t._onmute=e.onmute?[{fn:e.onmute}]:[],t._onvolume=e.onvolume?[{fn:e.onvolume}]:[],t._onrate=e.onrate?[{fn:e.onrate}]:[],t._onseek=e.onseek?[{fn:e.onseek}]:[],t._onunlock=e.onunlock?[{fn:e.onunlock}]:[],t._onresume=[],t._webAudio=g.usingWebAudio&&!t._html5,void 0!==g.ctx&&g.ctx&&g.autoUnlock&&g._unlockAudio(),g._howls.push(t),t._autoplay&&t._queue.push({event:"play",action:function(){t.play()}}),t._preload&&t.load(),t},load:function(){var e=this,t=null;if(g.noAudio)e._emit("loaderror",null,"No audio support.");else{"string"==typeof e._src&&(e._src=[e._src]);for(var r=0;r<e._src.length;r++){var n,i;if(e._format&&e._format[r])n=e._format[r];else{if("string"!=typeof(i=e._src[r])){e._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}(n=/^data:audio\/([^;,]+);/i.exec(i))||(n=/\.([^.]+)$/.exec(i.split("?",1)[0])),n&&(n=n[1].toLowerCase())}if(n||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),n&&g.codecs(n)){t=e._src[r];break}}if(t)return e._src=t,e._state="loading","https:"===window.location.protocol&&"http:"===t.slice(0,5)&&(e._html5=!0,e._webAudio=!1),new o(e),e._webAudio&&s(e),e;e._emit("loaderror",null,"No codec support for selected audio sources.")}},play:function(t,r){var n=this,e=null;if("number"==typeof t)e=t,t=null;else{if("string"==typeof t&&"loaded"===n._state&&!n._sprite[t])return null;if(void 0===t&&(t="__default",!n._playLock)){for(var i=0,o=0;o<n._sounds.length;o++)n._sounds[o]._paused&&!n._sounds[o]._ended&&(i++,e=n._sounds[o]._id);1===i?t=null:e=null}}var a=e?n._soundById(e):n._inactiveSound();if(!a)return null;if(e&&!t&&(t=a._sprite||"__default"),"loaded"!==n._state){a._sprite=t,a._ended=!1;var s=a._id;return n._queue.push({event:"play",action:function(){n.play(s)}}),s}if(e&&!a._paused)return r||n._loadQueue("play"),a._id;n._webAudio&&g._autoResume();var l=Math.max(0,0<a._seek?a._seek:n._sprite[t][0]/1e3),u=Math.max(0,(n._sprite[t][0]+n._sprite[t][1])/1e3-l),c=1e3*u/Math.abs(a._rate),h=n._sprite[t][0]/1e3,d=(n._sprite[t][0]+n._sprite[t][1])/1e3,p=!(!a._loop&&!n._sprite[t][2]);a._sprite=t,a._ended=!1;var f=function(){a._paused=!1,a._seek=l,a._start=h,a._stop=d,a._loop=p};if(!(d<=l)){var m=a._node;if(n._webAudio){var v=function(){n._playLock=!1,f(),n._refreshBuffer(a);var e=a._muted||n._muted?0:a._volume;m.gain.setValueAtTime(e,g.ctx.currentTime),a._playStart=g.ctx.currentTime,void 0===m.bufferSource.start?a._loop?m.bufferSource.noteGrainOn(0,l,86400):m.bufferSource.noteGrainOn(0,l,u):a._loop?m.bufferSource.start(0,l,86400):m.bufferSource.start(0,l,u),c!==1/0&&(n._endTimers[a._id]=setTimeout(n._ended.bind(n,a),c)),r||setTimeout(function(){n._emit("play",a._id),n._loadQueue()},0)};"running"===g.state?v():(n._playLock=!0,n.once("resume",v),n._clearTimer(a._id))}else{var b=function(){m.currentTime=l,m.muted=a._muted||n._muted||g._muted||m.muted,m.volume=a._volume*g.volume(),m.playbackRate=a._rate;try{var e=m.play();if(e&&"undefined"!=typeof Promise&&(e instanceof Promise||"function"==typeof e.then)?(n._playLock=!0,f(),e.then(function(){n._playLock=!1,m._unlocked=!0,r||(n._emit("play",a._id),n._loadQueue())}).catch(function(){n._playLock=!1,n._emit("playerror",a._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),a._ended=!0,a._paused=!0})):r||(n._playLock=!1,f(),n._emit("play",a._id),n._loadQueue()),m.playbackRate=a._rate,m.paused)return void n._emit("playerror",a._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");"__default"!==t||a._loop?n._endTimers[a._id]=setTimeout(n._ended.bind(n,a),c):(n._endTimers[a._id]=function(){n._ended(a),m.removeEventListener("ended",n._endTimers[a._id],!1)},m.addEventListener("ended",n._endTimers[a._id],!1))}catch(e){n._emit("playerror",a._id,e)}},y=window&&window.ejecta||!m.readyState&&g._navigator.isCocoonJS;if(3<=m.readyState||y)b();else{n._playLock=!0;m.addEventListener(g._canPlayEvent,function e(){b(),m.removeEventListener(g._canPlayEvent,e,!1)},!1),n._clearTimer(a._id)}}return a._id}n._ended(a)},pause:function(e){var t=this;if("loaded"!==t._state||t._playLock)return t._queue.push({event:"pause",action:function(){t.pause(e)}}),t;for(var r=t._getSoundIds(e),n=0;n<r.length;n++){t._clearTimer(r[n]);var i=t._soundById(r[n]);if(i&&!i._paused&&(i._seek=t.seek(r[n]),i._rateSeek=0,i._paused=!0,t._stopFade(r[n]),i._node))if(t._webAudio){if(!i._node.bufferSource)continue;void 0===i._node.bufferSource.stop?i._node.bufferSource.noteOff(0):i._node.bufferSource.stop(0),t._cleanBuffer(i._node)}else isNaN(i._node.duration)&&i._node.duration!==1/0||i._node.pause();arguments[1]||t._emit("pause",i?i._id:null)}return t},stop:function(e,t){var r=this;if("loaded"!==r._state||r._playLock)return r._queue.push({event:"stop",action:function(){r.stop(e)}}),r;for(var n=r._getSoundIds(e),i=0;i<n.length;i++){r._clearTimer(n[i]);var o=r._soundById(n[i]);o&&(o._seek=o._start||0,o._rateSeek=0,o._paused=!0,o._ended=!0,r._stopFade(n[i]),o._node&&(r._webAudio?o._node.bufferSource&&(void 0===o._node.bufferSource.stop?o._node.bufferSource.noteOff(0):o._node.bufferSource.stop(0),r._cleanBuffer(o._node)):isNaN(o._node.duration)&&o._node.duration!==1/0||(o._node.currentTime=o._start||0,o._node.pause())),t||r._emit("stop",o._id))}return r},mute:function(e,t){var r=this;if("loaded"!==r._state||r._playLock)return r._queue.push({event:"mute",action:function(){r.mute(e,t)}}),r;if(void 0===t){if("boolean"!=typeof e)return r._muted;r._muted=e}for(var n=r._getSoundIds(t),i=0;i<n.length;i++){var o=r._soundById(n[i]);o&&(o._muted=e,o._interval&&r._stopFade(o._id),r._webAudio&&o._node?o._node.gain.setValueAtTime(e?0:o._volume,g.ctx.currentTime):o._node&&(o._node.muted=!!g._muted||e),r._emit("mute",o._id))}return r},volume:function(){var e,t,r,n=this,i=arguments;if(0===i.length)return n._volume;if(1===i.length||2===i.length&&void 0===i[1]?0<=n._getSoundIds().indexOf(i[0])?t=parseInt(i[0],10):e=parseFloat(i[0]):2<=i.length&&(e=parseFloat(i[0]),t=parseInt(i[1],10)),!(void 0!==e&&0<=e&&e<=1))return(r=t?n._soundById(t):n._sounds[0])?r._volume:0;if("loaded"!==n._state||n._playLock)return n._queue.push({event:"volume",action:function(){n.volume.apply(n,i)}}),n;void 0===t&&(n._volume=e),t=n._getSoundIds(t);for(var o=0;o<t.length;o++)(r=n._soundById(t[o]))&&(r._volume=e,i[2]||n._stopFade(t[o]),n._webAudio&&r._node&&!r._muted?r._node.gain.setValueAtTime(e,g.ctx.currentTime):r._node&&!r._muted&&(r._node.volume=e*g.volume()),n._emit("volume",r._id));return n},fade:function(e,t,r,n){var i=this;if("loaded"!==i._state||i._playLock)return i._queue.push({event:"fade",action:function(){i.fade(e,t,r,n)}}),i;e=parseFloat(e),t=parseFloat(t),r=parseFloat(r),i.volume(e,n);for(var o=i._getSoundIds(n),a=0;a<o.length;a++){var s=i._soundById(o[a]);if(s){if(n||i._stopFade(o[a]),i._webAudio&&!s._muted){var l=g.ctx.currentTime,u=l+r/1e3;s._volume=e,s._node.gain.setValueAtTime(e,l),s._node.gain.linearRampToValueAtTime(t,u)}i._startFadeInterval(s,e,t,r,o[a],void 0===n)}}return i},_startFadeInterval:function(t,r,n,i,e,o){var a=this,s=r,l=n-r,u=Math.abs(l/.01),c=Math.max(4,0<u?i/u:i),h=Date.now();t._fadeTo=n,t._interval=setInterval(function(){var e=(Date.now()-h)/i;h=Date.now(),s+=l*e,s=Math.max(0,s),s=Math.min(1,s),s=Math.round(100*s)/100,a._webAudio?t._volume=s:a.volume(s,t._id,!0),o&&(a._volume=s),(n<r&&s<=n||r<n&&n<=s)&&(clearInterval(t._interval),t._interval=null,t._fadeTo=null,a.volume(n,t._id),a._emit("fade",t._id))},c)},_stopFade:function(e){var t=this._soundById(e);return t&&t._interval&&(this._webAudio&&t._node.gain.cancelScheduledValues(g.ctx.currentTime),clearInterval(t._interval),t._interval=null,this.volume(t._fadeTo,e),t._fadeTo=null,this._emit("fade",e)),this},loop:function(){var e,t,r,n=arguments;if(0===n.length)return this._loop;if(1===n.length){if("boolean"!=typeof n[0])return!!(r=this._soundById(parseInt(n[0],10)))&&r._loop;e=n[0],this._loop=e}else 2===n.length&&(e=n[0],t=parseInt(n[1],10));for(var i=this._getSoundIds(t),o=0;o<i.length;o++)(r=this._soundById(i[o]))&&(r._loop=e,this._webAudio&&r._node&&r._node.bufferSource&&(r._node.bufferSource.loop=e)&&(r._node.bufferSource.loopStart=r._start||0,r._node.bufferSource.loopEnd=r._stop));return this},rate:function(){var e,t,r,n=this,i=arguments;if(0===i.length)t=n._sounds[0]._id;else if(1===i.length){0<=n._getSoundIds().indexOf(i[0])?t=parseInt(i[0],10):e=parseFloat(i[0])}else 2===i.length&&(e=parseFloat(i[0]),t=parseInt(i[1],10));if("number"!=typeof e)return(r=n._soundById(t))?r._rate:n._rate;if("loaded"!==n._state||n._playLock)return n._queue.push({event:"rate",action:function(){n.rate.apply(n,i)}}),n;void 0===t&&(n._rate=e),t=n._getSoundIds(t);for(var o=0;o<t.length;o++)if(r=n._soundById(t[o])){n.playing(t[o])&&(r._rateSeek=n.seek(t[o]),r._playStart=n._webAudio?g.ctx.currentTime:r._playStart),r._rate=e,n._webAudio&&r._node&&r._node.bufferSource?r._node.bufferSource.playbackRate.setValueAtTime(e,g.ctx.currentTime):r._node&&(r._node.playbackRate=e);var a=n.seek(t[o]),s=1e3*((n._sprite[r._sprite][0]+n._sprite[r._sprite][1])/1e3-a)/Math.abs(r._rate);!n._endTimers[t[o]]&&r._paused||(n._clearTimer(t[o]),n._endTimers[t[o]]=setTimeout(n._ended.bind(n,r),s)),n._emit("rate",r._id)}return n},seek:function(){var e,t,r=this,n=arguments;if(0===n.length)t=r._sounds[0]._id;else if(1===n.length){0<=r._getSoundIds().indexOf(n[0])?t=parseInt(n[0],10):r._sounds.length&&(t=r._sounds[0]._id,e=parseFloat(n[0]))}else 2===n.length&&(e=parseFloat(n[0]),t=parseInt(n[1],10));if(void 0===t)return r;if("loaded"!==r._state||r._playLock)return r._queue.push({event:"seek",action:function(){r.seek.apply(r,n)}}),r;var i=r._soundById(t);if(i){if(!("number"==typeof e&&0<=e)){if(r._webAudio){var o=r.playing(t)?g.ctx.currentTime-i._playStart:0,a=i._rateSeek?i._rateSeek-i._seek:0;return i._seek+(a+o*Math.abs(i._rate))}return i._node.currentTime}var s=r.playing(t);s&&r.pause(t,!0),i._seek=e,i._ended=!1,r._clearTimer(t),r._webAudio||!i._node||isNaN(i._node.duration)||(i._node.currentTime=e);var l=function(){r._emit("seek",t),s&&r.play(t,!0)};if(s&&!r._webAudio){setTimeout(function e(){r._playLock?setTimeout(e,0):l()},0)}else l()}return r},playing:function(e){if("number"==typeof e){var t=this._soundById(e);return!!t&&!t._paused}for(var r=0;r<this._sounds.length;r++)if(!this._sounds[r]._paused)return!0;return!1},duration:function(e){var t=this._duration,r=this._soundById(e);return r&&(t=this._sprite[r._sprite][1]/1e3),t},state:function(){return this._state},unload:function(){for(var e=this,t=e._sounds,r=0;r<t.length;r++){if(t[r]._paused||e.stop(t[r]._id),!e._webAudio)/MSIE |Trident\//.test(g._navigator&&g._navigator.userAgent)||(t[r]._node.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"),t[r]._node.removeEventListener("error",t[r]._errorFn,!1),t[r]._node.removeEventListener(g._canPlayEvent,t[r]._loadFn,!1),g._releaseHtml5Audio(t[r]._node);delete t[r]._node,e._clearTimer(t[r]._id)}var n=g._howls.indexOf(e);0<=n&&g._howls.splice(n,1);var i=!0;for(r=0;r<g._howls.length;r++)if(g._howls[r]._src===e._src||0<=e._src.indexOf(g._howls[r]._src)){i=!1;break}return a&&i&&delete a[e._src],g.noAudio=!1,e._state="unloaded",e._sounds=[],e=null},on:function(e,t,r,n){var i=this["_on"+e];return"function"==typeof t&&i.push(n?{id:r,fn:t,once:n}:{id:r,fn:t}),this},off:function(e,t,r){var n=this["_on"+e],i=0;if("number"==typeof t&&(r=t,t=null),t||r)for(i=0;i<n.length;i++){var o=r===n[i].id;if(t===n[i].fn&&o||!t&&o){n.splice(i,1);break}}else if(e)this["_on"+e]=[];else{var a=Object.keys(this);for(i=0;i<a.length;i++)0===a[i].indexOf("_on")&&Array.isArray(this[a[i]])&&(this[a[i]]=[])}return this},once:function(e,t,r){return this.on(e,t,r,1),this},_emit:function(e,t,r){for(var n=this["_on"+e],i=n.length-1;0<=i;i--)n[i].id&&n[i].id!==t&&"load"!==e||(setTimeout(function(e){e.call(this,t,r)}.bind(this,n[i].fn),0),n[i].once&&this.off(e,n[i].fn,n[i].id));return this._loadQueue(e),this},_loadQueue:function(e){if(0<this._queue.length){var t=this._queue[0];t.event===e&&(this._queue.shift(),this._loadQueue()),e||t.action()}return this},_ended:function(e){var t=this,r=e._sprite;if(!t._webAudio&&e._node&&!e._node.paused&&!e._node.ended&&e._node.currentTime<e._stop)return setTimeout(t._ended.bind(t,e),100),t;var n=!(!e._loop&&!t._sprite[r][2]);if(t._emit("end",e._id),!t._webAudio&&n&&t.stop(e._id,!0).play(e._id),t._webAudio&&n){t._emit("play",e._id),e._seek=e._start||0,e._rateSeek=0,e._playStart=g.ctx.currentTime;var i=1e3*(e._stop-e._start)/Math.abs(e._rate);t._endTimers[e._id]=setTimeout(t._ended.bind(t,e),i)}return t._webAudio&&!n&&(e._paused=!0,e._ended=!0,e._seek=e._start||0,e._rateSeek=0,t._clearTimer(e._id),t._cleanBuffer(e._node),g._autoSuspend()),t._webAudio||n||t.stop(e._id,!0),t},_clearTimer:function(e){if(this._endTimers[e]){if("function"!=typeof this._endTimers[e])clearTimeout(this._endTimers[e]);else{var t=this._soundById(e);t&&t._node&&t._node.removeEventListener("ended",this._endTimers[e],!1)}delete this._endTimers[e]}return this},_soundById:function(e){for(var t=0;t<this._sounds.length;t++)if(e===this._sounds[t]._id)return this._sounds[t];return null},_inactiveSound:function(){this._drain();for(var e=0;e<this._sounds.length;e++)if(this._sounds[e]._ended)return this._sounds[e].reset();return new o(this)},_drain:function(){var e=this,t=e._pool,r=0,n=0;if(!(e._sounds.length<t)){for(n=0;n<e._sounds.length;n++)e._sounds[n]._ended&&r++;for(n=e._sounds.length-1;0<=n;n--){if(r<=t)return;e._sounds[n]._ended&&(e._webAudio&&e._sounds[n]._node&&e._sounds[n]._node.disconnect(0),e._sounds.splice(n,1),r--)}}},_getSoundIds:function(e){if(void 0!==e)return[e];for(var t=[],r=0;r<this._sounds.length;r++)t.push(this._sounds[r]._id);return t},_refreshBuffer:function(e){return e._node.bufferSource=g.ctx.createBufferSource(),e._node.bufferSource.buffer=a[this._src],e._panner?e._node.bufferSource.connect(e._panner):e._node.bufferSource.connect(e._node),e._node.bufferSource.loop=e._loop,e._loop&&(e._node.bufferSource.loopStart=e._start||0,e._node.bufferSource.loopEnd=e._stop||0),e._node.bufferSource.playbackRate.setValueAtTime(e._rate,g.ctx.currentTime),this},_cleanBuffer:function(e){var t=g._navigator&&0<=g._navigator.vendor.indexOf("Apple");if(g._scratchBuffer&&e.bufferSource&&(e.bufferSource.onended=null,e.bufferSource.disconnect(0),t))try{e.bufferSource.buffer=g._scratchBuffer}catch(e){}return e.bufferSource=null,this}};var o=function(e){this._parent=e,this.init()};o.prototype={init:function(){var e=this,t=e._parent;return e._muted=t._muted,e._loop=t._loop,e._volume=t._volume,e._rate=t._rate,e._seek=0,e._paused=!0,e._ended=!0,e._sprite="__default",e._id=++g._counter,t._sounds.push(e),e.create(),e},create:function(){var e=this,t=e._parent,r=g._muted||e._muted||e._parent._muted?0:e._volume;return t._webAudio?(e._node=void 0===g.ctx.createGain?g.ctx.createGainNode():g.ctx.createGain(),e._node.gain.setValueAtTime(r,g.ctx.currentTime),e._node.paused=!0,e._node.connect(g.masterGain)):(e._node=g._obtainHtml5Audio(),e._errorFn=e._errorListener.bind(e),e._node.addEventListener("error",e._errorFn,!1),e._loadFn=e._loadListener.bind(e),e._node.addEventListener(g._canPlayEvent,e._loadFn,!1),e._node.src=t._src,e._node.preload="auto",e._node.volume=r*g.volume(),e._node.load()),e},reset:function(){var e=this,t=e._parent;return e._muted=t._muted,e._loop=t._loop,e._volume=t._volume,e._rate=t._rate,e._seek=0,e._rateSeek=0,e._paused=!0,e._ended=!0,e._sprite="__default",e._id=++g._counter,e},_errorListener:function(){this._parent._emit("loaderror",this._id,this._node.error?this._node.error.code:0),this._node.removeEventListener("error",this._errorFn,!1)},_loadListener:function(){var e=this._parent;e._duration=Math.ceil(10*this._node.duration)/10,0===Object.keys(e._sprite).length&&(e._sprite={__default:[0,1e3*e._duration]}),"loaded"!==e._state&&(e._state="loaded",e._emit("load"),e._loadQueue()),this._node.removeEventListener(g._canPlayEvent,this._loadFn,!1)}};var a={},s=function(t){var e=t._src;if(a[e])return t._duration=a[e].duration,void c(t);if(/^data:[^;]+;base64,/.test(e)){for(var r=atob(e.split(",")[1]),n=new Uint8Array(r.length),i=0;i<r.length;++i)n[i]=r.charCodeAt(i);u(n.buffer,t)}else{var o=new XMLHttpRequest;o.open("GET",e,!0),o.withCredentials=t._xhrWithCredentials,o.responseType="arraybuffer",o.onload=function(){var e=(o.status+"")[0];"0"===e||"2"===e||"3"===e?u(o.response,t):t._emit("loaderror",null,"Failed loading audio file with status: "+o.status+".")},o.onerror=function(){t._webAudio&&(t._html5=!0,t._webAudio=!1,t._sounds=[],delete a[e],t.load())},l(o)}},l=function(t){try{t.send()}catch(e){t.onerror()}},u=function(e,t){var r=function(){t._emit("loaderror",null,"Decoding audio data failed.")},n=function(e){e&&0<t._sounds.length?(a[t._src]=e,c(t,e)):r()};"undefined"!=typeof Promise&&1===g.ctx.decodeAudioData.length?g.ctx.decodeAudioData(e).then(n).catch(r):g.ctx.decodeAudioData(e,n,r)},c=function(e,t){t&&!e._duration&&(e._duration=t.duration),0===Object.keys(e._sprite).length&&(e._sprite={__default:[0,1e3*e._duration]}),"loaded"!==e._state&&(e._state="loaded",e._emit("load"),e._loadQueue())},h=function(){if(g.usingWebAudio){try{"undefined"!=typeof AudioContext?g.ctx=new AudioContext:"undefined"!=typeof webkitAudioContext?g.ctx=new webkitAudioContext:g.usingWebAudio=!1}catch(e){g.usingWebAudio=!1}g.ctx||(g.usingWebAudio=!1);var e=/iP(hone|od|ad)/.test(g._navigator&&g._navigator.platform),t=g._navigator&&g._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),r=t?parseInt(t[1],10):null;if(e&&r&&r<9){var n=/safari/.test(g._navigator&&g._navigator.userAgent.toLowerCase());(g._navigator&&g._navigator.standalone&&!n||g._navigator&&!g._navigator.standalone&&!n)&&(g.usingWebAudio=!1)}g.usingWebAudio&&(g.masterGain=void 0===g.ctx.createGain?g.ctx.createGainNode():g.ctx.createGain(),g.masterGain.gain.setValueAtTime(g._muted?0:1,g.ctx.currentTime),g.masterGain.connect(g.ctx.destination)),g._setup()}};"function"==typeof define&&define.amd&&define([],function(){return{Howler:g,Howl:t}}),void 0!==n&&(n.Howler=g,n.Howl=t),"undefined"!=typeof window?(window.HowlerGlobal=e,window.Howler=g,window.Howl=t,window.Sound=o):void 0!==r&&(r.HowlerGlobal=e,r.Howler=g,r.Howl=t,r.Sound=o)}(),function(){var t,r,n;HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(e){if(!this.ctx||!this.ctx.listener)return this;for(var t=this._howls.length-1;0<=t;t--)this._howls[t].stereo(e);return this},HowlerGlobal.prototype.pos=function(e,t,r){var n=this;return n.ctx&&n.ctx.listener?(t="number"!=typeof t?n._pos[1]:t,r="number"!=typeof r?n._pos[2]:r,"number"!=typeof e?n._pos:(n._pos=[e,t,r],void 0!==n.ctx.listener.positionX?(n.ctx.listener.positionX.setTargetAtTime(n._pos[0],Howler.ctx.currentTime,.1),n.ctx.listener.positionY.setTargetAtTime(n._pos[1],Howler.ctx.currentTime,.1),n.ctx.listener.positionZ.setTargetAtTime(n._pos[2],Howler.ctx.currentTime,.1)):n.ctx.listener.setPosition(n._pos[0],n._pos[1],n._pos[2]),n)):n},HowlerGlobal.prototype.orientation=function(e,t,r,n,i,o){var a=this;if(!a.ctx||!a.ctx.listener)return a;var s=a._orientation;return t="number"!=typeof t?s[1]:t,r="number"!=typeof r?s[2]:r,n="number"!=typeof n?s[3]:n,i="number"!=typeof i?s[4]:i,o="number"!=typeof o?s[5]:o,"number"!=typeof e?s:(a._orientation=[e,t,r,n,i,o],void 0!==a.ctx.listener.forwardX?(a.ctx.listener.forwardX.setTargetAtTime(e,Howler.ctx.currentTime,.1),a.ctx.listener.forwardY.setTargetAtTime(t,Howler.ctx.currentTime,.1),a.ctx.listener.forwardZ.setTargetAtTime(r,Howler.ctx.currentTime,.1),a.ctx.listener.upX.setTargetAtTime(e,Howler.ctx.currentTime,.1),a.ctx.listener.upY.setTargetAtTime(t,Howler.ctx.currentTime,.1),a.ctx.listener.upZ.setTargetAtTime(r,Howler.ctx.currentTime,.1)):a.ctx.listener.setOrientation(e,t,r,n,i,o),a)},Howl.prototype.init=(t=Howl.prototype.init,function(e){return this._orientation=e.orientation||[1,0,0],this._stereo=e.stereo||null,this._pos=e.pos||null,this._pannerAttr={coneInnerAngle:void 0!==e.coneInnerAngle?e.coneInnerAngle:360,coneOuterAngle:void 0!==e.coneOuterAngle?e.coneOuterAngle:360,coneOuterGain:void 0!==e.coneOuterGain?e.coneOuterGain:0,distanceModel:void 0!==e.distanceModel?e.distanceModel:"inverse",maxDistance:void 0!==e.maxDistance?e.maxDistance:1e4,panningModel:void 0!==e.panningModel?e.panningModel:"HRTF",refDistance:void 0!==e.refDistance?e.refDistance:1,rolloffFactor:void 0!==e.rolloffFactor?e.rolloffFactor:1},this._onstereo=e.onstereo?[{fn:e.onstereo}]:[],this._onpos=e.onpos?[{fn:e.onpos}]:[],this._onorientation=e.onorientation?[{fn:e.onorientation}]:[],t.call(this,e)}),Howl.prototype.stereo=function(e,t){var r=this;if(!r._webAudio)return r;if("loaded"!==r._state)return r._queue.push({event:"stereo",action:function(){r.stereo(e,t)}}),r;var n=void 0===Howler.ctx.createStereoPanner?"spatial":"stereo";if(void 0===t){if("number"!=typeof e)return r._stereo;r._stereo=e,r._pos=[e,0,0]}for(var i=r._getSoundIds(t),o=0;o<i.length;o++){var a=r._soundById(i[o]);if(a){if("number"!=typeof e)return a._stereo;a._stereo=e,a._pos=[e,0,0],a._node&&(a._pannerAttr.panningModel="equalpower",a._panner&&a._panner.pan||u(a,n),"spatial"===n?void 0!==a._panner.positionX?(a._panner.positionX.setValueAtTime(e,Howler.ctx.currentTime),a._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),a._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):a._panner.setPosition(e,0,0):a._panner.pan.setValueAtTime(e,Howler.ctx.currentTime)),r._emit("stereo",a._id)}}return r},Howl.prototype.pos=function(e,t,r,n){var i=this;if(!i._webAudio)return i;if("loaded"!==i._state)return i._queue.push({event:"pos",action:function(){i.pos(e,t,r,n)}}),i;if(t="number"!=typeof t?0:t,r="number"!=typeof r?-.5:r,void 0===n){if("number"!=typeof e)return i._pos;i._pos=[e,t,r]}for(var o=i._getSoundIds(n),a=0;a<o.length;a++){var s=i._soundById(o[a]);if(s){if("number"!=typeof e)return s._pos;s._pos=[e,t,r],s._node&&(s._panner&&!s._panner.pan||u(s,"spatial"),void 0!==s._panner.positionX?(s._panner.positionX.setValueAtTime(e,Howler.ctx.currentTime),s._panner.positionY.setValueAtTime(t,Howler.ctx.currentTime),s._panner.positionZ.setValueAtTime(r,Howler.ctx.currentTime)):s._panner.setPosition(e,t,r)),i._emit("pos",s._id)}}return i},Howl.prototype.orientation=function(e,t,r,n){var i=this;if(!i._webAudio)return i;if("loaded"!==i._state)return i._queue.push({event:"orientation",action:function(){i.orientation(e,t,r,n)}}),i;if(t="number"!=typeof t?i._orientation[1]:t,r="number"!=typeof r?i._orientation[2]:r,void 0===n){if("number"!=typeof e)return i._orientation;i._orientation=[e,t,r]}for(var o=i._getSoundIds(n),a=0;a<o.length;a++){var s=i._soundById(o[a]);if(s){if("number"!=typeof e)return s._orientation;s._orientation=[e,t,r],s._node&&(s._panner||(s._pos||(s._pos=i._pos||[0,0,-.5]),u(s,"spatial")),void 0!==s._panner.orientationX?(s._panner.orientationX.setValueAtTime(e,Howler.ctx.currentTime),s._panner.orientationY.setValueAtTime(t,Howler.ctx.currentTime),s._panner.orientationZ.setValueAtTime(r,Howler.ctx.currentTime)):s._panner.setOrientation(e,t,r)),i._emit("orientation",s._id)}}return i},Howl.prototype.pannerAttr=function(){var e,t,r,n=this,i=arguments;if(!n._webAudio)return n;if(0===i.length)return n._pannerAttr;if(1===i.length){if("object"!==_typeof2(i[0]))return(r=n._soundById(parseInt(i[0],10)))?r._pannerAttr:n._pannerAttr;e=i[0],void 0===t&&(e.pannerAttr||(e.pannerAttr={coneInnerAngle:e.coneInnerAngle,coneOuterAngle:e.coneOuterAngle,coneOuterGain:e.coneOuterGain,distanceModel:e.distanceModel,maxDistance:e.maxDistance,refDistance:e.refDistance,rolloffFactor:e.rolloffFactor,panningModel:e.panningModel}),n._pannerAttr={coneInnerAngle:void 0!==e.pannerAttr.coneInnerAngle?e.pannerAttr.coneInnerAngle:n._coneInnerAngle,coneOuterAngle:void 0!==e.pannerAttr.coneOuterAngle?e.pannerAttr.coneOuterAngle:n._coneOuterAngle,coneOuterGain:void 0!==e.pannerAttr.coneOuterGain?e.pannerAttr.coneOuterGain:n._coneOuterGain,distanceModel:void 0!==e.pannerAttr.distanceModel?e.pannerAttr.distanceModel:n._distanceModel,maxDistance:void 0!==e.pannerAttr.maxDistance?e.pannerAttr.maxDistance:n._maxDistance,refDistance:void 0!==e.pannerAttr.refDistance?e.pannerAttr.refDistance:n._refDistance,rolloffFactor:void 0!==e.pannerAttr.rolloffFactor?e.pannerAttr.rolloffFactor:n._rolloffFactor,panningModel:void 0!==e.pannerAttr.panningModel?e.pannerAttr.panningModel:n._panningModel})}else 2===i.length&&(e=i[0],t=parseInt(i[1],10));for(var o=n._getSoundIds(t),a=0;a<o.length;a++)if(r=n._soundById(o[a])){var s=r._pannerAttr;s={coneInnerAngle:void 0!==e.coneInnerAngle?e.coneInnerAngle:s.coneInnerAngle,coneOuterAngle:void 0!==e.coneOuterAngle?e.coneOuterAngle:s.coneOuterAngle,coneOuterGain:void 0!==e.coneOuterGain?e.coneOuterGain:s.coneOuterGain,distanceModel:void 0!==e.distanceModel?e.distanceModel:s.distanceModel,maxDistance:void 0!==e.maxDistance?e.maxDistance:s.maxDistance,refDistance:void 0!==e.refDistance?e.refDistance:s.refDistance,rolloffFactor:void 0!==e.rolloffFactor?e.rolloffFactor:s.rolloffFactor,panningModel:void 0!==e.panningModel?e.panningModel:s.panningModel};var l=r._panner;l?(l.coneInnerAngle=s.coneInnerAngle,l.coneOuterAngle=s.coneOuterAngle,l.coneOuterGain=s.coneOuterGain,l.distanceModel=s.distanceModel,l.maxDistance=s.maxDistance,l.refDistance=s.refDistance,l.rolloffFactor=s.rolloffFactor,l.panningModel=s.panningModel):(r._pos||(r._pos=n._pos||[0,0,-.5]),u(r,"spatial"))}return n},Sound.prototype.init=(r=Sound.prototype.init,function(){var e=this,t=e._parent;e._orientation=t._orientation,e._stereo=t._stereo,e._pos=t._pos,e._pannerAttr=t._pannerAttr,r.call(this),e._stereo?t.stereo(e._stereo):e._pos&&t.pos(e._pos[0],e._pos[1],e._pos[2],e._id)}),Sound.prototype.reset=(n=Sound.prototype.reset,function(){var e=this,t=e._parent;return e._orientation=t._orientation,e._stereo=t._stereo,e._pos=t._pos,e._pannerAttr=t._pannerAttr,e._stereo?t.stereo(e._stereo):e._pos?t.pos(e._pos[0],e._pos[1],e._pos[2],e._id):e._panner&&(e._panner.disconnect(0),e._panner=void 0,t._refreshBuffer(e)),n.call(this)});var u=function(e,t){"spatial"===(t=t||"spatial")?(e._panner=Howler.ctx.createPanner(),e._panner.coneInnerAngle=e._pannerAttr.coneInnerAngle,e._panner.coneOuterAngle=e._pannerAttr.coneOuterAngle,e._panner.coneOuterGain=e._pannerAttr.coneOuterGain,e._panner.distanceModel=e._pannerAttr.distanceModel,e._panner.maxDistance=e._pannerAttr.maxDistance,e._panner.refDistance=e._pannerAttr.refDistance,e._panner.rolloffFactor=e._pannerAttr.rolloffFactor,e._panner.panningModel=e._pannerAttr.panningModel,void 0!==e._panner.positionX?(e._panner.positionX.setValueAtTime(e._pos[0],Howler.ctx.currentTime),e._panner.positionY.setValueAtTime(e._pos[1],Howler.ctx.currentTime),e._panner.positionZ.setValueAtTime(e._pos[2],Howler.ctx.currentTime)):e._panner.setPosition(e._pos[0],e._pos[1],e._pos[2]),void 0!==e._panner.orientationX?(e._panner.orientationX.setValueAtTime(e._orientation[0],Howler.ctx.currentTime),e._panner.orientationY.setValueAtTime(e._orientation[1],Howler.ctx.currentTime),e._panner.orientationZ.setValueAtTime(e._orientation[2],Howler.ctx.currentTime)):e._panner.setOrientation(e._orientation[0],e._orientation[1],e._orientation[2])):(e._panner=Howler.ctx.createStereoPanner(),e._panner.pan.setValueAtTime(e._stereo,Howler.ctx.currentTime)),e._panner.connect(e._node),e._paused||e._parent.pause(e._id,!0).play(e._id,!0)}}()}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],190:[function(e,t,r){r.read=function(e,t,r,n,i){var o,a,s=8*i-n-1,l=(1<<s)-1,u=l>>1,c=-7,h=r?i-1:0,d=r?-1:1,p=e[t+h];for(h+=d,o=p&(1<<-c)-1,p>>=-c,c+=s;0<c;o=256*o+e[t+h],h+=d,c-=8);for(a=o&(1<<-c)-1,o>>=-c,c+=n;0<c;a=256*a+e[t+h],h+=d,c-=8);if(0===o)o=1-u;else{if(o===l)return a?NaN:1/0*(p?-1:1);a+=Math.pow(2,n),o-=u}return(p?-1:1)*a*Math.pow(2,o-n)},r.write=function(e,t,r,n,i,o){var a,s,l,u=8*o-i-1,c=(1<<u)-1,h=c>>1,d=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:o-1,f=n?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=c):(a=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-a))<1&&(a--,l*=2),2<=(t+=1<=a+h?d/l:d*Math.pow(2,1-h))*l&&(a++,l/=2),c<=a+h?(s=0,a=c):1<=a+h?(s=(t*l-1)*Math.pow(2,i),a+=h):(s=t*Math.pow(2,h-1)*Math.pow(2,i),a=0));8<=i;e[r+p]=255&s,p+=f,s/=256,i-=8);for(a=a<<i|s,u+=i;0<u;e[r+p]=255&a,p+=f,a/=256,u-=8);e[r+p-f]|=128*m}},{}],191:[function(e,r,t){!function(e){var i=/iPhone/i,o=/iPod/i,a=/iPad/i,s=/\bAndroid(?:.+)Mobile\b/i,l=/Android/i,u=/\bAndroid(?:.+)SD4930UR\b/i,c=/\bAndroid(?:.+)(?:KF[A-Z]{2,4})\b/i,h=/Windows Phone/i,d=/\bWindows(?:.+)ARM\b/i,p=/BlackBerry/i,f=/BB10/i,m=/Opera Mini/i,v=/\b(CriOS|Chrome)(?:.+)Mobile/i,b=/\Mobile(?:.+)Firefox\b/i;function y(e,t){return e.test(t)}function t(e){var t=e||("undefined"!=typeof navigator?navigator.userAgent:""),r=t.split("[FBAN");void 0!==r[1]&&(t=r[0]),void 0!==(r=t.split("Twitter"))[1]&&(t=r[0]);var n={apple:{phone:y(i,t)&&!y(h,t),ipod:y(o,t),tablet:!y(i,t)&&y(a,t)&&!y(h,t),device:(y(i,t)||y(o,t)||y(a,t))&&!y(h,t)},amazon:{phone:y(u,t),tablet:!y(u,t)&&y(c,t),device:y(u,t)||y(c,t)},android:{phone:!y(h,t)&&y(u,t)||!y(h,t)&&y(s,t),tablet:!y(h,t)&&!y(u,t)&&!y(s,t)&&(y(c,t)||y(l,t)),device:!y(h,t)&&(y(u,t)||y(c,t)||y(s,t)||y(l,t))},windows:{phone:y(h,t),tablet:y(d,t),device:y(h,t)||y(d,t)},other:{blackberry:y(p,t),blackberry10:y(f,t),opera:y(m,t),firefox:y(b,t),chrome:y(v,t),device:y(p,t)||y(f,t)||y(m,t)||y(b,t)||y(v,t)}};return n.any=n.apple.device||n.android.device||n.windows.device||n.other.device,n.phone=n.apple.phone||n.android.phone||n.windows.phone,n.tablet=n.apple.tablet||n.android.tablet||n.windows.tablet,n}void 0!==r&&r.exports&&"undefined"==typeof window?r.exports=t:void 0!==r&&r.exports&&"undefined"!=typeof window?r.exports=t():"function"==typeof define&&define.amd?define([],e.isMobile=t()):e.isMobile=t()}(this)},{}],192:[function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}();function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var n=function(){function n(e,t,r){void 0===t&&(t=!1),o(this,n),this._fn=e,this._once=t,this._thisArg=r,this._next=this._prev=this._owner=null}return i(n,[{key:"detach",value:function(){return null!==this._owner&&(this._owner.detach(this),!0)}}]),n}();function a(e,t){return e._head?(e._tail._next=t)._prev=e._tail:e._head=t,(e._tail=t)._owner=e,t}var s=function(){function e(){o(this,e),this._head=this._tail=void 0}return i(e,[{key:"handlers",value:function(){var e=!(arguments.length<=0||void 0===arguments[0])&&arguments[0],t=this._head;if(e)return!!t;for(var r=[];t;)r.push(t),t=t._next;return r}},{key:"has",value:function(e){if(!(e instanceof n))throw new Error("MiniSignal#has(): First arg must be a MiniSignalBinding object.");return e._owner===this}},{key:"dispatch",value:function(){var e=this._head;if(!e)return!1;for(;e;)e._once&&this.detach(e),e._fn.apply(e._thisArg,arguments),e=e._next;return!0}},{key:"add",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?null:arguments[1];if("function"!=typeof e)throw new Error("MiniSignal#add(): First arg must be a Function.");return a(this,new n(e,!1,t))}},{key:"once",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?null:arguments[1];if("function"!=typeof e)throw new Error("MiniSignal#once(): First arg must be a Function.");return a(this,new n(e,!0,t))}},{key:"detach",value:function(e){if(!(e instanceof n))throw new Error("MiniSignal#detach(): First arg must be a MiniSignalBinding object.");return e._owner!==this||(e._prev&&(e._prev._next=e._next),e._next&&(e._next._prev=e._prev),e===this._head?(this._head=e._next,null===e._next&&(this._tail=null)):e===this._tail&&(this._tail=e._prev,this._tail._next=null),e._owner=null),this}},{key:"detachAll",value:function(){var e=this._head;if(!e)return this;for(this._head=this._tail=null;e;)e._owner=null,e=e._next;return this}}]),e}();s.MiniSignalBinding=n,r.default=s,t.exports=r.default},{}],193:[function(e,t,r){var l=Object.getOwnPropertySymbols,u=Object.prototype.hasOwnProperty,c=Object.prototype.propertyIsEnumerable;t.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},r=0;r<10;r++)t["_"+String.fromCharCode(r)]=r;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach(function(e){n[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var r,n,i=function(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),o=1;o<arguments.length;o++){for(var a in r=Object(arguments[o]))u.call(r,a)&&(i[a]=r[a]);if(l){n=l(r);for(var s=0;s<n.length;s++)c.call(r,n[s])&&(i[n[s]]=r[n[s]])}}return i}},{}],194:[function(e,t,r){t.exports=function(e,t){t=t||{};for(var n={key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},r=n.parser[t.strictMode?"strict":"loose"].exec(e),i={},o=14;o--;)i[n.key[o]]=r[o]||"";return i[n.q.name]={},i[n.key[12]].replace(n.q.parser,function(e,t,r){t&&(i[n.q.name][t]=r)}),i}},{}],195:[function(e,t,u){(function(i){function o(e,t){for(var r=0,n=e.length-1;0<=n;n--){var i=e[n];"."===i?e.splice(n,1):".."===i?(e.splice(n,1),r++):r&&(e.splice(n,1),r--)}if(t)for(;r--;r)e.unshift("..");return e}function a(e,t){if(e.filter)return e.filter(t);for(var r=[],n=0;n<e.length;n++)t(e[n],n,e)&&r.push(e[n]);return r}u.resolve=function(){for(var e="",t=!1,r=arguments.length-1;-1<=r&&!t;r--){var n=0<=r?arguments[r]:i.cwd();if("string"!=typeof n)throw new TypeError("Arguments to path.resolve must be strings");n&&(e=n+"/"+e,t="/"===n.charAt(0))}return(t?"/":"")+(e=o(a(e.split("/"),function(e){return!!e}),!t).join("/"))||"."},u.normalize=function(e){var t=u.isAbsolute(e),r="/"===n(e,-1);return(e=o(a(e.split("/"),function(e){return!!e}),!t).join("/"))||t||(e="."),e&&r&&(e+="/"),(t?"/":"")+e},u.isAbsolute=function(e){return"/"===e.charAt(0)},u.join=function(){var e=Array.prototype.slice.call(arguments,0);return u.normalize(a(e,function(e,t){if("string"!=typeof e)throw new TypeError("Arguments to path.join must be strings");return e}).join("/"))},u.relative=function(e,t){function r(e){for(var t=0;t<e.length&&""===e[t];t++);for(var r=e.length-1;0<=r&&""===e[r];r--);return r<t?[]:e.slice(t,r-t+1)}e=u.resolve(e).substr(1),t=u.resolve(t).substr(1);for(var n=r(e.split("/")),i=r(t.split("/")),o=Math.min(n.length,i.length),a=o,s=0;s<o;s++)if(n[s]!==i[s]){a=s;break}var l=[];for(s=a;s<n.length;s++)l.push("..");return(l=l.concat(i.slice(a))).join("/")},u.sep="/",u.delimiter=":",u.dirname=function(e){if("string"!=typeof e&&(e+=""),0===e.length)return".";for(var t=e.charCodeAt(0),r=47===t,n=-1,i=!0,o=e.length-1;1<=o;--o)if(47===(t=e.charCodeAt(o))){if(!i){n=o;break}}else i=!1;return-1===n?r?"/":".":r&&1===n?"/":e.slice(0,n)},u.basename=function(e,t){var r=function(e){"string"!=typeof e&&(e+="");var t,r=0,n=-1,i=!0;for(t=e.length-1;0<=t;--t)if(47===e.charCodeAt(t)){if(!i){r=t+1;break}}else-1===n&&(i=!1,n=t+1);return-1===n?"":e.slice(r,n)}(e);return t&&r.substr(-1*t.length)===t&&(r=r.substr(0,r.length-t.length)),r},u.extname=function(e){"string"!=typeof e&&(e+="");for(var t=-1,r=0,n=-1,i=!0,o=0,a=e.length-1;0<=a;--a){var s=e.charCodeAt(a);if(47===s){if(i)continue;r=a+1;break}-1===n&&(i=!1,n=a+1),46===s?-1===t?t=a:1!==o&&(o=1):-1!==t&&(o=-1)}return-1===t||-1===n||0===o||1===o&&t===n-1&&t===r+1?"":e.slice(t,n)};var n="b"==="ab".substr(-1)?function(e,t,r){return e.substr(t,r)}:function(e,t,r){return t<0&&(t=e.length+t),e.substr(t,r)}}).call(this,e("b55mWE"))},{b55mWE:183}],196:[function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("@pixi/filter-adjustment"),i=e("@pixi/filter-advanced-bloom"),o=e("@pixi/filter-ascii"),a=e("@pixi/filter-bevel"),s=e("@pixi/filter-bloom"),l=e("@pixi/filter-bulge-pinch"),u=e("@pixi/filter-color-map"),c=e("@pixi/filter-color-replace"),h=e("@pixi/filter-convolution"),d=e("@pixi/filter-cross-hatch"),p=e("@pixi/filter-crt"),f=e("@pixi/filter-dot"),m=e("@pixi/filter-drop-shadow"),v=e("@pixi/filter-emboss"),b=e("@pixi/filter-glitch"),y=e("@pixi/filter-glow"),g=e("@pixi/filter-godray"),w=e("@pixi/filter-kawase-blur"),_=e("@pixi/filter-motion-blur"),x=e("@pixi/filter-multi-color-replace"),S=e("@pixi/filter-old-film"),C=e("@pixi/filter-outline"),k=e("@pixi/filter-pixelate"),T=e("@pixi/filter-radial-blur"),A=e("@pixi/filter-reflection"),E=e("@pixi/filter-rgb-split"),O=e("@pixi/filter-shockwave"),M=e("@pixi/filter-simple-lightmap"),P=e("@pixi/filter-tilt-shift"),I=e("@pixi/filter-twist"),R=e("@pixi/filter-zoom-blur");r.AdjustmentFilter=n.AdjustmentFilter,r.AdvancedBloomFilter=i.AdvancedBloomFilter,r.AsciiFilter=o.AsciiFilter,r.BevelFilter=a.BevelFilter,r.BloomFilter=s.BloomFilter,r.BulgePinchFilter=l.BulgePinchFilter,r.ColorMapFilter=u.ColorMapFilter,r.ColorReplaceFilter=c.ColorReplaceFilter,r.ConvolutionFilter=h.ConvolutionFilter,r.CrossHatchFilter=d.CrossHatchFilter,r.CRTFilter=p.CRTFilter,r.DotFilter=f.DotFilter,r.DropShadowFilter=m.DropShadowFilter,r.EmbossFilter=v.EmbossFilter,r.GlitchFilter=b.GlitchFilter,r.GlowFilter=y.GlowFilter,r.GodrayFilter=g.GodrayFilter,r.KawaseBlurFilter=w.KawaseBlurFilter,r.MotionBlurFilter=_.MotionBlurFilter,r.MultiColorReplaceFilter=x.MultiColorReplaceFilter,r.OldFilmFilter=S.OldFilmFilter,r.OutlineFilter=C.OutlineFilter,r.PixelateFilter=k.PixelateFilter,r.RadialBlurFilter=T.RadialBlurFilter,r.ReflectionFilter=A.ReflectionFilter,r.RGBSplitFilter=E.RGBSplitFilter,r.ShockwaveFilter=O.ShockwaveFilter,r.SimpleLightmapFilter=M.SimpleLightmapFilter,r.TiltShiftFilter=P.TiltShiftFilter,r.TiltShiftAxisFilter=P.TiltShiftAxisFilter,r.TiltShiftXFilter=P.TiltShiftXFilter,r.TiltShiftYFilter=P.TiltShiftYFilter,r.TwistFilter=I.TwistFilter,r.ZoomBlurFilter=R.ZoomBlurFilter},{"@pixi/filter-adjustment":130,"@pixi/filter-advanced-bloom":131,"@pixi/filter-ascii":132,"@pixi/filter-bevel":133,"@pixi/filter-bloom":134,"@pixi/filter-bulge-pinch":135,"@pixi/filter-color-map":136,"@pixi/filter-color-replace":137,"@pixi/filter-convolution":138,"@pixi/filter-cross-hatch":139,"@pixi/filter-crt":140,"@pixi/filter-dot":141,"@pixi/filter-drop-shadow":142,"@pixi/filter-emboss":143,"@pixi/filter-glitch":144,"@pixi/filter-glow":145,"@pixi/filter-godray":146,"@pixi/filter-kawase-blur":147,"@pixi/filter-motion-blur":148,"@pixi/filter-multi-color-replace":149,"@pixi/filter-old-film":150,"@pixi/filter-outline":151,"@pixi/filter-pixelate":152,"@pixi/filter-radial-blur":153,"@pixi/filter-reflection":154,"@pixi/filter-rgb-split":155,"@pixi/filter-shockwave":156,"@pixi/filter-simple-lightmap":157,"@pixi/filter-tilt-shift":158,"@pixi/filter-twist":159,"@pixi/filter-zoom-blur":160}],197:[function(e,t,r){var i=new ArrayBuffer(0),o=function(e,t,r,n){this.gl=e,this.buffer=e.createBuffer(),this.type=t||e.ARRAY_BUFFER,this.drawType=n||e.STATIC_DRAW,this.data=i,r&&this.upload(r),this._updateID=0};o.prototype.upload=function(e,t,r){r||this.bind();var n=this.gl;e=e||this.data,t=t||0,this.data.byteLength>=e.byteLength?n.bufferSubData(this.type,t,e):n.bufferData(this.type,e,this.drawType),this.data=e},o.prototype.bind=function(){this.gl.bindBuffer(this.type,this.buffer)},o.createVertexBuffer=function(e,t,r){return new o(e,e.ARRAY_BUFFER,t,r)},o.createIndexBuffer=function(e,t,r){return new o(e,e.ELEMENT_ARRAY_BUFFER,t,r)},o.create=function(e,t,r,n){return new o(e,t,r,n)},o.prototype.destroy=function(){this.gl.deleteBuffer(this.buffer)},t.exports=o},{}],198:[function(e,t,r){var a=e("./GLTexture"),s=function(e,t,r){this.gl=e,this.framebuffer=e.createFramebuffer(),this.stencil=null,this.texture=null,this.width=t||100,this.height=r||100};s.prototype.enableTexture=function(e){var t=this.gl;this.texture=e||new a(t),this.texture.bind(),this.bind(),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,this.texture.texture,0)},s.prototype.enableStencil=function(){if(!this.stencil){var e=this.gl;this.stencil=e.createRenderbuffer(),e.bindRenderbuffer(e.RENDERBUFFER,this.stencil),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,this.stencil),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,this.width,this.height)}},s.prototype.clear=function(e,t,r,n){this.bind();var i=this.gl;i.clearColor(e,t,r,n),i.clear(i.COLOR_BUFFER_BIT|i.DEPTH_BUFFER_BIT)},s.prototype.bind=function(){var e=this.gl;e.bindFramebuffer(e.FRAMEBUFFER,this.framebuffer)},s.prototype.unbind=function(){var e=this.gl;e.bindFramebuffer(e.FRAMEBUFFER,null)},s.prototype.resize=function(e,t){var r=this.gl;this.width=e,this.height=t,this.texture&&this.texture.uploadData(null,e,t),this.stencil&&(r.bindRenderbuffer(r.RENDERBUFFER,this.stencil),r.renderbufferStorage(r.RENDERBUFFER,r.DEPTH_STENCIL,e,t))},s.prototype.destroy=function(){var e=this.gl;this.texture&&this.texture.destroy(),e.deleteFramebuffer(this.framebuffer),this.gl=null,this.stencil=null,this.texture=null},s.createRGBA=function(e,t,r,n){var i=a.fromData(e,null,t,r);i.enableNearestScaling(),i.enableWrapClamp();var o=new s(e,t,r);return o.enableTexture(i),o.unbind(),o},s.createFloat32=function(e,t,r,n){var i=new a.fromData(e,n,t,r);i.enableNearestScaling(),i.enableWrapClamp();var o=new s(e,t,r);return o.enableTexture(i),o.unbind(),o},t.exports=s},{"./GLTexture":200}],199:[function(e,t,r){var o=e("./shader/compileProgram"),a=e("./shader/extractAttributes"),s=e("./shader/extractUniforms"),l=e("./shader/setPrecision"),u=e("./shader/generateUniformAccessObject"),n=function(e,t,r,n,i){this.gl=e,n&&(t=l(t,n),r=l(r,n)),this.program=o(e,t,r,i),this.attributes=a(e,this.program),this.uniformData=s(e,this.program),this.uniforms=u(e,this.uniformData)};n.prototype.bind=function(){return this.gl.useProgram(this.program),this},n.prototype.destroy=function(){this.attributes=null,this.uniformData=null,this.uniforms=null,this.gl.deleteProgram(this.program)},t.exports=n},{"./shader/compileProgram":205,"./shader/extractAttributes":207,"./shader/extractUniforms":208,"./shader/generateUniformAccessObject":209,"./shader/setPrecision":213}],200:[function(e,t,r){var o=function(e,t,r,n,i){this.gl=e,this.texture=e.createTexture(),this.mipmap=!1,this.premultiplyAlpha=!1,this.width=t||-1,this.height=r||-1,this.format=n||e.RGBA,this.type=i||e.UNSIGNED_BYTE},i=!(o.prototype.upload=function(e){this.bind();var t=this.gl;t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.premultiplyAlpha);var r=e.videoWidth||e.width,n=e.videoHeight||e.height;n!==this.height||r!==this.width?t.texImage2D(t.TEXTURE_2D,0,this.format,this.format,this.type,e):t.texSubImage2D(t.TEXTURE_2D,0,0,0,this.format,this.type,e),this.width=r,this.height=n});o.prototype.uploadData=function(e,t,r){this.bind();var n=this.gl;if(e instanceof Float32Array){if(!i){if(!n.getExtension("OES_texture_float"))throw new Error("floating point textures not available");i=!0}this.type=n.FLOAT}else this.type=this.type||n.UNSIGNED_BYTE;n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.premultiplyAlpha),t!==this.width||r!==this.height?n.texImage2D(n.TEXTURE_2D,0,this.format,t,r,0,this.format,this.type,e||null):n.texSubImage2D(n.TEXTURE_2D,0,0,0,t,r,this.format,this.type,e||null),this.width=t,this.height=r},o.prototype.bind=function(e){var t=this.gl;void 0!==e&&t.activeTexture(t.TEXTURE0+e),t.bindTexture(t.TEXTURE_2D,this.texture)},o.prototype.unbind=function(){var e=this.gl;e.bindTexture(e.TEXTURE_2D,null)},o.prototype.minFilter=function(e){var t=this.gl;this.bind(),this.mipmap?t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,e?t.LINEAR_MIPMAP_LINEAR:t.NEAREST_MIPMAP_NEAREST):t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,e?t.LINEAR:t.NEAREST)},o.prototype.magFilter=function(e){var t=this.gl;this.bind(),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,e?t.LINEAR:t.NEAREST)},o.prototype.enableMipmap=function(){var e=this.gl;this.bind(),this.mipmap=!0,e.generateMipmap(e.TEXTURE_2D)},o.prototype.enableLinearScaling=function(){this.minFilter(!0),this.magFilter(!0)},o.prototype.enableNearestScaling=function(){this.minFilter(!1),this.magFilter(!1)},o.prototype.enableWrapClamp=function(){var e=this.gl;this.bind(),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)},o.prototype.enableWrapRepeat=function(){var e=this.gl;this.bind(),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.REPEAT)},o.prototype.enableWrapMirrorRepeat=function(){var e=this.gl;this.bind(),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.MIRRORED_REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.MIRRORED_REPEAT)},o.prototype.destroy=function(){this.gl.deleteTexture(this.texture)},o.fromSource=function(e,t,r){var n=new o(e);return n.premultiplyAlpha=r||!1,n.upload(t),n},o.fromData=function(e,t,r,n){var i=new o(e);return i.uploadData(t,r,n),i},t.exports=o},{}],201:[function(e,t,r){var i=e("./setVertexAttribArrays");function n(e,t){if(this.nativeVaoExtension=null,n.FORCE_NATIVE||(this.nativeVaoExtension=e.getExtension("OES_vertex_array_object")||e.getExtension("MOZ_OES_vertex_array_object")||e.getExtension("WEBKIT_OES_vertex_array_object")),this.nativeState=t,this.nativeVaoExtension){this.nativeVao=this.nativeVaoExtension.createVertexArrayOES();var r=e.getParameter(e.MAX_VERTEX_ATTRIBS);this.nativeState={tempAttribState:new Array(r),attribState:new Array(r)}}this.gl=e,this.attributes=[],this.indexBuffer=null,this.dirty=!1}n.prototype.constructor=n,(t.exports=n).FORCE_NATIVE=!1,n.prototype.bind=function(){if(this.nativeVao){if(this.nativeVaoExtension.bindVertexArrayOES(this.nativeVao),this.dirty)return this.dirty=!1,this.activate(),this;this.indexBuffer&&this.indexBuffer.bind()}else this.activate();return this},n.prototype.unbind=function(){return this.nativeVao&&this.nativeVaoExtension.bindVertexArrayOES(null),this},n.prototype.activate=function(){for(var e=this.gl,t=null,r=0;r<this.attributes.length;r++){var n=this.attributes[r];t!==n.buffer&&(n.buffer.bind(),t=n.buffer),e.vertexAttribPointer(n.attribute.location,n.attribute.size,n.type||e.FLOAT,n.normalized||!1,n.stride||0,n.start||0)}return i(e,this.attributes,this.nativeState),this.indexBuffer&&this.indexBuffer.bind(),this},n.prototype.addAttribute=function(e,t,r,n,i,o){return this.attributes.push({buffer:e,attribute:t,location:t.location,type:r||this.gl.FLOAT,normalized:n||!1,stride:i||0,start:o||0}),this.dirty=!0,this},n.prototype.addIndex=function(e){return this.indexBuffer=e,this.dirty=!0,this},n.prototype.clear=function(){return this.nativeVao&&this.nativeVaoExtension.bindVertexArrayOES(this.nativeVao),this.attributes.length=0,this.indexBuffer=null,this},n.prototype.draw=function(e,t,r){var n=this.gl;return this.indexBuffer?n.drawElements(e,t||this.indexBuffer.data.length,n.UNSIGNED_SHORT,2*(r||0)):n.drawArrays(e,r,t||this.getSize()),this},n.prototype.destroy=function(){this.gl=null,this.indexBuffer=null,this.attributes=null,this.nativeState=null,this.nativeVao&&this.nativeVaoExtension.deleteVertexArrayOES(this.nativeVao),this.nativeVaoExtension=null,this.nativeVao=null},n.prototype.getSize=function(){var e=this.attributes[0];return e.buffer.data.length/(e.stride/4||e.attribute.size)}},{"./setVertexAttribArrays":204}],202:[function(e,t,r){t.exports=function(e,t){var r=e.getContext("webgl",t)||e.getContext("experimental-webgl",t);if(!r)throw new Error("This browser does not support webGL. Try using the canvas renderer");return r}},{}],203:[function(e,t,r){var n={createContext:e("./createContext"),setVertexAttribArrays:e("./setVertexAttribArrays"),GLBuffer:e("./GLBuffer"),GLFramebuffer:e("./GLFramebuffer"),GLShader:e("./GLShader"),GLTexture:e("./GLTexture"),VertexArrayObject:e("./VertexArrayObject"),shader:e("./shader")};void 0!==t&&t.exports&&(t.exports=n),"undefined"!=typeof window&&(window.PIXI=window.PIXI||{},window.PIXI.glCore=n)},{"./GLBuffer":197,"./GLFramebuffer":198,"./GLShader":199,"./GLTexture":200,"./VertexArrayObject":201,"./createContext":202,"./setVertexAttribArrays":204,"./shader":210}],204:[function(e,t,r){t.exports=function(e,t,r){var n;if(r){var i=r.tempAttribState,o=r.attribState;for(n=0;n<i.length;n++)i[n]=!1;for(n=0;n<t.length;n++)i[t[n].attribute.location]=!0;for(n=0;n<o.length;n++)o[n]!==i[n]&&(o[n]=i[n],r.attribState[n]?e.enableVertexAttribArray(n):e.disableVertexAttribArray(n))}else for(n=0;n<t.length;n++){var a=t[n];e.enableVertexAttribArray(a.attribute.location)}}},{}],205:[function(e,t,r){var l=function(e,t,r){var n=e.createShader(t);return e.shaderSource(n,r),e.compileShader(n),e.getShaderParameter(n,e.COMPILE_STATUS)?n:(console.log(e.getShaderInfoLog(n)),null)};t.exports=function(e,t,r,n){var i=l(e,e.VERTEX_SHADER,t),o=l(e,e.FRAGMENT_SHADER,r),a=e.createProgram();if(e.attachShader(a,i),e.attachShader(a,o),n)for(var s in n)e.bindAttribLocation(a,n[s],s);return e.linkProgram(a),e.getProgramParameter(a,e.LINK_STATUS)||(console.error("Pixi.js Error: Could not initialize shader."),console.error("gl.VALIDATE_STATUS",e.getProgramParameter(a,e.VALIDATE_STATUS)),console.error("gl.getError()",e.getError()),""!==e.getProgramInfoLog(a)&&console.warn("Pixi.js Warning: gl.getProgramInfoLog()",e.getProgramInfoLog(a)),e.deleteProgram(a),a=null),e.deleteShader(i),e.deleteShader(o),a}},{}],206:[function(e,t,r){var n=function(e){for(var t=new Array(e),r=0;r<t.length;r++)t[r]=!1;return t};t.exports=function(e,t){switch(e){case"float":return 0;case"vec2":return new Float32Array(2*t);case"vec3":return new Float32Array(3*t);case"vec4":return new Float32Array(4*t);case"int":case"sampler2D":return 0;case"ivec2":return new Int32Array(2*t);case"ivec3":return new Int32Array(3*t);case"ivec4":return new Int32Array(4*t);case"bool":return!1;case"bvec2":return n(2*t);case"bvec3":return n(3*t);case"bvec4":return n(4*t);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}}},{}],207:[function(e,t,r){var s=e("./mapType"),l=e("./mapSize"),u=function(e,t,r,n){gl.vertexAttribPointer(this.location,this.size,e||gl.FLOAT,t||!1,r||0,n||0)};t.exports=function(e,t){for(var r={},n=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES),i=0;i<n;i++){var o=e.getActiveAttrib(t,i),a=s(e,o.type);r[o.name]={type:a,size:l(a),location:e.getAttribLocation(t,o.name),pointer:u}}return r}},{"./mapSize":211,"./mapType":212}],208:[function(e,t,r){var l=e("./mapType"),u=e("./defaultValue");t.exports=function(e,t){for(var r={},n=e.getProgramParameter(t,e.ACTIVE_UNIFORMS),i=0;i<n;i++){var o=e.getActiveUniform(t,i),a=o.name.replace(/\[.*?\]/,""),s=l(e,o.type);r[a]={type:s,size:o.size,location:e.getUniformLocation(t,a),value:u(s,o.size)}}return r}},{"./defaultValue":206,"./mapType":212}],209:[function(e,t,r){var c=function(e){return function(){return this.data[e].value}},i={float:function(e,t,r){e.uniform1f(t,r)},vec2:function(e,t,r){e.uniform2f(t,r[0],r[1])},vec3:function(e,t,r){e.uniform3f(t,r[0],r[1],r[2])},vec4:function(e,t,r){e.uniform4f(t,r[0],r[1],r[2],r[3])},int:function(e,t,r){e.uniform1i(t,r)},ivec2:function(e,t,r){e.uniform2i(t,r[0],r[1])},ivec3:function(e,t,r){e.uniform3i(t,r[0],r[1],r[2])},ivec4:function(e,t,r){e.uniform4i(t,r[0],r[1],r[2],r[3])},bool:function(e,t,r){e.uniform1i(t,r)},bvec2:function(e,t,r){e.uniform2i(t,r[0],r[1])},bvec3:function(e,t,r){e.uniform3i(t,r[0],r[1],r[2])},bvec4:function(e,t,r){e.uniform4i(t,r[0],r[1],r[2],r[3])},mat2:function(e,t,r){e.uniformMatrix2fv(t,!1,r)},mat3:function(e,t,r){e.uniformMatrix3fv(t,!1,r)},mat4:function(e,t,r){e.uniformMatrix4fv(t,!1,r)},sampler2D:function(e,t,r){e.uniform1i(t,r)}},o={float:function(e,t,r){e.uniform1fv(t,r)},vec2:function(e,t,r){e.uniform2fv(t,r)},vec3:function(e,t,r){e.uniform3fv(t,r)},vec4:function(e,t,r){e.uniform4fv(t,r)},int:function(e,t,r){e.uniform1iv(t,r)},ivec2:function(e,t,r){e.uniform2iv(t,r)},ivec3:function(e,t,r){e.uniform3iv(t,r)},ivec4:function(e,t,r){e.uniform4iv(t,r)},bool:function(e,t,r){e.uniform1iv(t,r)},bvec2:function(e,t,r){e.uniform2iv(t,r)},bvec3:function(e,t,r){e.uniform3iv(t,r)},bvec4:function(e,t,r){e.uniform4iv(t,r)},sampler2D:function(e,t,r){e.uniform1iv(t,r)}};function h(r,n){return function(e){this.data[r].value=e;var t=this.data[r].location;1===n.size?i[n.type](this.gl,t,e):o[n.type](this.gl,t,e)}}function d(e,t){for(var r=t,n=0;n<e.length-1;n++){var i=r[e[n]]||{data:{}};r[e[n]]=i,r=i}return r}t.exports=function(e,t){var r={data:{}};r.gl=e;for(var n=Object.keys(t),i=0;i<n.length;i++){var o=n[i],a=o.split("."),s=a[a.length-1],l=d(a,r),u=t[o];l.data[s]=u,l.gl=e,Object.defineProperty(l,s,{get:c(s),set:h(s,u)})}return r}},{}],210:[function(e,t,r){t.exports={compileProgram:e("./compileProgram"),defaultValue:e("./defaultValue"),extractAttributes:e("./extractAttributes"),extractUniforms:e("./extractUniforms"),generateUniformAccessObject:e("./generateUniformAccessObject"),setPrecision:e("./setPrecision"),mapSize:e("./mapSize"),mapType:e("./mapType")}},{"./compileProgram":205,"./defaultValue":206,"./extractAttributes":207,"./extractUniforms":208,"./generateUniformAccessObject":209,"./mapSize":211,"./mapType":212,"./setPrecision":213}],211:[function(e,t,r){var n={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};t.exports=function(e){return n[e]}},{}],212:[function(e,t,r){var o=null,a={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D"};t.exports=function(e,t){if(!o){var r=Object.keys(a);o={};for(var n=0;n<r.length;++n){var i=r[n];o[e[i]]=a[i]}}return o[t]}},{}],213:[function(e,t,r){t.exports=function(e,t){return"precision"!==e.substring(0,9)?"precision "+t+" float;\n"+e:e}},{}],214:[function(e,t,r){r.__esModule=!0;var l=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}}(e("../core")),n=o(e("ismobilejs")),i=o(e("./accessibleTarget"));function o(e){return e&&e.__esModule?e:{default:e}}l.utils.mixins.delayMixin(l.DisplayObject.prototype,i.default);var a=function(){function r(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),!n.default.tablet&&!n.default.phone||navigator.isCocoonJS||this.createTouchHook();var t=document.createElement("div");t.style.width="100px",t.style.height="100px",t.style.position="absolute",t.style.top="0px",t.style.left="0px",t.style.zIndex=2,this.div=t,this.pool=[],this.renderId=0,this.debug=!1,this.renderer=e,this.children=[],this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this.isActive=!1,this.isMobileAccessabillity=!1,window.addEventListener("keydown",this._onKeyDown,!1)}return r.prototype.createTouchHook=function(){var e=this,t=document.createElement("button");t.style.width="1px",t.style.height="1px",t.style.position="absolute",t.style.top="-1000px",t.style.left="-1000px",t.style.zIndex=2,t.style.backgroundColor="#FF0000",t.title="HOOK DIV",t.addEventListener("focus",function(){e.isMobileAccessabillity=!0,e.activate(),document.body.removeChild(t)}),document.body.appendChild(t)},r.prototype.activate=function(){this.isActive||(this.isActive=!0,window.document.addEventListener("mousemove",this._onMouseMove,!0),window.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),this.renderer.view.parentNode&&this.renderer.view.parentNode.appendChild(this.div))},r.prototype.deactivate=function(){this.isActive&&!this.isMobileAccessabillity&&(this.isActive=!1,window.document.removeEventListener("mousemove",this._onMouseMove,!0),window.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),this.div.parentNode&&this.div.parentNode.removeChild(this.div))},r.prototype.updateAccessibleObjects=function(e){if(e.visible){e.accessible&&e.interactive&&(e._accessibleActive||this.addChild(e),e.renderId=this.renderId);for(var t=e.children,r=0;r<t.length;r++)this.updateAccessibleObjects(t[r])}},r.prototype.update=function(){if(this.renderer.renderingToScreen){this.updateAccessibleObjects(this.renderer._lastObjectRendered);var e=this.renderer.view.getBoundingClientRect(),t=e.width/this.renderer.width,r=e.height/this.renderer.height,n=this.div;n.style.left=e.left+"px",n.style.top=e.top+"px",n.style.width=this.renderer.width+"px",n.style.height=this.renderer.height+"px";for(var i=0;i<this.children.length;i++){var o=this.children[i];if(o.renderId!==this.renderId)o._accessibleActive=!1,l.utils.removeItems(this.children,i,1),this.div.removeChild(o._accessibleDiv),this.pool.push(o._accessibleDiv),o._accessibleDiv=null,i--,0===this.children.length&&this.deactivate();else{n=o._accessibleDiv;var a=o.hitArea,s=o.worldTransform;o.hitArea?(n.style.left=(s.tx+a.x*s.a)*t+"px",n.style.top=(s.ty+a.y*s.d)*r+"px",n.style.width=a.width*s.a*t+"px",n.style.height=a.height*s.d*r+"px"):(a=o.getBounds(),this.capHitArea(a),n.style.left=a.x*t+"px",n.style.top=a.y*r+"px",n.style.width=a.width*t+"px",n.style.height=a.height*r+"px",n.title!==o.accessibleTitle&&null!==o.accessibleTitle&&(n.title=o.accessibleTitle),n.getAttribute("aria-label")!==o.accessibleHint&&null!==o.accessibleHint&&n.setAttribute("aria-label",o.accessibleHint))}}this.renderId++}},r.prototype.capHitArea=function(e){e.x<0&&(e.width+=e.x,e.x=0),e.y<0&&(e.height+=e.y,e.y=0),e.x+e.width>this.renderer.width&&(e.width=this.renderer.width-e.x),e.y+e.height>this.renderer.height&&(e.height=this.renderer.height-e.y)},r.prototype.addChild=function(e){var t=this.pool.pop();t||((t=document.createElement("button")).style.width="100px",t.style.height="100px",t.style.backgroundColor=this.debug?"rgba(255,0,0,0.5)":"transparent",t.style.position="absolute",t.style.zIndex=2,t.style.borderStyle="none",-1<navigator.userAgent.toLowerCase().indexOf("chrome")?t.setAttribute("aria-live","off"):t.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?t.setAttribute("aria-relevant","additions"):t.setAttribute("aria-relevant","text"),t.addEventListener("click",this._onClick.bind(this)),t.addEventListener("focus",this._onFocus.bind(this)),t.addEventListener("focusout",this._onFocusOut.bind(this))),e.accessibleTitle&&null!==e.accessibleTitle?t.title=e.accessibleTitle:e.accessibleHint&&null!==e.accessibleHint||(t.title="displayObject "+e.tabIndex),e.accessibleHint&&null!==e.accessibleHint&&t.setAttribute("aria-label",e.accessibleHint),e._accessibleActive=!0,(e._accessibleDiv=t).displayObject=e,this.children.push(e),this.div.appendChild(e._accessibleDiv),e._accessibleDiv.tabIndex=e.tabIndex},r.prototype._onClick=function(e){var t=this.renderer.plugins.interaction;t.dispatchEvent(e.target.displayObject,"click",t.eventData)},r.prototype._onFocus=function(e){e.target.getAttribute("aria-live","off")||e.target.setAttribute("aria-live","assertive");var t=this.renderer.plugins.interaction;t.dispatchEvent(e.target.displayObject,"mouseover",t.eventData)},r.prototype._onFocusOut=function(e){e.target.getAttribute("aria-live","off")||e.target.setAttribute("aria-live","polite");var t=this.renderer.plugins.interaction;t.dispatchEvent(e.target.displayObject,"mouseout",t.eventData)},r.prototype._onKeyDown=function(e){9===e.keyCode&&this.activate()},r.prototype._onMouseMove=function(e){0===e.movementX&&0===e.movementY||this.deactivate()},r.prototype.destroy=function(){this.div=null;for(var e=0;e<this.children.length;e++)this.children[e].div=null;window.document.removeEventListener("mousemove",this._onMouseMove,!0),window.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null},r}();r.default=a,l.WebGLRenderer.registerPlugin("accessibility",a),l.CanvasRenderer.registerPlugin("accessibility",a)},{"../core":239,"./accessibleTarget":215,ismobilejs:191}],215:[function(e,t,r){r.__esModule=!0,r.default={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:!1}},{}],216:[function(e,t,r){r.__esModule=!0;var n=e("./accessibleTarget");Object.defineProperty(r,"accessibleTarget",{enumerable:!0,get:function(){return o(n).default}});var i=e("./AccessibilityManager");function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"AccessibilityManager",{enumerable:!0,get:function(){return o(i).default}})},{"./AccessibilityManager":214,"./accessibleTarget":215}],217:[function(e,t,r){r.__esModule=!0;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),a=e("./autoDetectRenderer"),s=o(e("./display/Container")),l=e("./ticker"),u=o(e("./settings")),i=e("./const");function o(e){return e&&e.__esModule?e:{default:e}}var c=function(){function o(e,t,r,n,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),"number"==typeof e&&(e=Object.assign({width:e,height:t||u.default.RENDER_OPTIONS.height,forceCanvas:!!n,sharedTicker:!!i},r)),this._options=e=Object.assign({autoStart:!0,sharedTicker:!1,forceCanvas:!1,sharedLoader:!1},e),this.renderer=(0,a.autoDetectRenderer)(e),this.stage=new s.default,this._ticker=null,this.ticker=e.sharedTicker?l.shared:new l.Ticker,e.autoStart&&this.start()}return o.prototype.render=function(){this.renderer.render(this.stage)},o.prototype.stop=function(){this._ticker.stop()},o.prototype.start=function(){this._ticker.start()},o.prototype.destroy=function(e,t){if(this._ticker){var r=this._ticker;this.ticker=null,r.destroy()}this.stage.destroy(t),this.stage=null,this.renderer.destroy(e),this.renderer=null,this._options=null},n(o,[{key:"ticker",set:function(e){this._ticker&&this._ticker.remove(this.render,this),(this._ticker=e)&&e.add(this.render,this,i.UPDATE_PRIORITY.LOW)},get:function(){return this._ticker}},{key:"view",get:function(){return this.renderer.view}},{key:"screen",get:function(){return this.renderer.screen}}]),o}();r.default=c},{"./autoDetectRenderer":219,"./const":220,"./display/Container":222,"./settings":275,"./ticker":295}],218:[function(e,t,r){r.__esModule=!0;var n,i=e("pixi-gl-core"),o=e("./settings"),s=(n=o)&&n.__esModule?n:{default:n};function l(e,t){if(e instanceof Array){if("precision"!==e[0].substring(0,9)){var r=e.slice(0);return r.unshift("precision "+t+" float;"),r}}else if("precision"!==e.trim().substring(0,9))return"precision "+t+" float;\n"+e;return e}var a=function(o){function a(e,t,r,n,i){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==_typeof2(t)&&"function"!=typeof t?e:t}(this,o.call(this,e,l(t,i||s.default.PRECISION_VERTEX),l(r,i||s.default.PRECISION_FRAGMENT),void 0,n))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+_typeof2(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,o),a}(i.GLShader);r.default=a},{"./settings":275,"pixi-gl-core":203}],219:[function(e,t,r){r.__esModule=!0,r.autoDetectRenderer=function(e,t,r,n){var i=e&&e.forceCanvas;void 0!==n&&(i=n);return i||!o.isWebGLSupported()?new a.default(e,t,r):new s.default(e,t,r)};var o=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}}(e("./utils")),a=n(e("./renderers/canvas/CanvasRenderer")),s=n(e("./renderers/webgl/WebGLRenderer"));function n(e){return e&&e.__esModule?e:{default:e}}},{"./renderers/canvas/CanvasRenderer":251,"./renderers/webgl/WebGLRenderer":258,"./utils":299}],220:[function(e,t,r){r.__esModule=!0;r.VERSION="4.8.4",r.PI_2=2*Math.PI,r.RAD_TO_DEG=180/Math.PI,r.DEG_TO_RAD=Math.PI/180,r.RENDERER_TYPE={UNKNOWN:0,WEBGL:1,CANVAS:2},r.BLEND_MODES={NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16,NORMAL_NPM:17,ADD_NPM:18,SCREEN_NPM:19},r.DRAW_MODES={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},r.SCALE_MODES={LINEAR:0,NEAREST:1},r.WRAP_MODES={CLAMP:0,REPEAT:1,MIRRORED_REPEAT:2},r.GC_MODES={AUTO:0,MANUAL:1},r.URL_FILE_EXTENSION=/\.(\w{3,4})(?:$|\?|#)/i,r.DATA_URI=/^\s*data:(?:([\w-]+)\/([\w+.-]+))?(?:;charset=([\w-]+))?(?:;(base64))?,(.*)/i,r.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i,r.SHAPES={POLY:0,RECT:1,CIRC:2,ELIP:3,RREC:4},r.PRECISION={LOW:"lowp",MEDIUM:"mediump",HIGH:"highp"},r.TRANSFORM_MODE={STATIC:0,DYNAMIC:1},r.TEXT_GRADIENT={LINEAR_VERTICAL:0,LINEAR_HORIZONTAL:1},r.UPDATE_PRIORITY={INTERACTION:50,HIGH:25,NORMAL:0,LOW:-25,UTILITY:-50}},{}],221:[function(e,t,r){r.__esModule=!0;var n=e("../math");var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null}return e.prototype.isEmpty=function(){return this.minX>this.maxX||this.minY>this.maxY},e.prototype.clear=function(){this.updateID++,this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0},e.prototype.getRectangle=function(e){return this.minX>this.maxX||this.minY>this.maxY?n.Rectangle.EMPTY:((e=e||new n.Rectangle(0,0,1,1)).x=this.minX,e.y=this.minY,e.width=this.maxX-this.minX,e.height=this.maxY-this.minY,e)},e.prototype.addPoint=function(e){this.minX=Math.min(this.minX,e.x),this.maxX=Math.max(this.maxX,e.x),this.minY=Math.min(this.minY,e.y),this.maxY=Math.max(this.maxY,e.y)},e.prototype.addQuad=function(e){var t=this.minX,r=this.minY,n=this.maxX,i=this.maxY,o=e[0],a=e[1];t=o<t?o:t,r=a<r?a:r,n=n<o?o:n,i=i<a?a:i,t=(o=e[2])<t?o:t,r=(a=e[3])<r?a:r,n=n<o?o:n,i=i<a?a:i,t=(o=e[4])<t?o:t,r=(a=e[5])<r?a:r,n=n<o?o:n,i=i<a?a:i,t=(o=e[6])<t?o:t,r=(a=e[7])<r?a:r,n=n<o?o:n,i=i<a?a:i,this.minX=t,this.minY=r,this.maxX=n,this.maxY=i},e.prototype.addFrame=function(e,t,r,n,i){var o=e.worldTransform,a=o.a,s=o.b,l=o.c,u=o.d,c=o.tx,h=o.ty,d=this.minX,p=this.minY,f=this.maxX,m=this.maxY,v=a*t+l*r+c,b=s*t+u*r+h;d=v<d?v:d,p=b<p?b:p,f=f<v?v:f,m=m<b?b:m,d=(v=a*n+l*r+c)<d?v:d,p=(b=s*n+u*r+h)<p?b:p,f=f<v?v:f,m=m<b?b:m,d=(v=a*t+l*i+c)<d?v:d,p=(b=s*t+u*i+h)<p?b:p,f=f<v?v:f,m=m<b?b:m,d=(v=a*n+l*i+c)<d?v:d,p=(b=s*n+u*i+h)<p?b:p,f=f<v?v:f,m=m<b?b:m,this.minX=d,this.minY=p,this.maxX=f,this.maxY=m},e.prototype.addVertices=function(e,t,r,n){for(var i=e.worldTransform,o=i.a,a=i.b,s=i.c,l=i.d,u=i.tx,c=i.ty,h=this.minX,d=this.minY,p=this.maxX,f=this.maxY,m=r;m<n;m+=2){var v=t[m],b=t[m+1],y=o*v+s*b+u,g=l*b+a*v+c;h=y<h?y:h,d=g<d?g:d,p=p<y?y:p,f=f<g?g:f}this.minX=h,this.minY=d,this.maxX=p,this.maxY=f},e.prototype.addBounds=function(e){var t=this.minX,r=this.minY,n=this.maxX,i=this.maxY;this.minX=e.minX<t?e.minX:t,this.minY=e.minY<r?e.minY:r,this.maxX=e.maxX>n?e.maxX:n,this.maxY=e.maxY>i?e.maxY:i},e.prototype.addBoundsMask=function(e,t){var r=e.minX>t.minX?e.minX:t.minX,n=e.minY>t.minY?e.minY:t.minY,i=e.maxX<t.maxX?e.maxX:t.maxX,o=e.maxY<t.maxY?e.maxY:t.maxY;if(r<=i&&n<=o){var a=this.minX,s=this.minY,l=this.maxX,u=this.maxY;this.minX=r<a?r:a,this.minY=n<s?n:s,this.maxX=l<i?i:l,this.maxY=u<o?o:u}},e.prototype.addBoundsArea=function(e,t){var r=e.minX>t.x?e.minX:t.x,n=e.minY>t.y?e.minY:t.y,i=e.maxX<t.x+t.width?e.maxX:t.x+t.width,o=e.maxY<t.y+t.height?e.maxY:t.y+t.height;if(r<=i&&n<=o){var a=this.minX,s=this.minY,l=this.maxX,u=this.maxY;this.minX=r<a?r:a,this.minY=n<s?n:s,this.maxX=l<i?i:l,this.maxY=u<o?o:u}},e}();r.default=i},{"../math":244}],222:[function(e,t,r){r.__esModule=!0;var n,o=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),a=e("../utils"),i=e("./DisplayObject");var s=function(i){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==_typeof2(t)&&"function"!=typeof t?e:t}(this,i.call(this));return e.children=[],e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+_typeof2(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i),t.prototype.onChildrenChange=function(){},t.prototype.addChild=function(e){var t=arguments.length;if(1<t)for(var r=0;r<t;r++)this.addChild(arguments[r]);else e.parent&&e.parent.removeChild(e),e.parent=this,e.transform._parentID=-1,this.children.push(e),this._boundsID++,this.onChildrenChange(this.children.length-1),e.emit("added",this);return e},t.prototype.addChildAt=function(e,t){if(t<0||t>this.children.length)throw new Error(e+"addChildAt: The index "+t+" supplied is out of bounds "+this.children.length);return e.parent&&e.parent.removeChild(e),e.parent=this,e.transform._parentID=-1,this.children.splice(t,0,e),this._boundsID++,this.onChildrenChange(t),e.emit("added",this),e},t.prototype.swapChildren=function(e,t){if(e!==t){var r=this.getChildIndex(e),n=this.getChildIndex(t);this.children[r]=t,this.children[n]=e,this.onChildrenChange(r<n?r:n)}},t.prototype.getChildIndex=function(e){var t=this.children.indexOf(e);if(-1===t)throw new Error("The supplied DisplayObject must be a child of the caller");return t},t.prototype.setChildIndex=function(e,t){if(t<0||t>=this.children.length)throw new Error("The index "+t+" supplied is out of bounds "+this.children.length);var r=this.getChildIndex(e);(0,a.removeItems)(this.children,r,1),this.children.splice(t,0,e),this.onChildrenChange(t)},t.prototype.getChildAt=function(e){if(e<0||e>=this.children.length)throw new Error("getChildAt: Index ("+e+") does not exist.");return this.children[e]},t.prototype.removeChild=function(e){var t=arguments.length;if(1<t)for(var r=0;r<t;r++)this.removeChild(arguments[r]);else{var n=this.children.indexOf(e);if(-1===n)return null;e.parent=null,e.transform._parentID=-1,(0,a.removeItems)(this.children,n,1),this._boundsID++,this.onChildrenChange(n),e.emit("removed",this)}return e},t.prototype.removeChildAt=function(e){var t=this.getChildAt(e);return t.parent=null,t.transform._parentID=-1,(0,a.removeItems)(this.children,e,1),this._boundsID++,this.onChildrenChange(e),t.emit("removed",this),t},t.prototype.removeChildren=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,t=arguments[1],r=e,n="number"==typeof t?t:this.children.length,i=n-r,o=void 0;if(0<i&&i<=n){o=this.children.splice(r,i);for(var a=0;a<o.length;++a)o[a].parent=null,o[a].transform&&(o[a].transform._parentID=-1);this._boundsID++,this.onChildrenChange(e);for(var s=0;s<o.length;++s)o[s].emit("removed",this);return o}if(0===i&&0===this.children.length)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},t.prototype.updateTransform=function(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(var e=0,t=this.children.length;e<t;++e){var r=this.children[e];r.visible&&r.updateTransform()}},t.prototype.calculateBounds=function(){this._bounds.clear(),this._calculateBounds();for(var e=0;e<this.children.length;e++){var t=this.children[e];t.visible&&t.renderable&&(t.calculateBounds(),t._mask?(t._mask.calculateBounds(),this._bounds.addBoundsMask(t._bounds,t._mask._bounds)):t.filterArea?this._bounds.addBoundsArea(t._bounds,t.filterArea):this._bounds.addBounds(t._bounds))}this._lastBoundsID=this._boundsID},t.prototype._calculateBounds=function(){},t.prototype.renderWebGL=function(e){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable)if(this._mask||this._filters)this.renderAdvancedWebGL(e);else{this._renderWebGL(e);for(var t=0,r=this.children.length;t<r;++t)this.children[t].renderWebGL(e)}},t.prototype.renderAdvancedWebGL=function(e){e.flush();var t=this._filters,r=this._mask;if(t){this._enabledFilters||(this._enabledFilters=[]);for(var n=this._enabledFilters.length=0;n<t.length;n++)t[n].enabled&&this._enabledFilters.push(t[n]);this._enabledFilters.length&&e.filterManager.pushFilter(this,this._enabledFilters)}r&&e.maskManager.pushMask(this,this._mask),this._renderWebGL(e);for(var i=0,o=this.children.length;i<o;i++)this.children[i].renderWebGL(e);e.flush(),r&&e.maskManager.popMask(this,this._mask),t&&this._enabledFilters&&this._enabledFilters.length&&e.filterManager.popFilter()},t.prototype._renderWebGL=function(e){},t.prototype._renderCanvas=function(e){},t.prototype.renderCanvas=function(e){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable){this._mask&&e.maskManager.pushMask(this._mask),this._renderCanvas(e);for(var t=0,r=this.children.length;t<r;++t)this.children[t].renderCanvas(e);this._mask&&e.maskManager.popMask(e)}},t.prototype.destroy=function(e){i.prototype.destroy.call(this);var t="boolean"==typeof e?e:e&&e.children,r=this.removeChildren(0,this.children.length);if(t)for(var n=0;n<r.length;++n)r[n].destroy(e)},o(t,[{key:"width",get:function(){return this.scale.x*this.getLocalBounds().width},set:function(e){var t=this.getLocalBounds().width;this.scale.x=0!==t?e/t:1,this._width=e}},{key:"height",get:function(){return this.scale.y*this.getLocalBounds().height},set:function(e){var t=this.getLocalBounds().height;this.scale.y=0!==t?e/t:1,this._height=e}}]),t}(((n=i)&&n.__esModule?n:{default:n}).default);(r.default=s).prototype.containerUpdateTransform=s.prototype.updateTransform},{"../utils":299,"./DisplayObject":223}],223:[function(e,t,r){r.__esModule=!0;var i=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),n=h(e("eventemitter3")),o=e("../const"),a=h(e("../settings")),s=h(e("./TransformStatic")),l=h(e("./Transform")),u=h(e("./Bounds")),c=e("../math");function h(e){return e&&e.__esModule?e:{default:e}}var d=function(r){function n(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==_typeof2(t)&&"function"!=typeof t?e:t}(this,r.call(this)),t=a.default.TRANSFORM_MODE===o.TRANSFORM_MODE.STATIC?s.default:l.default;return e.tempDisplayObjectParent=null,e.transform=new t,e.alpha=1,e.visible=!0,e.renderable=!0,e.parent=null,e.worldAlpha=1,e.filterArea=null,e._filters=null,e._enabledFilters=null,e._bounds=new u.default,e._boundsID=0,e._lastBoundsID=-1,e._boundsRect=null,e._localBoundsRect=null,e._mask=null,e._destroyed=!1,e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+_typeof2(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,r),n.prototype.updateTransform=function(){this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha,this._bounds.updateID++},n.prototype._recursivePostUpdateTransform=function(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)},n.prototype.getBounds=function(e,t){return e||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._boundsID!==this._lastBoundsID&&this.calculateBounds(),t||(this._boundsRect||(this._boundsRect=new c.Rectangle),t=this._boundsRect),this._bounds.getRectangle(t)},n.prototype.getLocalBounds=function(e){var t=this.transform,r=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform,e||(this._localBoundsRect||(this._localBoundsRect=new c.Rectangle),e=this._localBoundsRect);var n=this.getBounds(!1,e);return this.parent=r,this.transform=t,n},n.prototype.toGlobal=function(e,t){return 2<arguments.length&&void 0!==arguments[2]&&arguments[2]||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(e,t)},n.prototype.toLocal=function(e,t,r,n){return t&&(e=t.toGlobal(e,r,n)),n||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(e,r)},n.prototype.renderWebGL=function(e){},n.prototype.renderCanvas=function(e){},n.prototype.setParent=function(e){if(!e||!e.addChild)throw new Error("setParent: Argument must be a Container");return e.addChild(this),e},n.prototype.setTransform=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1,n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:1,i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,o=5<arguments.length&&void 0!==arguments[5]?arguments[5]:0,a=6<arguments.length&&void 0!==arguments[6]?arguments[6]:0,s=7<arguments.length&&void 0!==arguments[7]?arguments[7]:0,l=8<arguments.length&&void 0!==arguments[8]?arguments[8]:0;return this.position.x=e,this.position.y=t,this.scale.x=r||1,this.scale.y=n||1,this.rotation=i,this.skew.x=o,this.skew.y=a,this.pivot.x=s,this.pivot.y=l,this},n.prototype.destroy=function(){this.removeAllListeners(),this.parent&&this.parent.removeChild(this),this.transform=null,this.parent=null,this._bounds=null,this._currentBounds=null,this._mask=null,this.filterArea=null,this.interactive=!1,this.interactiveChildren=!1,this._destroyed=!0},i(n,[{key:"_tempDisplayObjectParent",get:function(){return null===this.tempDisplayObjectParent&&(this.tempDisplayObjectParent=new n),this.tempDisplayObjectParent}},{key:"x",get:function(){return this.position.x},set:function(e){this.transform.position.x=e}},{key:"y",get:function(){return this.position.y},set:function(e){this.transform.position.y=e}},{key:"worldTransform",get:function(){return this.transform.worldTransform}},{key:"localTransform",get:function(){return this.transform.localTransform}},{key:"position",get:function(){return this.transform.position},set:function(e){this.transform.position.copy(e)}},{key:"scale",get:function(){return this.transform.scale},set:function(e){this.transform.scale.copy(e)}},{key:"pivot",get:function(){return this.transform.pivot},set:function(e){this.transform.pivot.copy(e)}},{key:"skew",get:function(){return this.transform.skew},set:function(e){this.transform.skew.copy(e)}},{key:"rotation",get:function(){return this.transform.rotation},set:function(e){this.transform.rotation=e}},{key:"worldVisible",get:function(){var e=this;do{if(!e.visible)return!1;e=e.parent}while(e);return!0}},{key:"mask",get:function(){return this._mask},set:function(e){this._mask&&(this._mask.renderable=!0,this._mask.isMask=!1),this._mask=e,this._mask&&(this._mask.renderable=!1,this._mask.isMask=!0)}},{key:"filters",get:function(){return this._filters&&this._filters.slice()},set:function(e){this._filters=e&&e.slice()}}]),n}(n.default);(r.default=d).prototype.displayObjectUpdateTransform=d.prototype.updateTransform},{"../const":220,"../math":244,"../settings":275,"./Bounds":221,"./Transform":224,"./TransformStatic":226,eventemitter3:179}],224:[function(e,t,r){r.__esModule=!0;var n,i=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),o=e("../math"),a=e("./TransformBase");var s=function(t){function r(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==_typeof2(t)&&"function"!=typeof t?e:t}(this,t.call(this));return e.position=new o.Point(0,0),e.scale=new o.Point(1,1),e.skew=new o.ObservablePoint(e.updateSkew,e,0,0),e.pivot=new o.Point(0,0),e._rotation=0,e._cx=1,e._sx=0,e._cy=0,e._sy=1,e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+_typeof2(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,t),r.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew._y),this._sx=Math.sin(this._rotation+this.skew._y),this._cy=-Math.sin(this._rotation-this.skew._x),this._sy=Math.cos(this._rotation-this.skew._x)},r.prototype.updateLocalTransform=function(){var e=this.localTransform;e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d)},r.prototype.updateTransform=function(e){var t=this.localTransform;t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d);var r=e.worldTransform,n=this.worldTransform;n.a=t.a*r.a+t.b*r.c,n.b=t.a*r.b+t.b*r.d,n.c=t.c*r.a+t.d*r.c,n.d=t.c*r.b+t.d*r.d,n.tx=t.tx*r.a+t.ty*r.c+r.tx,n.ty=t.tx*r.b+t.ty*r.d+r.ty,this._worldID++},r.prototype.setFromMatrix=function(e){e.decompose(this)},i(r,[{key:"rotation",get:function(){return this._rotation},set:function(e){this._rotation=e,this.updateSkew()}}]),r}(((n=a)&&n.__esModule?n:{default:n}).default);r.default=s},{"../math":244,"./TransformBase":225}],225:[function(e,t,r){r.__esModule=!0;var n=e("../math");var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.worldTransform=new n.Matrix,this.localTransform=new n.Matrix,this._worldID=0,this._parentID=0}return e.prototype.updateLocalTransform=function(){},e.prototype.updateTransform=function(e){var t=e.worldTransform,r=this.worldTransform,n=this.localTransform;r.a=n.a*t.a+n.b*t.c,r.b=n.a*t.b+n.b*t.d,r.c=n.c*t.a+n.d*t.c,r.d=n.c*t.b+n.d*t.d,r.tx=n.tx*t.a+n.ty*t.c+t.tx,r.ty=n.tx*t.b+n.ty*t.d+t.ty,this._worldID++},e}();(r.default=i).prototype.updateWorldTransform=i.prototype.updateTransform,i.IDENTITY=new i},{"../math":244}],226:[function(e,t,r){r.__esModule=!0;var n,i=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),o=e("../math"),a=e("./TransformBase");var s=function(t){function r(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==_typeof2(t)&&"function"!=typeof t?e:t}(this,t.call(this));return e.position=new o.ObservablePoint(e.onChange,e,0,0),e.scale=new o.ObservablePoint(e.onChange,e,1,1),e.pivot=new o.ObservablePoint(e.onChange,e,0,0),e.skew=new o.ObservablePoint(e.updateSkew,e,0,0),e._rotation=0,e._cx=1,e._sx=0,e._cy=0,e._sy=1,e._localID=0,e._currentLocalID=0,e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+_typeof2(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,t),r.prototype.onChange=function(){this._localID++},r.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew._y),this._sx=Math.sin(this._rotation+this.skew._y),this._cy=-Math.sin(this._rotation-this.skew._x),this._sy=Math.cos(this._rotation-this.skew._x),this._localID++},r.prototype.updateLocalTransform=function(){var e=this.localTransform;this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale._x,e.b=this._sx*this.scale._x,e.c=this._cy*this.scale._y,e.d=this._sy*this.scale._y,e.tx=this.position._x-(this.pivot._x*e.a+this.pivot._y*e.c),e.ty=this.position._y-(this.pivot._x*e.b+this.pivot._y*e.d),this._currentLocalID=this._localID,this._parentID=-1)},r.prototype.updateTransform=function(e){var t=this.localTransform;if(this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale._x,t.b=this._sx*this.scale._x,t.c=this._cy*this.scale._y,t.d=this._sy*this.scale._y,t.tx=this.position._x-(this.pivot._x*t.a+this.pivot._y*t.c),t.ty=this.position._y-(this.pivot._x*t.b+this.pivot._y*t.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==e._worldID){var r=e.worldTransform,n=this.worldTransform;n.a=t.a*r.a+t.b*r.c,n.b=t.a*r.b+t.b*r.d,n.c=t.c*r.a+t.d*r.c,n.d=t.c*r.b+t.d*r.d,n.tx=t.tx*r.a+t.ty*r.c+r.tx,n.ty=t.tx*r.b+t.ty*r.d+r.ty,this._parentID=e._worldID,this._worldID++}},r.prototype.setFromMatrix=function(e){e.decompose(this),this._localID++},i(r,[{key:"rotation",get:function(){return this._rotation},set:function(e){this._rotation!==e&&(this._rotation=e,this.updateSkew())}}]),r}(((n=a)&&n.__esModule?n:{default:n}).default);r.default=s},{"../math":244,"./TransformBase":225}],227:[function(e,t,r){r.__esModule=!0;var n=i(e("../display/Container")),o=i(e("../textures/RenderTexture")),a=i(e("../textures/Texture")),s=i(e("./GraphicsData")),l=i(e("../sprites/Sprite")),u=e("../math"),c=e("../utils"),C=e("../const"),h=i(e("../display/Bounds")),d=i(e("./utils/bezierCurveTo")),p=i(e("../renderers/canvas/CanvasRenderer"));function i(e){return e&&e.__esModule?e:{default:e}}var f=void 0,m=new u.Matrix,v=new u.Point,b=new Float32Array(4),y=new Float32Array(4),g=function(i){function S(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0];!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,S);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==_typeof2(t)&&"function"!=typeof t?e:t}(this,i.call(this));return t.fillAlpha=1,t.lineWidth=0,t.nativeLines=e,t.lineColor=0,t.lineAlignment=.5,t.graphicsData=[],t.tint=16777215,t._prevTint=16777215,t.blendMode=C.BLEND_MODES.NORMAL,t.currentPath=null,t._webGL={},t.isMask=!1,t.boundsPadding=0,t._localBounds=new h.default,t.dirty=0,t.fastRectDirty=-1,t.clearDirty=0,t.boundsDirty=-1,t.cachedSpriteDirty=!1,t._spriteRect=null,t._fastRect=!1,t._prevRectTint=null,t._prevRectFillColor=null,t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+_typeof2(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(S,i),S.prototype.clone=function(){var e=new S;e.renderable=this.renderable,e.fillAlpha=this.fillAlpha,e.lineWidth=this.lineWidth,e.lineColor=this.lineColor,e.lineAlignment=this.lineAlignment,e.tint=this.tint,e.blendMode=this.blendMode,e.isMask=this.isMask,e.boundsPadding=this.boundsPadding,e.dirty=0,e.cachedSpriteDirty=this.cachedSpriteDirty;for(var t=0;t<this.graphicsData.length;++t)e.graphicsData.push(this.graphicsData[t].clone());return e.currentPath=e.graphicsData[e.graphicsData.length-1],e.updateLocalBounds(),e},S.prototype._quadraticCurveLength=function(e,t,r,n,i,o){var a=e-(2*r+i),s=t-(2*n+o),l=(r-2)*e*2,u=(n-2)*t*2,c=4*(a*a+s*s),h=4*(a*l+s*u),d=l*l+u*u,p=2*Math.sqrt(c+h+d),f=Math.sqrt(c),m=2*c*f,v=2*Math.sqrt(d),b=h/f;return(m*p+f*h*(p-v)+(4*d*c-h*h)*Math.log((2*f+b+p)/(b+v)))/(4*m)},S.prototype._bezierCurveLength=function(e,t,r,n,i,o,a,s){for(var l=0,u=0,c=0,h=0,d=0,p=0,f=0,m=0,v=0,b=0,y=0,g=e,w=t,_=1;_<=10;++_)b=g-(m=(f=(p=(d=1-(u=_/10))*d)*d)*e+3*p*u*r+3*d*(c=u*u)*i+(h=c*u)*a),y=w-(v=f*t+3*p*u*n+3*d*c*o+h*s),g=m,w=v,l+=Math.sqrt(b*b+y*y);return l},S.prototype._segmentsCount=function(e){var t=Math.ceil(e/S.CURVES.maxLength);return t<S.CURVES.minSegments?t=S.CURVES.minSegments:t>S.CURVES.maxSegments&&(t=S.CURVES.maxSegments),t},S.prototype.lineStyle=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1,n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:.5;if(this.lineWidth=e,this.lineColor=t,this.lineAlpha=r,this.lineAlignment=n,this.currentPath)if(this.currentPath.shape.points.length){var i=new u.Polygon(this.currentPath.shape.points.slice(-2));i.closed=!1,this.drawShape(i)}else this.currentPath.lineWidth=this.lineWidth,this.currentPath.lineColor=this.lineColor,this.currentPath.lineAlpha=this.lineAlpha,this.currentPath.lineAlignment=this.lineAlignment;return this},S.prototype.moveTo=function(e,t){var r=new u.Polygon([e,t]);return r.closed=!1,this.drawShape(r),this},S.prototype.lineTo=function(e,t){var r=this.currentPath.shape.points,n=r[r.length-2],i=r[r.length-1];return n===e&&i===t||(r.push(e,t),this.dirty++),this},S.prototype.quadraticCurveTo=function(e,t,r,n){this.currentPath?0===this.currentPath.shape.points.length&&(this.currentPath.shape.points=[0,0]):this.moveTo(0,0);var i=this.currentPath.shape.points,o=0,a=0;0===i.length&&this.moveTo(0,0);for(var s=i[i.length-2],l=i[i.length-1],u=S.CURVES.adaptive?this._segmentsCount(this._quadraticCurveLength(s,l,e,t,r,n)):20,c=1;c<=u;++c){var h=c/u;o=s+(e-s)*h,a=l+(t-l)*h,i.push(o+(e+(r-e)*h-o)*h,a+(t+(n-t)*h-a)*h)}return this.dirty++,this},S.prototype.bezierCurveTo=function(e,t,r,n,i,o){this.currentPath?0===this.currentPath.shape.points.length&&(this.currentPath.shape.points=[0,0]):this.moveTo(0,0);var a=this.currentPath.shape.points,s=a[a.length-2],l=a[a.length-1];a.length-=2;var u=S.CURVES.adaptive?this._segmentsCount(this._bezierCurveLength(s,l,e,t,r,n,i,o)):20;return(0,d.default)(s,l,e,t,r,n,i,o,u,a),this.dirty++,this},S.prototype.arcTo=function(e,t,r,n,i){this.currentPath?0===this.currentPath.shape.points.length&&this.currentPath.shape.points.push(e,t):this.moveTo(e,t);var o=this.currentPath.shape.points,a=o[o.length-2],s=o[o.length-1]-t,l=a-e,u=n-t,c=r-e,h=Math.abs(s*c-l*u);if(h<1e-8||0===i)o[o.length-2]===e&&o[o.length-1]===t||o.push(e,t);else{var d=s*s+l*l,p=u*u+c*c,f=s*u+l*c,m=i*Math.sqrt(d)/h,v=i*Math.sqrt(p)/h,b=m*f/d,y=v*f/p,g=m*c+v*l,w=m*u+v*s,_=l*(v+b),x=s*(v+b),S=c*(m+y),C=u*(m+y),k=Math.atan2(x-w,_-g),T=Math.atan2(C-w,S-g);this.arc(g+e,w+t,i,k,T,c*s<l*u)}return this.dirty++,this},S.prototype.arc=function(e,t,r,n,i){var o=5<arguments.length&&void 0!==arguments[5]&&arguments[5];if(n===i)return this;!o&&i<=n?i+=C.PI_2:o&&n<=i&&(n+=C.PI_2);var a=i-n,s=S.CURVES.adaptive?this._segmentsCount(Math.abs(a)*r):40*Math.ceil(Math.abs(a)/C.PI_2);if(0===a)return this;var l=e+Math.cos(n)*r,u=t+Math.sin(n)*r,c=this.currentPath?this.currentPath.shape.points:null;if(c){var h=Math.abs(c[c.length-2]-l),d=Math.abs(c[c.length-1]-u);h<.001&&d<.001||c.push(l,u)}else this.moveTo(l,u),c=this.currentPath.shape.points;for(var p=a/(2*s),f=2*p,m=Math.cos(p),v=Math.sin(p),b=s-1,y=b%1/b,g=0;g<=b;++g){var w=p+n+f*(g+y*g),_=Math.cos(w),x=-Math.sin(w);c.push((m*_+v*x)*r+e,(m*-x+v*_)*r+t)}return this.dirty++,this},S.prototype.beginFill=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1;return this.filling=!0,this.fillColor=e,this.fillAlpha=t,this.currentPath&&this.currentPath.shape.points.length<=2&&(this.currentPath.fill=this.filling,this.currentPath.fillColor=this.fillColor,this.currentPath.fillAlpha=this.fillAlpha),this},S.prototype.endFill=function(){return this.filling=!1,this.fillColor=null,this.fillAlpha=1,this},S.prototype.drawRect=function(e,t,r,n){return this.drawShape(new u.Rectangle(e,t,r,n)),this},S.prototype.drawRoundedRect=function(e,t,r,n,i){return this.drawShape(new u.RoundedRectangle(e,t,r,n,i)),this},S.prototype.drawCircle=function(e,t,r){return this.drawShape(new u.Circle(e,t,r)),this},S.prototype.drawEllipse=function(e,t,r,n){return this.drawShape(new u.Ellipse(e,t,r,n)),this},S.prototype.drawPolygon=function(e){var t=e,r=!0;if(t instanceof u.Polygon&&(r=t.closed,t=t.points),!Array.isArray(t)){t=new Array(arguments.length);for(var n=0;n<t.length;++n)t[n]=arguments[n]}var i=new u.Polygon(t);return i.closed=r,this.drawShape(i),this},S.prototype.drawStar=function(e,t,r,n,i){var o=5<arguments.length&&void 0!==arguments[5]?arguments[5]:0;i=i||n/2;for(var a=-1*Math.PI/2+o,s=2*r,l=C.PI_2/s,u=[],c=0;c<s;c++){var h=c%2?i:n,d=c*l+a;u.push(e+h*Math.cos(d),t+h*Math.sin(d))}return this.drawPolygon(u)},S.prototype.clear=function(){return(this.lineWidth||this.filling||0<this.graphicsData.length)&&(this.lineWidth=0,this.lineAlignment=.5,this.filling=!1,this.boundsDirty=-1,this.canvasTintDirty=-1,this.dirty++,this.clearDirty++,this.graphicsData.length=0),this.currentPath=null,this._spriteRect=null,this},S.prototype.isFastRect=function(){return 1===this.graphicsData.length&&this.graphicsData[0].shape.type===C.SHAPES.RECT&&!this.graphicsData[0].lineWidth},S.prototype._renderWebGL=function(e){this.dirty!==this.fastRectDirty&&(this.fastRectDirty=this.dirty,this._fastRect=this.isFastRect()),this._fastRect?this._renderSpriteRect(e):(e.setObjectRenderer(e.plugins.graphics),e.plugins.graphics.render(this))},S.prototype._renderSpriteRect=function(e){var t=this.graphicsData[0].shape;this._spriteRect||(this._spriteRect=new l.default(new a.default(a.default.WHITE)));var r=this._spriteRect,n=this.graphicsData[0].fillColor;if(16777215===this.tint)r.tint=n;else if(this.tint!==this._prevRectTint||n!==this._prevRectFillColor){var i=b,o=y;(0,c.hex2rgb)(n,i),(0,c.hex2rgb)(this.tint,o),i[0]*=o[0],i[1]*=o[1],i[2]*=o[2],r.tint=(0,c.rgb2hex)(i),this._prevRectTint=this.tint,this._prevRectFillColor=n}r.alpha=this.graphicsData[0].fillAlpha,r.worldAlpha=this.worldAlpha*r.alpha,r.blendMode=this.blendMode,r._texture._frame.width=t.width,r._texture._frame.height=t.height,r.transform.worldTransform=this.transform.worldTransform,r.anchor.set(-t.x/t.width,-t.y/t.height),r._onAnchorUpdate(),r._renderWebGL(e)},S.prototype._renderCanvas=function(e){!0!==this.isMask&&e.plugins.graphics.render(this)},S.prototype._calculateBounds=function(){this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.updateLocalBounds(),this.cachedSpriteDirty=!0);var e=this._localBounds;this._bounds.addFrame(this.transform,e.minX,e.minY,e.maxX,e.maxY)},S.prototype.containsPoint=function(e){this.worldTransform.applyInverse(e,v);for(var t=this.graphicsData,r=0;r<t.length;++r){var n=t[r];if(n.fill&&(n.shape&&n.shape.contains(v.x,v.y))){if(n.holes)for(var i=0;i<n.holes.length;i++){if(n.holes[i].contains(v.x,v.y))return!1}return!0}}return!1},S.prototype.updateLocalBounds=function(){var e=1/0,t=-1/0,r=1/0,n=-1/0;if(this.graphicsData.length)for(var i=0,o=0,a=0,s=0,l=0,u=0;u<this.graphicsData.length;u++){var c=this.graphicsData[u],h=c.type,d=c.lineWidth*c.lineAlignment;if(i=c.shape,h===C.SHAPES.RECT||h===C.SHAPES.RREC)o=i.x-d,a=i.y-d,e=o<e?o:e,t=t<o+(s=i.width+2*d)?o+s:t,r=a<r?a:r,n=n<a+(l=i.height+2*d)?a+l:n;else if(h===C.SHAPES.CIRC)o=i.x,a=i.y,e=o-(s=i.radius+d)<e?o-s:e,t=t<o+s?o+s:t,r=a-(l=i.radius+d)<r?a-l:r,n=n<a+l?a+l:n;else if(h===C.SHAPES.ELIP)o=i.x,a=i.y,e=o-(s=i.width+d)<e?o-s:e,t=t<o+s?o+s:t,r=a-(l=i.height+d)<r?a-l:r,n=n<a+l?a+l:n;else for(var p=i.points,f=0,m=0,v=0,b=0,y=0,g=0,w=0,_=0,x=0;x+2<p.length;x+=2)o=p[x],a=p[x+1],f=p[x+2],m=p[x+3],v=Math.abs(f-o),b=Math.abs(m-a),l=2*d,(s=Math.sqrt(v*v+b*b))<1e-9||(e=(w=(f+o)/2)-(y=(l/s*b+v)/2)<e?w-y:e,t=t<w+y?w+y:t,r=(_=(m+a)/2)-(g=(l/s*v+b)/2)<r?_-g:r,n=n<_+g?_+g:n)}else n=r=t=e=0;var S=this.boundsPadding;this._localBounds.minX=e-S,this._localBounds.maxX=t+S,this._localBounds.minY=r-S,this._localBounds.maxY=n+S},S.prototype.drawShape=function(e){this.currentPath&&this.currentPath.shape.points.length<=2&&this.graphicsData.pop(),this.currentPath=null;var t=new s.default(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.filling,this.nativeLines,e,this.lineAlignment);return this.graphicsData.push(t),t.type===C.SHAPES.POLY&&(t.shape.closed=t.shape.closed,this.currentPath=t),this.dirty++,t},S.prototype.generateCanvasTexture=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1,r=this.getLocalBounds(),n=o.default.create(r.width,r.height,e,t);f||(f=new p.default),this.transform.updateLocalTransform(),this.transform.localTransform.copy(m),m.invert(),m.tx-=r.x,m.ty-=r.y,f.render(this,n,!0,m);var i=a.default.fromCanvas(n.baseTexture._canvasRenderTarget.canvas,e,"graphics");return i.baseTexture.resolution=t,i.baseTexture.update(),i},S.prototype.closePath=function(){var e=this.currentPath;return e&&e.shape&&e.shape.close(),this},S.prototype.addHole=function(){var e=this.graphicsData.pop();return this.currentPath=this.graphicsData[this.graphicsData.length-1],this.currentPath.addHole(e.shape),this.currentPath=null,this},S.prototype.destroy=function(e){i.prototype.destroy.call(this,e);for(var t=0;t<this.graphicsData.length;++t)this.graphicsData[t].destroy();for(var r in this._webGL)for(var n=0;n<this._webGL[r].data.length;++n)this._webGL[r].data[n].destroy();this._spriteRect&&this._spriteRect.destroy(),this.graphicsData=null,this.currentPath=null,this._webGL=null,this._localBounds=null},S}(n.default);(r.default=g)._SPRITE_TEXTURE=null,g.CURVES={adaptive:!1,maxLength:10,minSegments:8,maxSegments:2048}},{"../const":220,"../display/Bounds":221,"../display/Container":222,"../math":244,"../renderers/canvas/CanvasRenderer":251,"../sprites/Sprite":276,"../textures/RenderTexture":287,"../textures/Texture":289,"../utils":299,"./GraphicsData":228,"./utils/bezierCurveTo":230}],228:[function(e,t,r){r.__esModule=!0;var n=function(){function u(e,t,r,n,i,o,a,s,l){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),this.lineWidth=e,this.lineAlignment=l,this.nativeLines=a,this.lineColor=t,this.lineAlpha=r,this._lineTint=t,this.fillColor=n,this.fillAlpha=i,this._fillTint=n,this.fill=o,this.holes=[],this.shape=s,this.type=s.type}return u.prototype.clone=function(){return new u(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.fill,this.nativeLines,this.shape)},u.prototype.addHole=function(e){this.holes.push(e)},u.prototype.destroy=function(){this.shape=null,this.holes=null},u}();r.default=n},{}],229:[function(e,t,r){r.__esModule=!0;var n,i=e("../../renderers/canvas/CanvasRenderer"),o=(n=i)&&n.__esModule?n:{default:n},F=e("../../const");var a=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.renderer=e}return t.prototype.render=function(e){var t=this.renderer,r=t.context,n=e.worldAlpha,i=e.transform.worldTransform,o=t.resolution;r.setTransform(i.a*o,i.b*o,i.c*o,i.d*o,i.tx*o,i.ty*o),e.canvasTintDirty===e.dirty&&e._prevTint===e.tint||this.updateGraphicsTint(e),t.setBlendMode(e.blendMode);for(var a=0;a<e.graphicsData.length;a++){var s=e.graphicsData[a],l=s.shape,u=s._fillTint,c=s._lineTint;if(r.lineWidth=s.lineWidth,s.type===F.SHAPES.POLY){r.beginPath();var h=l.points,d=s.holes,p=void 0,f=void 0;r.moveTo(h[0],h[1]);for(var m=2;m<h.length;m+=2)r.lineTo(h[m],h[m+1]);if(l.closed&&r.closePath(),0<d.length){for(var v=p=0;v<h.length;v+=2)p+=h[v]*h[v+3]-h[v+1]*h[v+2];for(var b=0;b<d.length;b++){h=d[b].points;for(var y=f=0;y<h.length;y+=2)f+=h[y]*h[y+3]-h[y+1]*h[y+2];if(r.moveTo(h[0],h[1]),f*p<0)for(var g=2;g<h.length;g+=2)r.lineTo(h[g],h[g+1]);else for(var w=h.length-2;2<=w;w-=2)r.lineTo(h[w],h[w+1]);d[b].closed&&r.closePath()}}s.fill&&(r.globalAlpha=s.fillAlpha*n,r.fillStyle="#"+("00000"+(0|u).toString(16)).substr(-6),r.fill()),s.lineWidth&&(r.globalAlpha=s.lineAlpha*n,r.strokeStyle="#"+("00000"+(0|c).toString(16)).substr(-6),r.stroke())}else if(s.type===F.SHAPES.RECT)(s.fillColor||0===s.fillColor)&&(r.globalAlpha=s.fillAlpha*n,r.fillStyle="#"+("00000"+(0|u).toString(16)).substr(-6),r.fillRect(l.x,l.y,l.width,l.height)),s.lineWidth&&(r.globalAlpha=s.lineAlpha*n,r.strokeStyle="#"+("00000"+(0|c).toString(16)).substr(-6),r.strokeRect(l.x,l.y,l.width,l.height));else if(s.type===F.SHAPES.CIRC)r.beginPath(),r.arc(l.x,l.y,l.radius,0,2*Math.PI),r.closePath(),s.fill&&(r.globalAlpha=s.fillAlpha*n,r.fillStyle="#"+("00000"+(0|u).toString(16)).substr(-6),r.fill()),s.lineWidth&&(r.globalAlpha=s.lineAlpha*n,r.strokeStyle="#"+("00000"+(0|c).toString(16)).substr(-6),r.stroke());else if(s.type===F.SHAPES.ELIP){var _=2*l.width,x=2*l.height,S=l.x-_/2,C=l.y-x/2;r.beginPath();var k=_/2*.5522848,T=x/2*.5522848,A=S+_,E=C+x,O=S+_/2,M=C+x/2;r.moveTo(S,M),r.bezierCurveTo(S,M-T,O-k,C,O,C),r.bezierCurveTo(O+k,C,A,M-T,A,M),r.bezierCurveTo(A,M+T,O+k,E,O,E),r.bezierCurveTo(O-k,E,S,M+T,S,M),r.closePath(),s.fill&&(r.globalAlpha=s.fillAlpha*n,r.fillStyle="#"+("00000"+(0|u).toString(16)).substr(-6),r.fill()),s.lineWidth&&(r.globalAlpha=s.lineAlpha*n,r.strokeStyle="#"+("00000"+(0|c).toString(16)).substr(-6),r.stroke())}else if(s.type===F.SHAPES.RREC){var P=l.x,I=l.y,R=l.width,D=l.height,B=l.radius,L=Math.min(R,D)/2|0;B=L<B?L:B,r.beginPath(),r.moveTo(P,I+B),r.lineTo(P,I+D-B),r.quadraticCurveTo(P,I+D,P+B,I+D),r.lineTo(P+R-B,I+D),r.quadraticCurveTo(P+R,I+D,P+R,I+D-B),r.lineTo(P+R,I+B),r.quadraticCurveTo(P+R,I,P+R-B,I),r.lineTo(P+B,I),r.quadraticCurveTo(P,I,P,I+B),r.closePath(),(s.fillColor||0===s.fillColor)&&(r.globalAlpha=s.fillAlpha*n,r.fillStyle="#"+("00000"+(0|u).toString(16)).substr(-6),r.fill()),s.lineWidth&&(r.globalAlpha=s.lineAlpha*n,r.strokeStyle="#"+("00000"+(0|c).toString(16)).substr(-6),r.stroke())}}},t.prototype.updateGraphicsTint=function(e){e._prevTint=e.tint,e.canvasTintDirty=e.dirty;for(var t=(e.tint>>16&255)/255,r=(e.tint>>8&255)/255,n=(255&e.tint)/255,i=0;i<e.graphicsData.length;++i){var o=e.graphicsData[i],a=0|o.fillColor,s=0|o.lineColor;o._fillTint=((a>>16&255)/255*t*255<<16)+((a>>8&255)/255*r*255<<8)+(255&a)/255*n*255,o._lineTint=((s>>16&255)/255*t*255<<16)+((s>>8&255)/255*r*255<<8)+(255&s)/255*n*255}},t.prototype.renderPolygon=function(e,t,r){r.moveTo(e[0],e[1]);for(var n=1;n<e.length/2;++n)r.lineTo(e[2*n],e[2*n+1]);t&&r.closePath()},t.prototype.destroy=function(){this.renderer=null},t}();r.default=a,o.default.registerPlugin("graphics",a)},{"../../const":220,"../../renderers/canvas/CanvasRenderer":251}],230:[function(e,t,r){r.__esModule=!0,r.default=function(e,t,r,n,i,o,a,s,l){var u=9<arguments.length&&void 0!==arguments[9]?arguments[9]:[],c=0,h=0,d=0,p=0,f=0;u.push(e,t);for(var m=1,v=0;m<=l;++m)d=(h=(c=1-(v=m/l))*c)*c,f=(p=v*v)*v,u.push(d*e+3*h*v*r+3*c*p*i+f*a,d*t+3*h*v*n+3*c*p*o+f*s);return u}},{}],231:[function(e,t,r){r.__esModule=!0;var u=e("../../utils"),c=e("../../const"),i=s(e("../../renderers/webgl/utils/ObjectRenderer")),n=s(e("../../renderers/webgl/WebGLRenderer")),o=s(e("./WebGLGraphicsData")),a=s(e("./shaders/PrimitiveShader")),h=s(e("./utils/buildPoly")),d=s(e("./utils/buildRectangle")),p=s(e("./utils/buildRoundedRectangle")),f=s(e("./utils/buildCircle"));function s(e){return e&&e.__esModule?e:{default:e}}var l=function(r){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==_typeof2(t)&&"function"!=typeof t?e:t}(this,r.call(this,e));return t.graphicsDataPool=[],t.primitiveShader=null,t.gl=e.gl,t.CONTEXT_UID=0,t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+_typeof2(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,r),n.prototype.onContextChange=function(){this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.primitiveShader=new a.default(this.gl)},n.prototype.destroy=function(){i.default.prototype.destroy.call(this);for(var e=0;e<this.graphicsDataPool.length;++e)this.graphicsDataPool[e].destroy();this.graphicsDataPool=null},n.prototype.render=function(e){var t=this.renderer,r=t.gl,n=void 0,i=e._webGL[this.CONTEXT_UID];i&&e.dirty===i.dirty||(this.updateGraphics(e),i=e._webGL[this.CONTEXT_UID]);var o=this.primitiveShader;t.bindShader(o),t.state.setBlendMode(e.blendMode);for(var a=0,s=i.data.length;a<s;a++){var l=(n=i.data[a]).shader;t.bindShader(l),l.uniforms.translationMatrix=e.transform.worldTransform.toArray(!0),l.uniforms.tint=(0,u.hex2rgb)(e.tint),l.uniforms.alpha=e.worldAlpha,t.bindVao(n.vao),n.nativeLines?r.drawArrays(r.LINES,0,n.points.length/6):n.vao.draw(r.TRIANGLE_STRIP,n.indices.length)}},n.prototype.updateGraphics=function(e){var t=this.renderer.gl,r=e._webGL[this.CONTEXT_UID];if(r||(r=e._webGL[this.CONTEXT_UID]={lastIndex:0,data:[],gl:t,clearDirty:-1,dirty:-1}),r.dirty=e.dirty,e.clearDirty!==r.clearDirty){r.clearDirty=e.clearDirty;for(var n=0;n<r.data.length;n++)this.graphicsDataPool.push(r.data[n]);r.data.length=0,r.lastIndex=0}for(var i=void 0,o=void 0,a=r.lastIndex;a<e.graphicsData.length;a++){var s=e.graphicsData[a];i=this.getWebGLData(r,0),s.nativeLines&&s.lineWidth&&(o=this.getWebGLData(r,0,!0),r.lastIndex++),s.type===c.SHAPES.POLY&&(0,h.default)(s,i,o),s.type===c.SHAPES.RECT?(0,d.default)(s,i,o):s.type===c.SHAPES.CIRC||s.type===c.SHAPES.ELIP?(0,f.default)(s,i,o):s.type===c.SHAPES.RREC&&(0,p.default)(s,i,o),r.lastIndex++}this.renderer.bindVao(null);for(var l=0;l<r.data.length;l++)(i=r.data[l]).dirty&&i.upload()},n.prototype.getWebGLData=function(e,t,r){var n=e.data[e.data.length-1];return(!n||n.nativeLines!==r||32e4<n.points.length)&&((n=this.graphicsDataPool.pop()||new o.default(this.renderer.gl,this.primitiveShader,this.renderer.state.attribsState)).nativeLines=r,n.reset(t),e.data.push(n)),n.dirty=!0,n},n}(i.default);r.default=l,n.default.registerPlugin("graphics",l)},{"../../const":220,"../../renderers/webgl/WebGLRenderer":258,"../../renderers/webgl/utils/ObjectRenderer":268,"../../utils":299,"./WebGLGraphicsData":232,"./shaders/PrimitiveShader":233,"./utils/buildCircle":234,"./utils/buildPoly":236,"./utils/buildRectangle":237,"./utils/buildRoundedRectangle":238}],232:[function(e,t,r){r.__esModule=!0;var n,i=e("pixi-gl-core"),o=(n=i)&&n.__esModule?n:{default:n};var a=function(){function n(e,t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),this.gl=e,this.color=[0,0,0],this.points=[],this.indices=[],this.buffer=o.default.GLBuffer.createVertexBuffer(e),this.indexBuffer=o.default.GLBuffer.createIndexBuffer(e),this.dirty=!0,this.nativeLines=!1,this.glPoints=null,this.glIndices=null,this.shader=t,this.vao=new o.default.VertexArrayObject(e,r).addIndex(this.indexBuffer).addAttribute(this.buffer,t.attributes.aVertexPosition,e.FLOAT,!1,24,0).addAttribute(this.buffer,t.attributes.aColor,e.FLOAT,!1,24,8)}return n.prototype.reset=function(){this.points.length=0,this.indices.length=0},n.prototype.upload=function(){this.glPoints=new Float32Array(this.points),this.buffer.upload(this.glPoints),this.glIndices=new Uint16Array(this.indices),this.indexBuffer.upload(this.glIndices),this.dirty=!1},n.prototype.destroy=function(){this.color=null,this.points=null,this.indices=null,this.vao.destroy(),this.buffer.destroy(),this.indexBuffer.destroy(),this.gl=null,this.buffer=null,this.indexBuffer=null,this.glPoints=null,this.glIndices=null},n}();r.default=a},{"pixi-gl-core":203}],233:[function(e,t,r){r.__esModule=!0;var n,i=e("../../../Shader");var o=function(t){function r(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==_typeof2(t)&&"function"!=typeof t?e:t}(this,t.call(this,e,["attribute vec2 aVertexPosition;","attribute vec4 aColor;","uniform mat3 translationMatrix;","uniform mat3 projectionMatrix;","uniform float alpha;","uniform vec3 tint;","varying vec4 vColor;","void main(void){","   gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vColor = aColor * vec4(tint * alpha, alpha);","}"].join("\n"),["varying vec4 vColor;","void main(void){","   gl_FragColor = vColor;","}"].join("\n")))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+_typeof2(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,t),r}(((n=i)&&n.__esModule?n:{default:n}).default);r.default=o},{"../../../Shader":218}],234:[function(e,t,r){r.__esModule=!0,r.default=function(e,t,r){var n=e.shape,i=n.x,o=n.y,a=void 0,s=void 0;s=e.type===x.SHAPES.CIRC?(a=n.radius,n.radius):(a=n.width,n.height);if(0===a||0===s)return;var l=Math.floor(30*Math.sqrt(n.radius))||Math.floor(15*Math.sqrt(n.width+n.height)),u=2*Math.PI/l;if(e.fill){var c=(0,S.hex2rgb)(e.fillColor),h=e.fillAlpha,d=c[0]*h,p=c[1]*h,f=c[2]*h,m=t.points,v=t.indices,b=m.length/6;v.push(b);for(var y=0;y<l+1;y++)m.push(i,o,d,p,f,h),m.push(i+Math.sin(u*y)*a,o+Math.cos(u*y)*s,d,p,f,h),v.push(b++,b++);v.push(b-1)}if(e.lineWidth){var g=e.points;e.points=[];for(var w=0;w<l;w++)e.points.push(i+Math.sin(u*-w)*a,o+Math.cos(u*-w)*s);e.points.push(e.points[0],e.points[1]),(0,_.default)(e,t,r),e.points=g}};var n,i=e("./buildLine"),_=(n=i)&&n.__esModule?n:{default:n},x=e("../../../const"),S=e("../../../utils")},{"../../../const":220,"../../../utils":299,"./buildLine":235}],235:[function(e,t,r){r.__esModule=!0,r.default=function(e,t,r){e.nativeLines?function(e,t){var r=0,n=e.points;if(0===n.length)return;var i=t.points,o=n.length/2,a=(0,X.hex2rgb)(e.lineColor),s=e.lineAlpha,l=a[0]*s,u=a[1]*s,c=a[2]*s;for(r=1;r<o;r++){var h=n[2*(r-1)],d=n[2*(r-1)+1],p=n[2*r],f=n[2*r+1];i.push(h,d),i.push(l,u,c,s),i.push(p,f),i.push(l,u,c,s)}}(e,r):function(e,t){var r=e.points;if(0===r.length)return;var n=new q.Point(r[0],r[1]),i=new q.Point(r[r.length-2],r[r.length-1]);if(n.x===i.x&&n.y===i.y){(r=r.slice()).pop(),r.pop();var o=(i=new q.Point(r[r.length-2],r[r.length-1])).x+.5*(n.x-i.x),a=i.y+.5*(n.y-i.y);r.unshift(o,a),r.push(o,a)}var s=t.points,l=t.indices,u=r.length/2,c=r.length,h=s.length/6,d=e.lineWidth/2,p=(0,X.hex2rgb)(e.lineColor),f=e.lineAlpha,m=p[0]*f,v=p[1]*f,b=p[2]*f,y=r[0],g=r[1],w=r[2],_=r[3],x=0,S=0,C=-(g-_),k=y-w,T=0,A=0,E=0,O=0,M=Math.sqrt(C*C+k*k);C/=M,k/=M,C*=d,k*=d;var P=e.lineAlignment,I=2*(1-P),R=2*P;s.push(y-C*I,g-k*I,m,v,b,f),s.push(y+C*R,g+k*R,m,v,b,f);for(var D=1;D<u-1;++D){y=r[2*(D-1)],g=r[2*(D-1)+1],w=r[2*D],_=r[2*D+1],x=r[2*(D+1)],S=r[2*(D+1)+1],C=-(g-_),k=y-w,M=Math.sqrt(C*C+k*k),C/=M,k/=M,C*=d,k*=d,T=-(_-S),A=w-x,M=Math.sqrt(T*T+A*A),T/=M,A/=M;var B=-k+g-(-k+_),L=-C+w-(-C+y),F=(-C+y)*(-k+_)-(-C+w)*(-k+g),j=-(A*=d)+S-(-A+_),N=-(T*=d)+w-(-T+x),G=(-T+x)*(-A+_)-(-T+w)*(-A+S),z=B*N-j*L;if(Math.abs(z)<.1)z+=10.1,s.push(w-C*I,_-k*I,m,v,b,f),s.push(w+C*R,_+k*R,m,v,b,f);else{var U=(L*G-N*F)/z,V=(j*F-B*G)/z,H=(U-w)*(U-w)+(V-_)*(V-_);196*d*d<H?(E=C-T,O=k-A,M=Math.sqrt(E*E+O*O),E/=M,O/=M,E*=d,O*=d,s.push(w-E*I,_-O*I),s.push(m,v,b,f),s.push(w+E*R,_+O*R),s.push(m,v,b,f),s.push(w-E*R*I,_-O*I),s.push(m,v,b,f),c++):(s.push(w+(U-w)*I,_+(V-_)*I),s.push(m,v,b,f),s.push(w-(U-w)*R,_-(V-_)*R),s.push(m,v,b,f))}}y=r[2*(u-2)],g=r[2*(u-2)+1],w=r[2*(u-1)],_=r[2*(u-1)+1],C=-(g-_),k=y-w,M=Math.sqrt(C*C+k*k),C/=M,k/=M,C*=d,k*=d,s.push(w-C*I,_-k*I),s.push(m,v,b,f),s.push(w+C*R,_+k*R),s.push(m,v,b,f),l.push(h);for(var W=0;W<c;++W)l.push(h++);l.push(h-1)}(e,t)};var q=e("../../../math"),X=e("../../../utils")},{"../../../math":244,"../../../utils":299}],236:[function(e,t,r){r.__esModule=!0,r.default=function(e,t,r){e.points=e.shape.points.slice();var n=e.points;if(e.fill&&6<=n.length){for(var i=[],o=e.holes,a=0;a<o.length;a++){var s=o[a];i.push(n.length/2),n=n.concat(s.points)}var l=t.points,u=t.indices,c=n.length/2,h=(0,_.hex2rgb)(e.fillColor),d=e.fillAlpha,p=h[0]*d,f=h[1]*d,m=h[2]*d,v=(0,x.default)(n,i,2);if(!v)return;for(var b=l.length/6,y=0;y<v.length;y+=3)u.push(v[y]+b),u.push(v[y]+b),u.push(v[y+1]+b),u.push(v[y+2]+b),u.push(v[y+2]+b);for(var g=0;g<c;g++)l.push(n[2*g],n[2*g+1],p,f,m,d)}0<e.lineWidth&&(0,w.default)(e,t,r)};var w=n(e("./buildLine")),_=e("../../../utils"),x=n(e("earcut"));function n(e){return e&&e.__esModule?e:{default:e}}},{"../../../utils":299,"./buildLine":235,earcut:178}],237:[function(e,t,r){r.__esModule=!0,r.default=function(e,t,r){var n=e.shape,i=n.x,o=n.y,a=n.width,s=n.height;if(e.fill){var l=(0,y.hex2rgb)(e.fillColor),u=e.fillAlpha,c=l[0]*u,h=l[1]*u,d=l[2]*u,p=t.points,f=t.indices,m=p.length/6;p.push(i,o),p.push(c,h,d,u),p.push(i+a,o),p.push(c,h,d,u),p.push(i,o+s),p.push(c,h,d,u),p.push(i+a,o+s),p.push(c,h,d,u),f.push(m,m,m+1,m+2,m+3,m+3)}if(e.lineWidth){var v=e.points;e.points=[i,o,i+a,o,i+a,o+s,i,o+s,i,o],(0,b.default)(e,t,r),e.points=v}};var n,i=e("./buildLine"),b=(n=i)&&n.__esModule?n:{default:n},y=e("../../../utils")},{"../../../utils":299,"./buildLine":235}],238:[function(e,t,r){r.__esModule=!0,r.default=function(e,t,r){var n=e.shape,i=n.x,o=n.y,a=n.width,s=n.height,l=n.radius,u=[];if(u.push(i+l,o),A(i+a-l,o,i+a,o,i+a,o+l,u),A(i+a,o+s-l,i+a,o+s,i+a-l,o+s,u),A(i+l,o+s,i,o+s,i,o+s-l,u),A(i,o+l,i,o,i+l+1e-10,o,u),e.fill){for(var c=(0,T.hex2rgb)(e.fillColor),h=e.fillAlpha,d=c[0]*h,p=c[1]*h,f=c[2]*h,m=t.points,v=t.indices,b=m.length/6,y=(0,C.default)(u,null,2),g=0,w=y.length;g<w;g+=3)v.push(y[g]+b),v.push(y[g]+b),v.push(y[g+1]+b),v.push(y[g+2]+b),v.push(y[g+2]+b);for(var _=0,x=u.length;_<x;_++)m.push(u[_],u[++_],d,p,f,h)}if(e.lineWidth){var S=e.points;e.points=u,(0,k.default)(e,t,r),e.points=S}};var C=n(e("earcut")),k=n(e("./buildLine")),T=e("../../../utils");function n(e){return e&&e.__esModule?e:{default:e}}function m(e,t,r){return e+(t-e)*r}function A(e,t,r,n,i,o){for(var a=6<arguments.length&&void 0!==arguments[6]?arguments[6]:[],s=0,l=0,u=0,c=0,h=0,d=0,p=0,f=0;p<=20;++p)s=m(e,r,f=p/20),l=m(t,n,f),u=m(r,i,f),c=m(n,o,f),h=m(s,u,f),d=m(l,c,f),a.push(h,d);return a}},{"../../../utils":299,"./buildLine":235,earcut:178}],239:[function(e,t,r){r.__esModule=!0,r.autoDetectRenderer=r.Application=r.Filter=r.SpriteMaskFilter=r.Quad=r.RenderTarget=r.ObjectRenderer=r.WebGLManager=r.Shader=r.CanvasRenderTarget=r.TextureUvs=r.VideoBaseTexture=r.BaseRenderTexture=r.RenderTexture=r.BaseTexture=r.TextureMatrix=r.Texture=r.Spritesheet=r.CanvasGraphicsRenderer=r.GraphicsRenderer=r.GraphicsData=r.Graphics=r.TextMetrics=r.TextStyle=r.Text=r.SpriteRenderer=r.CanvasTinter=r.CanvasSpriteRenderer=r.Sprite=r.TransformBase=r.TransformStatic=r.Transform=r.Container=r.DisplayObject=r.Bounds=r.glCore=r.WebGLRenderer=r.CanvasRenderer=r.ticker=r.utils=r.settings=void 0;var n=e("./const");Object.keys(n).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return n[e]}})});var i=e("./math");Object.keys(i).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return i[e]}})});var o=e("pixi-gl-core");Object.defineProperty(r,"glCore",{enumerable:!0,get:function(){return X(o).default}});var a=e("./display/Bounds");Object.defineProperty(r,"Bounds",{enumerable:!0,get:function(){return X(a).default}});var s=e("./display/DisplayObject");Object.defineProperty(r,"DisplayObject",{enumerable:!0,get:function(){return X(s).default}});var l=e("./display/Container");Object.defineProperty(r,"Container",{enumerable:!0,get:function(){return X(l).default}});var u=e("./display/Transform");Object.defineProperty(r,"Transform",{enumerable:!0,get:function(){return X(u).default}});var c=e("./display/TransformStatic");Object.defineProperty(r,"TransformStatic",{enumerable:!0,get:function(){return X(c).default}});var h=e("./display/TransformBase");Object.defineProperty(r,"TransformBase",{enumerable:!0,get:function(){return X(h).default}});var d=e("./sprites/Sprite");Object.defineProperty(r,"Sprite",{enumerable:!0,get:function(){return X(d).default}});var p=e("./sprites/canvas/CanvasSpriteRenderer");Object.defineProperty(r,"CanvasSpriteRenderer",{enumerable:!0,get:function(){return X(p).default}});var f=e("./sprites/canvas/CanvasTinter");Object.defineProperty(r,"CanvasTinter",{enumerable:!0,get:function(){return X(f).default}});var m=e("./sprites/webgl/SpriteRenderer");Object.defineProperty(r,"SpriteRenderer",{enumerable:!0,get:function(){return X(m).default}});var v=e("./text/Text");Object.defineProperty(r,"Text",{enumerable:!0,get:function(){return X(v).default}});var b=e("./text/TextStyle");Object.defineProperty(r,"TextStyle",{enumerable:!0,get:function(){return X(b).default}});var y=e("./text/TextMetrics");Object.defineProperty(r,"TextMetrics",{enumerable:!0,get:function(){return X(y).default}});var g=e("./graphics/Graphics");Object.defineProperty(r,"Graphics",{enumerable:!0,get:function(){return X(g).default}});var w=e("./graphics/GraphicsData");Object.defineProperty(r,"GraphicsData",{enumerable:!0,get:function(){return X(w).default}});var _=e("./graphics/webgl/GraphicsRenderer");Object.defineProperty(r,"GraphicsRenderer",{enumerable:!0,get:function(){return X(_).default}});var x=e("./graphics/canvas/CanvasGraphicsRenderer");Object.defineProperty(r,"CanvasGraphicsRenderer",{enumerable:!0,get:function(){return X(x).default}});var S=e("./textures/Spritesheet");Object.defineProperty(r,"Spritesheet",{enumerable:!0,get:function(){return X(S).default}});var C=e("./textures/Texture");Object.defineProperty(r,"Texture",{enumerable:!0,get:function(){return X(C).default}});var k=e("./textures/TextureMatrix");Object.defineProperty(r,"TextureMatrix",{enumerable:!0,get:function(){return X(k).default}});var T=e("./textures/BaseTexture");Object.defineProperty(r,"BaseTexture",{enumerable:!0,get:function(){return X(T).default}});var A=e("./textures/RenderTexture");Object.defineProperty(r,"RenderTexture",{enumerable:!0,get:function(){return X(A).default}});var E=e("./textures/BaseRenderTexture");Object.defineProperty(r,"BaseRenderTexture",{enumerable:!0,get:function(){return X(E).default}});var O=e("./textures/VideoBaseTexture");Object.defineProperty(r,"VideoBaseTexture",{enumerable:!0,get:function(){return X(O).default}});var M=e("./textures/TextureUvs");Object.defineProperty(r,"TextureUvs",{enumerable:!0,get:function(){return X(M).default}});var P=e("./renderers/canvas/utils/CanvasRenderTarget");Object.defineProperty(r,"CanvasRenderTarget",{enumerable:!0,get:function(){return X(P).default}});var I=e("./Shader");Object.defineProperty(r,"Shader",{enumerable:!0,get:function(){return X(I).default}});var R=e("./renderers/webgl/managers/WebGLManager");Object.defineProperty(r,"WebGLManager",{enumerable:!0,get:function(){return X(R).default}});var D=e("./renderers/webgl/utils/ObjectRenderer");Object.defineProperty(r,"ObjectRenderer",{enumerable:!0,get:function(){return X(D).default}});var B=e("./renderers/webgl/utils/RenderTarget");Object.defineProperty(r,"RenderTarget",{enumerable:!0,get:function(){return X(B).default}});var L=e("./renderers/webgl/utils/Quad");Object.defineProperty(r,"Quad",{enumerable:!0,get:function(){return X(L).default}});var F=e("./renderers/webgl/filters/spriteMask/SpriteMaskFilter");Object.defineProperty(r,"SpriteMaskFilter",{enumerable:!0,get:function(){return X(F).default}});var j=e("./renderers/webgl/filters/Filter");Object.defineProperty(r,"Filter",{enumerable:!0,get:function(){return X(j).default}});var N=e("./Application");Object.defineProperty(r,"Application",{enumerable:!0,get:function(){return X(N).default}});var G=e("./autoDetectRenderer");Object.defineProperty(r,"autoDetectRenderer",{enumerable:!0,get:function(){return G.autoDetectRenderer}});var z=q(e("./utils")),U=q(e("./ticker")),V=X(e("./settings")),H=X(e("./renderers/canvas/CanvasRenderer")),W=X(e("./renderers/webgl/WebGLRenderer"));function q(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function X(e){return e&&e.__esModule?e:{default:e}}r.settings=V.default,r.utils=z,r.ticker=U,r.CanvasRenderer=H.default,r.WebGLRenderer=W.default},{"./Application":217,"./Shader":218,"./autoDetectRenderer":219,"./const":220,"./display/Bounds":221,"./display/Container":222,"./display/DisplayObject":223,"./display/Transform":224,"./display/TransformBase":225,"./display/TransformStatic":226,"./graphics/Graphics":227,"./graphics/GraphicsData":228,"./graphics/canvas/CanvasGraphicsRenderer":229,"./graphics/webgl/GraphicsRenderer":231,"./math":244,"./renderers/canvas/CanvasRenderer":251,"./renderers/canvas/utils/CanvasRenderTarget":253,"./renderers/webgl/WebGLRenderer":258,"./renderers/webgl/filters/Filter":260,"./renderers/webgl/filters/spriteMask/SpriteMaskFilter":263,"./renderers/webgl/managers/WebGLManager":267,"./renderers/webgl/utils/ObjectRenderer":268,"./renderers/webgl/utils/Quad":269,"./renderers/webgl/utils/RenderTarget":270,"./settings":275,"./sprites/Sprite":276,"./sprites/canvas/CanvasSpriteRenderer":277,"./sprites/canvas/CanvasTinter":278,"./sprites/webgl/SpriteRenderer":280,"./text/Text":282,"./text/TextMetrics":283,"./text/TextStyle":284,"./textures/BaseRenderTexture":285,"./textures/BaseTexture":286,"./textures/RenderTexture":287,"./textures/Spritesheet":288,"./textures/Texture":289,"./textures/TextureMatrix":290,"./textures/TextureUvs":291,"./textures/VideoBaseTexture":292,"./ticker":295,"./utils":299,"pixi-gl-core":203}],240:[function(e,t,r){r.__esModule=!0;var n,i=e("./Matrix"),c=(n=i)&&n.__esModule?n:{default:n};var h=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],d=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],p=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],f=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],m=[],v=[];function b(e){return e<0?-1:0<e?1:0}!function(){for(var e=0;e<16;e++){var t=[];v.push(t);for(var r=0;r<16;r++)for(var n=b(h[e]*h[r]+p[e]*d[r]),i=b(d[e]*h[r]+f[e]*d[r]),o=b(h[e]*p[r]+p[e]*f[r]),a=b(d[e]*p[r]+f[e]*f[r]),s=0;s<16;s++)if(h[s]===n&&d[s]===i&&p[s]===o&&f[s]===a){t.push(s);break}}for(var l=0;l<16;l++){var u=new c.default;u.set(h[l],d[l],p[l],f[l],0,0),m.push(u)}}();var o={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MIRROR_HORIZONTAL:12,uX:function(e){return h[e]},uY:function(e){return d[e]},vX:function(e){return p[e]},vY:function(e){return f[e]},inv:function(e){return 8&e?15&e:7&-e},add:function(e,t){return v[e][t]},sub:function(e,t){return v[e][o.inv(t)]},rotate180:function(e){return 4^e},isVertical:function(e){return 2==(3&e)},byDirection:function(e,t){return 2*Math.abs(e)<=Math.abs(t)?0<=t?o.S:o.N:2*Math.abs(t)<=Math.abs(e)?0<e?o.E:o.W:0<t?0<e?o.SE:o.SW:0<e?o.NE:o.NW},matrixAppendRotationInv:function(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0,i=m[o.inv(t)];i.tx=r,i.ty=n,e.append(i)}};r.default=o},{"./Matrix":241}],241:[function(e,t,r){r.__esModule=!0;var n,i=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),o=e("./Point"),s=(n=o)&&n.__esModule?n:{default:n},l=e("../const");var a=function(){function a(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:1,i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,o=5<arguments.length&&void 0!==arguments[5]?arguments[5]:0;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),this.a=e,this.b=t,this.c=r,this.d=n,this.tx=i,this.ty=o,this.array=null}return a.prototype.fromArray=function(e){this.a=e[0],this.b=e[1],this.c=e[3],this.d=e[4],this.tx=e[2],this.ty=e[5]},a.prototype.set=function(e,t,r,n,i,o){return this.a=e,this.b=t,this.c=r,this.d=n,this.tx=i,this.ty=o,this},a.prototype.toArray=function(e,t){this.array||(this.array=new Float32Array(9));var r=t||this.array;return r[8]=(r[7]=e?(r[0]=this.a,r[1]=this.b,r[2]=0,r[3]=this.c,r[4]=this.d,r[5]=0,r[6]=this.tx,this.ty):(r[0]=this.a,r[1]=this.c,r[2]=this.tx,r[3]=this.b,r[4]=this.d,r[5]=this.ty,r[6]=0),1),r},a.prototype.apply=function(e,t){t=t||new s.default;var r=e.x,n=e.y;return t.x=this.a*r+this.c*n+this.tx,t.y=this.b*r+this.d*n+this.ty,t},a.prototype.applyInverse=function(e,t){t=t||new s.default;var r=1/(this.a*this.d+this.c*-this.b),n=e.x,i=e.y;return t.x=this.d*r*n+-this.c*r*i+(this.ty*this.c-this.tx*this.d)*r,t.y=this.a*r*i+-this.b*r*n+(-this.ty*this.a+this.tx*this.b)*r,t},a.prototype.translate=function(e,t){return this.tx+=e,this.ty+=t,this},a.prototype.scale=function(e,t){return this.a*=e,this.d*=t,this.c*=e,this.b*=t,this.tx*=e,this.ty*=t,this},a.prototype.rotate=function(e){var t=Math.cos(e),r=Math.sin(e),n=this.a,i=this.c,o=this.tx;return this.a=n*t-this.b*r,this.b=n*r+this.b*t,this.c=i*t-this.d*r,this.d=i*r+this.d*t,this.tx=o*t-this.ty*r,this.ty=o*r+this.ty*t,this},a.prototype.append=function(e){var t=this.a,r=this.b,n=this.c,i=this.d;return this.a=e.a*t+e.b*n,this.b=e.a*r+e.b*i,this.c=e.c*t+e.d*n,this.d=e.c*r+e.d*i,this.tx=e.tx*t+e.ty*n+this.tx,this.ty=e.tx*r+e.ty*i+this.ty,this},a.prototype.setTransform=function(e,t,r,n,i,o,a,s,l){return this.a=Math.cos(a+l)*i,this.b=Math.sin(a+l)*i,this.c=-Math.sin(a-s)*o,this.d=Math.cos(a-s)*o,this.tx=e-(r*this.a+n*this.c),this.ty=t-(r*this.b+n*this.d),this},a.prototype.prepend=function(e){var t=this.tx;if(1!==e.a||0!==e.b||0!==e.c||1!==e.d){var r=this.a,n=this.c;this.a=r*e.a+this.b*e.c,this.b=r*e.b+this.b*e.d,this.c=n*e.a+this.d*e.c,this.d=n*e.b+this.d*e.d}return this.tx=t*e.a+this.ty*e.c+e.tx,this.ty=t*e.b+this.ty*e.d+e.ty,this},a.prototype.decompose=function(e){var t=this.a,r=this.b,n=this.c,i=this.d,o=-Math.atan2(-n,i),a=Math.atan2(r,t),s=Math.abs(o+a);return s<1e-5||Math.abs(l.PI_2-s)<1e-5?(e.rotation=a,t<0&&0<=i&&(e.rotation+=e.rotation<=0?Math.PI:-Math.PI),e.skew.x=e.skew.y=0):(e.rotation=0,e.skew.x=o,e.skew.y=a),e.scale.x=Math.sqrt(t*t+r*r),e.scale.y=Math.sqrt(n*n+i*i),e.position.x=this.tx,e.position.y=this.ty,e},a.prototype.invert=function(){var e=this.a,t=this.b,r=this.c,n=this.d,i=this.tx,o=e*n-t*r;return this.a=n/o,this.b=-t/o,this.c=-r/o,this.d=e/o,this.tx=(r*this.ty-n*i)/o,this.ty=-(e*this.ty-t*i)/o,this},a.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},a.prototype.clone=function(){var e=new a;return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e},a.prototype.copy=function(e){return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e},i(a,null,[{key:"IDENTITY",get:function(){return new a}},{key:"TEMP_MATRIX",get:function(){return new a}}]),a}();r.default=a},{"../const":220,"./Point":243}],242:[function(e,t,r){r.__esModule=!0;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}();var i=function(){function i(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),this._x=r,this._y=n,this.cb=e,this.scope=t}return i.prototype.clone=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;return new i(e||this.cb,t||this.scope,this._x,this._y)},i.prototype.set=function(e,t){var r=e||0,n=t||(0!==t?r:0);this._x===r&&this._y===n||(this._x=r,this._y=n,this.cb.call(this.scope))},i.prototype.copy=function(e){this._x===e.x&&this._y===e.y||(this._x=e.x,this._y=e.y,this.cb.call(this.scope))},i.prototype.equals=function(e){return e.x===this._x&&e.y===this._y},n(i,[{key:"x",get:function(){return this._x},set:function(e){this._x!==e&&(this._x=e,this.cb.call(this.scope))}},{key:"y",get:function(){return this._y},set:function(e){this._y!==e&&(this._y=e,this.cb.call(this.scope))}}]),i}();r.default=i},{}],243:[function(e,t,r){r.__esModule=!0;var n=function(){function r(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),this.x=e,this.y=t}return r.prototype.clone=function(){return new r(this.x,this.y)},r.prototype.copy=function(e){this.set(e.x,e.y)},r.prototype.equals=function(e){return e.x===this.x&&e.y===this.y},r.prototype.set=function(e,t){this.x=e||0,this.y=t||(0!==t?this.x:0)},r}();r.default=n},{}],244:[function(e,t,r){r.__esModule=!0;var n=e("./Point");Object.defineProperty(r,"Point",{enumerable:!0,get:function(){return d(n).default}});var i=e("./ObservablePoint");Object.defineProperty(r,"ObservablePoint",{enumerable:!0,get:function(){return d(i).default}});var o=e("./Matrix");Object.defineProperty(r,"Matrix",{enumerable:!0,get:function(){return d(o).default}});var a=e("./GroupD8");Object.defineProperty(r,"GroupD8",{enumerable:!0,get:function(){return d(a).default}});var s=e("./shapes/Circle");Object.defineProperty(r,"Circle",{enumerable:!0,get:function(){return d(s).default}});var l=e("./shapes/Ellipse");Object.defineProperty(r,"Ellipse",{enumerable:!0,get:function(){return d(l).default}});var u=e("./shapes/Polygon");Object.defineProperty(r,"Polygon",{enumerable:!0,get:function(){return d(u).default}});var c=e("./shapes/Rectangle");Object.defineProperty(r,"Rectangle",{enumerable:!0,get:function(){return d(c).default}});var h=e("./shapes/RoundedRectangle");function d(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"RoundedRectangle",{enumerable:!0,get:function(){return d(h).default}})},{"./GroupD8":240,"./Matrix":241,"./ObservablePoint":242,"./Point":243,"./shapes/Circle":245,"./shapes/Ellipse":246,"./shapes/Polygon":247,"./shapes/Rectangle":248,"./shapes/RoundedRectangle":249}],245:[function(e,t,r){r.__esModule=!0;var n,i=e("./Rectangle"),o=(n=i)&&n.__esModule?n:{default:n},a=e("../../const");var s=function(){function n(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),this.x=e,this.y=t,this.radius=r,this.type=a.SHAPES.CIRC}return n.prototype.clone=function(){return new n(this.x,this.y,this.radius)},n.prototype.contains=function(e,t){if(this.radius<=0)return!1;var r=this.radius*this.radius,n=this.x-e,i=this.y-t;return(n*=n)+(i*=i)<=r},n.prototype.getBounds=function(){return new o.default(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)},n}();r.default=s},{"../../const":220,"./Rectangle":248}],246:[function(e,t,r){r.__esModule=!0;var n,i=e("./Rectangle"),o=(n=i)&&n.__esModule?n:{default:n},a=e("../../const");var s=function(){function i(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),this.x=e,this.y=t,this.width=r,this.height=n,this.type=a.SHAPES.ELIP}return i.prototype.clone=function(){return new i(this.x,this.y,this.width,this.height)},i.prototype.contains=function(e,t){if(this.width<=0||this.height<=0)return!1;var r=(e-this.x)/this.width,n=(t-this.y)/this.height;return(r*=r)+(n*=n)<=1},i.prototype.getBounds=function(){return new o.default(this.x-this.width,this.y-this.height,this.width,this.height)},i}();r.default=s},{"../../const":220,"./Rectangle":248}],247:[function(e,t,r){r.__esModule=!0;var n,i=e("../Point"),s=(n=i)&&n.__esModule?n:{default:n},l=e("../../const");var o=function(){function a(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),Array.isArray(t[0])&&(t=t[0]),t[0]instanceof s.default){for(var n=[],i=0,o=t.length;i<o;i++)n.push(t[i].x,t[i].y);t=n}this.closed=!0,this.points=t,this.type=l.SHAPES.POLY}return a.prototype.clone=function(){return new a(this.points.slice())},a.prototype.close=function(){var e=this.points;e[0]===e[e.length-2]&&e[1]===e[e.length-1]||e.push(e[0],e[1])},a.prototype.contains=function(e,t){for(var r=!1,n=this.points.length/2,i=0,o=n-1;i<n;o=i++){var a=this.points[2*i],s=this.points[2*i+1],l=this.points[2*o],u=this.points[2*o+1];t<s!=t<u&&e<(t-s)/(u-s)*(l-a)+a&&(r=!r)}return r},a}();r.default=o},{"../../const":220,"../Point":243}],248:[function(e,t,r){r.__esModule=!0;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),o=e("../../const");var i=function(){function i(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),this.x=Number(e),this.y=Number(t),this.width=Number(r),this.height=Number(n),this.type=o.SHAPES.RECT}return i.prototype.clone=function(){return new i(this.x,this.y,this.width,this.height)},i.prototype.copy=function(e){return this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this},i.prototype.contains=function(e,t){return!(this.width<=0||this.height<=0)&&(e>=this.x&&e<this.x+this.width&&t>=this.y&&t<this.y+this.height)},i.prototype.pad=function(e,t){e=e||0,t=t||(0!==t?e:0),this.x-=e,this.y-=t,this.width+=2*e,this.height+=2*t},i.prototype.fit=function(e){this.x<e.x&&(this.width+=this.x,this.width<0&&(this.width=0),this.x=e.x),this.y<e.y&&(this.height+=this.y,this.height<0&&(this.height=0),this.y=e.y),this.x+this.width>e.x+e.width&&(this.width=e.width-this.x,this.width<0&&(this.width=0)),this.y+this.height>e.y+e.height&&(this.height=e.height-this.y,this.height<0&&(this.height=0))},i.prototype.enlarge=function(e){var t=Math.min(this.x,e.x),r=Math.max(this.x+this.width,e.x+e.width),n=Math.min(this.y,e.y),i=Math.max(this.y+this.height,e.y+e.height);this.x=t,this.width=r-t,this.y=n,this.height=i-n},n(i,[{key:"left",get:function(){return this.x}},{key:"right",get:function(){return this.x+this.width}},{key:"top",get:function(){return this.y}},{key:"bottom",get:function(){return this.y+this.height}}],[{key:"EMPTY",get:function(){return new i(0,0,0,0)}}]),i}();r.default=i},{"../../const":220}],249:[function(e,t,r){r.__esModule=!0;var a=e("../../const");var n=function(){function o(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0,i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:20;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),this.x=e,this.y=t,this.width=r,this.height=n,this.radius=i,this.type=a.SHAPES.RREC}return o.prototype.clone=function(){return new o(this.x,this.y,this.width,this.height,this.radius)},o.prototype.contains=function(e,t){if(this.width<=0||this.height<=0)return!1;if(e>=this.x&&e<=this.x+this.width&&t>=this.y&&t<=this.y+this.height){if(t>=this.y+this.radius&&t<=this.y+this.height-this.radius||e>=this.x+this.radius&&e<=this.x+this.width-this.radius)return!0;var r=e-(this.x+this.radius),n=t-(this.y+this.radius),i=this.radius*this.radius;if(r*r+n*n<=i)return!0;if((r=e-(this.x+this.width-this.radius))*r+n*n<=i)return!0;if(r*r+(n=t-(this.y+this.height-this.radius))*n<=i)return!0;if((r=e-(this.x+this.radius))*r+n*n<=i)return!0}return!1},o}();r.default=n},{"../../const":220}],250:[function(e,t,r){r.__esModule=!0;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),s=e("../utils"),l=e("../math"),u=e("../const"),c=o(e("../settings")),h=o(e("../display/Container")),d=o(e("../textures/RenderTexture")),i=o(e("eventemitter3"));function o(e){return e&&e.__esModule?e:{default:e}}var p=new l.Matrix,a=function(o){function a(e,t,r,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==_typeof2(t)&&"function"!=typeof t?e:t}(this,o.call(this));return(0,s.sayHello)(e),"number"==typeof t&&(t=Object.assign({width:t,height:r||c.default.RENDER_OPTIONS.height},n)),t=Object.assign({},c.default.RENDER_OPTIONS,t),i.options=t,i.type=u.RENDERER_TYPE.UNKNOWN,i.screen=new l.Rectangle(0,0,t.width,t.height),i.view=t.view||document.createElement("canvas"),i.resolution=t.resolution||c.default.RESOLUTION,i.transparent=t.transparent,i.autoResize=t.autoResize||!1,i.blendModes=null,i.preserveDrawingBuffer=t.preserveDrawingBuffer,i.clearBeforeRender=t.clearBeforeRender,i.roundPixels=t.roundPixels,i._backgroundColor=0,i._backgroundColorRgba=[0,0,0,0],i._backgroundColorString="#000000",i.backgroundColor=t.backgroundColor||i._backgroundColor,i._tempDisplayObjectParent=new h.default,i._lastObjectRendered=i._tempDisplayObjectParent,i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+_typeof2(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,o),a.prototype.resize=function(e,t){this.screen.width=e,this.screen.height=t,this.view.width=e*this.resolution,this.view.height=t*this.resolution,this.autoResize&&(this.view.style.width=e+"px",this.view.style.height=t+"px")},a.prototype.generateTexture=function(e,t,r,n){n=n||e.getLocalBounds();var i=d.default.create(0|n.width,0|n.height,t,r);return p.tx=-n.x,p.ty=-n.y,this.render(e,i,!1,p,!!e.parent),i},a.prototype.destroy=function(e){e&&this.view.parentNode&&this.view.parentNode.removeChild(this.view),this.type=u.RENDERER_TYPE.UNKNOWN,this.view=null,this.screen=null,this.resolution=0,this.transparent=!1,this.autoResize=!1,this.blendModes=null,this.options=null,this.preserveDrawingBuffer=!1,this.clearBeforeRender=!1,this.roundPixels=!1,this._backgroundColor=0,this._backgroundColorRgba=null,this._backgroundColorString=null,this._tempDisplayObjectParent=null,this._lastObjectRendered=null},n(a,[{key:"width",get:function(){return this.view.width}},{key:"height",get:function(){return this.view.height}},{key:"backgroundColor",get:function(){return this._backgroundColor},set:function(e){this._backgroundColor=e,this._backgroundColorString=(0,s.hex2string)(e),(0,s.hex2rgb)(e,this._backgroundColorRgba)}}]),a}(i.default);r.default=a},{"../const":220,"../display/Container":222,"../math":244,"../settings":275,"../textures/RenderTexture":287,"../utils":299,eventemitter3:179}],251:[function(e,t,r){r.__esModule=!0;var n=o(e("../SystemRenderer")),a=o(e("./utils/CanvasMaskManager")),c=o(e("./utils/CanvasRenderTarget")),s=o(e("./utils/mapCanvasBlendModesToPixi")),i=e("../../utils"),h=e("../../const"),l=o(e("../../settings"));function o(e){return e&&e.__esModule?e:{default:e}}var u=function(i){function o(e,t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==_typeof2(t)&&"function"!=typeof t?e:t}(this,i.call(this,"Canvas",e,t,r));return n.type=h.RENDERER_TYPE.CANVAS,n.rootContext=n.view.getContext("2d",{alpha:n.transparent}),n.context=n.rootContext,n.refresh=!0,n.maskManager=new a.default(n),n.smoothProperty="imageSmoothingEnabled",n.rootContext.imageSmoothingEnabled||(n.rootContext.webkitImageSmoothingEnabled?n.smoothProperty="webkitImageSmoothingEnabled":n.rootContext.mozImageSmoothingEnabled?n.smoothProperty="mozImageSmoothingEnabled":n.rootContext.oImageSmoothingEnabled?n.smoothProperty="oImageSmoothingEnabled":n.rootContext.msImageSmoothingEnabled&&(n.smoothProperty="msImageSmoothingEnabled")),n.initPlugins(),n.blendModes=(0,s.default)(),n._activeBlendMode=null,n.renderingToScreen=!1,n.resize(n.options.width,n.options.height),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+_typeof2(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(o,i),o.prototype.render=function(e,t,r,n,i){if(this.view){this.renderingToScreen=!t,this.emit("prerender");var o=this.resolution;t?((t=t.baseTexture||t)._canvasRenderTarget||(t._canvasRenderTarget=new c.default(t.width,t.height,t.resolution),t.source=t._canvasRenderTarget.canvas,t.valid=!0),this.context=t._canvasRenderTarget.context,this.resolution=t._canvasRenderTarget.resolution):this.context=this.rootContext;var a=this.context;if(t||(this._lastObjectRendered=e),!i){var s=e.parent,l=this._tempDisplayObjectParent.transform.worldTransform;n?(n.copy(l),this._tempDisplayObjectParent.transform._worldID=-1):l.identity(),e.parent=this._tempDisplayObjectParent,e.updateTransform(),e.parent=s}a.save(),a.setTransform(1,0,0,1,0,0),a.globalAlpha=1,this._activeBlendMode=h.BLEND_MODES.NORMAL,a.globalCompositeOperation=this.blendModes[h.BLEND_MODES.NORMAL],navigator.isCocoonJS&&this.view.screencanvas&&(a.fillStyle="black",a.clear()),(void 0!==r?r:this.clearBeforeRender)&&this.renderingToScreen&&(this.transparent?a.clearRect(0,0,this.width,this.height):(a.fillStyle=this._backgroundColorString,a.fillRect(0,0,this.width,this.height)));var u=this.context;this.context=a,e.renderCanvas(this),this.context=u,a.restore(),this.resolution=o,this.emit("postrender")}},o.prototype.clear=function(e){var t=this.context;e=e||this._backgroundColorString,!this.transparent&&e?(t.fillStyle=e,t.fillRect(0,0,this.width,this.height)):t.clearRect(0,0,this.width,this.height)},o.prototype.setBlendMode=function(e){this._activeBlendMode!==e&&(this._activeBlendMode=e,this.context.globalCompositeOperation=this.blendModes[e])},o.prototype.destroy=function(e){this.destroyPlugins(),i.prototype.destroy.call(this,e),this.context=null,this.refresh=!0,this.maskManager.destroy(),this.maskManager=null,this.smoothProperty=null},o.prototype.resize=function(e,t){i.prototype.resize.call(this,e,t),this.smoothProperty&&(this.rootContext[this.smoothProperty]=l.default.SCALE_MODE===h.SCALE_MODES.LINEAR)},o.prototype.invalidateBlendMode=function(){this._activeBlendMode=this.blendModes.indexOf(this.context.globalCompositeOperation)},o}(n.default);r.default=u,i.pluginTarget.mixin(u)},{"../../const":220,"../../settings":275,"../../utils":299,"../SystemRenderer":250,"./utils/CanvasMaskManager":252,"./utils/CanvasRenderTarget":253,"./utils/mapCanvasBlendModesToPixi":255}],252:[function(e,t,r){r.__esModule=!0;var I=e("../../../const");var n=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.renderer=e}return t.prototype.pushMask=function(e){var t=this.renderer;t.context.save();var r=e.alpha,n=e.transform.worldTransform,i=t.resolution;t.context.setTransform(n.a*i,n.b*i,n.c*i,n.d*i,n.tx*i,n.ty*i),e._texture||(this.renderGraphicsShape(e),t.context.clip()),e.worldAlpha=r},t.prototype.renderGraphicsShape=function(e){var t=this.renderer.context,r=e.graphicsData.length;if(0!==r){t.beginPath();for(var n=0;n<r;n++){var i=e.graphicsData[n],o=i.shape;if(i.type===I.SHAPES.POLY){var a=o.points,s=i.holes,l=void 0,u=void 0;t.moveTo(a[0],a[1]);for(var c=2;c<a.length;c+=2)t.lineTo(a[c],a[c+1]);if(a[0]===a[a.length-2]&&a[1]===a[a.length-1]&&t.closePath(),0<s.length){for(var h=l=0;h<a.length;h+=2)l+=a[h]*a[h+3]-a[h+1]*a[h+2];for(var d=0;d<s.length;d++){a=s[d].points;for(var p=u=0;p<a.length;p+=2)u+=a[p]*a[p+3]-a[p+1]*a[p+2];if(t.moveTo(a[0],a[1]),u*l<0)for(var f=2;f<a.length;f+=2)t.lineTo(a[f],a[f+1]);else for(var m=a.length-2;2<=m;m-=2)t.lineTo(a[m],a[m+1])}}}else if(i.type===I.SHAPES.RECT)t.rect(o.x,o.y,o.width,o.height),t.closePath();else if(i.type===I.SHAPES.CIRC)t.arc(o.x,o.y,o.radius,0,2*Math.PI),t.closePath();else if(i.type===I.SHAPES.ELIP){var v=2*o.width,b=2*o.height,y=o.x-v/2,g=o.y-b/2,w=v/2*.5522848,_=b/2*.5522848,x=y+v,S=g+b,C=y+v/2,k=g+b/2;t.moveTo(y,k),t.bezierCurveTo(y,k-_,C-w,g,C,g),t.bezierCurveTo(C+w,g,x,k-_,x,k),t.bezierCurveTo(x,k+_,C+w,S,C,S),t.bezierCurveTo(C-w,S,y,k+_,y,k),t.closePath()}else if(i.type===I.SHAPES.RREC){var T=o.x,A=o.y,E=o.width,O=o.height,M=o.radius,P=Math.min(E,O)/2|0;M=P<M?P:M,t.moveTo(T,A+M),t.lineTo(T,A+O-M),t.quadraticCurveTo(T,A+O,T+M,A+O),t.lineTo(T+E-M,A+O),t.quadraticCurveTo(T+E,A+O,T+E,A+O-M),t.lineTo(T+E,A+M),t.quadraticCurveTo(T+E,A,T+E-M,A),t.lineTo(T+M,A),t.quadraticCurveTo(T,A,T,A+M),t.closePath()}}}},t.prototype.popMask=function(e){e.context.restore(),e.invalidateBlendMode()},t.prototype.destroy=function(){},t}();r.default=n},{"../../../const":220}],253:[function(e,t,r){r.__esModule=!0;var n,i=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),o=e("../../../settings"),a=(n=o)&&n.__esModule?n:{default:n};var s=function(){function n(e,t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.resolution=r||a.default.RESOLUTION,this.resize(e,t)}return n.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},n.prototype.resize=function(e,t){this.canvas.width=e*this.resolution,this.canvas.height=t*this.resolution},n.prototype.destroy=function(){this.context=null,this.canvas=null},i(n,[{key:"width",get:function(){return this.canvas.width},set:function(e){this.canvas.width=e}},{key:"height",get:function(){return this.canvas.height},set:function(e){this.canvas.height=e}}]),n}();r.default=s},{"../../../settings":275}],254:[function(e,t,r){function a(e){var t=document.createElement("canvas");t.width=6,t.height=1;var r=t.getContext("2d");return r.fillStyle=e,r.fillRect(0,0,6,1),t}r.__esModule=!0,r.default=function(){if("undefined"==typeof document)return!1;var e=a("#ff00ff"),t=a("#ffff00"),r=document.createElement("canvas");r.width=6,r.height=1;var n=r.getContext("2d");n.globalCompositeOperation="multiply",n.drawImage(e,0,0),n.drawImage(t,2,0);var i=n.getImageData(2,0,1,1);if(!i)return!1;var o=i.data;return 255===o[0]&&0===o[1]&&0===o[2]}},{}],255:[function(e,t,r){r.__esModule=!0,r.default=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];(0,a.default)()?(e[i.BLEND_MODES.NORMAL]="source-over",e[i.BLEND_MODES.ADD]="lighter",e[i.BLEND_MODES.MULTIPLY]="multiply",e[i.BLEND_MODES.SCREEN]="screen",e[i.BLEND_MODES.OVERLAY]="overlay",e[i.BLEND_MODES.DARKEN]="darken",e[i.BLEND_MODES.LIGHTEN]="lighten",e[i.BLEND_MODES.COLOR_DODGE]="color-dodge",e[i.BLEND_MODES.COLOR_BURN]="color-burn",e[i.BLEND_MODES.HARD_LIGHT]="hard-light",e[i.BLEND_MODES.SOFT_LIGHT]="soft-light",e[i.BLEND_MODES.DIFFERENCE]="difference",e[i.BLEND_MODES.EXCLUSION]="exclusion",e[i.BLEND_MODES.HUE]="hue",e[i.BLEND_MODES.SATURATION]="saturate",e[i.BLEND_MODES.COLOR]="color",e[i.BLEND_MODES.LUMINOSITY]="luminosity"):(e[i.BLEND_MODES.NORMAL]="source-over",e[i.BLEND_MODES.ADD]="lighter",e[i.BLEND_MODES.MULTIPLY]="source-over",e[i.BLEND_MODES.SCREEN]="source-over",e[i.BLEND_MODES.OVERLAY]="source-over",e[i.BLEND_MODES.DARKEN]="source-over",e[i.BLEND_MODES.LIGHTEN]="source-over",e[i.BLEND_MODES.COLOR_DODGE]="source-over",e[i.BLEND_MODES.COLOR_BURN]="source-over",e[i.BLEND_MODES.HARD_LIGHT]="source-over",e[i.BLEND_MODES.SOFT_LIGHT]="source-over",e[i.BLEND_MODES.DIFFERENCE]="source-over",e[i.BLEND_MODES.EXCLUSION]="source-over",e[i.BLEND_MODES.HUE]="source-over",e[i.BLEND_MODES.SATURATION]="source-over",e[i.BLEND_MODES.COLOR]="source-over",e[i.BLEND_MODES.LUMINOSITY]="source-over");return e[i.BLEND_MODES.NORMAL_NPM]=e[i.BLEND_MODES.NORMAL],e[i.BLEND_MODES.ADD_NPM]=e[i.BLEND_MODES.ADD],e[i.BLEND_MODES.SCREEN_NPM]=e[i.BLEND_MODES.SCREEN],e};var n,i=e("../../../const"),o=e("./canUseNewCanvasBlendModes"),a=(n=o)&&n.__esModule?n:{default:n}},{"../../../const":220,"./canUseNewCanvasBlendModes":254}],256:[function(e,t,r){r.__esModule=!0;var n,i=e("../../const"),o=e("../../settings"),a=(n=o)&&n.__esModule?n:{default:n};var s=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.renderer=e,this.count=0,this.checkCount=0,this.maxIdle=a.default.GC_MAX_IDLE,this.checkCountMax=a.default.GC_MAX_CHECK_COUNT,this.mode=a.default.GC_MODE}return t.prototype.update=function(){this.count++,this.mode!==i.GC_MODES.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run()))},t.prototype.run=function(){for(var e=this.renderer.textureManager,t=e._managedTextures,r=!1,n=0;n<t.length;n++){var i=t[n];!i._glRenderTargets&&this.count-i.touched>this.maxIdle&&(e.destroyTexture(i,!0),r=!(t[n]=null))}if(r){for(var o=0,a=0;a<t.length;a++)null!==t[a]&&(t[o++]=t[a]);t.length=o}},t.prototype.unload=function(e){var t=this.renderer.textureManager;e._texture&&e._texture._glRenderTargets&&t.destroyTexture(e._texture,!0);for(var r=e.children.length-1;0<=r;r--)this.unload(e.children[r])},t}();r.default=s},{"../../const":220,"../../settings":275}],257:[function(e,t,r){r.__esModule=!0;var n,l=e("pixi-gl-core"),u=e("../../const"),i=e("./utils/RenderTarget"),c=(n=i)&&n.__esModule?n:{default:n},s=e("../../utils");var o=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.renderer=e,this.gl=e.gl,this._managedTextures=[]}return t.prototype.bindTexture=function(){},t.prototype.getTexture=function(){},t.prototype.updateTexture=function(e,t){var r=this.gl,n=!!e._glRenderTargets;if(!e.hasLoaded)return null;var i=this.renderer.boundTextures;if(void 0===t)for(var o=t=0;o<i.length;++o)if(i[o]===e){t=o;break}i[t]=e,r.activeTexture(r.TEXTURE0+t);var a=e._glTextures[this.renderer.CONTEXT_UID];if(a)n?e._glRenderTargets[this.renderer.CONTEXT_UID].resize(e.width,e.height):a.upload(e.source);else{if(n){var s=new c.default(this.gl,e.width,e.height,e.scaleMode,e.resolution);s.resize(e.width,e.height),a=(e._glRenderTargets[this.renderer.CONTEXT_UID]=s).texture,this.renderer._activeRenderTarget.root||this.renderer._activeRenderTarget.frameBuffer.bind()}else(a=new l.GLTexture(this.gl,null,null,null,null)).bind(t),a.premultiplyAlpha=!0,a.upload(e.source);e._glTextures[this.renderer.CONTEXT_UID]=a,e.on("update",this.updateTexture,this),e.on("dispose",this.destroyTexture,this),this._managedTextures.push(e),e.isPowerOfTwo?(e.mipmap&&a.enableMipmap(),e.wrapMode===u.WRAP_MODES.CLAMP?a.enableWrapClamp():e.wrapMode===u.WRAP_MODES.REPEAT?a.enableWrapRepeat():a.enableWrapMirrorRepeat()):a.enableWrapClamp(),e.scaleMode===u.SCALE_MODES.NEAREST?a.enableNearestScaling():a.enableLinearScaling()}return a},t.prototype.destroyTexture=function(e,t){if((e=e.baseTexture||e).hasLoaded){var r=this.renderer,n=r.CONTEXT_UID,i=e._glTextures,o=e._glRenderTargets;if(i[n]&&(r.unbindTexture(e),i[n].destroy(),e.off("update",this.updateTexture,this),e.off("dispose",this.destroyTexture,this),delete i[n],!t)){var a=this._managedTextures.indexOf(e);-1!==a&&(0,s.removeItems)(this._managedTextures,a,1)}o&&o[n]&&(r._activeRenderTarget===o[n]&&r.bindRenderTarget(r.rootRenderTarget),o[n].destroy(),delete o[n])}},t.prototype.removeAll=function(){for(var e=0;e<this._managedTextures.length;++e){var t=this._managedTextures[e];t._glTextures[this.renderer.CONTEXT_UID]&&delete t._glTextures[this.renderer.CONTEXT_UID]}},t.prototype.destroy=function(){for(var e=0;e<this._managedTextures.length;++e){var t=this._managedTextures[e];this.destroyTexture(t,!0),t.off("update",this.updateTexture,this),t.off("dispose",this.destroyTexture,this)}this._managedTextures=null},t}();r.default=o},{"../../const":220,"../../utils":299,"./utils/RenderTarget":270,"pixi-gl-core":203}],258:[function(e,t,r){r.__esModule=!0;var n=o(e("../SystemRenderer")),a=o(e("./managers/MaskManager")),s=o(e("./managers/StencilManager")),l=o(e("./managers/FilterManager")),u=o(e("./utils/RenderTarget")),c=o(e("./utils/ObjectRenderer")),h=o(e("./TextureManager")),d=o(e("../../textures/BaseTexture")),p=o(e("./TextureGarbageCollector")),f=o(e("./WebGLState")),m=o(e("./utils/mapWebGLDrawModesToPixi")),v=o(e("./utils/validateContext")),i=e("../../utils"),b=o(e("pixi-gl-core")),y=e("../../const");function o(e){return e&&e.__esModule?e:{default:e}}var g=0,w=function(i){function o(e,t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==_typeof2(t)&&"function"!=typeof t?e:t}(this,i.call(this,"WebGL",e,t,r));return n.legacy=n.options.legacy,n.legacy&&(b.default.VertexArrayObject.FORCE_NATIVE=!0),n.type=y.RENDERER_TYPE.WEBGL,n.handleContextLost=n.handleContextLost.bind(n),n.handleContextRestored=n.handleContextRestored.bind(n),n.view.addEventListener("webglcontextlost",n.handleContextLost,!1),n.view.addEventListener("webglcontextrestored",n.handleContextRestored,!1),n._contextOptions={alpha:n.transparent,antialias:n.options.antialias,premultipliedAlpha:n.transparent&&"notMultiplied"!==n.transparent,stencil:!0,preserveDrawingBuffer:n.options.preserveDrawingBuffer,powerPreference:n.options.powerPreference},n._backgroundColorRgba[3]=n.transparent?0:1,n.maskManager=new a.default(n),n.stencilManager=new s.default(n),n.emptyRenderer=new c.default(n),n.currentRenderer=n.emptyRenderer,n.textureManager=null,n.filterManager=null,n.initPlugins(),n.options.context&&(0,v.default)(n.options.context),n.gl=n.options.context||b.default.createContext(n.view,n._contextOptions),n.CONTEXT_UID=g++,n.state=new f.default(n.gl),n.renderingToScreen=!0,n.boundTextures=null,n._activeShader=null,n._activeVao=null,n._activeRenderTarget=null,n._initContext(),n.drawModes=(0,m.default)(n.gl),n._nextTextureLocation=0,n.setBlendMode(0),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+_typeof2(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(o,i),o.prototype._initContext=function(){var e=this.gl;e.isContextLost()&&e.getExtension("WEBGL_lose_context")&&e.getExtension("WEBGL_lose_context").restoreContext();var t=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS);this._activeShader=null,this._activeVao=null,this.boundTextures=new Array(t),this.emptyTextures=new Array(t),this.textureManager=new h.default(this),this.filterManager=new l.default(this),this.textureGC=new p.default(this),this.state.resetToDefault(),this.rootRenderTarget=new u.default(e,this.width,this.height,null,this.resolution,!0),this.rootRenderTarget.clearColor=this._backgroundColorRgba,this.bindRenderTarget(this.rootRenderTarget);var r=new b.default.GLTexture.fromData(e,null,1,1),n={_glTextures:{}};n._glTextures[this.CONTEXT_UID]={};for(var i=0;i<t;i++){var o=new d.default;o._glTextures[this.CONTEXT_UID]=r,this.boundTextures[i]=n,this.emptyTextures[i]=o,this.bindTexture(null,i)}this.emit("context",e),this.resize(this.screen.width,this.screen.height)},o.prototype.render=function(e,t,r,n,i){if(this.renderingToScreen=!t,this.emit("prerender"),this.gl&&!this.gl.isContextLost()){if(this._nextTextureLocation=0,t||(this._lastObjectRendered=e),!i){var o=e.parent;e.parent=this._tempDisplayObjectParent,e.updateTransform(),e.parent=o}this.bindRenderTexture(t,n),this.currentRenderer.start(),(void 0!==r?r:this.clearBeforeRender)&&this._activeRenderTarget.clear(),e.renderWebGL(this),this.currentRenderer.flush(),this.textureGC.update(),this.emit("postrender")}},o.prototype.setObjectRenderer=function(e){this.currentRenderer!==e&&(this.currentRenderer.stop(),this.currentRenderer=e,this.currentRenderer.start())},o.prototype.flush=function(){this.setObjectRenderer(this.emptyRenderer)},o.prototype.resize=function(e,t){n.default.prototype.resize.call(this,e,t),this.rootRenderTarget.resize(e,t),this._activeRenderTarget===this.rootRenderTarget&&(this.rootRenderTarget.activate(),this._activeShader&&(this._activeShader.uniforms.projectionMatrix=this.rootRenderTarget.projectionMatrix.toArray(!0)))},o.prototype.setBlendMode=function(e){this.state.setBlendMode(e)},o.prototype.clear=function(e){this._activeRenderTarget.clear(e)},o.prototype.setTransform=function(e){this._activeRenderTarget.transform=e},o.prototype.clearRenderTexture=function(e,t){var r=e.baseTexture._glRenderTargets[this.CONTEXT_UID];return r&&r.clear(t),this},o.prototype.bindRenderTexture=function(e,t){var r=void 0;if(e){var n=e.baseTexture;n._glRenderTargets[this.CONTEXT_UID]||this.textureManager.updateTexture(n,0),this.unbindTexture(n),(r=n._glRenderTargets[this.CONTEXT_UID]).setFrame(e.frame)}else r=this.rootRenderTarget;return r.transform=t,this.bindRenderTarget(r),this},o.prototype.bindRenderTarget=function(e){return e!==this._activeRenderTarget&&((this._activeRenderTarget=e).activate(),this._activeShader&&(this._activeShader.uniforms.projectionMatrix=e.projectionMatrix.toArray(!0)),this.stencilManager.setMaskStack(e.stencilMaskStack)),this},o.prototype.bindShader=function(e,t){return this._activeShader!==e&&((this._activeShader=e).bind(),!1!==t&&(e.uniforms.projectionMatrix=this._activeRenderTarget.projectionMatrix.toArray(!0))),this},o.prototype.bindTexture=function(e,t,r){if((e=(e=e||this.emptyTextures[t]).baseTexture||e).touched=this.textureGC.count,r)t=t||0;else{for(var n=0;n<this.boundTextures.length;n++)if(this.boundTextures[n]===e)return n;void 0===t&&(this._nextTextureLocation++,this._nextTextureLocation%=this.boundTextures.length,t=this.boundTextures.length-this._nextTextureLocation-1)}var i=this.gl,o=e._glTextures[this.CONTEXT_UID];return o?(this.boundTextures[t]=e,i.activeTexture(i.TEXTURE0+t),i.bindTexture(i.TEXTURE_2D,o.texture)):this.textureManager.updateTexture(e,t),t},o.prototype.unbindTexture=function(e){var t=this.gl;e=e.baseTexture||e;for(var r=0;r<this.boundTextures.length;r++)this.boundTextures[r]===e&&(this.boundTextures[r]=this.emptyTextures[r],t.activeTexture(t.TEXTURE0+r),t.bindTexture(t.TEXTURE_2D,this.emptyTextures[r]._glTextures[this.CONTEXT_UID].texture));return this},o.prototype.createVao=function(){return new b.default.VertexArrayObject(this.gl,this.state.attribState)},o.prototype.bindVao=function(e){return this._activeVao===e||(e?e.bind():this._activeVao&&this._activeVao.unbind(),this._activeVao=e),this},o.prototype.reset=function(){this.setObjectRenderer(this.emptyRenderer),this.bindVao(null),this._activeShader=null,this._activeRenderTarget=this.rootRenderTarget;for(var e=0;e<this.boundTextures.length;e++)this.boundTextures[e]=this.emptyTextures[e];return this.rootRenderTarget.activate(),this.state.resetToDefault(),this},o.prototype.handleContextLost=function(e){e.preventDefault()},o.prototype.handleContextRestored=function(){this.textureManager.removeAll(),this.filterManager.destroy(!0),this._initContext()},o.prototype.destroy=function(e){this.destroyPlugins(),this.view.removeEventListener("webglcontextlost",this.handleContextLost),this.view.removeEventListener("webglcontextrestored",this.handleContextRestored),this.textureManager.destroy(),i.prototype.destroy.call(this,e),this.uid=0,this.maskManager.destroy(),this.stencilManager.destroy(),this.filterManager.destroy(),this.maskManager=null,this.filterManager=null,this.textureManager=null,this.currentRenderer=null,this.handleContextLost=null,this.handleContextRestored=null,this._contextOptions=null,this.gl.useProgram(null),this.gl.getExtension("WEBGL_lose_context")&&this.gl.getExtension("WEBGL_lose_context").loseContext(),this.gl=null},o}(n.default);r.default=w,i.pluginTarget.mixin(w)},{"../../const":220,"../../textures/BaseTexture":286,"../../utils":299,"../SystemRenderer":250,"./TextureGarbageCollector":256,"./TextureManager":257,"./WebGLState":259,"./managers/FilterManager":264,"./managers/MaskManager":265,"./managers/StencilManager":266,"./utils/ObjectRenderer":268,"./utils/RenderTarget":270,"./utils/mapWebGLDrawModesToPixi":273,"./utils/validateContext":274,"pixi-gl-core":203}],259:[function(e,t,r){r.__esModule=!0;var n,i=e("./utils/mapWebGLBlendModesToPixi"),o=(n=i)&&n.__esModule?n:{default:n};var a=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.activeState=new Uint8Array(16),this.defaultState=new Uint8Array(16),this.defaultState[0]=1,this.stackIndex=0,this.stack=[],this.gl=e,this.maxAttribs=e.getParameter(e.MAX_VERTEX_ATTRIBS),this.attribState={tempAttribState:new Array(this.maxAttribs),attribState:new Array(this.maxAttribs)},this.blendModes=(0,o.default)(e),this.nativeVaoExtension=e.getExtension("OES_vertex_array_object")||e.getExtension("MOZ_OES_vertex_array_object")||e.getExtension("WEBKIT_OES_vertex_array_object")}return t.prototype.push=function(){var e=this.stack[this.stackIndex];e||(e=this.stack[this.stackIndex]=new Uint8Array(16)),++this.stackIndex;for(var t=0;t<this.activeState.length;t++)e[t]=this.activeState[t]},t.prototype.pop=function(){var e=this.stack[--this.stackIndex];this.setState(e)},t.prototype.setState=function(e){this.setBlend(e[0]),this.setDepthTest(e[1]),this.setFrontFace(e[2]),this.setCullFace(e[3]),this.setBlendMode(e[4])},t.prototype.setBlend=function(e){e=e?1:0,this.activeState[0]!==e&&(this.activeState[0]=e,this.gl[e?"enable":"disable"](this.gl.BLEND))},t.prototype.setBlendMode=function(e){if(e!==this.activeState[4]){this.activeState[4]=e;var t=this.blendModes[e];2===t.length?this.gl.blendFunc(t[0],t[1]):this.gl.blendFuncSeparate(t[0],t[1],t[2],t[3])}},t.prototype.setDepthTest=function(e){e=e?1:0,this.activeState[1]!==e&&(this.activeState[1]=e,this.gl[e?"enable":"disable"](this.gl.DEPTH_TEST))},t.prototype.setCullFace=function(e){e=e?1:0,this.activeState[3]!==e&&(this.activeState[3]=e,this.gl[e?"enable":"disable"](this.gl.CULL_FACE))},t.prototype.setFrontFace=function(e){e=e?1:0,this.activeState[2]!==e&&(this.activeState[2]=e,this.gl.frontFace(this.gl[e?"CW":"CCW"]))},t.prototype.resetAttributes=function(){for(var e=0;e<this.attribState.tempAttribState.length;e++)this.attribState.tempAttribState[e]=0;for(var t=0;t<this.attribState.attribState.length;t++)this.attribState.attribState[t]=0;for(var r=1;r<this.maxAttribs;r++)this.gl.disableVertexAttribArray(r)},t.prototype.resetToDefault=function(){this.nativeVaoExtension&&this.nativeVaoExtension.bindVertexArrayOES(null),this.resetAttributes();for(var e=0;e<this.activeState.length;++e)this.activeState[e]=32;this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.setState(this.defaultState)},t}();r.default=a},{"./utils/mapWebGLBlendModesToPixi":272}],260:[function(e,t,r){r.__esModule=!0;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),o=i(e("./extractUniformsFromSrc")),a=e("../../../utils"),s=e("../../../const"),l=i(e("../../../settings"));function i(e){return e&&e.__esModule?e:{default:e}}var u={},c=function(){function i(e,t,r){for(var n in function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),this.vertexSrc=e||i.defaultVertexSrc,this.fragmentSrc=t||i.defaultFragmentSrc,this._blendMode=s.BLEND_MODES.NORMAL,this.uniformData=r||(0,o.default)(this.vertexSrc,this.fragmentSrc,"projectionMatrix|uSampler"),this.uniforms={},this.uniformData)this.uniforms[n]=this.uniformData[n].value,this.uniformData[n].type&&(this.uniformData[n].type=this.uniformData[n].type.toLowerCase());this.glShaders={},u[this.vertexSrc+this.fragmentSrc]||(u[this.vertexSrc+this.fragmentSrc]=(0,a.uid)()),this.glShaderKey=u[this.vertexSrc+this.fragmentSrc],this.padding=4,this.resolution=l.default.FILTER_RESOLUTION,this.enabled=!0,this.autoFit=!0}return i.prototype.apply=function(e,t,r,n,i){e.applyFilter(this,t,r,n)},n(i,[{key:"blendMode",get:function(){return this._blendMode},set:function(e){this._blendMode=e}}],[{key:"defaultVertexSrc",get:function(){return["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","uniform mat3 projectionMatrix;","uniform mat3 filterMatrix;","varying vec2 vTextureCoord;","varying vec2 vFilterCoord;","void main(void){","   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vFilterCoord = ( filterMatrix * vec3( aTextureCoord, 1.0)  ).xy;","   vTextureCoord = aTextureCoord ;","}"].join("\n")}},{key:"defaultFragmentSrc",get:function(){return["varying vec2 vTextureCoord;","varying vec2 vFilterCoord;","uniform sampler2D uSampler;","uniform sampler2D filterSampler;","void main(void){","   vec4 masky = texture2D(filterSampler, vFilterCoord);","   vec4 sample = texture2D(uSampler, vTextureCoord);","   vec4 color;","   if(mod(vFilterCoord.x, 1.0) > 0.5)","   {","     color = vec4(1.0, 0.0, 0.0, 1.0);","   }","   else","   {","     color = vec4(0.0, 1.0, 0.0, 1.0);","   }","   gl_FragColor = mix(sample, masky, 0.5);","   gl_FragColor *= sample.a;","}"].join("\n")}}]),i}();r.default=c},{"../../../const":220,"../../../settings":275,"../../../utils":299,"./extractUniformsFromSrc":261}],261:[function(e,t,r){r.__esModule=!0,r.default=function(e,t,r){var n=o(e),i=o(t);return Object.assign(n,i)};var n,i=e("pixi-gl-core");var h=((n=i)&&n.__esModule?n:{default:n}).default.shader.defaultValue;function o(e){for(var t=new RegExp("^(projectionMatrix|uSampler|filterArea|filterClamp)$"),r={},n=void 0,i=e.replace(/\s+/g," ").split(/\s*;\s*/),o=0;o<i.length;o++){var a=i[o].trim();if(-1<a.indexOf("uniform")){var s=a.split(" "),l=s[1],u=s[2],c=1;-1<u.indexOf("[")&&(u=(n=u.split(/\[|]/))[0],c*=Number(n[1])),u.match(t)||(r[u]={value:h(l,c),name:u,type:l})}}return r}},{"pixi-gl-core":203}],262:[function(e,t,r){r.__esModule=!0,r.calculateScreenSpaceMatrix=function(e,t,r){var n=e.identity();return n.translate(t.x/r.width,t.y/r.height),n.scale(r.width,r.height),n},r.calculateNormalizedScreenSpaceMatrix=function(e,t,r){var n=e.identity();n.translate(t.x/r.width,t.y/r.height);var i=r.width/t.width,o=r.height/t.height;return n.scale(i,o),n},r.calculateSpriteMatrix=function(e,t,r,n){var i=n._texture.orig,o=e.set(r.width,0,0,r.height,t.x,t.y),a=n.worldTransform.copy(s.Matrix.TEMP_MATRIX);return a.invert(),o.prepend(a),o.scale(1/i.width,1/i.height),o.translate(n.anchor.x,n.anchor.y),o};var s=e("../../../math")},{"../../../math":244}],263:[function(e,t,r){r.__esModule=!0;var n=i(e("../Filter")),o=e("../../../../math"),a=(e("path"),i(e("../../../../textures/TextureMatrix")));function i(e){return e&&e.__esModule?e:{default:e}}var s=function(n){function i(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);var t=new o.Matrix,r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==_typeof2(t)&&"function"!=typeof t?e:t}(this,n.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n}\n","varying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform sampler2D mask;\nuniform float alpha;\nuniform vec4 maskClamp;\n\nvoid main(void)\n{\n    float clip = step(3.5,\n        step(maskClamp.x, vMaskCoord.x) +\n        step(maskClamp.y, vMaskCoord.y) +\n        step(vMaskCoord.x, maskClamp.z) +\n        step(vMaskCoord.y, maskClamp.w));\n\n    vec4 original = texture2D(uSampler, vTextureCoord);\n    vec4 masky = texture2D(mask, vMaskCoord);\n\n    original *= (masky.r * masky.a * alpha * clip);\n\n    gl_FragColor = original;\n}\n"));return e.renderable=!1,r.maskSprite=e,r.maskMatrix=t,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+_typeof2(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(i,n),i.prototype.apply=function(e,t,r){var n=this.maskSprite,i=this.maskSprite.texture;i.valid&&(i.transform||(i.transform=new a.default(i,0)),i.transform.update(),this.uniforms.mask=i,this.uniforms.otherMatrix=e.calculateSpriteMatrix(this.maskMatrix,n).prepend(i.transform.mapCoord),this.uniforms.alpha=n.worldAlpha,this.uniforms.maskClamp=i.transform.uClampFrame,e.applyFilter(this,t,r))},i}(n.default);r.default=s},{"../../../../math":244,"../../../../textures/TextureMatrix":290,"../Filter":260,path:195}],264:[function(e,t,r){r.__esModule=!0;var n=c(e("./WebGLManager")),s=c(e("../utils/RenderTarget")),i=c(e("../utils/Quad")),o=e("../../../math"),l=c(e("../../../Shader")),a=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}}(e("../filters/filterTransforms")),u=c(e("bit-twiddle"));function c(e){return e&&e.__esModule?e:{default:e}}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var f=function(){function e(){h(this,e),this.renderTarget=null,this.target=null,this.resolution=1,this.sourceFrame=new o.Rectangle,this.destinationFrame=new o.Rectangle,this.filters=[]}return e.prototype.clear=function(){this.filters=null,this.target=null,this.renderTarget=null},e}(),d="screen",p=function(r){function n(e){h(this,n);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==_typeof2(t)&&"function"!=typeof t?e:t}(this,r.call(this,e));return t.gl=t.renderer.gl,t.quad=new i.default(t.gl,e.state.attribState),t.shaderCache={},t.pool={},t.filterData=null,t.managedFilters=[],t.renderer.on("prerender",t.onPrerender,t),t._screenWidth=e.view.width,t._screenHeight=e.view.height,t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+_typeof2(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,r),n.prototype.pushFilter=function(e,t){var r=this.renderer,n=this.filterData;if(!n){n=this.renderer._activeRenderTarget.filterStack;var i=new f;i.sourceFrame=i.destinationFrame=this.renderer._activeRenderTarget.size,i.renderTarget=r._activeRenderTarget,this.renderer._activeRenderTarget.filterData=n={index:0,stack:[i]},this.filterData=n}var o=n.stack[++n.index],a=n.stack[0].destinationFrame;o||(o=n.stack[n.index]=new f);var s=e.filterArea&&0===e.filterArea.x&&0===e.filterArea.y&&e.filterArea.width===r.screen.width&&e.filterArea.height===r.screen.height,l=t[0].resolution,u=0|t[0].padding,c=s?r.screen:e.filterArea||e.getBounds(!0),h=o.sourceFrame,d=o.destinationFrame;h.x=(c.x*l|0)/l,h.y=(c.y*l|0)/l,h.width=(c.width*l|0)/l,h.height=(c.height*l|0)/l,s||(n.stack[0].renderTarget.transform||t[0].autoFit&&h.fit(a),h.pad(u)),d.width=h.width,d.height=h.height;var p=this.getPotRenderTarget(r.gl,h.width,h.height,l);o.target=e,o.filters=t,o.resolution=l,(o.renderTarget=p).setFrame(d,h),r.bindRenderTarget(p),p.clear()},n.prototype.popFilter=function(){var e=this.filterData,t=e.stack[e.index-1],r=e.stack[e.index];this.quad.map(r.renderTarget.size,r.sourceFrame).upload();var n=r.filters;if(1===n.length)n[0].apply(this,r.renderTarget,t.renderTarget,!1,r),this.freePotRenderTarget(r.renderTarget);else{var i=r.renderTarget,o=this.getPotRenderTarget(this.renderer.gl,r.sourceFrame.width,r.sourceFrame.height,r.resolution);o.setFrame(r.destinationFrame,r.sourceFrame),o.clear();var a=0;for(a=0;a<n.length-1;++a){n[a].apply(this,i,o,!0,r);var s=i;i=o,o=s}n[a].apply(this,i,t.renderTarget,!1,r),this.freePotRenderTarget(i),this.freePotRenderTarget(o)}r.clear(),e.index--,0===e.index&&(this.filterData=null)},n.prototype.applyFilter=function(e,t,r,n){var i=this.renderer,o=i.gl,a=e.glShaders[i.CONTEXT_UID];a||(e.glShaderKey?(a=this.shaderCache[e.glShaderKey])||(a=new l.default(this.gl,e.vertexSrc,e.fragmentSrc),e.glShaders[i.CONTEXT_UID]=this.shaderCache[e.glShaderKey]=a,this.managedFilters.push(e)):(a=e.glShaders[i.CONTEXT_UID]=new l.default(this.gl,e.vertexSrc,e.fragmentSrc),this.managedFilters.push(e)),i.bindVao(null),this.quad.initVao(a)),i.bindVao(this.quad.vao),i.bindRenderTarget(r),n&&(o.disable(o.SCISSOR_TEST),i.clear(),o.enable(o.SCISSOR_TEST)),r===i.maskManager.scissorRenderTarget&&i.maskManager.pushScissorMask(null,i.maskManager.scissorData),i.bindShader(a);var s=this.renderer.emptyTextures[0];this.renderer.boundTextures[0]=s,this.syncUniforms(a,e),i.state.setBlendMode(e.blendMode),o.activeTexture(o.TEXTURE0),o.bindTexture(o.TEXTURE_2D,t.texture.texture),this.quad.vao.draw(this.renderer.gl.TRIANGLES,6,0),o.bindTexture(o.TEXTURE_2D,s._glTextures[this.renderer.CONTEXT_UID].texture)},n.prototype.syncUniforms=function(e,t){var r=t.uniformData,n=t.uniforms,i=1,o=void 0;if(e.uniforms.filterArea){o=this.filterData.stack[this.filterData.index];var a=e.uniforms.filterArea;a[0]=o.renderTarget.size.width,a[1]=o.renderTarget.size.height,a[2]=o.sourceFrame.x,a[3]=o.sourceFrame.y,e.uniforms.filterArea=a}if(e.uniforms.filterClamp){o=o||this.filterData.stack[this.filterData.index];var s=e.uniforms.filterClamp;s[0]=0,s[1]=0,s[2]=(o.sourceFrame.width-1)/o.renderTarget.size.width,s[3]=(o.sourceFrame.height-1)/o.renderTarget.size.height,e.uniforms.filterClamp=s}for(var l in r)if(e.uniforms.data[l]){var u=r[l].type;if("sampler2d"===u&&0!==n[l]){if(n[l].baseTexture)e.uniforms[l]=this.renderer.bindTexture(n[l].baseTexture,i);else{e.uniforms[l]=i;var c=this.renderer.gl;this.renderer.boundTextures[i]=this.renderer.emptyTextures[i],c.activeTexture(c.TEXTURE0+i),n[l].texture.bind()}i++}else if("mat3"===u)void 0!==n[l].a?e.uniforms[l]=n[l].toArray(!0):e.uniforms[l]=n[l];else if("vec2"===u)if(void 0!==n[l].x){var h=e.uniforms[l]||new Float32Array(2);h[0]=n[l].x,h[1]=n[l].y,e.uniforms[l]=h}else e.uniforms[l]=n[l];else"float"===u?e.uniforms.data[l].value!==r[l]&&(e.uniforms[l]=n[l]):e.uniforms[l]=n[l]}},n.prototype.getRenderTarget=function(e,t){var r=this.filterData.stack[this.filterData.index],n=this.getPotRenderTarget(this.renderer.gl,r.sourceFrame.width,r.sourceFrame.height,t||r.resolution);return n.setFrame(r.destinationFrame,r.sourceFrame),n},n.prototype.returnRenderTarget=function(e){this.freePotRenderTarget(e)},n.prototype.calculateScreenSpaceMatrix=function(e){var t=this.filterData.stack[this.filterData.index];return a.calculateScreenSpaceMatrix(e,t.sourceFrame,t.renderTarget.size)},n.prototype.calculateNormalizedScreenSpaceMatrix=function(e){var t=this.filterData.stack[this.filterData.index];return a.calculateNormalizedScreenSpaceMatrix(e,t.sourceFrame,t.renderTarget.size,t.destinationFrame)},n.prototype.calculateSpriteMatrix=function(e,t){var r=this.filterData.stack[this.filterData.index];return a.calculateSpriteMatrix(e,r.sourceFrame,r.renderTarget.size,t)},n.prototype.destroy=function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0],t=this.renderer,r=this.managedFilters;t.off("prerender",this.onPrerender,this);for(var n=0;n<r.length;n++)e||r[n].glShaders[t.CONTEXT_UID].destroy(),delete r[n].glShaders[t.CONTEXT_UID];this.shaderCache={},e?this.pool={}:this.emptyPool()},n.prototype.getPotRenderTarget=function(e,t,r,n){var i=d;r*=n,(t*=n)===this._screenWidth&&r===this._screenHeight||(i=(65535&(t=u.default.nextPow2(t)))<<16|65535&(r=u.default.nextPow2(r))),this.pool[i]||(this.pool[i]=[]);var o=this.pool[i].pop();if(!o){var a=this.renderer.boundTextures[0];e.activeTexture(e.TEXTURE0),o=new s.default(e,t,r,null,1),e.bindTexture(e.TEXTURE_2D,a._glTextures[this.renderer.CONTEXT_UID].texture)}return o.resolution=n,o.defaultFrame.width=o.size.width=t/n,o.defaultFrame.height=o.size.height=r/n,o.filterPoolKey=i,o},n.prototype.emptyPool=function(){for(var e in this.pool){var t=this.pool[e];if(t)for(var r=0;r<t.length;r++)t[r].destroy(!0)}this.pool={}},n.prototype.freePotRenderTarget=function(e){this.pool[e.filterPoolKey].push(e)},n.prototype.onPrerender=function(){if(this._screenWidth!==this.renderer.view.width||this._screenHeight!==this.renderer.view.height){this._screenWidth=this.renderer.view.width,this._screenHeight=this.renderer.view.height;var e=this.pool[d];if(e)for(var t=0;t<e.length;t++)e[t].destroy(!0);this.pool[d]=[]}},n}(n.default);r.default=p},{"../../../Shader":218,"../../../math":244,"../filters/filterTransforms":262,"../utils/Quad":269,"../utils/RenderTarget":270,"./WebGLManager":267,"bit-twiddle":176}],265:[function(e,t,r){r.__esModule=!0;var n=o(e("./WebGLManager")),i=o(e("../filters/spriteMask/SpriteMaskFilter"));function o(e){return e&&e.__esModule?e:{default:e}}var a=function(r){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==_typeof2(t)&&"function"!=typeof t?e:t}(this,r.call(this,e));return t.scissor=!1,t.scissorData=null,t.scissorRenderTarget=null,t.enableScissor=!0,t.alphaMaskPool=[],t.alphaMaskIndex=0,t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+_typeof2(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,r),n.prototype.pushMask=function(e,t){if(t.texture)this.pushSpriteMask(e,t);else if(this.enableScissor&&!this.scissor&&this.renderer._activeRenderTarget.root&&!this.renderer.stencilManager.stencilMaskStack.length&&t.isFastRect()){var r=t.worldTransform,n=Math.atan2(r.b,r.a);(n=Math.round(n*(180/Math.PI)))%90?this.pushStencilMask(t):this.pushScissorMask(e,t)}else this.pushStencilMask(t)},n.prototype.popMask=function(e,t){t.texture?this.popSpriteMask(e,t):this.enableScissor&&!this.renderer.stencilManager.stencilMaskStack.length?this.popScissorMask(e,t):this.popStencilMask(e,t)},n.prototype.pushSpriteMask=function(e,t){var r=this.alphaMaskPool[this.alphaMaskIndex];r||(r=this.alphaMaskPool[this.alphaMaskIndex]=[new i.default(t)]),r[0].resolution=this.renderer.resolution,r[0].maskSprite=t,e.filterArea=t.getBounds(!0),this.renderer.filterManager.pushFilter(e,r),this.alphaMaskIndex++},n.prototype.popSpriteMask=function(){this.renderer.filterManager.popFilter(),this.alphaMaskIndex--},n.prototype.pushStencilMask=function(e){this.renderer.currentRenderer.stop(),this.renderer.stencilManager.pushStencil(e)},n.prototype.popStencilMask=function(){this.renderer.currentRenderer.stop(),this.renderer.stencilManager.popStencil()},n.prototype.pushScissorMask=function(e,t){t.renderable=!0;var r=this.renderer._activeRenderTarget,n=t.getBounds();n.fit(r.size),t.renderable=!1,this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST);var i=this.renderer.resolution;this.renderer.gl.scissor(n.x*i,(r.root?r.size.height-n.y-n.height:n.y)*i,n.width*i,n.height*i),this.scissorRenderTarget=r,this.scissorData=t,this.scissor=!0},n.prototype.popScissorMask=function(){this.scissorRenderTarget=null,this.scissorData=null,this.scissor=!1;var e=this.renderer.gl;e.disable(e.SCISSOR_TEST)},n}(n.default);r.default=a},{"../filters/spriteMask/SpriteMaskFilter":263,"./WebGLManager":267}],266:[function(e,t,r){r.__esModule=!0;var n,i=e("./WebGLManager"),o=(n=i)&&n.__esModule?n:{default:n};var a=function(r){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==_typeof2(t)&&"function"!=typeof t?e:t}(this,r.call(this,e));return t.stencilMaskStack=null,t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+_typeof2(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,r),n.prototype.setMaskStack=function(e){this.stencilMaskStack=e;var t=this.renderer.gl;0===e.length?t.disable(t.STENCIL_TEST):t.enable(t.STENCIL_TEST)},n.prototype.pushStencil=function(e){this.renderer.setObjectRenderer(this.renderer.plugins.graphics),this.renderer._activeRenderTarget.attachStencilBuffer();var t=this.renderer.gl,r=this.stencilMaskStack.length;0===r&&t.enable(t.STENCIL_TEST),this.stencilMaskStack.push(e),t.colorMask(!1,!1,!1,!1),t.stencilFunc(t.EQUAL,r,this._getBitwiseMask()),t.stencilOp(t.KEEP,t.KEEP,t.INCR),this.renderer.plugins.graphics.render(e),this._useCurrent()},n.prototype.popStencil=function(){this.renderer.setObjectRenderer(this.renderer.plugins.graphics);var e=this.renderer.gl,t=this.stencilMaskStack.pop();0===this.stencilMaskStack.length?(e.disable(e.STENCIL_TEST),e.clear(e.STENCIL_BUFFER_BIT),e.clearStencil(0)):(e.colorMask(!1,!1,!1,!1),e.stencilOp(e.KEEP,e.KEEP,e.DECR),this.renderer.plugins.graphics.render(t),this._useCurrent())},n.prototype._useCurrent=function(){var e=this.renderer.gl;e.colorMask(!0,!0,!0,!0),e.stencilFunc(e.EQUAL,this.stencilMaskStack.length,this._getBitwiseMask()),e.stencilOp(e.KEEP,e.KEEP,e.KEEP)},n.prototype._getBitwiseMask=function(){return(1<<this.stencilMaskStack.length)-1},n.prototype.destroy=function(){o.default.prototype.destroy.call(this),this.stencilMaskStack.stencilStack=null},n}(o.default);r.default=a},{"./WebGLManager":267}],267:[function(e,t,r){r.__esModule=!0;var n=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.renderer=e,this.renderer.on("context",this.onContextChange,this)}return t.prototype.onContextChange=function(){},t.prototype.destroy=function(){this.renderer.off("context",this.onContextChange,this),this.renderer=null},t}();r.default=n},{}],268:[function(e,t,r){r.__esModule=!0;var n,i=e("../managers/WebGLManager");var o=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==_typeof2(t)&&"function"!=typeof t?e:t}(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+_typeof2(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.start=function(){},t.prototype.stop=function(){this.flush()},t.prototype.flush=function(){},t.prototype.render=function(e){},t}(((n=i)&&n.__esModule?n:{default:n}).default);r.default=o},{"../managers/WebGLManager":267}],269:[function(e,t,r){r.__esModule=!0;var i=n(e("pixi-gl-core")),o=n(e("../../../utils/createIndicesForQuads"));function n(e){return e&&e.__esModule?e:{default:e}}var a=function(){function n(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),this.gl=e,this.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),this.uvs=new Float32Array([0,0,1,0,1,1,0,1]),this.interleaved=new Float32Array(16);for(var r=0;r<4;r++)this.interleaved[4*r]=this.vertices[2*r],this.interleaved[4*r+1]=this.vertices[2*r+1],this.interleaved[4*r+2]=this.uvs[2*r],this.interleaved[4*r+3]=this.uvs[2*r+1];this.indices=(0,o.default)(1),this.vertexBuffer=i.default.GLBuffer.createVertexBuffer(e,this.interleaved,e.STATIC_DRAW),this.indexBuffer=i.default.GLBuffer.createIndexBuffer(e,this.indices,e.STATIC_DRAW),this.vao=new i.default.VertexArrayObject(e,t)}return n.prototype.initVao=function(e){this.vao.clear().addIndex(this.indexBuffer).addAttribute(this.vertexBuffer,e.attributes.aVertexPosition,this.gl.FLOAT,!1,16,0).addAttribute(this.vertexBuffer,e.attributes.aTextureCoord,this.gl.FLOAT,!1,16,8)},n.prototype.map=function(e,t){var r=0,n=0;return this.uvs[0]=r,this.uvs[1]=n,this.uvs[2]=r+t.width/e.width,this.uvs[3]=n,this.uvs[4]=r+t.width/e.width,this.uvs[5]=n+t.height/e.height,this.uvs[6]=r,this.uvs[7]=n+t.height/e.height,r=t.x,n=t.y,this.vertices[0]=r,this.vertices[1]=n,this.vertices[2]=r+t.width,this.vertices[3]=n,this.vertices[4]=r+t.width,this.vertices[5]=n+t.height,this.vertices[6]=r,this.vertices[7]=n+t.height,this},n.prototype.upload=function(){for(var e=0;e<4;e++)this.interleaved[4*e]=this.vertices[2*e],this.interleaved[4*e+1]=this.vertices[2*e+1],this.interleaved[4*e+2]=this.uvs[2*e],this.interleaved[4*e+3]=this.uvs[2*e+1];return this.vertexBuffer.upload(this.interleaved),this},n.prototype.destroy=function(){var e=this.gl;e.deleteBuffer(this.vertexBuffer),e.deleteBuffer(this.indexBuffer)},n}();r.default=a},{"../../../utils/createIndicesForQuads":297,"pixi-gl-core":203}],270:[function(e,t,r){r.__esModule=!0;var n,s=e("../../../math"),l=e("../../../const"),i=e("../../../settings"),u=(n=i)&&n.__esModule?n:{default:n},c=e("pixi-gl-core");var o=function(){function a(e,t,r,n,i,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),this.gl=e,this.frameBuffer=null,this.texture=null,this.clearColor=[0,0,0,0],this.size=new s.Rectangle(0,0,1,1),this.resolution=i||u.default.RESOLUTION,this.projectionMatrix=new s.Matrix,this.transform=null,this.frame=null,this.defaultFrame=new s.Rectangle,this.destinationFrame=null,this.sourceFrame=null,this.stencilBuffer=null,this.stencilMaskStack=[],this.filterData=null,this.filterPoolKey="",this.scaleMode=void 0!==n?n:u.default.SCALE_MODE,this.root=o||!1,this.root?(this.frameBuffer=new c.GLFramebuffer(e,100,100),this.frameBuffer.framebuffer=null):(this.frameBuffer=c.GLFramebuffer.createRGBA(e,100,100),this.scaleMode===l.SCALE_MODES.NEAREST?this.frameBuffer.texture.enableNearestScaling():this.frameBuffer.texture.enableLinearScaling(),this.texture=this.frameBuffer.texture),this.setFrame(),this.resize(t,r)}return a.prototype.clear=function(e){var t=e||this.clearColor;this.frameBuffer.clear(t[0],t[1],t[2],t[3])},a.prototype.attachStencilBuffer=function(){this.root||this.frameBuffer.enableStencil()},a.prototype.setFrame=function(e,t){this.destinationFrame=e||this.destinationFrame||this.defaultFrame,this.sourceFrame=t||this.sourceFrame||this.destinationFrame},a.prototype.activate=function(){var e=this.gl;this.frameBuffer.bind(),this.calculateProjection(this.destinationFrame,this.sourceFrame),this.transform&&this.projectionMatrix.append(this.transform),this.destinationFrame!==this.sourceFrame?(e.enable(e.SCISSOR_TEST),e.scissor(0|this.destinationFrame.x,0|this.destinationFrame.y,this.destinationFrame.width*this.resolution|0,this.destinationFrame.height*this.resolution|0)):e.disable(e.SCISSOR_TEST),e.viewport(0|this.destinationFrame.x,0|this.destinationFrame.y,this.destinationFrame.width*this.resolution|0,this.destinationFrame.height*this.resolution|0)},a.prototype.calculateProjection=function(e,t){var r=this.projectionMatrix;t=t||e,r.identity(),this.root?(r.a=1/e.width*2,r.d=-1/e.height*2,r.tx=-1-t.x*r.a,r.ty=1-t.y*r.d):(r.a=1/e.width*2,r.d=1/e.height*2,r.tx=-1-t.x*r.a,r.ty=-1-t.y*r.d)},a.prototype.resize=function(e,t){if(e|=0,t|=0,this.size.width!==e||this.size.height!==t){this.size.width=e,this.size.height=t,this.defaultFrame.width=e,this.defaultFrame.height=t,this.frameBuffer.resize(e*this.resolution,t*this.resolution);var r=this.frame||this.size;this.calculateProjection(r)}},a.prototype.destroy=function(){this.frameBuffer.destroy(),this.frameBuffer=null,this.texture=null},a}();r.default=o},{"../../../const":220,"../../../math":244,"../../../settings":275,"pixi-gl-core":203}],271:[function(e,t,r){r.__esModule=!0,r.default=function(e,t){var r=!t;if(0===e)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");if(r){var n=document.createElement("canvas");n.width=1,n.height=1,t=a.default.createContext(n)}var i=t.createShader(t.FRAGMENT_SHADER);for(;;){var o=s.replace(/%forloop%/gi,l(e));if(t.shaderSource(i,o),t.compileShader(i),t.getShaderParameter(i,t.COMPILE_STATUS))break;e=e/2|0}r&&t.getExtension("WEBGL_lose_context")&&t.getExtension("WEBGL_lose_context").loseContext();return e};var n,i=e("pixi-gl-core"),a=(n=i)&&n.__esModule?n:{default:n};var s=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join("\n");function l(e){for(var t="",r=0;r<e;++r)0<r&&(t+="\nelse "),r<e-1&&(t+="if(test == "+r+".0){}");return t}},{"pixi-gl-core":203}],272:[function(e,t,r){r.__esModule=!0,r.default=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[];return t[n.BLEND_MODES.NORMAL]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[n.BLEND_MODES.ADD]=[e.ONE,e.DST_ALPHA],t[n.BLEND_MODES.MULTIPLY]=[e.DST_COLOR,e.ONE_MINUS_SRC_ALPHA],t[n.BLEND_MODES.SCREEN]=[e.ONE,e.ONE_MINUS_SRC_COLOR],t[n.BLEND_MODES.OVERLAY]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[n.BLEND_MODES.DARKEN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[n.BLEND_MODES.LIGHTEN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[n.BLEND_MODES.COLOR_DODGE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[n.BLEND_MODES.COLOR_BURN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[n.BLEND_MODES.HARD_LIGHT]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[n.BLEND_MODES.SOFT_LIGHT]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[n.BLEND_MODES.DIFFERENCE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[n.BLEND_MODES.EXCLUSION]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[n.BLEND_MODES.HUE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[n.BLEND_MODES.SATURATION]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[n.BLEND_MODES.COLOR]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[n.BLEND_MODES.LUMINOSITY]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[n.BLEND_MODES.NORMAL_NPM]=[e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA],t[n.BLEND_MODES.ADD_NPM]=[e.SRC_ALPHA,e.DST_ALPHA,e.ONE,e.DST_ALPHA],t[n.BLEND_MODES.SCREEN_NPM]=[e.SRC_ALPHA,e.ONE_MINUS_SRC_COLOR,e.ONE,e.ONE_MINUS_SRC_COLOR],t};var n=e("../../../const")},{"../../../const":220}],273:[function(e,t,r){r.__esModule=!0,r.default=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return t[n.DRAW_MODES.POINTS]=e.POINTS,t[n.DRAW_MODES.LINES]=e.LINES,t[n.DRAW_MODES.LINE_LOOP]=e.LINE_LOOP,t[n.DRAW_MODES.LINE_STRIP]=e.LINE_STRIP,t[n.DRAW_MODES.TRIANGLES]=e.TRIANGLES,t[n.DRAW_MODES.TRIANGLE_STRIP]=e.TRIANGLE_STRIP,t[n.DRAW_MODES.TRIANGLE_FAN]=e.TRIANGLE_FAN,t};var n=e("../../../const")},{"../../../const":220}],274:[function(e,t,r){r.__esModule=!0,r.default=function(e){e.getContextAttributes().stencil||console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly")}},{}],275:[function(e,t,r){r.__esModule=!0;var n=o(e("./utils/maxRecommendedTextures")),i=o(e("./utils/canUploadSameBuffer"));function o(e){return e&&e.__esModule?e:{default:e}}r.default={TARGET_FPMS:.06,MIPMAP_TEXTURES:!0,RESOLUTION:1,FILTER_RESOLUTION:1,SPRITE_MAX_TEXTURES:(0,n.default)(32),SPRITE_BATCH_SIZE:4096,RETINA_PREFIX:/@([0-9\.]+)x/,RENDER_OPTIONS:{view:null,antialias:!1,forceFXAA:!1,autoResize:!1,transparent:!1,backgroundColor:0,clearBeforeRender:!0,preserveDrawingBuffer:!1,roundPixels:!1,width:800,height:600,legacy:!1},TRANSFORM_MODE:0,GC_MODE:0,GC_MAX_IDLE:3600,GC_MAX_CHECK_COUNT:600,WRAP_MODE:0,SCALE_MODE:0,PRECISION_VERTEX:"highp",PRECISION_FRAGMENT:"mediump",CAN_UPLOAD_SAME_BUFFER:(0,i.default)(),MESH_CANVAS_PADDING:0}},{"./utils/canUploadSameBuffer":296,"./utils/maxRecommendedTextures":301}],276:[function(e,t,r){r.__esModule=!0;var i=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),o=e("../math"),a=e("../utils"),s=e("../const"),l=u(e("../textures/Texture")),n=u(e("../display/Container"));function u(e){return e&&e.__esModule?e:{default:e}}var c=new o.Point,h=function(r){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==_typeof2(t)&&"function"!=typeof t?e:t}(this,r.call(this));return t._anchor=new o.ObservablePoint(t._onAnchorUpdate,t,e?e.defaultAnchor.x:0,e?e.defaultAnchor.y:0),t._texture=null,t._width=0,t._height=0,t._tint=null,t._tintRGB=null,t.tint=16777215,t.blendMode=s.BLEND_MODES.NORMAL,t.shader=null,t.cachedTint=16777215,t.texture=e||l.default.EMPTY,t.vertexData=new Float32Array(8),t.vertexTrimmedData=null,t._transformID=-1,t._textureID=-1,t._transformTrimmedID=-1,t._textureTrimmedID=-1,t.pluginName="sprite",t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+_typeof2(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,r),n.prototype._onTextureUpdate=function(){this._textureID=-1,this._textureTrimmedID=-1,this.cachedTint=16777215,this._width&&(this.scale.x=(0,a.sign)(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=(0,a.sign)(this.scale.y)*this._height/this._texture.orig.height)},n.prototype._onAnchorUpdate=function(){this._transformID=-1,this._transformTrimmedID=-1},n.prototype.calculateVertices=function(){if(this._transformID!==this.transform._worldID||this._textureID!==this._texture._updateID){this._transformID=this.transform._worldID,this._textureID=this._texture._updateID;var e=this._texture,t=this.transform.worldTransform,r=t.a,n=t.b,i=t.c,o=t.d,a=t.tx,s=t.ty,l=this.vertexData,u=e.trim,c=e.orig,h=this._anchor,d=0,p=0,f=0,m=0;f=u?(d=(p=u.x-h._x*c.width)+u.width,(m=u.y-h._y*c.height)+u.height):(d=(p=-h._x*c.width)+c.width,(m=-h._y*c.height)+c.height),l[0]=r*p+i*m+a,l[1]=o*m+n*p+s,l[2]=r*d+i*m+a,l[3]=o*m+n*d+s,l[4]=r*d+i*f+a,l[5]=o*f+n*d+s,l[6]=r*p+i*f+a,l[7]=o*f+n*p+s}},n.prototype.calculateTrimmedVertices=function(){if(this.vertexTrimmedData){if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return}else this.vertexTrimmedData=new Float32Array(8);this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;var e=this._texture,t=this.vertexTrimmedData,r=e.orig,n=this._anchor,i=this.transform.worldTransform,o=i.a,a=i.b,s=i.c,l=i.d,u=i.tx,c=i.ty,h=-n._x*r.width,d=h+r.width,p=-n._y*r.height,f=p+r.height;t[0]=o*h+s*p+u,t[1]=l*p+a*h+c,t[2]=o*d+s*p+u,t[3]=l*p+a*d+c,t[4]=o*d+s*f+u,t[5]=l*f+a*d+c,t[6]=o*h+s*f+u,t[7]=l*f+a*h+c},n.prototype._renderWebGL=function(e){this.calculateVertices(),e.setObjectRenderer(e.plugins[this.pluginName]),e.plugins[this.pluginName].render(this)},n.prototype._renderCanvas=function(e){e.plugins[this.pluginName].render(this)},n.prototype._calculateBounds=function(){var e=this._texture.trim,t=this._texture.orig;!e||e.width===t.width&&e.height===t.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))},n.prototype.getLocalBounds=function(e){return 0===this.children.length?(this._bounds.minX=this._texture.orig.width*-this._anchor._x,this._bounds.minY=this._texture.orig.height*-this._anchor._y,this._bounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._bounds.maxY=this._texture.orig.height*(1-this._anchor._y),e||(this._localBoundsRect||(this._localBoundsRect=new o.Rectangle),e=this._localBoundsRect),this._bounds.getRectangle(e)):r.prototype.getLocalBounds.call(this,e)},n.prototype.containsPoint=function(e){this.worldTransform.applyInverse(e,c);var t=this._texture.orig.width,r=this._texture.orig.height,n=-t*this.anchor.x,i=0;return c.x>=n&&c.x<n+t&&(i=-r*this.anchor.y,c.y>=i&&c.y<i+r)},n.prototype.destroy=function(e){if(r.prototype.destroy.call(this,e),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null,"boolean"==typeof e?e:e&&e.texture){var t="boolean"==typeof e?e:e&&e.baseTexture;this._texture.destroy(!!t)}this._texture=null,this.shader=null},n.from=function(e){return new n(l.default.from(e))},n.fromFrame=function(e){var t=a.TextureCache[e];if(!t)throw new Error('The frameId "'+e+'" does not exist in the texture cache');return new n(t)},n.fromImage=function(e,t,r){return new n(l.default.fromImage(e,t,r))},i(n,[{key:"width",get:function(){return Math.abs(this.scale.x)*this._texture.orig.width},set:function(e){var t=(0,a.sign)(this.scale.x)||1;this.scale.x=t*e/this._texture.orig.width,this._width=e}},{key:"height",get:function(){return Math.abs(this.scale.y)*this._texture.orig.height},set:function(e){var t=(0,a.sign)(this.scale.y)||1;this.scale.y=t*e/this._texture.orig.height,this._height=e}},{key:"anchor",get:function(){return this._anchor},set:function(e){this._anchor.copy(e)}},{key:"tint",get:function(){return this._tint},set:function(e){this._tint=e,this._tintRGB=(e>>16)+(65280&e)+((255&e)<<16)}},{key:"texture",get:function(){return this._texture},set:function(e){this._texture!==e&&(this._texture=e||l.default.EMPTY,this.cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,e&&(e.baseTexture.hasLoaded?this._onTextureUpdate():e.once("update",this._onTextureUpdate,this)))}}]),n}(n.default);r.default=h},{"../const":220,"../display/Container":222,"../math":244,"../textures/Texture":289,"../utils":299}],277:[function(e,t,r){r.__esModule=!0;var n=i(e("../../renderers/canvas/CanvasRenderer")),c=e("../../const"),h=e("../../math"),d=i(e("./CanvasTinter"));function i(e){return e&&e.__esModule?e:{default:e}}var p=new h.Matrix,o=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.renderer=e}return t.prototype.render=function(e){var t=e._texture,r=this.renderer,n=t._frame.width,i=t._frame.height,o=e.transform.worldTransform,a=0,s=0;if(!(t.orig.width<=0||t.orig.height<=0)&&t.baseTexture.source&&(r.setBlendMode(e.blendMode),t.valid)){r.context.globalAlpha=e.worldAlpha;var l=t.baseTexture.scaleMode===c.SCALE_MODES.LINEAR;r.smoothProperty&&r.context[r.smoothProperty]!==l&&(r.context[r.smoothProperty]=l),s=t.trim?(a=t.trim.width/2+t.trim.x-e.anchor.x*t.orig.width,t.trim.height/2+t.trim.y-e.anchor.y*t.orig.height):(a=(.5-e.anchor.x)*t.orig.width,(.5-e.anchor.y)*t.orig.height),t.rotate&&(o.copy(p),o=p,h.GroupD8.matrixAppendRotationInv(o,t.rotate,a,s),s=a=0),a-=n/2,s-=i/2,r.roundPixels?(r.context.setTransform(o.a,o.b,o.c,o.d,o.tx*r.resolution|0,o.ty*r.resolution|0),a|=0,s|=0):r.context.setTransform(o.a,o.b,o.c,o.d,o.tx*r.resolution,o.ty*r.resolution);var u=t.baseTexture.resolution;16777215!==e.tint?(e.cachedTint===e.tint&&e.tintedTexture.tintId===e._texture._updateID||(e.cachedTint=e.tint,e.tintedTexture=d.default.getTintedTexture(e,e.tint)),r.context.drawImage(e.tintedTexture,0,0,n*u,i*u,a*r.resolution,s*r.resolution,n*r.resolution,i*r.resolution)):r.context.drawImage(t.baseTexture.source,t._frame.x*u,t._frame.y*u,n*u,i*u,a*r.resolution,s*r.resolution,n*r.resolution,i*r.resolution)}},t.prototype.destroy=function(){this.renderer=null},t}();r.default=o,n.default.registerPlugin("sprite",o)},{"../../const":220,"../../math":244,"../../renderers/canvas/CanvasRenderer":251,"./CanvasTinter":278}],278:[function(e,t,r){r.__esModule=!0;var n,p=e("../../utils"),i=e("../../renderers/canvas/utils/canUseNewCanvasBlendModes");var s={getTintedTexture:function(e,t){var r=e._texture,n="#"+("00000"+(0|(t=s.roundColor(t))).toString(16)).substr(-6);r.tintCache=r.tintCache||{};var i=r.tintCache[n],o=void 0;if(i){if(i.tintId===r._updateID)return r.tintCache[n];o=r.tintCache[n]}else o=s.canvas||document.createElement("canvas");if(s.tintMethod(r,t,o),o.tintId=r._updateID,s.convertTintToImage){var a=new Image;a.src=o.toDataURL(),r.tintCache[n]=a}else r.tintCache[n]=o,s.canvas=null;return o},tintWithMultiply:function(e,t,r){var n=r.getContext("2d"),i=e._frame.clone(),o=e.baseTexture.resolution;i.x*=o,i.y*=o,i.width*=o,i.height*=o,r.width=Math.ceil(i.width),r.height=Math.ceil(i.height),n.save(),n.fillStyle="#"+("00000"+(0|t).toString(16)).substr(-6),n.fillRect(0,0,i.width,i.height),n.globalCompositeOperation="multiply",n.drawImage(e.baseTexture.source,i.x,i.y,i.width,i.height,0,0,i.width,i.height),n.globalCompositeOperation="destination-atop",n.drawImage(e.baseTexture.source,i.x,i.y,i.width,i.height,0,0,i.width,i.height),n.restore()},tintWithOverlay:function(e,t,r){var n=r.getContext("2d"),i=e._frame.clone(),o=e.baseTexture.resolution;i.x*=o,i.y*=o,i.width*=o,i.height*=o,r.width=Math.ceil(i.width),r.height=Math.ceil(i.height),n.save(),n.globalCompositeOperation="copy",n.fillStyle="#"+("00000"+(0|t).toString(16)).substr(-6),n.fillRect(0,0,i.width,i.height),n.globalCompositeOperation="destination-atop",n.drawImage(e.baseTexture.source,i.x,i.y,i.width,i.height,0,0,i.width,i.height),n.restore()},tintWithPerPixel:function(e,t,r){var n=r.getContext("2d"),i=e._frame.clone(),o=e.baseTexture.resolution;i.x*=o,i.y*=o,i.width*=o,i.height*=o,r.width=Math.ceil(i.width),r.height=Math.ceil(i.height),n.save(),n.globalCompositeOperation="copy",n.drawImage(e.baseTexture.source,i.x,i.y,i.width,i.height,0,0,i.width,i.height),n.restore();for(var a=(0,p.hex2rgb)(t),s=a[0],l=a[1],u=a[2],c=n.getImageData(0,0,i.width,i.height),h=c.data,d=0;d<h.length;d+=4)h[d+0]*=s,h[d+1]*=l,h[d+2]*=u;n.putImageData(c,0,0)},roundColor:function(e){var t=s.cacheStepsPerColorChannel,r=(0,p.hex2rgb)(e);return r[0]=Math.min(255,r[0]/t*t),r[1]=Math.min(255,r[1]/t*t),r[2]=Math.min(255,r[2]/t*t),(0,p.rgb2hex)(r)},cacheStepsPerColorChannel:8,convertTintToImage:!1,canUseMultiply:(0,((n=i)&&n.__esModule?n:{default:n}).default)(),tintMethod:0};s.tintMethod=s.canUseMultiply?s.tintWithMultiply:s.tintWithPerPixel,r.default=s},{"../../renderers/canvas/utils/canUseNewCanvasBlendModes":254,"../../utils":299}],279:[function(e,t,r){r.__esModule=!0;var n=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.vertices=new ArrayBuffer(e),this.float32View=new Float32Array(this.vertices),this.uint32View=new Uint32Array(this.vertices)}return t.prototype.destroy=function(){this.vertices=null,this.positions=null,this.uvs=null,this.colors=null},t}();r.default=n},{}],280:[function(e,t,r){r.__esModule=!0;var n=o(e("../../renderers/webgl/utils/ObjectRenderer")),i=o(e("../../renderers/webgl/WebGLRenderer")),a=o(e("../../utils/createIndicesForQuads")),s=o(e("./generateMultiTextureShader")),l=o(e("../../renderers/webgl/utils/checkMaxIfStatmentsInShader")),u=o(e("./BatchBuffer")),F=o(e("../../settings")),j=e("../../utils"),N=o(e("pixi-gl-core")),G=o(e("bit-twiddle"));function o(e){return e&&e.__esModule?e:{default:e}}var z=0,U=0,c=function(i){function o(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==_typeof2(t)&&"function"!=typeof t?e:t}(this,i.call(this,e));t.vertSize=5,t.vertByteSize=4*t.vertSize,t.size=F.default.SPRITE_BATCH_SIZE,t.buffers=[];for(var r=1;r<=G.default.nextPow2(t.size);r*=2)t.buffers.push(new u.default(4*r*t.vertByteSize));t.indices=(0,a.default)(t.size),t.shader=null,t.currentIndex=0,t.groups=[];for(var n=0;n<t.size;n++)t.groups[n]={textures:[],textureCount:0,ids:[],size:0,start:0,blend:0};return t.sprites=[],t.vertexBuffers=[],t.vaos=[],t.vaoMax=2,t.vertexCount=0,t.renderer.on("prerender",t.onPrerender,t),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+_typeof2(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(o,i),o.prototype.onContextChange=function(){var e=this.renderer.gl;this.renderer.legacy?this.MAX_TEXTURES=1:(this.MAX_TEXTURES=Math.min(e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),F.default.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=(0,l.default)(this.MAX_TEXTURES,e)),this.shader=(0,s.default)(e,this.MAX_TEXTURES),this.indexBuffer=N.default.GLBuffer.createIndexBuffer(e,this.indices,e.STATIC_DRAW),this.renderer.bindVao(null);for(var t=this.shader.attributes,r=0;r<this.vaoMax;r++){var n=this.vertexBuffers[r]=N.default.GLBuffer.createVertexBuffer(e,null,e.STREAM_DRAW),i=this.renderer.createVao().addIndex(this.indexBuffer).addAttribute(n,t.aVertexPosition,e.FLOAT,!1,this.vertByteSize,0).addAttribute(n,t.aTextureCoord,e.UNSIGNED_SHORT,!0,this.vertByteSize,8).addAttribute(n,t.aColor,e.UNSIGNED_BYTE,!0,this.vertByteSize,12);t.aTextureId&&i.addAttribute(n,t.aTextureId,e.FLOAT,!1,this.vertByteSize,16),this.vaos[r]=i}this.vao=this.vaos[0],this.currentBlendMode=99999,this.boundTextures=new Array(this.MAX_TEXTURES)},o.prototype.onPrerender=function(){this.vertexCount=0},o.prototype.render=function(e){this.currentIndex>=this.size&&this.flush(),e._texture._uvs&&(this.sprites[this.currentIndex++]=e)},o.prototype.flush=function(){if(0!==this.currentIndex){var e=this.renderer.gl,t=this.MAX_TEXTURES,r=G.default.nextPow2(this.currentIndex),n=G.default.log2(r),i=this.buffers[n],o=this.sprites,a=this.groups,s=i.float32View,l=i.uint32View,u=this.boundTextures,c=this.renderer.boundTextures,h=this.renderer.textureGC.count,d=0,p=void 0,f=void 0,m=1,v=0,b=a[0],y=void 0,g=void 0,w=j.premultiplyBlendMode[o[0]._texture.baseTexture.premultipliedAlpha?1:0][o[0].blendMode];b.textureCount=0,b.start=0,b.blend=w,z++;var _=void 0;for(_=0;_<t;++_){var x=c[_];x._enabled!==z?((u[_]=x)._virtalBoundId=_,x._enabled=z):u[_]=this.renderer.emptyTextures[_]}for(z++,_=0;_<this.currentIndex;++_){var S=o[_];o[_]=null,p=S._texture.baseTexture;var C=j.premultiplyBlendMode[Number(p.premultipliedAlpha)][S.blendMode];if(w!==C&&(w=C,f=null,v=t,z++),f!==p&&(f=p)._enabled!==z){if(v===t&&(z++,b.size=_-b.start,v=0,(b=a[m++]).blend=w,b.textureCount=0,b.start=_),p.touched=h,-1===p._virtalBoundId)for(var k=0;k<t;++k){var T=(k+U)%t,A=u[T];if(A._enabled!==z){U++,A._virtalBoundId=-1,u[p._virtalBoundId=T]=p;break}}p._enabled=z,b.textureCount++,b.ids[v]=p._virtalBoundId,b.textures[v++]=p}if(y=S.vertexData,g=S._texture._uvs.uvsUint32,this.renderer.roundPixels){var E=this.renderer.resolution;s[d]=(y[0]*E|0)/E,s[d+1]=(y[1]*E|0)/E,s[d+5]=(y[2]*E|0)/E,s[d+6]=(y[3]*E|0)/E,s[d+10]=(y[4]*E|0)/E,s[d+11]=(y[5]*E|0)/E,s[d+15]=(y[6]*E|0)/E,s[d+16]=(y[7]*E|0)/E}else s[d]=y[0],s[d+1]=y[1],s[d+5]=y[2],s[d+6]=y[3],s[d+10]=y[4],s[d+11]=y[5],s[d+15]=y[6],s[d+16]=y[7];l[d+2]=g[0],l[d+7]=g[1],l[d+12]=g[2],l[d+17]=g[3];var O=Math.min(S.worldAlpha,1),M=O<1&&p.premultipliedAlpha?(0,j.premultiplyTint)(S._tintRGB,O):S._tintRGB+(255*O<<24);l[d+3]=l[d+8]=l[d+13]=l[d+18]=M,s[d+4]=s[d+9]=s[d+14]=s[d+19]=p._virtalBoundId,d+=20}if(b.size=_-b.start,F.default.CAN_UPLOAD_SAME_BUFFER)this.vertexBuffers[this.vertexCount].upload(i.vertices,0,!0);else{if(this.vaoMax<=this.vertexCount){this.vaoMax++;var P=this.shader.attributes,I=this.vertexBuffers[this.vertexCount]=N.default.GLBuffer.createVertexBuffer(e,null,e.STREAM_DRAW),R=this.renderer.createVao().addIndex(this.indexBuffer).addAttribute(I,P.aVertexPosition,e.FLOAT,!1,this.vertByteSize,0).addAttribute(I,P.aTextureCoord,e.UNSIGNED_SHORT,!0,this.vertByteSize,8).addAttribute(I,P.aColor,e.UNSIGNED_BYTE,!0,this.vertByteSize,12);P.aTextureId&&R.addAttribute(I,P.aTextureId,e.FLOAT,!1,this.vertByteSize,16),this.vaos[this.vertexCount]=R}this.renderer.bindVao(this.vaos[this.vertexCount]),this.vertexBuffers[this.vertexCount].upload(i.vertices,0,!1),this.vertexCount++}for(_=0;_<t;++_)c[_]._virtalBoundId=-1;for(_=0;_<m;++_){for(var D=a[_],B=D.textureCount,L=0;L<B;L++)f=D.textures[L],c[D.ids[L]]!==f&&this.renderer.bindTexture(f,D.ids[L],!0),f._virtalBoundId=-1;this.renderer.state.setBlendMode(D.blend),e.drawElements(e.TRIANGLES,6*D.size,e.UNSIGNED_SHORT,6*D.start*2)}this.currentIndex=0}},o.prototype.start=function(){this.renderer.bindShader(this.shader),F.default.CAN_UPLOAD_SAME_BUFFER&&(this.renderer.bindVao(this.vaos[this.vertexCount]),this.vertexBuffers[this.vertexCount].bind())},o.prototype.stop=function(){this.flush()},o.prototype.destroy=function(){for(var e=0;e<this.vaoMax;e++)this.vertexBuffers[e]&&this.vertexBuffers[e].destroy(),this.vaos[e]&&this.vaos[e].destroy();this.indexBuffer&&this.indexBuffer.destroy(),this.renderer.off("prerender",this.onPrerender,this),i.prototype.destroy.call(this),this.shader&&(this.shader.destroy(),this.shader=null),this.vertexBuffers=null,this.vaos=null,this.indexBuffer=null,this.indices=null,this.sprites=null;for(var t=0;t<this.buffers.length;++t)this.buffers[t].destroy()},o}(n.default);r.default=c,i.default.registerPlugin("sprite",c)},{"../../renderers/webgl/WebGLRenderer":258,"../../renderers/webgl/utils/ObjectRenderer":268,"../../renderers/webgl/utils/checkMaxIfStatmentsInShader":271,"../../settings":275,"../../utils":299,"../../utils/createIndicesForQuads":297,"./BatchBuffer":279,"./generateMultiTextureShader":281,"bit-twiddle":176,"pixi-gl-core":203}],281:[function(e,t,r){r.__esModule=!0,r.default=function(e,t){var r=s;r=(r=r.replace(/%count%/gi,t)).replace(/%forloop%/gi,function(e){var t="";t+="\n",t+="\n";for(var r=0;r<e;r++)0<r&&(t+="\nelse "),r<e-1&&(t+="if(textureId == "+r+".0)"),t+="\n{",t+="\n\tcolor = texture2D(uSamplers["+r+"], vTextureCoord);",t+="\n}";return t+="\n",t+="\n"}(t));for(var n=new a.default(e,"precision highp float;\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\nattribute float aTextureId;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\n\nvoid main(void){\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vTextureId = aTextureId;\n    vColor = aColor;\n}\n",r),i=[],o=0;o<t;o++)i[o]=o;return n.bind(),n.uniforms.uSamplers=i,n};var n,i=e("../../Shader"),a=(n=i)&&n.__esModule?n:{default:n};e("path");var s=["varying vec2 vTextureCoord;","varying vec4 vColor;","varying float vTextureId;","uniform sampler2D uSamplers[%count%];","void main(void){","vec4 color;","float textureId = floor(vTextureId+0.5);","%forloop%","gl_FragColor = color * vColor;","}"].join("\n")},{"../../Shader":218,path:195}],282:[function(e,t,r){r.__esModule=!0;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=o(e("../sprites/Sprite")),s=o(e("../textures/Texture")),l=e("../math"),u=e("../utils"),m=e("../const"),c=o(e("../settings")),h=o(e("./TextStyle")),b=o(e("./TextMetrics")),d=o(e("../utils/trimCanvas"));function o(e){return e&&e.__esModule?e:{default:e}}var p={texture:!0,children:!1,baseTexture:!0},a=function(o){function a(e,t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(r=r||document.createElement("canvas")).width=3,r.height=3;var n=s.default.fromCanvas(r,c.default.SCALE_MODE,"text");n.orig=new l.Rectangle,n.trim=new l.Rectangle;var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==_typeof2(t)&&"function"!=typeof t?e:t}(this,o.call(this,n));return s.default.addToCache(i._texture,i._texture.baseTexture.textureCacheIds[0]),i.canvas=r,i.context=i.canvas.getContext("2d"),i.resolution=c.default.RESOLUTION,i._text=null,i._style=null,i._styleListener=null,i._font="",i.text=e,i.style=t,i.localStyleID=-1,i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+_typeof2(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,o),a.prototype.updateText=function(e){var t=this._style;if(this.localStyleID!==t.styleID&&(this.dirty=!0,this.localStyleID=t.styleID),this.dirty||!e){this._font=this._style.toFontString();var r=this.context,n=b.default.measureText(this._text,this._style,this._style.wordWrap,this.canvas),i=n.width,o=n.height,a=n.lines,s=n.lineHeight,l=n.lineWidths,u=n.maxLineWidth,c=n.fontProperties;this.canvas.width=Math.ceil((Math.max(1,i)+2*t.padding)*this.resolution),this.canvas.height=Math.ceil((Math.max(1,o)+2*t.padding)*this.resolution),r.scale(this.resolution,this.resolution),r.clearRect(0,0,this.canvas.width,this.canvas.height),r.font=this._font,r.strokeStyle=t.stroke,r.lineWidth=t.strokeThickness,r.textBaseline=t.textBaseline,r.lineJoin=t.lineJoin,r.miterLimit=t.miterLimit;var h=void 0,d=void 0;if(t.dropShadow){r.fillStyle=t.dropShadowColor,r.globalAlpha=t.dropShadowAlpha,r.shadowBlur=t.dropShadowBlur,0<t.dropShadowBlur&&(r.shadowColor=t.dropShadowColor);for(var p=Math.cos(t.dropShadowAngle)*t.dropShadowDistance,f=Math.sin(t.dropShadowAngle)*t.dropShadowDistance,m=0;m<a.length;m++)h=t.strokeThickness/2,d=t.strokeThickness/2+m*s+c.ascent,"right"===t.align?h+=u-l[m]:"center"===t.align&&(h+=(u-l[m])/2),t.fill&&(this.drawLetterSpacing(a[m],h+p+t.padding,d+f+t.padding),t.stroke&&t.strokeThickness&&(r.strokeStyle=t.dropShadowColor,this.drawLetterSpacing(a[m],h+p+t.padding,d+f+t.padding,!0),r.strokeStyle=t.stroke))}r.shadowBlur=0,r.globalAlpha=1,r.fillStyle=this._generateFillStyle(t,a);for(var v=0;v<a.length;v++)h=t.strokeThickness/2,d=t.strokeThickness/2+v*s+c.ascent,"right"===t.align?h+=u-l[v]:"center"===t.align&&(h+=(u-l[v])/2),t.stroke&&t.strokeThickness&&this.drawLetterSpacing(a[v],h+t.padding,d+t.padding,!0),t.fill&&this.drawLetterSpacing(a[v],h+t.padding,d+t.padding);this.updateTexture()}},a.prototype.drawLetterSpacing=function(e,t,r){var n=3<arguments.length&&void 0!==arguments[3]&&arguments[3],i=this._style.letterSpacing;if(0!==i)for(var o=String.prototype.split.call(e,""),a=t,s=0,l="";s<e.length;)l=o[s++],n?this.context.strokeText(l,a,r):this.context.fillText(l,a,r),a+=this.context.measureText(l).width+i;else n?this.context.strokeText(e,t,r):this.context.fillText(e,t,r)},a.prototype.updateTexture=function(){var e=this.canvas;if(this._style.trim){var t=(0,d.default)(e);t.data&&(e.width=t.width,e.height=t.height,this.context.putImageData(t.data,0,0))}var r=this._texture,n=this._style,i=n.trim?0:n.padding,o=r.baseTexture;o.hasLoaded=!0,o.resolution=this.resolution,o.realWidth=e.width,o.realHeight=e.height,o.width=e.width/this.resolution,o.height=e.height/this.resolution,r.trim.width=r._frame.width=e.width/this.resolution,r.trim.height=r._frame.height=e.height/this.resolution,r.trim.x=-i,r.trim.y=-i,r.orig.width=r._frame.width-2*i,r.orig.height=r._frame.height-2*i,this._onTextureUpdate(),o.emit("update",o),this.dirty=!1},a.prototype.renderWebGL=function(e){this.resolution!==e.resolution&&(this.resolution=e.resolution,this.dirty=!0),this.updateText(!0),o.prototype.renderWebGL.call(this,e)},a.prototype._renderCanvas=function(e){this.resolution!==e.resolution&&(this.resolution=e.resolution,this.dirty=!0),this.updateText(!0),o.prototype._renderCanvas.call(this,e)},a.prototype.getLocalBounds=function(e){return this.updateText(!0),o.prototype.getLocalBounds.call(this,e)},a.prototype._calculateBounds=function(){this.updateText(!0),this.calculateVertices(),this._bounds.addQuad(this.vertexData)},a.prototype._onStyleChange=function(){this.dirty=!0},a.prototype._generateFillStyle=function(e,t){if(!Array.isArray(e.fill))return e.fill;if(navigator.isCocoonJS)return e.fill[0];var r=void 0,n=void 0,i=void 0,o=void 0,a=this.canvas.width/this.resolution,s=this.canvas.height/this.resolution,l=e.fill.slice(),u=e.fillGradientStops.slice();if(!u.length)for(var c=l.length+1,h=1;h<c;++h)u.push(h/c);if(l.unshift(e.fill[0]),u.unshift(0),l.push(e.fill[e.fill.length-1]),u.push(1),e.fillGradientType===m.TEXT_GRADIENT.LINEAR_VERTICAL){r=this.context.createLinearGradient(a/2,0,a/2,s),n=(l.length+1)*t.length;for(var d=i=0;d<t.length;d++){i+=1;for(var p=0;p<l.length;p++)o="number"==typeof u[p]?u[p]/t.length+d/t.length:i/n,r.addColorStop(o,l[p]),i++}}else{r=this.context.createLinearGradient(0,s/2,a,s/2),n=l.length+1,i=1;for(var f=0;f<l.length;f++)o="number"==typeof u[f]?u[f]:i/n,r.addColorStop(o,l[f]),i++}return r},a.prototype.destroy=function(e){"boolean"==typeof e&&(e={children:e}),e=Object.assign({},p,e),o.prototype.destroy.call(this,e),this.context=null,this.canvas=null,this._style=null},n(a,[{key:"width",get:function(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width},set:function(e){this.updateText(!0);var t=(0,u.sign)(this.scale.x)||1;this.scale.x=t*e/this._texture.orig.width,this._width=e}},{key:"height",get:function(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height},set:function(e){this.updateText(!0);var t=(0,u.sign)(this.scale.y)||1;this.scale.y=t*e/this._texture.orig.height,this._height=e}},{key:"style",get:function(){return this._style},set:function(e){(e=e||{})instanceof h.default?this._style=e:this._style=new h.default(e),this.localStyleID=-1,this.dirty=!0}},{key:"text",get:function(){return this._text},set:function(e){e=String(""===e||null==e?" ":e),this._text!==e&&(this._text=e,this.dirty=!0)}}]),a}(i.default);r.default=a},{"../const":220,"../math":244,"../settings":275,"../sprites/Sprite":276,"../textures/Texture":289,"../utils":299,"../utils/trimCanvas":304,"./TextMetrics":283,"./TextStyle":284}],283:[function(e,t,r){r.__esModule=!0;var n=function(){function A(e,t,r,n,i,o,a,s,l){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,A),this.text=e,this.style=t,this.width=r,this.height=n,this.lines=i,this.lineWidths=o,this.lineHeight=a,this.maxLineWidth=s,this.fontProperties=l}return A.measureText=function(e,t,r){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:A._canvas;r=null==r?t.wordWrap:r;var i=t.toFontString(),o=A.measureFont(i),a=n.getContext("2d");a.font=i;for(var s=(r?A.wordWrap(e,t,n):e).split(/(?:\r\n|\r|\n)/),l=new Array(s.length),u=0,c=0;c<s.length;c++){var h=a.measureText(s[c]).width+(s[c].length-1)*t.letterSpacing;l[c]=h,u=Math.max(u,h)}var d=u+t.strokeThickness;t.dropShadow&&(d+=t.dropShadowDistance);var p=t.lineHeight||o.fontSize+t.strokeThickness,f=Math.max(p,o.fontSize+t.strokeThickness)+(s.length-1)*(p+t.leading);return t.dropShadow&&(f+=t.dropShadowDistance),new A(e,t,d,f,s,l,p+t.leading,u,o)},A.wordWrap=function(e,t){for(var r=(2<arguments.length&&void 0!==arguments[2]?arguments[2]:A._canvas).getContext("2d"),n=0,i="",o="",a={},s=t.letterSpacing,l=t.whiteSpace,u=A.collapseSpaces(l),c=A.collapseNewlines(l),h=!u,d=t.wordWrapWidth+s,p=A.tokenize(e),f=0;f<p.length;f++){var m=p[f];if(A.isNewline(m)){if(!c){o+=A.addLine(i),h=!u,i="",n=0;continue}m=" "}if(u){var v=A.isBreakingSpace(m),b=A.isBreakingSpace(i[i.length-1]);if(v&&b)continue}var y=A.getFromCache(m,s,a,r);if(d<y)if(""!==i&&(o+=A.addLine(i),i="",n=0),A.canBreakWords(m,t.breakWords))for(var g=m.split(""),w=0;w<g.length;w++){for(var _=g[w],x=1;g[w+x];){var S=g[w+x],C=_[_.length-1];if(A.canBreakChars(C,S,m,w,t.breakWords))break;_+=S,x++}w+=_.length-1;var k=A.getFromCache(_,s,a,r);d<k+n&&(o+=A.addLine(i),h=!1,i="",n=0),i+=_,n+=k}else{0<i.length&&(o+=A.addLine(i),i="",n=0);var T=f===p.length-1;o+=A.addLine(m,!T),h=!1,i="",n=0}else d<y+n&&(h=!1,o+=A.addLine(i),i="",n=0),(0<i.length||!A.isBreakingSpace(m)||h)&&(i+=m,n+=y)}return o+=A.addLine(i,!1)},A.addLine=function(e){var t=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];return e=A.trimRight(e),e=t?e+"\n":e},A.getFromCache=function(e,t,r,n){var i=r[e];if(void 0===i){var o=e.length*t;i=n.measureText(e).width+o,r[e]=i}return i},A.collapseSpaces=function(e){return"normal"===e||"pre-line"===e},A.collapseNewlines=function(e){return"normal"===e},A.trimRight=function(e){if("string"!=typeof e)return"";for(var t=e.length-1;0<=t;t--){var r=e[t];if(!A.isBreakingSpace(r))break;e=e.slice(0,-1)}return e},A.isNewline=function(e){return"string"==typeof e&&0<=A._newlines.indexOf(e.charCodeAt(0))},A.isBreakingSpace=function(e){return"string"==typeof e&&0<=A._breakingSpaces.indexOf(e.charCodeAt(0))},A.tokenize=function(e){var t=[],r="";if("string"!=typeof e)return t;for(var n=0;n<e.length;n++){var i=e[n];A.isBreakingSpace(i)||A.isNewline(i)?(""!==r&&(t.push(r),r=""),t.push(i)):r+=i}return""!==r&&t.push(r),t},A.canBreakWords=function(e,t){return t},A.canBreakChars=function(e,t,r,n,i){return!0},A.measureFont=function(e){if(A._fonts[e])return A._fonts[e];var t={},r=A._canvas,n=A._context;n.font=e;var i=A.METRICS_STRING+A.BASELINE_SYMBOL,o=Math.ceil(n.measureText(i).width),a=Math.ceil(n.measureText(A.BASELINE_SYMBOL).width),s=2*a;a=a*A.BASELINE_MULTIPLIER|0,r.width=o,r.height=s,n.fillStyle="#f00",n.fillRect(0,0,o,s),n.font=e,n.textBaseline="alphabetic",n.fillStyle="#000",n.fillText(i,0,a);var l=n.getImageData(0,0,o,s).data,u=l.length,c=4*o,h=0,d=0,p=!1;for(h=0;h<a;++h){for(var f=0;f<c;f+=4)if(255!==l[d+f]){p=!0;break}if(p)break;d+=c}for(t.ascent=a-h,d=u-c,p=!1,h=s;a<h;--h){for(var m=0;m<c;m+=4)if(255!==l[d+m]){p=!0;break}if(p)break;d-=c}return t.descent=h-a,t.fontSize=t.ascent+t.descent,A._fonts[e]=t},A.clearMetrics=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";e?delete A._fonts[e]:A._fonts={}},A}();r.default=n;var i=document.createElement("canvas");i.width=i.height=10,n._canvas=i,n._context=i.getContext("2d"),n._fonts={},n.METRICS_STRING="|q",n.BASELINE_SYMBOL="M",n.BASELINE_MULTIPLIER=1.4,n._newlines=[10,13],n._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288]},{}],284:[function(e,t,r){r.__esModule=!0;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=e("../const"),o=e("../utils");var a={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:i.TEXT_GRADIENT.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100,leading:0},s=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],l=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.styleID=0,this.reset(),h(this,e,e)}return t.prototype.clone=function(){var e={};return h(e,this,a),new t(e)},t.prototype.reset=function(){h(this,a,a)},t.prototype.toFontString=function(){var e="number"==typeof this.fontSize?this.fontSize+"px":this.fontSize,t=this.fontFamily;Array.isArray(this.fontFamily)||(t=this.fontFamily.split(","));for(var r=t.length-1;0<=r;r--){var n=t[r].trim();!/([\"\'])[^\'\"]+\1/.test(n)&&s.indexOf(n)<0&&(n='"'+n+'"'),t[r]=n}return this.fontStyle+" "+this.fontVariant+" "+this.fontWeight+" "+e+" "+t.join(",")},n(t,[{key:"align",get:function(){return this._align},set:function(e){this._align!==e&&(this._align=e,this.styleID++)}},{key:"breakWords",get:function(){return this._breakWords},set:function(e){this._breakWords!==e&&(this._breakWords=e,this.styleID++)}},{key:"dropShadow",get:function(){return this._dropShadow},set:function(e){this._dropShadow!==e&&(this._dropShadow=e,this.styleID++)}},{key:"dropShadowAlpha",get:function(){return this._dropShadowAlpha},set:function(e){this._dropShadowAlpha!==e&&(this._dropShadowAlpha=e,this.styleID++)}},{key:"dropShadowAngle",get:function(){return this._dropShadowAngle},set:function(e){this._dropShadowAngle!==e&&(this._dropShadowAngle=e,this.styleID++)}},{key:"dropShadowBlur",get:function(){return this._dropShadowBlur},set:function(e){this._dropShadowBlur!==e&&(this._dropShadowBlur=e,this.styleID++)}},{key:"dropShadowColor",get:function(){return this._dropShadowColor},set:function(e){var t=c(e);this._dropShadowColor!==t&&(this._dropShadowColor=t,this.styleID++)}},{key:"dropShadowDistance",get:function(){return this._dropShadowDistance},set:function(e){this._dropShadowDistance!==e&&(this._dropShadowDistance=e,this.styleID++)}},{key:"fill",get:function(){return this._fill},set:function(e){var t=c(e);this._fill!==t&&(this._fill=t,this.styleID++)}},{key:"fillGradientType",get:function(){return this._fillGradientType},set:function(e){this._fillGradientType!==e&&(this._fillGradientType=e,this.styleID++)}},{key:"fillGradientStops",get:function(){return this._fillGradientStops},set:function(e){(function(e,t){if(!Array.isArray(e)||!Array.isArray(t))return!1;if(e.length!==t.length)return!1;for(var r=0;r<e.length;++r)if(e[r]!==t[r])return!1;return!0})(this._fillGradientStops,e)||(this._fillGradientStops=e,this.styleID++)}},{key:"fontFamily",get:function(){return this._fontFamily},set:function(e){this.fontFamily!==e&&(this._fontFamily=e,this.styleID++)}},{key:"fontSize",get:function(){return this._fontSize},set:function(e){this._fontSize!==e&&(this._fontSize=e,this.styleID++)}},{key:"fontStyle",get:function(){return this._fontStyle},set:function(e){this._fontStyle!==e&&(this._fontStyle=e,this.styleID++)}},{key:"fontVariant",get:function(){return this._fontVariant},set:function(e){this._fontVariant!==e&&(this._fontVariant=e,this.styleID++)}},{key:"fontWeight",get:function(){return this._fontWeight},set:function(e){this._fontWeight!==e&&(this._fontWeight=e,this.styleID++)}},{key:"letterSpacing",get:function(){return this._letterSpacing},set:function(e){this._letterSpacing!==e&&(this._letterSpacing=e,this.styleID++)}},{key:"lineHeight",get:function(){return this._lineHeight},set:function(e){this._lineHeight!==e&&(this._lineHeight=e,this.styleID++)}},{key:"leading",get:function(){return this._leading},set:function(e){this._leading!==e&&(this._leading=e,this.styleID++)}},{key:"lineJoin",get:function(){return this._lineJoin},set:function(e){this._lineJoin!==e&&(this._lineJoin=e,this.styleID++)}},{key:"miterLimit",get:function(){return this._miterLimit},set:function(e){this._miterLimit!==e&&(this._miterLimit=e,this.styleID++)}},{key:"padding",get:function(){return this._padding},set:function(e){this._padding!==e&&(this._padding=e,this.styleID++)}},{key:"stroke",get:function(){return this._stroke},set:function(e){var t=c(e);this._stroke!==t&&(this._stroke=t,this.styleID++)}},{key:"strokeThickness",get:function(){return this._strokeThickness},set:function(e){this._strokeThickness!==e&&(this._strokeThickness=e,this.styleID++)}},{key:"textBaseline",get:function(){return this._textBaseline},set:function(e){this._textBaseline!==e&&(this._textBaseline=e,this.styleID++)}},{key:"trim",get:function(){return this._trim},set:function(e){this._trim!==e&&(this._trim=e,this.styleID++)}},{key:"whiteSpace",get:function(){return this._whiteSpace},set:function(e){this._whiteSpace!==e&&(this._whiteSpace=e,this.styleID++)}},{key:"wordWrap",get:function(){return this._wordWrap},set:function(e){this._wordWrap!==e&&(this._wordWrap=e,this.styleID++)}},{key:"wordWrapWidth",get:function(){return this._wordWrapWidth},set:function(e){this._wordWrapWidth!==e&&(this._wordWrapWidth=e,this.styleID++)}}]),t}();function u(e){return"number"==typeof e?(0,o.hex2string)(e):("string"==typeof e&&0===e.indexOf("0x")&&(e=e.replace("0x","#")),e)}function c(e){if(Array.isArray(e)){for(var t=0;t<e.length;++t)e[t]=u(e[t]);return e}return u(e)}function h(e,t,r){for(var n in r)Array.isArray(t[n])?e[n]=t[n].slice():e[n]=t[n]}r.default=l},{"../const":220,"../utils":299}],285:[function(e,t,r){r.__esModule=!0;var n=i(e("./BaseTexture")),s=i(e("../settings"));function i(e){return e&&e.__esModule?e:{default:e}}var o=function(o){function a(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:100,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:100,r=arguments[2],n=arguments[3];!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==_typeof2(t)&&"function"!=typeof t?e:t}(this,o.call(this,null,r));return i.resolution=n||s.default.RESOLUTION,i.width=Math.ceil(e),i.height=Math.ceil(t),i.realWidth=i.width*i.resolution,i.realHeight=i.height*i.resolution,i.scaleMode=void 0!==r?r:s.default.SCALE_MODE,i.hasLoaded=!0,i._glRenderTargets={},i._canvasRenderTarget=null,i.valid=!1,i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+_typeof2(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,o),a.prototype.resize=function(e,t){e=Math.ceil(e),t=Math.ceil(t),e===this.width&&t===this.height||(this.valid=0<e&&0<t,this.width=e,this.height=t,this.realWidth=this.width*this.resolution,this.realHeight=this.height*this.resolution,this.valid&&this.emit("update",this))},a.prototype.destroy=function(){o.prototype.destroy.call(this,!0),this.renderer=null},a}(n.default);r.default=o},{"../settings":275,"./BaseTexture":286}],286:[function(e,t,r){r.__esModule=!0;var s=e("../utils"),o=i(e("../settings")),n=i(e("eventemitter3")),l=i(e("../utils/determineCrossOrigin")),u=i(e("bit-twiddle"));function i(e){return e&&e.__esModule?e:{default:e}}var a=function(i){function a(e,t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==_typeof2(t)&&"function"!=typeof t?e:t}(this,i.call(this));return n.uid=(0,s.uid)(),n.touched=0,n.resolution=r||o.default.RESOLUTION,n.width=100,n.height=100,n.realWidth=100,n.realHeight=100,n.scaleMode=void 0!==t?t:o.default.SCALE_MODE,n.hasLoaded=!1,n.isLoading=!1,n.source=null,n.origSource=null,n.imageType=null,n.sourceScale=1,n.premultipliedAlpha=!0,n.imageUrl=null,n.isPowerOfTwo=!1,n.mipmap=o.default.MIPMAP_TEXTURES,n.wrapMode=o.default.WRAP_MODE,n._glTextures={},n._enabled=0,n._virtalBoundId=-1,n._destroyed=!1,n.textureCacheIds=[],e&&n.loadSource(e),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+_typeof2(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,i),a.prototype.update=function(){"svg"!==this.imageType&&(this.realWidth=this.source.naturalWidth||this.source.videoWidth||this.source.width,this.realHeight=this.source.naturalHeight||this.source.videoHeight||this.source.height,this._updateDimensions()),this.emit("update",this)},a.prototype._updateDimensions=function(){this.width=this.realWidth/this.resolution,this.height=this.realHeight/this.resolution,this.isPowerOfTwo=u.default.isPow2(this.realWidth)&&u.default.isPow2(this.realHeight)},a.prototype.loadSource=function(e){var t=this.isLoading;this.hasLoaded=!1,this.isLoading=!1,t&&this.source&&(this.source.onload=null,this.source.onerror=null);var r=!this.source;if(((this.source=e).src&&e.complete||e.getContext)&&e.width&&e.height)this._updateImageType(),"svg"===this.imageType?this._loadSvgSource():this._sourceLoaded(),r&&this.emit("loaded",this);else if(!e.getContext){this.isLoading=!0;var n=this;if(e.onload=function(){n._updateImageType(),e.onload=null,e.onerror=null,n.isLoading&&(n.isLoading=!1,n._sourceLoaded(),"svg"!==n.imageType?n.emit("loaded",n):n._loadSvgSource())},e.onerror=function(){e.onload=null,e.onerror=null,n.isLoading&&(n.isLoading=!1,n.emit("error",n))},e.complete&&e.src){if(e.onload=null,e.onerror=null,"svg"===n.imageType)return void n._loadSvgSource();this.isLoading=!1,e.width&&e.height?(this._sourceLoaded(),t&&this.emit("loaded",this)):t&&this.emit("error",this)}}},a.prototype._updateImageType=function(){if(this.imageUrl){var e=(0,s.decomposeDataUri)(this.imageUrl),t=void 0;if(e&&"image"===e.mediaType){var r=e.subType.split("+")[0];if(!(t=(0,s.getUrlFileExtension)("."+r)))throw new Error("Invalid image type in data URI.")}else(t=(0,s.getUrlFileExtension)(this.imageUrl))||(t="png");this.imageType=t}},a.prototype._loadSvgSource=function(){if("svg"===this.imageType){var e=(0,s.decomposeDataUri)(this.imageUrl);e?this._loadSvgSourceUsingDataUri(e):this._loadSvgSourceUsingXhr()}},a.prototype._loadSvgSourceUsingDataUri=function(e){var t=void 0;if("base64"===e.encoding){if(!atob)throw new Error("Your browser doesn't support base64 conversions.");t=atob(e.data)}else t=e.data;this._loadSvgSourceUsingString(t)},a.prototype._loadSvgSourceUsingXhr=function(){var e=this,t=new XMLHttpRequest;t.onload=function(){if(t.readyState!==t.DONE||200!==t.status)throw new Error("Failed to load SVG using XHR.");e._loadSvgSourceUsingString(t.response)},t.onerror=function(){return e.emit("error",e)},t.open("GET",this.imageUrl,!0),t.send()},a.prototype._loadSvgSourceUsingString=function(e){var t=(0,s.getSvgSize)(e),r=t.width,n=t.height;if(!r||!n)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");this.realWidth=Math.round(r*this.sourceScale),this.realHeight=Math.round(n*this.sourceScale),this._updateDimensions();var i=document.createElement("canvas");i.width=this.realWidth,i.height=this.realHeight,i._pixiId="canvas_"+(0,s.uid)(),i.getContext("2d").drawImage(this.source,0,0,r,n,0,0,this.realWidth,this.realHeight),this.origSource=this.source,this.source=i,a.addToCache(this,i._pixiId),this.isLoading=!1,this._sourceLoaded(),this.emit("loaded",this)},a.prototype._sourceLoaded=function(){this.hasLoaded=!0,this.update()},a.prototype.destroy=function(){this.imageUrl&&(delete s.TextureCache[this.imageUrl],this.imageUrl=null,navigator.isCocoonJS||(this.source.src="")),this.source=null,this.dispose(),a.removeFromCache(this),this.textureCacheIds=null,this._destroyed=!0},a.prototype.dispose=function(){this.emit("dispose",this)},a.prototype.updateSourceImage=function(e){this.source.src=e,this.loadSource(this.source)},a.fromImage=function(e,t,r,n){var i=s.BaseTextureCache[e];if(!i){var o=new Image;void 0===t&&0!==e.indexOf("data:")?o.crossOrigin=(0,l.default)(e):t&&(o.crossOrigin="string"==typeof t?t:"anonymous"),(i=new a(o,r)).imageUrl=e,n&&(i.sourceScale=n),i.resolution=(0,s.getResolutionOfUrl)(e),o.src=e,a.addToCache(i,e)}return i},a.fromCanvas=function(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"canvas";e._pixiId||(e._pixiId=r+"_"+(0,s.uid)());var n=s.BaseTextureCache[e._pixiId];return n||(n=new a(e,t),a.addToCache(n,e._pixiId)),n},a.from=function(e,t,r){if("string"==typeof e)return a.fromImage(e,void 0,t,r);if(e instanceof HTMLImageElement){var n=e.src,i=s.BaseTextureCache[n];return i||((i=new a(e,t)).imageUrl=n,r&&(i.sourceScale=r),i.resolution=(0,s.getResolutionOfUrl)(n),a.addToCache(i,n)),i}return e instanceof HTMLCanvasElement?a.fromCanvas(e,t):e},a.addToCache=function(e,t){t&&(-1===e.textureCacheIds.indexOf(t)&&e.textureCacheIds.push(t),s.BaseTextureCache[t]&&console.warn("BaseTexture added to the cache with an id ["+t+"] that already had an entry"),s.BaseTextureCache[t]=e)},a.removeFromCache=function(e){if("string"==typeof e){var t=s.BaseTextureCache[e];if(t){var r=t.textureCacheIds.indexOf(e);return-1<r&&t.textureCacheIds.splice(r,1),delete s.BaseTextureCache[e],t}}else if(e&&e.textureCacheIds){for(var n=0;n<e.textureCacheIds.length;++n)delete s.BaseTextureCache[e.textureCacheIds[n]];return e.textureCacheIds.length=0,e}return null},a}(n.default);r.default=a},{"../settings":275,"../utils":299,"../utils/determineCrossOrigin":298,"bit-twiddle":176,eventemitter3:179}],287:[function(e,t,r){r.__esModule=!0;var c=n(e("./BaseRenderTexture"));function n(e){return e&&e.__esModule?e:{default:e}}var i=function(l){function u(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u);var r=null;if(!(e instanceof c.default)){var n=arguments[1],i=arguments[2],o=arguments[3],a=arguments[4];console.warn("Please use RenderTexture.create("+n+", "+i+") instead of the ctor directly."),r=arguments[0],t=null,e=new c.default(n,i,o,a)}var s=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==_typeof2(t)&&"function"!=typeof t?e:t}(this,l.call(this,e,t));return s.legacyRenderer=r,s.valid=!0,s._updateUvs(),s}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+_typeof2(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(u,l),u.prototype.resize=function(e,t,r){e=Math.ceil(e),t=Math.ceil(t),this.valid=0<e&&0<t,this._frame.width=this.orig.width=e,this._frame.height=this.orig.height=t,r||this.baseTexture.resize(e,t),this._updateUvs()},u.create=function(e,t,r,n){return new u(new c.default(e,t,r,n))},u}(n(e("./Texture")).default);r.default=i},{"./BaseRenderTexture":285,"./Texture":289}],288:[function(e,t,r){r.__esModule=!0;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),d=e("../"),i=e("../utils");var o=function(){function h(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,h),this.baseTexture=e,this.textures={},this.animations={},this.data=t,this.resolution=this._updateResolution(r||this.baseTexture.imageUrl),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}return n(h,null,[{key:"BATCH_SIZE",get:function(){return 1e3}}]),h.prototype._updateResolution=function(e){var t=this.data.meta.scale,r=(0,i.getResolutionOfUrl)(e,null);return null===r&&(r=void 0!==t?parseFloat(t):1),1!==r&&(this.baseTexture.resolution=r,this.baseTexture.update()),r},h.prototype.parse=function(e){this._batchIndex=0,this._callback=e,this._frameKeys.length<=h.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()},h.prototype._processFrames=function(e){for(var t=e,r=h.BATCH_SIZE,n=this.baseTexture.sourceScale;t-e<r&&t<this._frameKeys.length;){var i=this._frameKeys[t],o=this._frames[i],a=o.frame;if(a){var s=null,l=null,u=!1!==o.trimmed&&o.sourceSize?o.sourceSize:o.frame,c=new d.Rectangle(0,0,Math.floor(u.w*n)/this.resolution,Math.floor(u.h*n)/this.resolution);s=o.rotated?new d.Rectangle(Math.floor(a.x*n)/this.resolution,Math.floor(a.y*n)/this.resolution,Math.floor(a.h*n)/this.resolution,Math.floor(a.w*n)/this.resolution):new d.Rectangle(Math.floor(a.x*n)/this.resolution,Math.floor(a.y*n)/this.resolution,Math.floor(a.w*n)/this.resolution,Math.floor(a.h*n)/this.resolution),!1!==o.trimmed&&o.spriteSourceSize&&(l=new d.Rectangle(Math.floor(o.spriteSourceSize.x*n)/this.resolution,Math.floor(o.spriteSourceSize.y*n)/this.resolution,Math.floor(a.w*n)/this.resolution,Math.floor(a.h*n)/this.resolution)),this.textures[i]=new d.Texture(this.baseTexture,s,c,l,o.rotated?2:0,o.anchor),d.Texture.addToCache(this.textures[i],i)}t++}},h.prototype._processAnimations=function(){var e=this.data.animations||{};for(var t in e){this.animations[t]=[];var r=e[t],n=Array.isArray(r),i=0;for(r=n?r:r[Symbol.iterator]();;){var o;if(n){if(i>=r.length)break;o=r[i++]}else{if((i=r.next()).done)break;o=i.value}var a=o;this.animations[t].push(this.textures[a])}}},h.prototype._parseComplete=function(){var e=this._callback;this._callback=null,this._batchIndex=0,e.call(this,this.textures)},h.prototype._nextBatch=function(){var e=this;this._processFrames(this._batchIndex*h.BATCH_SIZE),this._batchIndex++,setTimeout(function(){e._batchIndex*h.BATCH_SIZE<e._frameKeys.length?e._nextBatch():(e._processAnimations(),e._parseComplete())},0)},h.prototype.destroy=function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0];for(var t in this.textures)this.textures[t].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,e&&this.baseTexture.destroy(),this.baseTexture=null},h}();r.default=o},{"../":239,"../utils":299}],289:[function(e,t,r){r.__esModule=!0;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),o=l(e("./BaseTexture")),i=l(e("./VideoBaseTexture")),a=l(e("./TextureUvs")),s=l(e("eventemitter3")),u=e("../math"),c=e("../utils"),h=l(e("../settings"));function l(e){return e&&e.__esModule?e:{default:e}}var d=function(s){function l(e,t,r,n,i,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==_typeof2(t)&&"function"!=typeof t?e:t}(this,s.call(this));if(a.noFrame=!1,t||(a.noFrame=!0,t=new u.Rectangle(0,0,1,1)),e instanceof l&&(e=e.baseTexture),a.baseTexture=e,a._frame=t,a.trim=n,a.valid=!1,a.requiresUpdate=!1,a._uvs=null,a.orig=r||t,a._rotate=Number(i||0),!0===i)a._rotate=2;else if(a._rotate%2!=0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");return e.hasLoaded?(a.noFrame&&(t=new u.Rectangle(0,0,e.width,e.height),e.on("update",a.onBaseTextureUpdated,a)),a.frame=t):e.once("loaded",a.onBaseTextureLoaded,a),a.defaultAnchor=o?new u.Point(o.x,o.y):new u.Point(0,0),a._updateID=0,a.transform=null,a.textureCacheIds=[],a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+_typeof2(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(l,s),l.prototype.update=function(){this.baseTexture.update()},l.prototype.onBaseTextureLoaded=function(e){this._updateID++,this.noFrame?this.frame=new u.Rectangle(0,0,e.width,e.height):this.frame=this._frame,this.baseTexture.on("update",this.onBaseTextureUpdated,this),this.emit("update",this)},l.prototype.onBaseTextureUpdated=function(e){this._updateID++,this._frame.width=e.width,this._frame.height=e.height,this.emit("update",this)},l.prototype.destroy=function(e){this.baseTexture&&(e&&(c.TextureCache[this.baseTexture.imageUrl]&&l.removeFromCache(this.baseTexture.imageUrl),this.baseTexture.destroy()),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture.off("loaded",this.onBaseTextureLoaded,this),this.baseTexture=null),this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,l.removeFromCache(this),this.textureCacheIds=null},l.prototype.clone=function(){return new l(this.baseTexture,this.frame,this.orig,this.trim,this.rotate,this.defaultAnchor)},l.prototype._updateUvs=function(){this._uvs||(this._uvs=new a.default),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++},l.fromImage=function(e,t,r,n){var i=c.TextureCache[e];return i||(i=new l(o.default.fromImage(e,t,r,n)),l.addToCache(i,e)),i},l.fromFrame=function(e){var t=c.TextureCache[e];if(!t)throw new Error('The frameId "'+e+'" does not exist in the texture cache');return t},l.fromCanvas=function(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"canvas";return new l(o.default.fromCanvas(e,t,r))},l.fromVideo=function(e,t,r,n){return"string"==typeof e?l.fromVideoUrl(e,t,r,n):new l(i.default.fromVideo(e,t,n))},l.fromVideoUrl=function(e,t,r,n){return new l(i.default.fromUrl(e,t,r,n))},l.from=function(e){if("string"!=typeof e)return e instanceof HTMLImageElement?new l(o.default.from(e)):e instanceof HTMLCanvasElement?l.fromCanvas(e,h.default.SCALE_MODE,"HTMLCanvasElement"):e instanceof HTMLVideoElement?l.fromVideo(e):e instanceof o.default?new l(e):e;var t=c.TextureCache[e];return t||(null!==e.match(/\.(mp4|webm|ogg|h264|avi|mov)$/)?l.fromVideoUrl(e):l.fromImage(e))},l.fromLoader=function(e,t,r){var n=new o.default(e,void 0,(0,c.getResolutionOfUrl)(t)),i=new l(n);return n.imageUrl=t,r||(r=t),o.default.addToCache(i.baseTexture,r),l.addToCache(i,r),r!==t&&(o.default.addToCache(i.baseTexture,t),l.addToCache(i,t)),i},l.addToCache=function(e,t){t&&(-1===e.textureCacheIds.indexOf(t)&&e.textureCacheIds.push(t),c.TextureCache[t]&&console.warn("Texture added to the cache with an id ["+t+"] that already had an entry"),c.TextureCache[t]=e)},l.removeFromCache=function(e){if("string"==typeof e){var t=c.TextureCache[e];if(t){var r=t.textureCacheIds.indexOf(e);return-1<r&&t.textureCacheIds.splice(r,1),delete c.TextureCache[e],t}}else if(e&&e.textureCacheIds){for(var n=0;n<e.textureCacheIds.length;++n)c.TextureCache[e.textureCacheIds[n]]===e&&delete c.TextureCache[e.textureCacheIds[n]];return e.textureCacheIds.length=0,e}return null},n(l,[{key:"frame",get:function(){return this._frame},set:function(e){this._frame=e,this.noFrame=!1;var t=e.x,r=e.y,n=e.width,i=e.height,o=t+n>this.baseTexture.width,a=r+i>this.baseTexture.height;if(o||a){var s=o&&a?"and":"or",l="X: "+t+" + "+n+" = "+(t+n)+" > "+this.baseTexture.width,u="Y: "+r+" + "+i+" = "+(r+i)+" > "+this.baseTexture.height;throw new Error("Texture Error: frame does not fit inside the base Texture dimensions: "+l+" "+s+" "+u)}this.valid=n&&i&&this.baseTexture.hasLoaded,this.trim||this.rotate||(this.orig=e),this.valid&&this._updateUvs()}},{key:"rotate",get:function(){return this._rotate},set:function(e){this._rotate=e,this.valid&&this._updateUvs()}},{key:"width",get:function(){return this.orig.width}},{key:"height",get:function(){return this.orig.height}}]),l}(s.default);function p(e){e.destroy=function(){},e.on=function(){},e.once=function(){},e.emit=function(){}}(r.default=d).EMPTY=new d(new o.default),p(d.EMPTY),p(d.EMPTY.baseTexture),d.WHITE=function(){var e=document.createElement("canvas");e.width=10,e.height=10;var t=e.getContext("2d");return t.fillStyle="white",t.fillRect(0,0,10,10),new d(new o.default(e))}(),p(d.WHITE),p(d.WHITE.baseTexture)},{"../math":244,"../settings":275,"../utils":299,"./BaseTexture":286,"./TextureUvs":291,"./VideoBaseTexture":292,eventemitter3:179}],290:[function(e,t,r){r.__esModule=!0;var n,i=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),o=e("../math/Matrix"),a=(n=o)&&n.__esModule?n:{default:n};var u=new a.default,s=function(){function r(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),this._texture=e,this.mapCoord=new a.default,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._lastTextureID=-1,this.clampOffset=0,this.clampMargin=void 0===t?.5:t}return r.prototype.multiplyUvs=function(e,t){void 0===t&&(t=e);for(var r=this.mapCoord,n=0;n<e.length;n+=2){var i=e[n],o=e[n+1];t[n]=i*r.a+o*r.c+r.tx,t[n+1]=i*r.b+o*r.d+r.ty}return t},r.prototype.update=function(e){var t=this._texture;if(!t||!t.valid)return!1;if(!e&&this._lastTextureID===t._updateID)return!1;this._lastTextureID=t._updateID;var r=t._uvs;this.mapCoord.set(r.x1-r.x0,r.y1-r.y0,r.x3-r.x0,r.y3-r.y0,r.x0,r.y0);var n=t.orig,i=t.trim;i&&(u.set(n.width/i.width,0,0,n.height/i.height,-i.x/i.width,-i.y/i.height),this.mapCoord.append(u));var o=t.baseTexture,a=this.uClampFrame,s=this.clampMargin/o.resolution,l=this.clampOffset;return a[0]=(t._frame.x+s+l)/o.width,a[1]=(t._frame.y+s+l)/o.height,a[2]=(t._frame.x+t._frame.width-s+l)/o.width,a[3]=(t._frame.y+t._frame.height-s+l)/o.height,this.uClampOffset[0]=l/o.realWidth,this.uClampOffset[1]=l/o.realHeight,!0},i(r,[{key:"texture",get:function(){return this._texture},set:function(e){this._texture=e,this._lastTextureID=-1}}]),r}();r.default=s},{"../math/Matrix":241}],291:[function(e,t,r){r.__esModule=!0;var n,i=e("../math/GroupD8"),u=(n=i)&&n.__esModule?n:{default:n};var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsUint32=new Uint32Array(4)}return e.prototype.set=function(e,t,r){var n=t.width,i=t.height;if(r){var o=e.width/2/n,a=e.height/2/i,s=e.x/n+o,l=e.y/i+a;r=u.default.add(r,u.default.NW),this.x0=s+o*u.default.uX(r),this.y0=l+a*u.default.uY(r),r=u.default.add(r,2),this.x1=s+o*u.default.uX(r),this.y1=l+a*u.default.uY(r),r=u.default.add(r,2),this.x2=s+o*u.default.uX(r),this.y2=l+a*u.default.uY(r),r=u.default.add(r,2),this.x3=s+o*u.default.uX(r),this.y3=l+a*u.default.uY(r)}else this.x0=e.x/n,this.y0=e.y/i,this.x1=(e.x+e.width)/n,this.y1=e.y/i,this.x2=(e.x+e.width)/n,this.y2=(e.y+e.height)/i,this.x3=e.x/n,this.y3=(e.y+e.height)/i;this.uvsUint32[0]=(65535&Math.round(65535*this.y0))<<16|65535&Math.round(65535*this.x0),this.uvsUint32[1]=(65535&Math.round(65535*this.y1))<<16|65535&Math.round(65535*this.x1),this.uvsUint32[2]=(65535&Math.round(65535*this.y2))<<16|65535&Math.round(65535*this.x2),this.uvsUint32[3]=(65535&Math.round(65535*this.y3))<<16|65535&Math.round(65535*this.x3)},e}();r.default=o},{"../math/GroupD8":240}],292:[function(e,t,r){r.__esModule=!0;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),o=i(e("./BaseTexture")),a=e("../utils"),l=e("../ticker"),u=e("../const"),c=i(e("../utils/determineCrossOrigin"));function i(e){return e&&e.__esModule?e:{default:e}}var s=function(i){function s(e,t){var r=!(2<arguments.length&&void 0!==arguments[2])||arguments[2];if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),!e)throw new Error("No video source element specified.");(e.readyState===e.HAVE_ENOUGH_DATA||e.readyState===e.HAVE_FUTURE_DATA)&&e.width&&e.height&&(e.complete=!0);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==_typeof2(t)&&"function"!=typeof t?e:t}(this,i.call(this,e,t));return n.width=e.videoWidth,n.height=e.videoHeight,n._autoUpdate=!0,n._isAutoUpdating=!1,n.autoPlay=r,n.update=n.update.bind(n),n._onCanPlay=n._onCanPlay.bind(n),e.addEventListener("play",n._onPlayStart.bind(n)),e.addEventListener("pause",n._onPlayStop.bind(n)),n.hasLoaded=!1,n.__loaded=!1,n._isSourceReady()?n._onCanPlay():(e.addEventListener("canplay",n._onCanPlay),e.addEventListener("canplaythrough",n._onCanPlay)),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+_typeof2(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(s,i),s.prototype._isSourcePlaying=function(){var e=this.source;return 0<e.currentTime&&!1===e.paused&&!1===e.ended&&2<e.readyState},s.prototype._isSourceReady=function(){return 3===this.source.readyState||4===this.source.readyState},s.prototype._onPlayStart=function(){this.hasLoaded||this._onCanPlay(),!this._isAutoUpdating&&this.autoUpdate&&(l.shared.add(this.update,this,u.UPDATE_PRIORITY.HIGH),this._isAutoUpdating=!0)},s.prototype._onPlayStop=function(){this._isAutoUpdating&&(l.shared.remove(this.update,this),this._isAutoUpdating=!1)},s.prototype._onCanPlay=function(){this.hasLoaded=!0,this.source&&(this.source.removeEventListener("canplay",this._onCanPlay),this.source.removeEventListener("canplaythrough",this._onCanPlay),this.width=this.source.videoWidth,this.height=this.source.videoHeight,this.__loaded||(this.__loaded=!0,this.emit("loaded",this)),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&this.source.play())},s.prototype.destroy=function(){this._isAutoUpdating&&l.shared.remove(this.update,this),this.source&&this.source._pixiId&&(o.default.removeFromCache(this.source._pixiId),delete this.source._pixiId,this.source.pause(),this.source.src="",this.source.load()),i.prototype.destroy.call(this)},s.fromVideo=function(e,t,r){e._pixiId||(e._pixiId="video_"+(0,a.uid)());var n=a.BaseTextureCache[e._pixiId];return n||(n=new s(e,t,r),o.default.addToCache(n,e._pixiId)),n},s.fromUrl=function(e,t,r,n){var i=document.createElement("video");i.setAttribute("webkit-playsinline",""),i.setAttribute("playsinline","");var o=Array.isArray(e)?e[0].src||e[0]:e.src||e;if(void 0===r&&0!==o.indexOf("data:")?i.crossOrigin=(0,c.default)(o):r&&(i.crossOrigin="string"==typeof r?r:"anonymous"),Array.isArray(e))for(var a=0;a<e.length;++a)i.appendChild(h(e[a].src||e[a],e[a].mime));else i.appendChild(h(o,e.mime));return i.load(),s.fromVideo(i,t,n)},n(s,[{key:"autoUpdate",get:function(){return this._autoUpdate},set:function(e){e!==this._autoUpdate&&(this._autoUpdate=e,!this._autoUpdate&&this._isAutoUpdating?(l.shared.remove(this.update,this),this._isAutoUpdating=!1):this._autoUpdate&&!this._isAutoUpdating&&(l.shared.add(this.update,this,u.UPDATE_PRIORITY.HIGH),this._isAutoUpdating=!0))}}]),s}(o.default);function h(e,t){if(!t){var r=e.split("?").shift().toLowerCase();t="video/"+r.substr(r.lastIndexOf(".")+1)}var n=document.createElement("source");return n.src=e,n.type=t,n}(r.default=s).fromUrls=s.fromUrl},{"../const":220,"../ticker":295,"../utils":299,"../utils/determineCrossOrigin":298,"./BaseTexture":286}],293:[function(e,t,r){r.__esModule=!0;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=s(e("../settings")),o=e("../const"),a=s(e("./TickerListener"));function s(e){return e&&e.__esModule?e:{default:e}}var l=function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._head=new a.default(null,null,1/0),this._requestId=null,this._maxElapsedMS=100,this.autoStart=!1,this.deltaTime=1,this.elapsedMS=1/i.default.TARGET_FPMS,this.lastTime=-1,this.speed=1,this.started=!1,this._tick=function(e){t._requestId=null,t.started&&(t.update(e),t.started&&null===t._requestId&&t._head.next&&(t._requestId=requestAnimationFrame(t._tick)))}}return e.prototype._requestIfNeeded=function(){null===this._requestId&&this._head.next&&(this.lastTime=performance.now(),this._requestId=requestAnimationFrame(this._tick))},e.prototype._cancelIfNeeded=function(){null!==this._requestId&&(cancelAnimationFrame(this._requestId),this._requestId=null)},e.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},e.prototype.add=function(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:o.UPDATE_PRIORITY.NORMAL;return this._addListener(new a.default(e,t,r))},e.prototype.addOnce=function(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:o.UPDATE_PRIORITY.NORMAL;return this._addListener(new a.default(e,t,r,!0))},e.prototype._addListener=function(e){var t=this._head.next,r=this._head;if(t){for(;t;){if(e.priority>t.priority){e.connect(r);break}t=(r=t).next}e.previous||e.connect(r)}else e.connect(r);return this._startIfPossible(),this},e.prototype.remove=function(e,t){for(var r=this._head.next;r;)r=r.match(e,t)?r.destroy():r.next;return this._head.next||this._cancelIfNeeded(),this},e.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},e.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},e.prototype.destroy=function(){this.stop();for(var e=this._head.next;e;)e=e.destroy(!0);this._head.destroy(),this._head=null},e.prototype.update=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:performance.now(),t=void 0;if(e>this.lastTime){(t=this.elapsedMS=e-this.lastTime)>this._maxElapsedMS&&(t=this._maxElapsedMS),this.deltaTime=t*i.default.TARGET_FPMS*this.speed;for(var r=this._head,n=r.next;n;)n=n.emit(this.deltaTime);r.next||this._cancelIfNeeded()}else this.deltaTime=this.elapsedMS=0;this.lastTime=e},n(e,[{key:"FPS",get:function(){return 1e3/this.elapsedMS}},{key:"minFPS",get:function(){return 1e3/this._maxElapsedMS},set:function(e){var t=Math.min(Math.max(0,e)/1e3,i.default.TARGET_FPMS);this._maxElapsedMS=1/t}}]),e}();r.default=l},{"../const":220,"../settings":275,"./TickerListener":294}],294:[function(e,t,r){r.__esModule=!0;var n=function(){function i(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,n=3<arguments.length&&void 0!==arguments[3]&&arguments[3];!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),this.fn=e,this.context=t,this.priority=r,this.once=n,this.next=null,this.previous=null,this._destroyed=!1}return i.prototype.match=function(e,t){return t=t||null,this.fn===e&&this.context===t},i.prototype.emit=function(e){this.fn&&(this.context?this.fn.call(this.context,e):this.fn(e));var t=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),t},i.prototype.connect=function(e){(this.previous=e).next&&(e.next.previous=this),this.next=e.next,e.next=this},i.prototype.destroy=function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0];this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);var t=this.next;return this.next=e?null:t,this.previous=null,t},i}();r.default=n},{}],295:[function(e,t,r){r.__esModule=!0,r.Ticker=r.shared=void 0;var n,i=e("./Ticker"),o=(n=i)&&n.__esModule?n:{default:n};var a=new o.default;a.autoStart=!0,a.destroy=function(){},r.shared=a,r.Ticker=o.default},{"./Ticker":293}],296:[function(e,t,r){r.__esModule=!0,r.default=function(){return!(navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform))}},{}],297:[function(e,t,r){r.__esModule=!0,r.default=function(e){for(var t=6*e,r=new Uint16Array(t),n=0,i=0;n<t;n+=6,i+=4)r[n+0]=i+0,r[n+1]=i+1,r[n+2]=i+2,r[n+3]=i+0,r[n+4]=i+2,r[n+5]=i+3;return r}},{}],298:[function(e,t,r){r.__esModule=!0,r.default=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:window.location;if(0===e.indexOf("data:"))return"";t=t||window.location,a||(a=document.createElement("a"));a.href=e;var r=!(e=o.default.parse(a.href)).port&&""===t.port||e.port===t.port;return e.hostname===t.hostname&&r&&e.protocol===t.protocol?"":"anonymous"};var n,i=e("url"),o=(n=i)&&n.__esModule?n:{default:n};var a=void 0},{url:188}],299:[function(e,t,r){r.__esModule=!0,r.premultiplyBlendMode=r.BaseTextureCache=r.TextureCache=r.earcut=r.mixins=r.pluginTarget=r.EventEmitter=r.removeItems=r.isMobile=void 0,r.uid=function(){return++f},r.hex2rgb=function(e,t){return(t=t||[])[0]=(e>>16&255)/255,t[1]=(e>>8&255)/255,t[2]=(255&e)/255,t},r.hex2string=function(e){return e=e.toString(16),"#"+(e="000000".substr(0,6-e.length)+e)},r.rgb2hex=function(e){return(255*e[0]<<16)+(255*e[1]<<8)+(255*e[2]|0)},r.getResolutionOfUrl=function(e,t){var r=i.default.RETINA_PREFIX.exec(e);if(r)return parseFloat(r[1]);return void 0!==t?t:1},r.decomposeDataUri=function(e){var t=n.DATA_URI.exec(e);if(t)return{mediaType:t[1]?t[1].toLowerCase():void 0,subType:t[2]?t[2].toLowerCase():void 0,charset:t[3]?t[3].toLowerCase():void 0,encoding:t[4]?t[4].toLowerCase():void 0,data:t[5]};return},r.getUrlFileExtension=function(e){var t=n.URL_FILE_EXTENSION.exec(e);if(t)return t[1].toLowerCase();return},r.getSvgSize=function(e){var t=n.SVG_SIZE.exec(e),r={};t&&(r[t[1]]=Math.round(parseFloat(t[3])),r[t[5]]=Math.round(parseFloat(t[7])));return r},r.skipHello=function(){m=!0},r.sayHello=function(e){if(m)return;if(-1<navigator.userAgent.toLowerCase().indexOf("chrome")){var t=["\n %c %c %c PixiJS "+n.VERSION+" -  "+e+"   %c  %c  http://www.pixijs.com/  %c %c %c%c \n\n","background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"];window.console.log.apply(console,t)}else window.console&&window.console.log("PixiJS "+n.VERSION+" - "+e+" - http://www.pixijs.com/");m=!0},r.isWebGLSupported=function(){var e={stencil:!0,failIfMajorPerformanceCaveat:!0};try{if(!window.WebGLRenderingContext)return!1;var t=document.createElement("canvas"),r=t.getContext("webgl",e)||t.getContext("experimental-webgl",e),n=!(!r||!r.getContextAttributes().stencil);if(r){var i=r.getExtension("WEBGL_lose_context");i&&i.loseContext()}return r=null,n}catch(e){return!1}},r.sign=function(e){return 0===e?0:e<0?-1:1},r.destroyTextureCache=function(){var e=void 0;for(e in v)v[e].destroy();for(e in b)b[e].destroy()},r.clearTextureCache=function(){var e=void 0;for(e in v)delete v[e];for(e in b)delete b[e]},r.correctBlendMode=function(e,t){return y[t?1:0][e]},r.premultiplyTint=function(e,t){if(1===t)return(255*t<<24)+e;if(0===t)return 0;var r=e>>16&255,n=e>>8&255,i=255&e;return(255*t<<24)+((r=r*t+.5|0)<<16)+((n=n*t+.5|0)<<8)+(i=i*t+.5|0)},r.premultiplyRgba=function(e,t,r,n){r=r||new Float32Array(4),r[2]=n||void 0===n?(r[0]=e[0]*t,r[1]=e[1]*t,e[2]*t):(r[0]=e[0],r[1]=e[1],e[2]);return r[3]=t,r},r.premultiplyTintToRgba=function(e,t,r,n){(r=r||new Float32Array(4))[0]=(e>>16&255)/255,r[1]=(e>>8&255)/255,r[2]=(255&e)/255,(n||void 0===n)&&(r[0]*=t,r[1]*=t,r[2]*=t);return r[3]=t,r};var n=e("../const"),i=p(e("../settings")),o=p(e("eventemitter3")),a=p(e("./pluginTarget")),s=d(e("./mixin")),l=d(e("ismobilejs")),u=p(e("remove-array-items")),c=p(e("./mapPremultipliedBlendModes")),h=p(e("earcut"));function d(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function p(e){return e&&e.__esModule?e:{default:e}}var f=0,m=!1;r.isMobile=l,r.removeItems=u.default,r.EventEmitter=o.default,r.pluginTarget=a.default,r.mixins=s,r.earcut=h.default;var v=r.TextureCache=Object.create(null),b=r.BaseTextureCache=Object.create(null);var y=r.premultiplyBlendMode=(0,c.default)()},{"../const":220,"../settings":275,"./mapPremultipliedBlendModes":300,"./mixin":302,"./pluginTarget":303,earcut:178,eventemitter3:179,ismobilejs:191,"remove-array-items":364}],300:[function(e,t,r){r.__esModule=!0,r.default=function(){for(var e=[],t=[],r=0;r<32;r++)e[r]=r,t[r]=r;e[i.BLEND_MODES.NORMAL_NPM]=i.BLEND_MODES.NORMAL,e[i.BLEND_MODES.ADD_NPM]=i.BLEND_MODES.ADD,e[i.BLEND_MODES.SCREEN_NPM]=i.BLEND_MODES.SCREEN,t[i.BLEND_MODES.NORMAL]=i.BLEND_MODES.NORMAL_NPM,t[i.BLEND_MODES.ADD]=i.BLEND_MODES.ADD_NPM,t[i.BLEND_MODES.SCREEN]=i.BLEND_MODES.SCREEN_NPM;var n=[];return n.push(t),n.push(e),n};var i=e("../const")},{"../const":220}],301:[function(e,t,r){r.__esModule=!0,r.default=function(e){if(o.default.tablet||o.default.phone)return 4;return e};var n,i=e("ismobilejs"),o=(n=i)&&n.__esModule?n:{default:n}},{ismobilejs:191}],302:[function(e,t,r){function n(e,t){if(e&&t)for(var r=Object.keys(t),n=0;n<r.length;++n){var i=r[n];Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(t,i))}}r.__esModule=!0,r.mixin=n,r.delayMixin=function(e,t){i.push(e,t)},r.performMixins=function(){for(var e=0;e<i.length;e+=2)n(i[e],i[e+1]);i.length=0};var i=[]},{}],303:[function(e,t,r){r.__esModule=!0,r.default={mixin:function(e){var r;(r=e).__plugins={},r.registerPlugin=function(e,t){r.__plugins[e]=t},r.prototype.initPlugins=function(){for(var e in this.plugins=this.plugins||{},r.__plugins)this.plugins[e]=new r.__plugins[e](this)},r.prototype.destroyPlugins=function(){for(var e in this.plugins)this.plugins[e].destroy(),this.plugins[e]=null;this.plugins=null}}}},{}],304:[function(e,t,r){r.__esModule=!0,r.default=function(e){var t=e.width,r=e.height,n=e.getContext("2d"),i=n.getImageData(0,0,t,r).data,o=i.length,a={top:null,left:null,right:null,bottom:null},s=null,l=void 0,u=void 0,c=void 0;for(l=0;l<o;l+=4)0!==i[l+3]&&(u=l/4%t,c=~~(l/4/t),null===a.top&&(a.top=c),null===a.left?a.left=u:u<a.left&&(a.left=u),null===a.right?a.right=u+1:a.right<u&&(a.right=u+1),null===a.bottom?a.bottom=c:a.bottom<c&&(a.bottom=c));null!==a.top&&(t=a.right-a.left,r=a.bottom-a.top+1,s=n.getImageData(a.left,a.top,t,r));return{height:r,width:t,data:s}}},{}],305:[function(e,t,r){r.__esModule=!0,r.default=function(r){var e=r.mesh,t=r.particles,n=r.extras,i=r.filters,o=r.prepare,a=r.loaders,s=r.interaction;Object.defineProperties(r,{SpriteBatch:{get:function(){throw new ReferenceError("SpriteBatch does not exist any more, please use the new ParticleContainer instead.")}},AssetLoader:{get:function(){throw new ReferenceError("The loader system was overhauled in PixiJS v3, please see the new PIXI.loaders.Loader class.")}},Stage:{get:function(){return f("You do not need to use a PIXI Stage any more, you can simply render any container."),r.Container}},DisplayObjectContainer:{get:function(){return f("DisplayObjectContainer has been shortened to Container, please use Container from now on."),r.Container}},Strip:{get:function(){return f("The Strip class has been renamed to Mesh and moved to mesh.Mesh, please use mesh.Mesh from now on."),e.Mesh}},Rope:{get:function(){return f("The Rope class has been moved to mesh.Rope, please use mesh.Rope from now on."),e.Rope}},ParticleContainer:{get:function(){return f("The ParticleContainer class has been moved to particles.ParticleContainer, please use particles.ParticleContainer from now on."),t.ParticleContainer}},MovieClip:{get:function(){return f("The MovieClip class has been moved to extras.AnimatedSprite, please use extras.AnimatedSprite."),n.AnimatedSprite}},TilingSprite:{get:function(){return f("The TilingSprite class has been moved to extras.TilingSprite, please use extras.TilingSprite from now on."),n.TilingSprite}},BitmapText:{get:function(){return f("The BitmapText class has been moved to extras.BitmapText, please use extras.BitmapText from now on."),n.BitmapText}},blendModes:{get:function(){return f("The blendModes has been moved to BLEND_MODES, please use BLEND_MODES from now on."),r.BLEND_MODES}},scaleModes:{get:function(){return f("The scaleModes has been moved to SCALE_MODES, please use SCALE_MODES from now on."),r.SCALE_MODES}},BaseTextureCache:{get:function(){return f("The BaseTextureCache class has been moved to utils.BaseTextureCache, please use utils.BaseTextureCache from now on."),r.utils.BaseTextureCache}},TextureCache:{get:function(){return f("The TextureCache class has been moved to utils.TextureCache, please use utils.TextureCache from now on."),r.utils.TextureCache}},math:{get:function(){return f("The math namespace is deprecated, please access members already accessible on PIXI."),r}},AbstractFilter:{get:function(){return f("AstractFilter has been renamed to Filter, please use PIXI.Filter"),r.Filter}},TransformManual:{get:function(){return f("TransformManual has been renamed to TransformBase, please update your pixi-spine"),r.TransformBase}},TARGET_FPMS:{get:function(){return f("PIXI.TARGET_FPMS has been deprecated, please use PIXI.settings.TARGET_FPMS"),r.settings.TARGET_FPMS},set:function(e){f("PIXI.TARGET_FPMS has been deprecated, please use PIXI.settings.TARGET_FPMS"),r.settings.TARGET_FPMS=e}},FILTER_RESOLUTION:{get:function(){return f("PIXI.FILTER_RESOLUTION has been deprecated, please use PIXI.settings.FILTER_RESOLUTION"),r.settings.FILTER_RESOLUTION},set:function(e){f("PIXI.FILTER_RESOLUTION has been deprecated, please use PIXI.settings.FILTER_RESOLUTION"),r.settings.FILTER_RESOLUTION=e}},RESOLUTION:{get:function(){return f("PIXI.RESOLUTION has been deprecated, please use PIXI.settings.RESOLUTION"),r.settings.RESOLUTION},set:function(e){f("PIXI.RESOLUTION has been deprecated, please use PIXI.settings.RESOLUTION"),r.settings.RESOLUTION=e}},MIPMAP_TEXTURES:{get:function(){return f("PIXI.MIPMAP_TEXTURES has been deprecated, please use PIXI.settings.MIPMAP_TEXTURES"),r.settings.MIPMAP_TEXTURES},set:function(e){f("PIXI.MIPMAP_TEXTURES has been deprecated, please use PIXI.settings.MIPMAP_TEXTURES"),r.settings.MIPMAP_TEXTURES=e}},SPRITE_BATCH_SIZE:{get:function(){return f("PIXI.SPRITE_BATCH_SIZE has been deprecated, please use PIXI.settings.SPRITE_BATCH_SIZE"),r.settings.SPRITE_BATCH_SIZE},set:function(e){f("PIXI.SPRITE_BATCH_SIZE has been deprecated, please use PIXI.settings.SPRITE_BATCH_SIZE"),r.settings.SPRITE_BATCH_SIZE=e}},SPRITE_MAX_TEXTURES:{get:function(){return f("PIXI.SPRITE_MAX_TEXTURES has been deprecated, please use PIXI.settings.SPRITE_MAX_TEXTURES"),r.settings.SPRITE_MAX_TEXTURES},set:function(e){f("PIXI.SPRITE_MAX_TEXTURES has been deprecated, please use PIXI.settings.SPRITE_MAX_TEXTURES"),r.settings.SPRITE_MAX_TEXTURES=e}},RETINA_PREFIX:{get:function(){return f("PIXI.RETINA_PREFIX has been deprecated, please use PIXI.settings.RETINA_PREFIX"),r.settings.RETINA_PREFIX},set:function(e){f("PIXI.RETINA_PREFIX has been deprecated, please use PIXI.settings.RETINA_PREFIX"),r.settings.RETINA_PREFIX=e}},DEFAULT_RENDER_OPTIONS:{get:function(){return f("PIXI.DEFAULT_RENDER_OPTIONS has been deprecated, please use PIXI.settings.DEFAULT_RENDER_OPTIONS"),r.settings.RENDER_OPTIONS}}});for(var l=[{parent:"TRANSFORM_MODE",target:"TRANSFORM_MODE"},{parent:"GC_MODES",target:"GC_MODE"},{parent:"WRAP_MODES",target:"WRAP_MODE"},{parent:"SCALE_MODES",target:"SCALE_MODE"},{parent:"PRECISION",target:"PRECISION_FRAGMENT"}],u=function(e){var t=l[e];Object.defineProperty(r[t.parent],"DEFAULT",{get:function(){return f("PIXI."+t.parent+".DEFAULT has been deprecated, please use PIXI.settings."+t.target),r.settings[t.target]},set:function(e){f("PIXI."+t.parent+".DEFAULT has been deprecated, please use PIXI.settings."+t.target),r.settings[t.target]=e}})},c=0;c<l.length;c++)u(c);Object.defineProperties(r.settings,{PRECISION:{get:function(){return f("PIXI.settings.PRECISION has been deprecated, please use PIXI.settings.PRECISION_FRAGMENT"),r.settings.PRECISION_FRAGMENT},set:function(e){f("PIXI.settings.PRECISION has been deprecated, please use PIXI.settings.PRECISION_FRAGMENT"),r.settings.PRECISION_FRAGMENT=e}}}),n.AnimatedSprite&&Object.defineProperties(n,{MovieClip:{get:function(){return f("The MovieClip class has been renamed to AnimatedSprite, please use AnimatedSprite from now on."),n.AnimatedSprite}}});n&&Object.defineProperties(n,{TextureTransform:{get:function(){return f("The TextureTransform class has been renamed to TextureMatrix, please use PIXI.TextureMatrix from now on."),r.TextureMatrix}}});r.DisplayObject.prototype.generateTexture=function(e,t,r){return f("generateTexture has moved to the renderer, please use renderer.generateTexture(displayObject)"),e.generateTexture(this,t,r)},r.Graphics.prototype.generateTexture=function(e,t){return f("graphics generate texture has moved to the renderer. Or to render a graphics to a texture using canvas please use generateCanvasTexture"),this.generateCanvasTexture(e,t)},r.GroupD8.isSwapWidthHeight=function(e){return f("GroupD8.isSwapWidthHeight was renamed to GroupD8.isVertical"),r.GroupD8.isVertical(e)},r.RenderTexture.prototype.render=function(e,t,r,n){this.legacyRenderer.render(e,this,r,t,!n),f("RenderTexture.render is now deprecated, please use renderer.render(displayObject, renderTexture)")},r.RenderTexture.prototype.getImage=function(e){return f("RenderTexture.getImage is now deprecated, please use renderer.extract.image(target)"),this.legacyRenderer.extract.image(e)},r.RenderTexture.prototype.getBase64=function(e){return f("RenderTexture.getBase64 is now deprecated, please use renderer.extract.base64(target)"),this.legacyRenderer.extract.base64(e)},r.RenderTexture.prototype.getCanvas=function(e){return f("RenderTexture.getCanvas is now deprecated, please use renderer.extract.canvas(target)"),this.legacyRenderer.extract.canvas(e)},r.RenderTexture.prototype.getPixels=function(e){return f("RenderTexture.getPixels is now deprecated, please use renderer.extract.pixels(target)"),this.legacyRenderer.pixels(e)},r.Sprite.prototype.setTexture=function(e){this.texture=e,f("setTexture is now deprecated, please use the texture property, e.g : sprite.texture = texture;")},n.BitmapText&&(n.BitmapText.prototype.setText=function(e){this.text=e,f("setText is now deprecated, please use the text property, e.g : myBitmapText.text = 'my text';")});r.Text.prototype.setText=function(e){this.text=e,f("setText is now deprecated, please use the text property, e.g : myText.text = 'my text';")},r.Text.calculateFontProperties=function(e){return f("Text.calculateFontProperties is now deprecated, please use the TextMetrics.measureFont"),r.TextMetrics.measureFont(e)},Object.defineProperties(r.Text,{fontPropertiesCache:{get:function(){return f("Text.fontPropertiesCache is deprecated"),r.TextMetrics._fonts}},fontPropertiesCanvas:{get:function(){return f("Text.fontPropertiesCanvas is deprecated"),r.TextMetrics._canvas}},fontPropertiesContext:{get:function(){return f("Text.fontPropertiesContext is deprecated"),r.TextMetrics._context}}}),r.Text.prototype.setStyle=function(e){this.style=e,f("setStyle is now deprecated, please use the style property, e.g : myText.style = style;")},r.Text.prototype.determineFontProperties=function(e){return f("determineFontProperties is now deprecated, please use TextMetrics.measureFont method"),r.TextMetrics.measureFont(e)},r.Text.getFontStyle=function(e){return f("getFontStyle is now deprecated, please use TextStyle.toFontString() instead"),(e=e||{})instanceof r.TextStyle||(e=new r.TextStyle(e)),e.toFontString()},Object.defineProperties(r.TextStyle.prototype,{font:{get:function(){f("text style property 'font' is now deprecated, please use the 'fontFamily', 'fontSize', 'fontStyle', 'fontVariant' and 'fontWeight' properties from now on");var e="number"==typeof this._fontSize?this._fontSize+"px":this._fontSize;return this._fontStyle+" "+this._fontVariant+" "+this._fontWeight+" "+e+" "+this._fontFamily},set:function(e){f("text style property 'font' is now deprecated, please use the 'fontFamily','fontSize',fontStyle','fontVariant' and 'fontWeight' properties from now on"),1<e.indexOf("italic")?this._fontStyle="italic":-1<e.indexOf("oblique")?this._fontStyle="oblique":this._fontStyle="normal",-1<e.indexOf("small-caps")?this._fontVariant="small-caps":this._fontVariant="normal";var t=e.split(" "),r=-1;this._fontSize=26;for(var n=0;n<t.length;++n)if(t[n].match(/(px|pt|em|%)/)){r=n,this._fontSize=t[n];break}this._fontWeight="normal";for(var i=0;i<r;++i)if(t[i].match(/(bold|bolder|lighter|100|200|300|400|500|600|700|800|900)/)){this._fontWeight=t[i];break}if(-1<r&&r<t.length-1){this._fontFamily="";for(var o=r+1;o<t.length;++o)this._fontFamily+=t[o]+" ";this._fontFamily=this._fontFamily.slice(0,-1)}else this._fontFamily="Arial";this.styleID++}}}),r.Texture.prototype.setFrame=function(e){this.frame=e,f("setFrame is now deprecated, please use the frame property, e.g: myTexture.frame = frame;")},r.Texture.addTextureToCache=function(e,t){r.Texture.addToCache(e,t),f("Texture.addTextureToCache is deprecated, please use Texture.addToCache from now on.")},r.Texture.removeTextureFromCache=function(e){return f("Texture.removeTextureFromCache is deprecated, please use Texture.removeFromCache from now on. Be aware that Texture.removeFromCache does not automatically its BaseTexture from the BaseTextureCache. For that, use BaseTexture.removeFromCache"),r.BaseTexture.removeFromCache(e),r.Texture.removeFromCache(e)},Object.defineProperties(i,{AbstractFilter:{get:function(){return f("AstractFilter has been renamed to Filter, please use PIXI.Filter"),r.AbstractFilter}},SpriteMaskFilter:{get:function(){return f("filters.SpriteMaskFilter is an undocumented alias, please use SpriteMaskFilter from now on."),r.SpriteMaskFilter}},VoidFilter:{get:function(){return f("VoidFilter has been renamed to AlphaFilter, please use PIXI.filters.AlphaFilter"),i.AlphaFilter}}}),r.utils.uuid=function(){return f("utils.uuid() is deprecated, please use utils.uid() from now on."),r.utils.uid()},r.utils.canUseNewCanvasBlendModes=function(){return f("utils.canUseNewCanvasBlendModes() is deprecated, please use CanvasTinter.canUseMultiply from now on"),r.CanvasTinter.canUseMultiply};var h=!0;Object.defineProperty(r.utils,"_saidHello",{set:function(e){e&&(f("PIXI.utils._saidHello is deprecated, please use PIXI.utils.skipHello()"),this.skipHello()),h=e},get:function(){return h}}),o.BasePrepare&&(o.BasePrepare.prototype.register=function(e,t){return f("renderer.plugins.prepare.register is now deprecated, please use renderer.plugins.prepare.registerFindHook & renderer.plugins.prepare.registerUploadHook"),e&&this.registerFindHook(e),t&&this.registerUploadHook(t),this});o.canvas&&Object.defineProperty(o.canvas,"UPLOADS_PER_FRAME",{set:function(){f("PIXI.CanvasPrepare.UPLOADS_PER_FRAME has been removed. Please set renderer.plugins.prepare.limiter.maxItemsPerFrame on your renderer")},get:function(){return f("PIXI.CanvasPrepare.UPLOADS_PER_FRAME has been removed. Please use renderer.plugins.prepare.limiter"),NaN}});o.webgl&&Object.defineProperty(o.webgl,"UPLOADS_PER_FRAME",{set:function(){f("PIXI.WebGLPrepare.UPLOADS_PER_FRAME has been removed. Please set renderer.plugins.prepare.limiter.maxItemsPerFrame on your renderer")},get:function(){return f("PIXI.WebGLPrepare.UPLOADS_PER_FRAME has been removed. Please use renderer.plugins.prepare.limiter"),NaN}});if(a.Loader){var d=a.Resource,p=a.Loader;Object.defineProperties(d.prototype,{isJson:{get:function(){return f("The isJson property is deprecated, please use `resource.type === Resource.TYPE.JSON`."),this.type===d.TYPE.JSON}},isXml:{get:function(){return f("The isXml property is deprecated, please use `resource.type === Resource.TYPE.XML`."),this.type===d.TYPE.XML}},isImage:{get:function(){return f("The isImage property is deprecated, please use `resource.type === Resource.TYPE.IMAGE`."),this.type===d.TYPE.IMAGE}},isAudio:{get:function(){return f("The isAudio property is deprecated, please use `resource.type === Resource.TYPE.AUDIO`."),this.type===d.TYPE.AUDIO}},isVideo:{get:function(){return f("The isVideo property is deprecated, please use `resource.type === Resource.TYPE.VIDEO`."),this.type===d.TYPE.VIDEO}}}),Object.defineProperties(p.prototype,{before:{get:function(){return f("The before() method is deprecated, please use pre()."),this.pre}},after:{get:function(){return f("The after() method is deprecated, please use use()."),this.use}}})}s.interactiveTarget&&Object.defineProperty(s.interactiveTarget,"defaultCursor",{set:function(e){f("Property defaultCursor has been replaced with 'cursor'. "),this.cursor=e},get:function(){return f("Property defaultCursor has been replaced with 'cursor'. "),this.cursor}});s.InteractionManager&&(Object.defineProperty(s.InteractionManager,"defaultCursorStyle",{set:function(e){f("Property defaultCursorStyle has been replaced with 'cursorStyles.default'. "),this.cursorStyles.default=e},get:function(){return f("Property defaultCursorStyle has been replaced with 'cursorStyles.default'. "),this.cursorStyles.default}}),Object.defineProperty(s.InteractionManager,"currentCursorStyle",{set:function(e){f("Property currentCursorStyle has been removed.See the currentCursorMode property, which works differently."),this.currentCursorMode=e},get:function(){return f("Property currentCursorStyle has been removed.See the currentCursorMode property, which works differently."),this.currentCursorMode}}))};var n={};function f(e){if(!n[e]){var t=(new Error).stack;void 0===t?console.warn("Deprecation Warning: ",e):(t=t.split("\n").splice(3).join("\n"),console.groupCollapsed?(console.groupCollapsed("%cDeprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",e),console.warn(t),console.groupEnd()):(console.warn("Deprecation Warning: ",e),console.warn(t))),n[e]=!0}}},{}],306:[function(e,t,r){r.__esModule=!0;var c=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}}(e("../../core"));var h=new c.Rectangle,n=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(this.renderer=e).extract=this}return t.prototype.image=function(e){var t=new Image;return t.src=this.base64(e),t},t.prototype.base64=function(e){return this.canvas(e).toDataURL()},t.prototype.canvas=function(e){var t=this.renderer,r=void 0,n=void 0,i=void 0,o=void 0;e&&(o=e instanceof c.RenderTexture?e:t.generateTexture(e)),o?(r=o.baseTexture._canvasRenderTarget.context,n=o.baseTexture._canvasRenderTarget.resolution,i=o.frame):(r=t.rootContext,(i=h).width=this.renderer.width,i.height=this.renderer.height);var a=i.width*n,s=i.height*n,l=new c.CanvasRenderTarget(a,s,1),u=r.getImageData(i.x*n,i.y*n,a,s);return l.context.putImageData(u,0,0),l.canvas},t.prototype.pixels=function(e){var t=this.renderer,r=void 0,n=void 0,i=void 0,o=void 0;return e&&(o=e instanceof c.RenderTexture?e:t.generateTexture(e)),o?(r=o.baseTexture._canvasRenderTarget.context,n=o.baseTexture._canvasRenderTarget.resolution,i=o.frame):(r=t.rootContext,(i=h).width=t.width,i.height=t.height),r.getImageData(0,0,i.width*n,i.height*n).data},t.prototype.destroy=function(){this.renderer.extract=null,this.renderer=null},t}();r.default=n,c.CanvasRenderer.registerPlugin("extract",n)},{"../../core":239}],307:[function(e,t,r){r.__esModule=!0;var n=e("./webgl/WebGLExtract");Object.defineProperty(r,"webgl",{enumerable:!0,get:function(){return o(n).default}});var i=e("./canvas/CanvasExtract");function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"canvas",{enumerable:!0,get:function(){return o(i).default}})},{"./canvas/CanvasExtract":306,"./webgl/WebGLExtract":308}],308:[function(e,t,r){r.__esModule=!0;var f=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}}(e("../../core"));var m=new f.Rectangle,n=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(this.renderer=e).extract=this}return t.prototype.image=function(e){var t=new Image;return t.src=this.base64(e),t},t.prototype.base64=function(e){return this.canvas(e).toDataURL()},t.prototype.canvas=function(e){var t=this.renderer,r=void 0,n=void 0,i=void 0,o=!1,a=void 0,s=!1;e&&(e instanceof f.RenderTexture?a=e:(a=this.renderer.generateTexture(e),s=!0)),a?(n=(r=a.baseTexture._glRenderTargets[this.renderer.CONTEXT_UID]).resolution,i=a.frame,o=!1):(n=(r=this.renderer.rootRenderTarget).resolution,o=!0,(i=m).width=r.size.width,i.height=r.size.height);var l=i.width*n,u=i.height*n,c=new f.CanvasRenderTarget(l,u,1);if(r){t.bindRenderTarget(r);var h=new Uint8Array(4*l*u),d=t.gl;d.readPixels(i.x*n,i.y*n,l,u,d.RGBA,d.UNSIGNED_BYTE,h);var p=c.context.getImageData(0,0,l,u);p.data.set(h),c.context.putImageData(p,0,0),o&&(c.context.scale(1,-1),c.context.drawImage(c.canvas,0,-u))}return s&&a.destroy(!0),c.canvas},t.prototype.pixels=function(e){var t=this.renderer,r=void 0,n=void 0,i=void 0,o=void 0,a=!1;e&&(e instanceof f.RenderTexture?o=e:(o=this.renderer.generateTexture(e),a=!0)),o?(n=(r=o.baseTexture._glRenderTargets[this.renderer.CONTEXT_UID]).resolution,i=o.frame):(n=(r=this.renderer.rootRenderTarget).resolution,(i=m).width=r.size.width,i.height=r.size.height);var s=i.width*n,l=i.height*n,u=new Uint8Array(4*s*l);if(r){t.bindRenderTarget(r);var c=t.gl;c.readPixels(i.x*n,i.y*n,s,l,c.RGBA,c.UNSIGNED_BYTE,u)}return a&&o.destroy(!0),u},t.prototype.destroy=function(){this.renderer.extract=null,this.renderer=null},t}();r.default=n,f.WebGLRenderer.registerPlugin("extract",n)},{"../../core":239}],309:[function(e,t,r){r.__esModule=!0;var o=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),a=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}}(e("../core"));var n=function(n){function i(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==_typeof2(t)&&"function"!=typeof t?e:t}(this,n.call(this,e[0]instanceof a.Texture?e[0]:e[0].texture));return r._textures=null,r._durations=null,r.textures=e,r._autoUpdate=!1!==t,r.animationSpeed=1,r.loop=!0,r.onComplete=null,r.onFrameChange=null,r.onLoop=null,r._currentTime=0,r.playing=!1,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+_typeof2(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(i,n),i.prototype.stop=function(){this.playing&&(this.playing=!1,this._autoUpdate&&a.ticker.shared.remove(this.update,this))},i.prototype.play=function(){this.playing||(this.playing=!0,this._autoUpdate&&a.ticker.shared.add(this.update,this,a.UPDATE_PRIORITY.HIGH))},i.prototype.gotoAndStop=function(e){this.stop();var t=this.currentFrame;this._currentTime=e,t!==this.currentFrame&&this.updateTexture()},i.prototype.gotoAndPlay=function(e){var t=this.currentFrame;this._currentTime=e,t!==this.currentFrame&&this.updateTexture(),this.play()},i.prototype.update=function(e){var t=this.animationSpeed*e,r=this.currentFrame;if(null!==this._durations){var n=this._currentTime%1*this._durations[this.currentFrame];for(n+=t/60*1e3;n<0;)this._currentTime--,n+=this._durations[this.currentFrame];var i=Math.sign(this.animationSpeed*e);for(this._currentTime=Math.floor(this._currentTime);n>=this._durations[this.currentFrame];)n-=this._durations[this.currentFrame]*i,this._currentTime+=i;this._currentTime+=n/this._durations[this.currentFrame]}else this._currentTime+=t;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):r!==this.currentFrame&&(this.loop&&this.onLoop&&(0<this.animationSpeed&&this.currentFrame<r?this.onLoop():this.animationSpeed<0&&this.currentFrame>r&&this.onLoop()),this.updateTexture())},i.prototype.updateTexture=function(){this._texture=this._textures[this.currentFrame],this._textureID=-1,this.cachedTint=16777215,this.onFrameChange&&this.onFrameChange(this.currentFrame)},i.prototype.destroy=function(e){this.stop(),n.prototype.destroy.call(this,e)},i.fromFrames=function(e){for(var t=[],r=0;r<e.length;++r)t.push(a.Texture.fromFrame(e[r]));return new i(t)},i.fromImages=function(e){for(var t=[],r=0;r<e.length;++r)t.push(a.Texture.fromImage(e[r]));return new i(t)},o(i,[{key:"totalFrames",get:function(){return this._textures.length}},{key:"textures",get:function(){return this._textures},set:function(e){if(e[0]instanceof a.Texture)this._textures=e,this._durations=null;else{this._textures=[],this._durations=[];for(var t=0;t<e.length;t++)this._textures.push(e[t].texture),this._durations.push(e[t].time)}this.gotoAndStop(0),this.updateTexture()}},{key:"currentFrame",get:function(){var e=Math.floor(this._currentTime)%this._textures.length;return e<0&&(e+=this._textures.length),e}}]),i}(a.Sprite);r.default=n},{"../core":239}],310:[function(e,t,r){r.__esModule=!0;var i=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),P=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}}(e("../core")),o=n(e("../core/math/ObservablePoint")),S=e("../core/utils"),C=n(e("../core/settings"));function n(e){return e&&e.__esModule?e:{default:e}}var a=function(n){function M(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,M);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==_typeof2(t)&&"function"!=typeof t?e:t}(this,n.call(this));return r._textWidth=0,r._textHeight=0,r._glyphs=[],r._font={tint:void 0!==t.tint?t.tint:16777215,align:t.align||"left",name:null,size:0},r.font=t.font,r._text=e,r._maxWidth=0,r._maxLineHeight=0,r._letterSpacing=0,r._anchor=new o.default(function(){r.dirty=!0},r,0,0),r.dirty=!1,r.updateText(),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+_typeof2(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(M,n),M.prototype.updateText=function(){for(var e=M.fonts[this._font.name],t=this._font.size/e.size,r=new P.Point,n=[],i=[],o=this.text.replace(/(?:\r\n|\r)/g,"\n"),a=o.length,s=this._maxWidth*e.size/this._font.size,l=null,u=0,c=0,h=0,d=-1,p=0,f=0,m=0,v=0;v<a;v++){var b=o.charCodeAt(v),y=o.charAt(v);if(/(?:\s)/.test(y)&&(d=v,p=u),"\r"!==y&&"\n"!==y){var g=e.chars[b];g&&(l&&g.kerning[l]&&(r.x+=g.kerning[l]),n.push({texture:g.texture,line:h,charCode:b,position:new P.Point(r.x+g.xOffset+this._letterSpacing/2,r.y+g.yOffset)}),r.x+=g.xAdvance+this._letterSpacing,u=r.x,m=Math.max(m,g.yOffset+g.texture.height),l=b,-1!==d&&0<s&&r.x>s&&(++f,P.utils.removeItems(n,1+d-f,1+v-d),v=d,d=-1,i.push(p),c=Math.max(c,p),h++,r.x=0,r.y+=e.lineHeight,l=null))}else i.push(u),c=Math.max(c,u),++h,++f,r.x=0,r.y+=e.lineHeight,l=null}var w=o.charAt(o.length-1);"\r"!==w&&"\n"!==w&&(/(?:\s)/.test(w)&&(u=p),i.push(u),c=Math.max(c,u));for(var _=[],x=0;x<=h;x++){var S=0;"right"===this._font.align?S=c-i[x]:"center"===this._font.align&&(S=(c-i[x])/2),_.push(S)}for(var C=n.length,k=this.tint,T=0;T<C;T++){var A=this._glyphs[T];A?A.texture=n[T].texture:(A=new P.Sprite(n[T].texture),this._glyphs.push(A)),A.position.x=(n[T].position.x+_[n[T].line])*t,A.position.y=n[T].position.y*t,A.scale.x=A.scale.y=t,A.tint=k,A.parent||this.addChild(A)}for(var E=C;E<this._glyphs.length;++E)this.removeChild(this._glyphs[E]);if(this._textWidth=c*t,this._textHeight=(r.y+e.lineHeight)*t,0!==this.anchor.x||0!==this.anchor.y)for(var O=0;O<C;O++)this._glyphs[O].x-=this._textWidth*this.anchor.x,this._glyphs[O].y-=this._textHeight*this.anchor.y;this._maxLineHeight=m*t},M.prototype.updateTransform=function(){this.validate(),this.containerUpdateTransform()},M.prototype.getLocalBounds=function(){return this.validate(),n.prototype.getLocalBounds.call(this)},M.prototype.validate=function(){this.dirty&&(this.updateText(),this.dirty=!1)},M.registerFont=function(e,t){var r={},n=e.getElementsByTagName("info")[0],i=e.getElementsByTagName("common")[0],o=e.getElementsByTagName("page"),a=(0,S.getResolutionOfUrl)(o[0].getAttribute("file"),C.default.RESOLUTION),s={};r.font=n.getAttribute("face"),r.size=parseInt(n.getAttribute("size"),10),r.lineHeight=parseInt(i.getAttribute("lineHeight"),10)/a,r.chars={},t instanceof P.Texture&&(t=[t]);for(var l=0;l<o.length;l++){var u=o[l].getAttribute("id"),c=o[l].getAttribute("file");s[u]=t instanceof Array?t[l]:t[c]}for(var h=e.getElementsByTagName("char"),d=0;d<h.length;d++){var p=h[d],f=parseInt(p.getAttribute("id"),10),m=p.getAttribute("page")||0,v=new P.Rectangle(parseInt(p.getAttribute("x"),10)/a+s[m].frame.x/a,parseInt(p.getAttribute("y"),10)/a+s[m].frame.y/a,parseInt(p.getAttribute("width"),10)/a,parseInt(p.getAttribute("height"),10)/a);r.chars[f]={xOffset:parseInt(p.getAttribute("xoffset"),10)/a,yOffset:parseInt(p.getAttribute("yoffset"),10)/a,xAdvance:parseInt(p.getAttribute("xadvance"),10)/a,kerning:{},texture:new P.Texture(s[m].baseTexture,v),page:m}}for(var b=e.getElementsByTagName("kerning"),y=0;y<b.length;y++){var g=b[y],w=parseInt(g.getAttribute("first"),10)/a,_=parseInt(g.getAttribute("second"),10)/a,x=parseInt(g.getAttribute("amount"),10)/a;r.chars[_]&&(r.chars[_].kerning[w]=x)}return M.fonts[r.font]=r},i(M,[{key:"tint",get:function(){return this._font.tint},set:function(e){this._font.tint="number"==typeof e&&0<=e?e:16777215,this.dirty=!0}},{key:"align",get:function(){return this._font.align},set:function(e){this._font.align=e||"left",this.dirty=!0}},{key:"anchor",get:function(){return this._anchor},set:function(e){"number"==typeof e?this._anchor.set(e):this._anchor.copy(e)}},{key:"font",get:function(){return this._font},set:function(e){e&&(this._font.size="string"==typeof e?(e=e.split(" "),this._font.name=1===e.length?e[0]:e.slice(1).join(" "),2<=e.length?parseInt(e[0],10):M.fonts[this._font.name].size):(this._font.name=e.name,"number"==typeof e.size?e.size:parseInt(e.size,10)),this.dirty=!0)}},{key:"text",get:function(){return this._text},set:function(e){e=e.toString()||" ",this._text!==e&&(this._text=e,this.dirty=!0)}},{key:"maxWidth",get:function(){return this._maxWidth},set:function(e){this._maxWidth!==e&&(this._maxWidth=e,this.dirty=!0)}},{key:"maxLineHeight",get:function(){return this.validate(),this._maxLineHeight}},{key:"textWidth",get:function(){return this.validate(),this._textWidth}},{key:"letterSpacing",get:function(){return this._letterSpacing},set:function(e){this._letterSpacing!==e&&(this._letterSpacing=e,this.dirty=!0)}},{key:"textHeight",get:function(){return this.validate(),this._textHeight}}]),M}(P.Container);(r.default=a).fonts={}},{"../core":239,"../core/math/ObservablePoint":242,"../core/settings":275,"../core/utils":299}],311:[function(e,t,r){r.__esModule=!0;var n,a=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),_=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}}(e("../core")),i=e("../core/sprites/canvas/CanvasTinter"),x=(n=i)&&n.__esModule?n:{default:n};var s=new _.Point,o=function(i){function o(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:100,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:100;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==_typeof2(t)&&"function"!=typeof t?e:t}(this,i.call(this,e));return n.tileTransform=new _.TransformStatic,n._width=t,n._height=r,n._canvasPattern=null,n.uvTransform=e.transform||new _.TextureMatrix(e),n.pluginName="tilingSprite",n.uvRespectAnchor=!1,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+_typeof2(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(o,i),o.prototype._onTextureUpdate=function(){this.uvTransform&&(this.uvTransform.texture=this._texture),this.cachedTint=16777215},o.prototype._renderWebGL=function(e){var t=this._texture;t&&t.valid&&(this.tileTransform.updateLocalTransform(),this.uvTransform.update(),e.setObjectRenderer(e.plugins[this.pluginName]),e.plugins[this.pluginName].render(this))},o.prototype._renderCanvas=function(e){var t=this._texture;if(t.baseTexture.hasLoaded){var r=e.context,n=this.worldTransform,i=e.resolution,o=2===t.rotate,a=t.baseTexture,s=a.resolution,l=this.tilePosition.x/this.tileScale.x%t.orig.width*s,u=this.tilePosition.y/this.tileScale.y%t.orig.height*s;if(this._textureID!==this._texture._updateID||this.cachedTint!==this.tint){this._textureID=this._texture._updateID;var c=new _.CanvasRenderTarget(t.orig.width,t.orig.height,s);if(16777215!==this.tint)this.tintedTexture=x.default.getTintedTexture(this,this.tint),c.context.drawImage(this.tintedTexture,0,0);else{var h=t._frame.x*s,d=t._frame.y*s,p=t._frame.width*s,f=t._frame.height*s,m=(t.trim?t.trim.width:t.orig.width)*s,v=(t.trim?t.trim.height:t.orig.height)*s,b=(t.trim?t.trim.x:0)*s,y=(t.trim?t.trim.y:0)*s;o?(c.context.rotate(-Math.PI/2),c.context.translate(-v,0),c.context.drawImage(a.source,h,d,p,f,-y,b,v,m)):c.context.drawImage(a.source,h,d,p,f,b,y,m,v)}this.cachedTint=this.tint,this._canvasPattern=c.context.createPattern(c.canvas,"repeat")}r.globalAlpha=this.worldAlpha,r.setTransform(n.a*i,n.b*i,n.c*i,n.d*i,n.tx*i,n.ty*i),e.setBlendMode(this.blendMode),r.fillStyle=this._canvasPattern,r.scale(this.tileScale.x/s,this.tileScale.y/s);var g=this.anchor.x*-this._width*s,w=this.anchor.y*-this._height*s;this.uvRespectAnchor?(r.translate(l,u),r.fillRect(-l+g,-u+w,this._width/this.tileScale.x*s,this._height/this.tileScale.y*s)):(r.translate(l+g,u+w),r.fillRect(-l,-u,this._width/this.tileScale.x*s,this._height/this.tileScale.y*s))}},o.prototype._calculateBounds=function(){var e=this._width*-this._anchor._x,t=this._height*-this._anchor._y,r=this._width*(1-this._anchor._x),n=this._height*(1-this._anchor._y);this._bounds.addFrame(this.transform,e,t,r,n)},o.prototype.getLocalBounds=function(e){return 0===this.children.length?(this._bounds.minX=this._width*-this._anchor._x,this._bounds.minY=this._height*-this._anchor._y,this._bounds.maxX=this._width*(1-this._anchor._x),this._bounds.maxY=this._height*(1-this._anchor._y),e||(this._localBoundsRect||(this._localBoundsRect=new _.Rectangle),e=this._localBoundsRect),this._bounds.getRectangle(e)):i.prototype.getLocalBounds.call(this,e)},o.prototype.containsPoint=function(e){this.worldTransform.applyInverse(e,s);var t=this._width,r=this._height,n=-t*this.anchor._x;if(s.x>=n&&s.x<n+t){var i=-r*this.anchor._y;if(s.y>=i&&s.y<i+r)return!0}return!1},o.prototype.destroy=function(e){i.prototype.destroy.call(this,e),this.tileTransform=null,this.uvTransform=null},o.from=function(e,t,r){return new o(_.Texture.from(e),t,r)},o.fromFrame=function(e,t,r){var n=_.utils.TextureCache[e];if(!n)throw new Error('The frameId "'+e+'" does not exist in the texture cache '+this);return new o(n,t,r)},o.fromImage=function(e,t,r,n,i){return new o(_.Texture.fromImage(e,n,i),t,r)},a(o,[{key:"clampMargin",get:function(){return this.uvTransform.clampMargin},set:function(e){this.uvTransform.clampMargin=e,this.uvTransform.update(!0)}},{key:"tileScale",get:function(){return this.tileTransform.scale},set:function(e){this.tileTransform.scale.copy(e)}},{key:"tilePosition",get:function(){return this.tileTransform.position},set:function(e){this.tileTransform.position.copy(e)}},{key:"width",get:function(){return this._width},set:function(e){this._width=e}},{key:"height",get:function(){return this._height},set:function(e){this._height=e}}]),o}(_.Sprite);r.default=o},{"../core":239,"../core/sprites/canvas/CanvasTinter":278}],312:[function(e,t,r){var c=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}}(e("../core")),h=n(e("../core/textures/Texture")),d=n(e("../core/textures/BaseTexture")),p=e("../core/utils");function n(e){return e&&e.__esModule?e:{default:e}}var i=c.DisplayObject,f=new c.Matrix;i.prototype._cacheAsBitmap=!1,i.prototype._cacheData=!1;var o=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.textureCacheId=null,this.originalRenderWebGL=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalHitTest=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.sprite=null};Object.defineProperties(i.prototype,{cacheAsBitmap:{get:function(){return this._cacheAsBitmap},set:function(e){if(this._cacheAsBitmap!==e){var t=void 0;(this._cacheAsBitmap=e)?(this._cacheData||(this._cacheData=new o),(t=this._cacheData).originalRenderWebGL=this.renderWebGL,t.originalRenderCanvas=this.renderCanvas,t.originalUpdateTransform=this.updateTransform,t.originalCalculateBounds=this._calculateBounds,t.originalGetLocalBounds=this.getLocalBounds,t.originalDestroy=this.destroy,t.originalContainsPoint=this.containsPoint,t.originalMask=this._mask,t.originalFilterArea=this.filterArea,this.renderWebGL=this._renderCachedWebGL,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):((t=this._cacheData).sprite&&this._destroyCachedDisplayObject(),this.renderWebGL=t.originalRenderWebGL,this.renderCanvas=t.originalRenderCanvas,this._calculateBounds=t.originalCalculateBounds,this.getLocalBounds=t.originalGetLocalBounds,this.destroy=t.originalDestroy,this.updateTransform=t.originalUpdateTransform,this.containsPoint=t.originalContainsPoint,this._mask=t.originalMask,this.filterArea=t.originalFilterArea)}}}}),i.prototype._renderCachedWebGL=function(e){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(e),this._cacheData.sprite._transformID=-1,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderWebGL(e))},i.prototype._initCachedDisplayObject=function(e){if(!this._cacheData||!this._cacheData.sprite){var t=this.alpha;this.alpha=1,e.currentRenderer.flush();var r=this.getLocalBounds().clone();if(this._filters&&this._filters.length){var n=this._filters[0].padding;r.pad(n)}var i=e._activeRenderTarget,o=e.filterManager.filterStack,a=c.RenderTexture.create(0|r.width,0|r.height),s="cacheAsBitmap_"+(0,p.uid)();this._cacheData.textureCacheId=s,d.default.addToCache(a.baseTexture,s),h.default.addToCache(a,s);var l=f;l.tx=-r.x,l.ty=-r.y,this.transform.worldTransform.identity(),this.renderWebGL=this._cacheData.originalRenderWebGL,e.render(this,a,!0,l,!0),e.bindRenderTarget(i),e.filterManager.filterStack=o,this.renderWebGL=this._renderCachedWebGL,this.updateTransform=this.displayObjectUpdateTransform,this._mask=null,this.filterArea=null;var u=new c.Sprite(a);u.transform.worldTransform=this.transform.worldTransform,u.anchor.x=-r.x/r.width,u.anchor.y=-r.y/r.height,u.alpha=t,u._bounds=this._bounds,this._calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._cacheData.sprite=u,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=e._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=u.containsPoint.bind(u)}},i.prototype._renderCachedCanvas=function(e){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(e),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite.renderCanvas(e))},i.prototype._initCachedDisplayObjectCanvas=function(e){if(!this._cacheData||!this._cacheData.sprite){var t=this.getLocalBounds(),r=this.alpha;this.alpha=1;var n=e.context,i=c.RenderTexture.create(0|t.width,0|t.height),o="cacheAsBitmap_"+(0,p.uid)();this._cacheData.textureCacheId=o,d.default.addToCache(i.baseTexture,o),h.default.addToCache(i,o);var a=f;this.transform.localTransform.copy(a),a.invert(),a.tx-=t.x,a.ty-=t.y,this.renderCanvas=this._cacheData.originalRenderCanvas,e.render(this,i,!0,a,!1),e.context=n,this.renderCanvas=this._renderCachedCanvas,this._calculateBounds=this._calculateCachedBounds,this._mask=null,this.filterArea=null;var s=new c.Sprite(i);s.transform.worldTransform=this.transform.worldTransform,s.anchor.x=-t.x/t.width,s.anchor.y=-t.y/t.height,s._bounds=this._bounds,s.alpha=r,this.parent?this.updateTransform():(this.parent=e._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.updateTransform=this.displayObjectUpdateTransform,this._cacheData.sprite=s,this.containsPoint=s.containsPoint.bind(s)}},i.prototype._calculateCachedBounds=function(){this._cacheData.sprite._calculateBounds()},i.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds()},i.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,d.default.removeFromCache(this._cacheData.textureCacheId),h.default.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null},i.prototype._cacheAsBitmapDestroy=function(e){this.cacheAsBitmap=!1,this.destroy(e)}},{"../core":239,"../core/textures/BaseTexture":286,"../core/textures/Texture":289,"../core/utils":299}],313:[function(e,t,r){var n=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}}(e("../core"));n.DisplayObject.prototype.name=null,n.Container.prototype.getChildByName=function(e){for(var t=0;t<this.children.length;t++)if(this.children[t].name===e)return this.children[t];return null}},{"../core":239}],314:[function(e,t,r){var n=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}}(e("../core"));n.DisplayObject.prototype.getGlobalPosition=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:new n.Point,t=1<arguments.length&&void 0!==arguments[1]&&arguments[1];return this.parent?this.parent.toGlobal(this.position,e,t):(e.x=this.position.x,e.y=this.position.y),e}},{"../core":239}],315:[function(e,t,r){r.__esModule=!0,r.BitmapText=r.TilingSpriteRenderer=r.TilingSprite=r.AnimatedSprite=void 0;var n=e("./AnimatedSprite");Object.defineProperty(r,"AnimatedSprite",{enumerable:!0,get:function(){return s(n).default}});var i=e("./TilingSprite");Object.defineProperty(r,"TilingSprite",{enumerable:!0,get:function(){return s(i).default}});var o=e("./webgl/TilingSpriteRenderer");Object.defineProperty(r,"TilingSpriteRenderer",{enumerable:!0,get:function(){return s(o).default}});var a=e("./BitmapText");function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"BitmapText",{enumerable:!0,get:function(){return s(a).default}}),e("./cacheAsBitmap"),e("./getChildByName"),e("./getGlobalPosition")},{"./AnimatedSprite":309,"./BitmapText":310,"./TilingSprite":311,"./cacheAsBitmap":312,"./getChildByName":313,"./getGlobalPosition":314,"./webgl/TilingSpriteRenderer":316}],316:[function(e,t,r){r.__esModule=!0;var f=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}}(e("../../core")),m=e("../../core/const");e("path");var v=new f.Matrix,n=function(r){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==_typeof2(t)&&"function"!=typeof t?e:t}(this,r.call(this,e));return t.shader=null,t.simpleShader=null,t.quad=null,t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+_typeof2(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,r),n.prototype.onContextChange=function(){var e=this.renderer.gl;this.shader=new f.Shader(e,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n","varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\nuniform mat3 uMapCoord;\nuniform vec4 uClampFrame;\nuniform vec2 uClampOffset;\n\nvoid main(void)\n{\n    vec2 coord = mod(vTextureCoord - uClampOffset, vec2(1.0, 1.0)) + uClampOffset;\n    coord = (uMapCoord * vec3(coord, 1.0)).xy;\n    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);\n\n    vec4 sample = texture2D(uSampler, coord);\n    gl_FragColor = sample * uColor;\n}\n"),this.simpleShader=new f.Shader(e,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n","varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\n\nvoid main(void)\n{\n    vec4 sample = texture2D(uSampler, vTextureCoord);\n    gl_FragColor = sample * uColor;\n}\n"),this.renderer.bindVao(null),this.quad=new f.Quad(e,this.renderer.state.attribState),this.quad.initVao(this.shader)},n.prototype.render=function(e){var t=this.renderer,r=this.quad;t.bindVao(r.vao);var n=r.vertices;n[0]=n[6]=e._width*-e.anchor.x,n[1]=n[3]=e._height*-e.anchor.y,n[2]=n[4]=e._width*(1-e.anchor.x),n[5]=n[7]=e._height*(1-e.anchor.y),e.uvRespectAnchor&&((n=r.uvs)[0]=n[6]=-e.anchor.x,n[1]=n[3]=-e.anchor.y,n[2]=n[4]=1-e.anchor.x,n[5]=n[7]=1-e.anchor.y),r.upload();var i=e._texture,o=i.baseTexture,a=e.tileTransform.localTransform,s=e.uvTransform,l=o.isPowerOfTwo&&i.frame.width===o.width&&i.frame.height===o.height;l&&(o._glTextures[t.CONTEXT_UID]?l=o.wrapMode!==m.WRAP_MODES.CLAMP:o.wrapMode===m.WRAP_MODES.CLAMP&&(o.wrapMode=m.WRAP_MODES.REPEAT));var u=l?this.simpleShader:this.shader;t.bindShader(u);var c=i.width,h=i.height,d=e._width,p=e._height;v.set(a.a*c/d,a.b*c/p,a.c*h/d,a.d*h/p,a.tx/d,a.ty/p),v.invert(),l?v.prepend(s.mapCoord):(u.uniforms.uMapCoord=s.mapCoord.toArray(!0),u.uniforms.uClampFrame=s.uClampFrame,u.uniforms.uClampOffset=s.uClampOffset),u.uniforms.uTransform=v.toArray(!0),u.uniforms.uColor=f.utils.premultiplyTintToRgba(e.tint,e.worldAlpha,u.uniforms.uColor,o.premultipliedAlpha),u.uniforms.translationMatrix=e.transform.worldTransform.toArray(!0),u.uniforms.uSampler=t.bindTexture(i),t.setBlendMode(f.utils.correctBlendMode(e.blendMode,o.premultipliedAlpha)),r.vao.draw(this.renderer.gl.TRIANGLES,6,0)},n}(f.ObjectRenderer);r.default=n,f.WebGLRenderer.registerPlugin("tilingSprite",n)},{"../../core":239,"../../core/const":220,path:195}],317:[function(e,t,r){r.__esModule=!0;var i=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),n=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}}(e("../../core"));e("path");var o=function(r){function n(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==_typeof2(t)&&"function"!=typeof t?e:t}(this,r.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float uAlpha;\n\nvoid main(void)\n{\n   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;\n}\n"));return t.alpha=e,t.glShaderKey="alpha",t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+_typeof2(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,r),i(n,[{key:"alpha",get:function(){return this.uniforms.uAlpha},set:function(e){this.uniforms.uAlpha=e}}]),n}(n.Filter);r.default=o},{"../../core":239,path:195}],318:[function(e,t,r){r.__esModule=!0;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),s=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}}(e("../../core")),l=i(e("./BlurXFilter")),u=i(e("./BlurYFilter"));function i(e){return e&&e.__esModule?e:{default:e}}var o=function(o){function a(e,t,r,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==_typeof2(t)&&"function"!=typeof t?e:t}(this,o.call(this));return i.blurXFilter=new l.default(e,t,r,n),i.blurYFilter=new u.default(e,t,r,n),i.padding=0,i.resolution=r||s.settings.RESOLUTION,i.quality=t||4,i.blur=e||8,i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+_typeof2(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,o),a.prototype.apply=function(e,t,r){var n=e.getRenderTarget(!0);this.blurXFilter.apply(e,t,n,!0),this.blurYFilter.apply(e,n,r,!1),e.returnRenderTarget(n)},n(a,[{key:"blur",get:function(){return this.blurXFilter.blur},set:function(e){this.blurXFilter.blur=this.blurYFilter.blur=e,this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))}},{key:"quality",get:function(){return this.blurXFilter.quality},set:function(e){this.blurXFilter.quality=this.blurYFilter.quality=e}},{key:"blurX",get:function(){return this.blurXFilter.blur},set:function(e){this.blurXFilter.blur=e,this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))}},{key:"blurY",get:function(){return this.blurYFilter.blur},set:function(e){this.blurYFilter.blur=e,this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))}},{key:"blendMode",get:function(){return this.blurYFilter._blendMode},set:function(e){this.blurYFilter._blendMode=e}}]),a}(s.Filter);r.default=o},{"../../core":239,"./BlurXFilter":319,"./BlurYFilter":320}],319:[function(e,t,r){r.__esModule=!0;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),u=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}}(e("../../core")),h=i(e("./generateBlurVertSource")),d=i(e("./generateBlurFragSource")),p=i(e("./getMaxBlurKernelSize"));function i(e){return e&&e.__esModule?e:{default:e}}var o=function(s){function l(e,t,r,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),n=n||5;var i=(0,h.default)(n,!0),o=(0,d.default)(n),a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==_typeof2(t)&&"function"!=typeof t?e:t}(this,s.call(this,i,o));return a.resolution=r||u.settings.RESOLUTION,a._quality=0,a.quality=t||4,a.strength=e||8,a.firstRun=!0,a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+_typeof2(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(l,s),l.prototype.apply=function(e,t,r,n){if(this.firstRun){var i=e.renderer.gl,o=(0,p.default)(i);this.vertexSrc=(0,h.default)(o,!0),this.fragmentSrc=(0,d.default)(o),this.firstRun=!1}if(this.uniforms.strength=1/r.size.width*(r.size.width/t.size.width),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,1===this.passes)e.applyFilter(this,t,r,n);else{for(var a=e.getRenderTarget(!0),s=t,l=a,u=0;u<this.passes-1;u++){e.applyFilter(this,s,l,!0);var c=l;l=s,s=c}e.applyFilter(this,s,r,n),e.returnRenderTarget(a)}},n(l,[{key:"blur",get:function(){return this.strength},set:function(e){this.padding=2*Math.abs(e),this.strength=e}},{key:"quality",get:function(){return this._quality},set:function(e){this._quality=e,this.passes=e}}]),l}(u.Filter);r.default=o},{"../../core":239,"./generateBlurFragSource":321,"./generateBlurVertSource":322,"./getMaxBlurKernelSize":323}],320:[function(e,t,r){r.__esModule=!0;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),u=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}}(e("../../core")),h=i(e("./generateBlurVertSource")),d=i(e("./generateBlurFragSource")),p=i(e("./getMaxBlurKernelSize"));function i(e){return e&&e.__esModule?e:{default:e}}var o=function(s){function l(e,t,r,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),n=n||5;var i=(0,h.default)(n,!1),o=(0,d.default)(n),a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==_typeof2(t)&&"function"!=typeof t?e:t}(this,s.call(this,i,o));return a.resolution=r||u.settings.RESOLUTION,a._quality=0,a.quality=t||4,a.strength=e||8,a.firstRun=!0,a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+_typeof2(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(l,s),l.prototype.apply=function(e,t,r,n){if(this.firstRun){var i=e.renderer.gl,o=(0,p.default)(i);this.vertexSrc=(0,h.default)(o,!1),this.fragmentSrc=(0,d.default)(o),this.firstRun=!1}if(this.uniforms.strength=1/r.size.height*(r.size.height/t.size.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,1===this.passes)e.applyFilter(this,t,r,n);else{for(var a=e.getRenderTarget(!0),s=t,l=a,u=0;u<this.passes-1;u++){e.applyFilter(this,s,l,!0);var c=l;l=s,s=c}e.applyFilter(this,s,r,n),e.returnRenderTarget(a)}},n(l,[{key:"blur",get:function(){return this.strength},set:function(e){this.padding=2*Math.abs(e),this.strength=e}},{key:"quality",get:function(){return this._quality},set:function(e){this._quality=e,this.passes=e}}]),l}(u.Filter);r.default=o},{"../../core":239,"./generateBlurFragSource":321,"./generateBlurVertSource":322,"./getMaxBlurKernelSize":323}],321:[function(e,t,r){r.__esModule=!0,r.default=function(e){for(var t=l[e],r=t.length,n=u,i="",o=void 0,a=0;a<e;a++){var s="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;".replace("%index%",a);r<=(o=a)&&(o=e-a-1),s=s.replace("%value%",t[o]),i+=s,i+="\n"}return n=(n=n.replace("%blur%",i)).replace("%size%",e)};var l={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},u=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join("\n")},{}],322:[function(e,t,r){r.__esModule=!0,r.default=function(e,t){var r=Math.ceil(e/2),n=l,i="",o=void 0;o=t?"vBlurTexCoords[%index%] = aTextureCoord + vec2(%sampleIndex% * strength, 0.0);":"vBlurTexCoords[%index%] = aTextureCoord + vec2(0.0, %sampleIndex% * strength);";for(var a=0;a<e;a++){var s=o.replace("%index%",a);s=s.replace("%sampleIndex%",a-(r-1)+".0"),i+=s,i+="\n"}return n=(n=n.replace("%blur%",i)).replace("%size%",e)};var l=["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","uniform float strength;","uniform mat3 projectionMatrix;","varying vec2 vBlurTexCoords[%size%];","void main(void)","{","gl_Position = vec4((projectionMatrix * vec3((aVertexPosition), 1.0)).xy, 0.0, 1.0);","%blur%","}"].join("\n")},{}],323:[function(e,t,r){r.__esModule=!0,r.default=function(e){var t=e.getParameter(e.MAX_VARYING_VECTORS),r=15;for(;t<r;)r-=2;return r}},{}],324:[function(e,t,r){r.__esModule=!0;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}}(e("../../core"));e("path");var o=function(t){function r(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==_typeof2(t)&&"function"!=typeof t?e:t}(this,t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform float m[20];\nuniform float uAlpha;\n\nvoid main(void)\n{\n    vec4 c = texture2D(uSampler, vTextureCoord);\n\n    if (uAlpha == 0.0) {\n        gl_FragColor = c;\n        return;\n    }\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (c.a > 0.0) {\n      c.rgb /= c.a;\n    }\n\n    vec4 result;\n\n    result.r = (m[0] * c.r);\n        result.r += (m[1] * c.g);\n        result.r += (m[2] * c.b);\n        result.r += (m[3] * c.a);\n        result.r += m[4];\n\n    result.g = (m[5] * c.r);\n        result.g += (m[6] * c.g);\n        result.g += (m[7] * c.b);\n        result.g += (m[8] * c.a);\n        result.g += m[9];\n\n    result.b = (m[10] * c.r);\n       result.b += (m[11] * c.g);\n       result.b += (m[12] * c.b);\n       result.b += (m[13] * c.a);\n       result.b += m[14];\n\n    result.a = (m[15] * c.r);\n       result.a += (m[16] * c.g);\n       result.a += (m[17] * c.b);\n       result.a += (m[18] * c.a);\n       result.a += m[19];\n\n    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);\n\n    // Premultiply alpha again.\n    rgb *= result.a;\n\n    gl_FragColor = vec4(rgb, result.a);\n}\n"));return e.uniforms.m=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],e.alpha=1,e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+_typeof2(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,t),r.prototype._loadMatrix=function(e){var t=e;1<arguments.length&&void 0!==arguments[1]&&arguments[1]&&(this._multiply(t,this.uniforms.m,e),t=this._colorMatrix(t)),this.uniforms.m=t},r.prototype._multiply=function(e,t,r){return e[0]=t[0]*r[0]+t[1]*r[5]+t[2]*r[10]+t[3]*r[15],e[1]=t[0]*r[1]+t[1]*r[6]+t[2]*r[11]+t[3]*r[16],e[2]=t[0]*r[2]+t[1]*r[7]+t[2]*r[12]+t[3]*r[17],e[3]=t[0]*r[3]+t[1]*r[8]+t[2]*r[13]+t[3]*r[18],e[4]=t[0]*r[4]+t[1]*r[9]+t[2]*r[14]+t[3]*r[19]+t[4],e[5]=t[5]*r[0]+t[6]*r[5]+t[7]*r[10]+t[8]*r[15],e[6]=t[5]*r[1]+t[6]*r[6]+t[7]*r[11]+t[8]*r[16],e[7]=t[5]*r[2]+t[6]*r[7]+t[7]*r[12]+t[8]*r[17],e[8]=t[5]*r[3]+t[6]*r[8]+t[7]*r[13]+t[8]*r[18],e[9]=t[5]*r[4]+t[6]*r[9]+t[7]*r[14]+t[8]*r[19]+t[9],e[10]=t[10]*r[0]+t[11]*r[5]+t[12]*r[10]+t[13]*r[15],e[11]=t[10]*r[1]+t[11]*r[6]+t[12]*r[11]+t[13]*r[16],e[12]=t[10]*r[2]+t[11]*r[7]+t[12]*r[12]+t[13]*r[17],e[13]=t[10]*r[3]+t[11]*r[8]+t[12]*r[13]+t[13]*r[18],e[14]=t[10]*r[4]+t[11]*r[9]+t[12]*r[14]+t[13]*r[19]+t[14],e[15]=t[15]*r[0]+t[16]*r[5]+t[17]*r[10]+t[18]*r[15],e[16]=t[15]*r[1]+t[16]*r[6]+t[17]*r[11]+t[18]*r[16],e[17]=t[15]*r[2]+t[16]*r[7]+t[17]*r[12]+t[18]*r[17],e[18]=t[15]*r[3]+t[16]*r[8]+t[17]*r[13]+t[18]*r[18],e[19]=t[15]*r[4]+t[16]*r[9]+t[17]*r[14]+t[18]*r[19]+t[19],e},r.prototype._colorMatrix=function(e){var t=new Float32Array(e);return t[4]/=255,t[9]/=255,t[14]/=255,t[19]/=255,t},r.prototype.brightness=function(e,t){var r=[e,0,0,0,0,0,e,0,0,0,0,0,e,0,0,0,0,0,1,0];this._loadMatrix(r,t)},r.prototype.greyscale=function(e,t){var r=[e,e,e,0,0,e,e,e,0,0,e,e,e,0,0,0,0,0,1,0];this._loadMatrix(r,t)},r.prototype.blackAndWhite=function(e){this._loadMatrix([.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0],e)},r.prototype.hue=function(e,t){e=(e||0)/180*Math.PI;var r=Math.cos(e),n=Math.sin(e),i=(0,Math.sqrt)(1/3),o=[r+1/3*(1-r),1/3*(1-r)-i*n,1/3*(1-r)+i*n,0,0,1/3*(1-r)+i*n,r+1/3*(1-r),1/3*(1-r)-i*n,0,0,1/3*(1-r)-i*n,1/3*(1-r)+i*n,r+1/3*(1-r),0,0,0,0,0,1,0];this._loadMatrix(o,t)},r.prototype.contrast=function(e,t){var r=(e||0)+1,n=-.5*(r-1),i=[r,0,0,0,n,0,r,0,0,n,0,0,r,0,n,0,0,0,1,0];this._loadMatrix(i,t)},r.prototype.saturate=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,t=arguments[1],r=2*e/3+1,n=-.5*(r-1),i=[r,n,n,0,0,n,r,n,0,0,n,n,r,0,0,0,0,0,1,0];this._loadMatrix(i,t)},r.prototype.desaturate=function(){this.saturate(-1)},r.prototype.negative=function(e){this._loadMatrix([-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0],e)},r.prototype.sepia=function(e){this._loadMatrix([.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0],e)},r.prototype.technicolor=function(e){this._loadMatrix([1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0],e)},r.prototype.polaroid=function(e){this._loadMatrix([1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],e)},r.prototype.toBGR=function(e){this._loadMatrix([0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0],e)},r.prototype.kodachrome=function(e){this._loadMatrix([1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0],e)},r.prototype.browni=function(e){this._loadMatrix([.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0],e)},r.prototype.vintage=function(e){this._loadMatrix([.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0],e)},r.prototype.colorTone=function(e,t,r,n,i){var o=((r=r||16770432)>>16&255)/255,a=(r>>8&255)/255,s=(255&r)/255,l=((n=n||3375104)>>16&255)/255,u=(n>>8&255)/255,c=(255&n)/255,h=[.3,.59,.11,0,0,o,a,s,e=e||.2,0,l,u,c,t=t||.15,0,o-l,a-u,s-c,0,0];this._loadMatrix(h,i)},r.prototype.night=function(e,t){var r=[-2*(e=e||.1),-e,0,0,0,-e,0,e,0,0,0,e,2*e,0,0,0,0,0,1,0];this._loadMatrix(r,t)},r.prototype.predator=function(e,t){var r=[11.224130630493164*e,-4.794486999511719*e,-2.8746118545532227*e,0*e,.40342438220977783*e,-3.6330697536468506*e,9.193157196044922*e,-2.951810836791992*e,0*e,-1.316135048866272*e,-3.2184197902679443*e,-4.2375030517578125*e,7.476448059082031*e,0*e,.8044459223747253*e,0,0,0,1,0];this._loadMatrix(r,t)},r.prototype.lsd=function(e){this._loadMatrix([2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0],e)},r.prototype.reset=function(){this._loadMatrix([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],!1)},n(r,[{key:"matrix",get:function(){return this.uniforms.m},set:function(e){this.uniforms.m=e}},{key:"alpha",get:function(){return this.uniforms.uAlpha},set:function(e){this.uniforms.uAlpha=e}}]),r}(i.Filter);(r.default=o).prototype.grayscale=o.prototype.greyscale},{"../../core":239,path:195}],325:[function(e,t,r){r.__esModule=!0;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),a=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}}(e("../../core"));e("path");var i=function(i){function o(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o);var r=new a.Matrix;e.renderable=!1;var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==_typeof2(t)&&"function"!=typeof t?e:t}(this,i.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 filterMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vFilterCoord;\n\nvoid main(void)\n{\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vFilterCoord = ( filterMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n   vTextureCoord = aTextureCoord;\n}","varying vec2 vFilterCoord;\nvarying vec2 vTextureCoord;\n\nuniform vec2 scale;\n\nuniform sampler2D uSampler;\nuniform sampler2D mapSampler;\n\nuniform vec4 filterArea;\nuniform vec4 filterClamp;\n\nvoid main(void)\n{\n  vec4 map =  texture2D(mapSampler, vFilterCoord);\n\n  map -= 0.5;\n  map.xy *= scale / filterArea.xy;\n\n  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), filterClamp.xy, filterClamp.zw));\n}\n"));return n.maskSprite=e,n.maskMatrix=r,n.uniforms.mapSampler=e._texture,n.uniforms.filterMatrix=r,n.uniforms.scale={x:1,y:1},null==t&&(t=20),n.scale=new a.Point(t,t),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+_typeof2(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(o,i),o.prototype.apply=function(e,t,r){this.uniforms.filterMatrix=e.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y,e.applyFilter(this,t,r)},n(o,[{key:"map",get:function(){return this.uniforms.mapSampler},set:function(e){this.uniforms.mapSampler=e}}]),o}(a.Filter);r.default=i},{"../../core":239,path:195}],326:[function(e,t,r){r.__esModule=!0;var n=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}}(e("../../core"));e("path");var i=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==_typeof2(t)&&"function"!=typeof t?e:t}(this,e.call(this,"\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nuniform vec4 filterArea;\n\nvarying vec2 vTextureCoord;\n\nvec2 mapCoord( vec2 coord )\n{\n    coord *= filterArea.xy;\n    coord += filterArea.zw;\n\n    return coord;\n}\n\nvec2 unmapCoord( vec2 coord )\n{\n    coord -= filterArea.zw;\n    coord /= filterArea.xy;\n\n    return coord;\n}\n\nvoid texcoords(vec2 fragCoord, vec2 resolution,\n               out vec2 v_rgbNW, out vec2 v_rgbNE,\n               out vec2 v_rgbSW, out vec2 v_rgbSE,\n               out vec2 v_rgbM) {\n    vec2 inverseVP = 1.0 / resolution.xy;\n    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;\n    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;\n    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;\n    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;\n    v_rgbM = vec2(fragCoord * inverseVP);\n}\n\nvoid main(void) {\n\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n   vTextureCoord = aTextureCoord;\n\n   vec2 fragCoord = vTextureCoord * filterArea.xy;\n\n   texcoords(fragCoord, filterArea.xy, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n}",'varying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvarying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform vec4 filterArea;\n\n/**\n Basic FXAA implementation based on the code on geeks3d.com with the\n modification that the texture2DLod stuff was removed since it\'s\n unsupported by WebGL.\n \n --\n \n From:\n https://github.com/mitsuhiko/webgl-meincraft\n \n Copyright (c) 2011 by Armin Ronacher.\n \n Some rights reserved.\n \n Redistribution and use in source and binary forms, with or without\n modification, are permitted provided that the following conditions are\n met:\n \n * Redistributions of source code must retain the above copyright\n notice, this list of conditions and the following disclaimer.\n \n * Redistributions in binary form must reproduce the above\n copyright notice, this list of conditions and the following\n disclaimer in the documentation and/or other materials provided\n with the distribution.\n \n * The names of the contributors may not be used to endorse or\n promote products derived from this software without specific\n prior written permission.\n \n THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n#ifndef FXAA_REDUCE_MIN\n#define FXAA_REDUCE_MIN   (1.0/ 128.0)\n#endif\n#ifndef FXAA_REDUCE_MUL\n#define FXAA_REDUCE_MUL   (1.0 / 8.0)\n#endif\n#ifndef FXAA_SPAN_MAX\n#define FXAA_SPAN_MAX     8.0\n#endif\n\n//optimized version for mobile, where dependent\n//texture reads can be a bottleneck\nvec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 resolution,\n          vec2 v_rgbNW, vec2 v_rgbNE,\n          vec2 v_rgbSW, vec2 v_rgbSE,\n          vec2 v_rgbM) {\n    vec4 color;\n    mediump vec2 inverseVP = vec2(1.0 / resolution.x, 1.0 / resolution.y);\n    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;\n    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;\n    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;\n    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;\n    vec4 texColor = texture2D(tex, v_rgbM);\n    vec3 rgbM  = texColor.xyz;\n    vec3 luma = vec3(0.299, 0.587, 0.114);\n    float lumaNW = dot(rgbNW, luma);\n    float lumaNE = dot(rgbNE, luma);\n    float lumaSW = dot(rgbSW, luma);\n    float lumaSE = dot(rgbSE, luma);\n    float lumaM  = dot(rgbM,  luma);\n    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));\n    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));\n    \n    mediump vec2 dir;\n    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\n    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));\n    \n    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *\n                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);\n    \n    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);\n    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),\n              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),\n                  dir * rcpDirMin)) * inverseVP;\n    \n    vec3 rgbA = 0.5 * (\n                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +\n                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);\n    vec3 rgbB = rgbA * 0.5 + 0.25 * (\n                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +\n                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);\n    \n    float lumaB = dot(rgbB, luma);\n    if ((lumaB < lumaMin) || (lumaB > lumaMax))\n        color = vec4(rgbA, texColor.a);\n    else\n        color = vec4(rgbB, texColor.a);\n    return color;\n}\n\nvoid main() {\n\n      vec2 fragCoord = vTextureCoord * filterArea.xy;\n\n      vec4 color;\n\n    color = fxaa(uSampler, fragCoord, filterArea.xy, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n\n      gl_FragColor = color;\n}\n'))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+_typeof2(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(n.Filter);r.default=i},{"../../core":239,path:195}],327:[function(e,t,r){r.__esModule=!0;var n=e("./fxaa/FXAAFilter");Object.defineProperty(r,"FXAAFilter",{enumerable:!0,get:function(){return h(n).default}});var i=e("./noise/NoiseFilter");Object.defineProperty(r,"NoiseFilter",{enumerable:!0,get:function(){return h(i).default}});var o=e("./displacement/DisplacementFilter");Object.defineProperty(r,"DisplacementFilter",{enumerable:!0,get:function(){return h(o).default}});var a=e("./blur/BlurFilter");Object.defineProperty(r,"BlurFilter",{enumerable:!0,get:function(){return h(a).default}});var s=e("./blur/BlurXFilter");Object.defineProperty(r,"BlurXFilter",{enumerable:!0,get:function(){return h(s).default}});var l=e("./blur/BlurYFilter");Object.defineProperty(r,"BlurYFilter",{enumerable:!0,get:function(){return h(l).default}});var u=e("./colormatrix/ColorMatrixFilter");Object.defineProperty(r,"ColorMatrixFilter",{enumerable:!0,get:function(){return h(u).default}});var c=e("./alpha/AlphaFilter");function h(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"AlphaFilter",{enumerable:!0,get:function(){return h(c).default}})},{"./alpha/AlphaFilter":317,"./blur/BlurFilter":318,"./blur/BlurXFilter":319,"./blur/BlurYFilter":320,"./colormatrix/ColorMatrixFilter":324,"./displacement/DisplacementFilter":325,"./fxaa/FXAAFilter":326,"./noise/NoiseFilter":328}],328:[function(e,t,r){r.__esModule=!0;var o=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),n=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}}(e("../../core"));e("path");var i=function(n){function i(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:.5,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:Math.random();!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==_typeof2(t)&&"function"!=typeof t?e:t}(this,n.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","precision highp float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform float uNoise;\nuniform float uSeed;\nuniform sampler2D uSampler;\n\nfloat rand(vec2 co)\n{\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvoid main()\n{\n    vec4 color = texture2D(uSampler, vTextureCoord);\n    float randomValue = rand(gl_FragCoord.xy * uSeed);\n    float diff = (randomValue - 0.5) * uNoise;\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (color.a > 0.0) {\n        color.rgb /= color.a;\n    }\n\n    color.r += diff;\n    color.g += diff;\n    color.b += diff;\n\n    // Premultiply alpha again.\n    color.rgb *= color.a;\n\n    gl_FragColor = color;\n}\n"));return r.noise=e,r.seed=t,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+_typeof2(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(i,n),o(i,[{key:"noise",get:function(){return this.uniforms.uNoise},set:function(e){this.uniforms.uNoise=e}},{key:"seed",get:function(){return this.uniforms.uSeed},set:function(e){this.uniforms.uSeed=e}}]),i}(n.Filter);r.default=i},{"../../core":239,path:195}],329:[function(b,e,y){(function(e){y.__esModule=!0,y.loader=y.prepare=y.particles=y.mesh=y.loaders=y.interaction=y.filters=y.extras=y.extract=y.accessibility=void 0;var t=b("./polyfill");Object.keys(t).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(y,e,{enumerable:!0,get:function(){return t[e]}})});var r=b("./core");Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(y,e,{enumerable:!0,get:function(){return r[e]}})});var n,i=b("./deprecation"),o=(n=i)&&n.__esModule?n:{default:n},a=m(b("./accessibility")),s=m(b("./extract")),l=m(b("./extras")),u=m(b("./filters")),c=m(b("./interaction")),h=m(b("./loaders")),d=m(b("./mesh")),p=m(b("./particles")),f=m(b("./prepare"));function m(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}r.utils.mixins.performMixins();var v=h.shared||null;y.accessibility=a,y.extract=s,y.extras=l,y.filters=u,y.interaction=c,y.loaders=h,y.mesh=d,y.particles=p,y.prepare=f,y.loader=v,"function"==typeof o.default&&(0,o.default)(y),e.PIXI=y}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./accessibility":216,"./core":239,"./deprecation":305,"./extract":307,"./extras":315,"./filters":327,"./interaction":334,"./loaders":337,"./mesh":346,"./particles":349,"./polyfill":356,"./prepare":360}],330:[function(e,t,r){r.__esModule=!0;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}}(e("../core"));var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.global=new i.Point,this.target=null,this.originalEvent=null,this.identifier=null,this.isPrimary=!1,this.button=0,this.buttons=0,this.width=0,this.height=0,this.tiltX=0,this.tiltY=0,this.pointerType=null,this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0}return e.prototype.getLocalPosition=function(e,t,r){return e.worldTransform.applyInverse(r||this.global,t)},e.prototype.copyEvent=function(e){e.isPrimary&&(this.isPrimary=!0),this.button=e.button,this.buttons=Number.isInteger(e.buttons)?e.buttons:e.which,this.width=e.width,this.height=e.height,this.tiltX=e.tiltX,this.tiltY=e.tiltY,this.pointerType=e.pointerType,this.pressure=e.pressure,this.rotationAngle=e.rotationAngle,this.twist=e.twist||0,this.tangentialPressure=e.tangentialPressure||0},e.prototype.reset=function(){this.isPrimary=!1},n(e,[{key:"pointerId",get:function(){return this.identifier}}]),e}();r.default=o},{"../core":239}],331:[function(e,t,r){r.__esModule=!0;var n=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.stopped=!1,this.target=null,this.currentTarget=null,this.type=null,this.data=null}return e.prototype.stopPropagation=function(){this.stopped=!0},e.prototype.reset=function(){this.stopped=!1,this.currentTarget=null,this.target=null},e}();r.default=n},{}],332:[function(e,t,r){r.__esModule=!0;var o="function"==typeof Symbol&&"symbol"===_typeof2(Symbol.iterator)?function(e){return _typeof2(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof2(e)},a=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}}(e("../core")),s=u(e("./InteractionData")),l=u(e("./InteractionEvent")),p=u(e("./InteractionTrackingData")),n=u(e("eventemitter3")),i=u(e("./interactiveTarget"));function u(e){return e&&e.__esModule?e:{default:e}}a.utils.mixins.delayMixin(a.DisplayObject.prototype,i.default);var c={target:null,data:{global:null}},h=function(n){function i(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==_typeof2(t)&&"function"!=typeof t?e:t}(this,n.call(this));return t=t||{},r.renderer=e,r.autoPreventDefault=void 0===t.autoPreventDefault||t.autoPreventDefault,r.interactionFrequency=t.interactionFrequency||10,r.mouse=new s.default,r.mouse.identifier=1,r.mouse.global.set(-999999),r.activeInteractionData={},r.activeInteractionData[1]=r.mouse,r.interactionDataPool=[],r.eventData=new l.default,r.interactionDOMElement=null,r.moveWhenInside=!1,r.eventsAdded=!1,r.mouseOverRenderer=!1,r.supportsTouchEvents="ontouchstart"in window,r.supportsPointerEvents=!!window.PointerEvent,r.onPointerUp=r.onPointerUp.bind(r),r.processPointerUp=r.processPointerUp.bind(r),r.onPointerCancel=r.onPointerCancel.bind(r),r.processPointerCancel=r.processPointerCancel.bind(r),r.onPointerDown=r.onPointerDown.bind(r),r.processPointerDown=r.processPointerDown.bind(r),r.onPointerMove=r.onPointerMove.bind(r),r.processPointerMove=r.processPointerMove.bind(r),r.onPointerOut=r.onPointerOut.bind(r),r.processPointerOverOut=r.processPointerOverOut.bind(r),r.onPointerOver=r.onPointerOver.bind(r),r.cursorStyles={default:"inherit",pointer:"pointer"},r.currentCursorMode=null,r.cursor=null,r._tempPoint=new a.Point,r.resolution=1,r.setTargetElement(r.renderer.view,r.renderer.resolution),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+_typeof2(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(i,n),i.prototype.hitTest=function(e,t){return c.target=null,c.data.global=e,t||(t=this.renderer._lastObjectRendered),this.processInteractive(c,t,null,!0),c.target},i.prototype.setTargetElement=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1;this.removeEvents(),this.interactionDOMElement=e,this.resolution=t,this.addEvents()},i.prototype.addEvents=function(){this.interactionDOMElement&&(a.ticker.shared.add(this.update,this,a.UPDATE_PRIORITY.INTERACTION),window.navigator.msPointerEnabled?(this.interactionDOMElement.style["-ms-content-zooming"]="none",this.interactionDOMElement.style["-ms-touch-action"]="none"):this.supportsPointerEvents&&(this.interactionDOMElement.style["touch-action"]="none"),this.supportsPointerEvents?(window.document.addEventListener("pointermove",this.onPointerMove,!0),this.interactionDOMElement.addEventListener("pointerdown",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("pointerleave",this.onPointerOut,!0),this.interactionDOMElement.addEventListener("pointerover",this.onPointerOver,!0),window.addEventListener("pointercancel",this.onPointerCancel,!0),window.addEventListener("pointerup",this.onPointerUp,!0)):(window.document.addEventListener("mousemove",this.onPointerMove,!0),this.interactionDOMElement.addEventListener("mousedown",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("mouseout",this.onPointerOut,!0),this.interactionDOMElement.addEventListener("mouseover",this.onPointerOver,!0),window.addEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.interactionDOMElement.addEventListener("touchstart",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("touchcancel",this.onPointerCancel,!0),this.interactionDOMElement.addEventListener("touchend",this.onPointerUp,!0),this.interactionDOMElement.addEventListener("touchmove",this.onPointerMove,!0)),this.eventsAdded=!0)},i.prototype.removeEvents=function(){this.interactionDOMElement&&(a.ticker.shared.remove(this.update,this),window.navigator.msPointerEnabled?(this.interactionDOMElement.style["-ms-content-zooming"]="",this.interactionDOMElement.style["-ms-touch-action"]=""):this.supportsPointerEvents&&(this.interactionDOMElement.style["touch-action"]=""),this.supportsPointerEvents?(window.document.removeEventListener("pointermove",this.onPointerMove,!0),this.interactionDOMElement.removeEventListener("pointerdown",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("pointerleave",this.onPointerOut,!0),this.interactionDOMElement.removeEventListener("pointerover",this.onPointerOver,!0),window.removeEventListener("pointercancel",this.onPointerCancel,!0),window.removeEventListener("pointerup",this.onPointerUp,!0)):(window.document.removeEventListener("mousemove",this.onPointerMove,!0),this.interactionDOMElement.removeEventListener("mousedown",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("mouseout",this.onPointerOut,!0),this.interactionDOMElement.removeEventListener("mouseover",this.onPointerOver,!0),window.removeEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.interactionDOMElement.removeEventListener("touchstart",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("touchcancel",this.onPointerCancel,!0),this.interactionDOMElement.removeEventListener("touchend",this.onPointerUp,!0),this.interactionDOMElement.removeEventListener("touchmove",this.onPointerMove,!0)),this.interactionDOMElement=null,this.eventsAdded=!1)},i.prototype.update=function(e){if(this._deltaTime+=e,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this.interactionDOMElement))if(this.didMove)this.didMove=!1;else{for(var t in this.cursor=null,this.activeInteractionData)if(this.activeInteractionData.hasOwnProperty(t)){var r=this.activeInteractionData[t];if(r.originalEvent&&"touch"!==r.pointerType){var n=this.configureInteractionEventForDOMEvent(this.eventData,r.originalEvent,r);this.processInteractive(n,this.renderer._lastObjectRendered,this.processPointerOverOut,!0)}}this.setCursorMode(this.cursor)}},i.prototype.setCursorMode=function(e){if(e=e||"default",this.currentCursorMode!==e){this.currentCursorMode=e;var t=this.cursorStyles[e];if(t)switch(void 0===t?"undefined":o(t)){case"string":this.interactionDOMElement.style.cursor=t;break;case"function":t(e);break;case"object":Object.assign(this.interactionDOMElement.style,t)}else"string"!=typeof e||Object.prototype.hasOwnProperty.call(this.cursorStyles,e)||(this.interactionDOMElement.style.cursor=e)}},i.prototype.dispatchEvent=function(e,t,r){r.stopped||(r.currentTarget=e,r.type=t,e.emit(t,r),e[t]&&e[t](r))},i.prototype.mapPositionToPoint=function(e,t,r){var n=void 0;n=this.interactionDOMElement.parentElement?this.interactionDOMElement.getBoundingClientRect():{x:0,y:0,width:0,height:0};var i=navigator.isCocoonJS?this.resolution:1/this.resolution;e.x=(t-n.left)*(this.interactionDOMElement.width/n.width)*i,e.y=(r-n.top)*(this.interactionDOMElement.height/n.height)*i},i.prototype.processInteractive=function(e,t,r,n,i){if(!t||!t.visible)return!1;var o=e.data.global,a=!1,s=i=t.interactive||i,l=!0;if(t.hitArea?(n&&(t.worldTransform.applyInverse(o,this._tempPoint),t.hitArea.contains(this._tempPoint.x,this._tempPoint.y)?a=!0:l=n=!1),s=!1):t._mask&&n&&(t._mask.containsPoint(o)||(l=n=!1)),l&&t.interactiveChildren&&t.children)for(var u=t.children,c=u.length-1;0<=c;c--){var h=u[c],d=this.processInteractive(e,h,r,n,s);if(d){if(!h.parent)continue;s=!1,d&&(e.target&&(n=!1),a=!0)}}return i&&(n&&!e.target&&!t.hitArea&&t.containsPoint&&t.containsPoint(o)&&(a=!0),t.interactive&&(a&&!e.target&&(e.target=t),r&&r(e,t,!!a))),a},i.prototype.onPointerDown=function(e){if(!this.supportsTouchEvents||"touch"!==e.pointerType){var t=this.normalizeToPointerData(e);this.autoPreventDefault&&t[0].isNormalized&&e.preventDefault();for(var r=t.length,n=0;n<r;n++){var i=t[n],o=this.getInteractionDataForPointerId(i),a=this.configureInteractionEventForDOMEvent(this.eventData,i,o);if(a.data.originalEvent=e,this.processInteractive(a,this.renderer._lastObjectRendered,this.processPointerDown,!0),this.emit("pointerdown",a),"touch"===i.pointerType)this.emit("touchstart",a);else if("mouse"===i.pointerType||"pen"===i.pointerType){var s=2===i.button;this.emit(s?"rightdown":"mousedown",this.eventData)}}}},i.prototype.processPointerDown=function(e,t,r){var n=e.data,i=e.data.identifier;if(r)if(t.trackedPointers[i]||(t.trackedPointers[i]=new p.default(i)),this.dispatchEvent(t,"pointerdown",e),"touch"===n.pointerType)this.dispatchEvent(t,"touchstart",e);else if("mouse"===n.pointerType||"pen"===n.pointerType){var o=2===n.button;o?t.trackedPointers[i].rightDown=!0:t.trackedPointers[i].leftDown=!0,this.dispatchEvent(t,o?"rightdown":"mousedown",e)}},i.prototype.onPointerComplete=function(e,t,r){for(var n=this.normalizeToPointerData(e),i=n.length,o=e.target!==this.interactionDOMElement?"outside":"",a=0;a<i;a++){var s=n[a],l=this.getInteractionDataForPointerId(s),u=this.configureInteractionEventForDOMEvent(this.eventData,s,l);if(u.data.originalEvent=e,this.processInteractive(u,this.renderer._lastObjectRendered,r,t||!o),this.emit(t?"pointercancel":"pointerup"+o,u),"mouse"===s.pointerType||"pen"===s.pointerType){var c=2===s.button;this.emit(c?"rightup"+o:"mouseup"+o,u)}else"touch"===s.pointerType&&(this.emit(t?"touchcancel":"touchend"+o,u),this.releaseInteractionDataForPointerId(s.pointerId,l))}},i.prototype.onPointerCancel=function(e){this.supportsTouchEvents&&"touch"===e.pointerType||this.onPointerComplete(e,!0,this.processPointerCancel)},i.prototype.processPointerCancel=function(e,t){var r=e.data,n=e.data.identifier;void 0!==t.trackedPointers[n]&&(delete t.trackedPointers[n],this.dispatchEvent(t,"pointercancel",e),"touch"===r.pointerType&&this.dispatchEvent(t,"touchcancel",e))},i.prototype.onPointerUp=function(e){this.supportsTouchEvents&&"touch"===e.pointerType||this.onPointerComplete(e,!1,this.processPointerUp)},i.prototype.processPointerUp=function(e,t,r){var n=e.data,i=e.data.identifier,o=t.trackedPointers[i],a="touch"===n.pointerType,s="mouse"===n.pointerType||"pen"===n.pointerType,l=!1;if(s){var u=2===n.button,c=p.default.FLAGS,h=u?c.RIGHT_DOWN:c.LEFT_DOWN,d=void 0!==o&&o.flags&h;r?(this.dispatchEvent(t,u?"rightup":"mouseup",e),d&&(this.dispatchEvent(t,u?"rightclick":"click",e),l=!0)):d&&this.dispatchEvent(t,u?"rightupoutside":"mouseupoutside",e),o&&(u?o.rightDown=!1:o.leftDown=!1)}r?(this.dispatchEvent(t,"pointerup",e),a&&this.dispatchEvent(t,"touchend",e),o&&(s&&!l||this.dispatchEvent(t,"pointertap",e),a&&(this.dispatchEvent(t,"tap",e),o.over=!1))):o&&(this.dispatchEvent(t,"pointerupoutside",e),a&&this.dispatchEvent(t,"touchendoutside",e)),o&&o.none&&delete t.trackedPointers[i]},i.prototype.onPointerMove=function(e){if(!this.supportsTouchEvents||"touch"!==e.pointerType){var t=this.normalizeToPointerData(e);"mouse"!==t[0].pointerType&&"pen"!==t[0].pointerType||(this.didMove=!0,this.cursor=null);for(var r=t.length,n=0;n<r;n++){var i=t[n],o=this.getInteractionDataForPointerId(i),a=this.configureInteractionEventForDOMEvent(this.eventData,i,o);a.data.originalEvent=e;var s="touch"!==i.pointerType||this.moveWhenInside;this.processInteractive(a,this.renderer._lastObjectRendered,this.processPointerMove,s),this.emit("pointermove",a),"touch"===i.pointerType&&this.emit("touchmove",a),"mouse"!==i.pointerType&&"pen"!==i.pointerType||this.emit("mousemove",a)}"mouse"===t[0].pointerType&&this.setCursorMode(this.cursor)}},i.prototype.processPointerMove=function(e,t,r){var n=e.data,i="touch"===n.pointerType,o="mouse"===n.pointerType||"pen"===n.pointerType;o&&this.processPointerOverOut(e,t,r),this.moveWhenInside&&!r||(this.dispatchEvent(t,"pointermove",e),i&&this.dispatchEvent(t,"touchmove",e),o&&this.dispatchEvent(t,"mousemove",e))},i.prototype.onPointerOut=function(e){if(!this.supportsTouchEvents||"touch"!==e.pointerType){var t=this.normalizeToPointerData(e)[0];"mouse"===t.pointerType&&(this.mouseOverRenderer=!1,this.setCursorMode(null));var r=this.getInteractionDataForPointerId(t),n=this.configureInteractionEventForDOMEvent(this.eventData,t,r);n.data.originalEvent=t,this.processInteractive(n,this.renderer._lastObjectRendered,this.processPointerOverOut,!1),this.emit("pointerout",n),"mouse"===t.pointerType||"pen"===t.pointerType?this.emit("mouseout",n):this.releaseInteractionDataForPointerId(r.identifier)}},i.prototype.processPointerOverOut=function(e,t,r){var n=e.data,i=e.data.identifier,o="mouse"===n.pointerType||"pen"===n.pointerType,a=t.trackedPointers[i];r&&!a&&(a=t.trackedPointers[i]=new p.default(i)),void 0!==a&&(r&&this.mouseOverRenderer?(a.over||(a.over=!0,this.dispatchEvent(t,"pointerover",e),o&&this.dispatchEvent(t,"mouseover",e)),o&&null===this.cursor&&(this.cursor=t.cursor)):a.over&&(a.over=!1,this.dispatchEvent(t,"pointerout",this.eventData),o&&this.dispatchEvent(t,"mouseout",e),a.none&&delete t.trackedPointers[i]))},i.prototype.onPointerOver=function(e){var t=this.normalizeToPointerData(e)[0],r=this.getInteractionDataForPointerId(t),n=this.configureInteractionEventForDOMEvent(this.eventData,t,r);"mouse"===(n.data.originalEvent=t).pointerType&&(this.mouseOverRenderer=!0),this.emit("pointerover",n),"mouse"!==t.pointerType&&"pen"!==t.pointerType||this.emit("mouseover",n)},i.prototype.getInteractionDataForPointerId=function(e){var t=e.pointerId,r=void 0;return 1===t||"mouse"===e.pointerType?r=this.mouse:this.activeInteractionData[t]?r=this.activeInteractionData[t]:((r=this.interactionDataPool.pop()||new s.default).identifier=t,this.activeInteractionData[t]=r),r.copyEvent(e),r},i.prototype.releaseInteractionDataForPointerId=function(e){var t=this.activeInteractionData[e];t&&(delete this.activeInteractionData[e],t.reset(),this.interactionDataPool.push(t))},i.prototype.configureInteractionEventForDOMEvent=function(e,t,r){return e.data=r,this.mapPositionToPoint(r.global,t.clientX,t.clientY),navigator.isCocoonJS&&"touch"===t.pointerType&&(r.global.x=r.global.x/this.resolution,r.global.y=r.global.y/this.resolution),"touch"===t.pointerType&&(t.globalX=r.global.x,t.globalY=r.global.y),r.originalEvent=t,e.reset(),e},i.prototype.normalizeToPointerData=function(e){var t=[];if(this.supportsTouchEvents&&e instanceof TouchEvent)for(var r=0,n=e.changedTouches.length;r<n;r++){var i=e.changedTouches[r];void 0===i.button&&(i.button=e.touches.length?1:0),void 0===i.buttons&&(i.buttons=e.touches.length?1:0),void 0===i.isPrimary&&(i.isPrimary=1===e.touches.length&&"touchstart"===e.type),void 0===i.width&&(i.width=i.radiusX||1),void 0===i.height&&(i.height=i.radiusY||1),void 0===i.tiltX&&(i.tiltX=0),void 0===i.tiltY&&(i.tiltY=0),void 0===i.pointerType&&(i.pointerType="touch"),void 0===i.pointerId&&(i.pointerId=i.identifier||0),void 0===i.pressure&&(i.pressure=i.force||.5),i.twist=0,void(i.tangentialPressure=0)===i.layerX&&(i.layerX=i.offsetX=i.clientX),void 0===i.layerY&&(i.layerY=i.offsetY=i.clientY),i.isNormalized=!0,t.push(i)}else!(e instanceof MouseEvent)||this.supportsPointerEvents&&e instanceof window.PointerEvent||(void 0===e.isPrimary&&(e.isPrimary=!0),void 0===e.width&&(e.width=1),void 0===e.height&&(e.height=1),void 0===e.tiltX&&(e.tiltX=0),void 0===e.tiltY&&(e.tiltY=0),void 0===e.pointerType&&(e.pointerType="mouse"),void 0===e.pointerId&&(e.pointerId=1),void 0===e.pressure&&(e.pressure=.5),e.twist=0,e.tangentialPressure=0,e.isNormalized=!0),t.push(e);return t},i.prototype.destroy=function(){this.removeEvents(),this.removeAllListeners(),this.renderer=null,this.mouse=null,this.eventData=null,this.interactionDOMElement=null,this.onPointerDown=null,this.processPointerDown=null,this.onPointerUp=null,this.processPointerUp=null,this.onPointerCancel=null,this.processPointerCancel=null,this.onPointerMove=null,this.processPointerMove=null,this.onPointerOut=null,this.processPointerOverOut=null,this.onPointerOver=null,this._tempPoint=null},i}(n.default);r.default=h,a.WebGLRenderer.registerPlugin("interaction",h),a.CanvasRenderer.registerPlugin("interaction",h)},{"../core":239,"./InteractionData":330,"./InteractionEvent":331,"./InteractionTrackingData":333,"./interactiveTarget":335,eventemitter3:179}],333:[function(e,t,r){r.__esModule=!0;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}();var i=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this._pointerId=e,this._flags=t.FLAGS.NONE}return t.prototype._doSet=function(e,t){this._flags=t?this._flags|e:this._flags&~e},n(t,[{key:"pointerId",get:function(){return this._pointerId}},{key:"flags",get:function(){return this._flags},set:function(e){this._flags=e}},{key:"none",get:function(){return this._flags===this.constructor.FLAGS.NONE}},{key:"over",get:function(){return 0!=(this._flags&this.constructor.FLAGS.OVER)},set:function(e){this._doSet(this.constructor.FLAGS.OVER,e)}},{key:"rightDown",get:function(){return 0!=(this._flags&this.constructor.FLAGS.RIGHT_DOWN)},set:function(e){this._doSet(this.constructor.FLAGS.RIGHT_DOWN,e)}},{key:"leftDown",get:function(){return 0!=(this._flags&this.constructor.FLAGS.LEFT_DOWN)},set:function(e){this._doSet(this.constructor.FLAGS.LEFT_DOWN,e)}}]),t}();(r.default=i).FLAGS=Object.freeze({NONE:0,OVER:1,LEFT_DOWN:2,RIGHT_DOWN:4})},{}],334:[function(e,t,r){r.__esModule=!0;var n=e("./InteractionData");Object.defineProperty(r,"InteractionData",{enumerable:!0,get:function(){return l(n).default}});var i=e("./InteractionManager");Object.defineProperty(r,"InteractionManager",{enumerable:!0,get:function(){return l(i).default}});var o=e("./interactiveTarget");Object.defineProperty(r,"interactiveTarget",{enumerable:!0,get:function(){return l(o).default}});var a=e("./InteractionTrackingData");Object.defineProperty(r,"InteractionTrackingData",{enumerable:!0,get:function(){return l(a).default}});var s=e("./InteractionEvent");function l(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"InteractionEvent",{enumerable:!0,get:function(){return l(s).default}})},{"./InteractionData":330,"./InteractionEvent":331,"./InteractionManager":332,"./InteractionTrackingData":333,"./interactiveTarget":335}],335:[function(e,t,r){r.__esModule=!0,r.default={interactive:!1,interactiveChildren:!0,hitArea:null,get buttonMode(){return"pointer"===this.cursor},set buttonMode(e){e?this.cursor="pointer":"pointer"===this.cursor&&(this.cursor=null)},cursor:null,get trackedPointers(){return void 0===this._trackedPointers&&(this._trackedPointers={}),this._trackedPointers},_trackedPointers:void 0}},{}],336:[function(e,t,r){r.__esModule=!0,r.parse=m,r.default=function(){return function(t,r){if(t.data&&t.type===f.Resource.TYPE.XML)if(0!==t.data.getElementsByTagName("page").length&&0!==t.data.getElementsByTagName("info").length&&null!==t.data.getElementsByTagName("info")[0].getAttribute("face")){var e=t.isDataUrl?"":p.dirname(t.url);t.isDataUrl&&("."===e&&(e=""),this.baseUrl&&e&&"/"===this.baseUrl.charAt(this.baseUrl.length-1)&&(e+="/")),(e=e.replace(this.baseUrl,""))&&"/"!==e.charAt(e.length-1)&&(e+="/");for(var n=t.data.getElementsByTagName("page"),i={},o=function(e){i[e.metadata.pageFile]=e.texture,Object.keys(i).length===n.length&&(m(t,i),r())},a=0;a<n.length;++a){var s=n[a].getAttribute("file"),l=e+s,u=!1;for(var c in this.resources){var h=this.resources[c];if(h.url===l){h.metadata.pageFile=s,h.texture?o(h):h.onAfterMiddleware.add(o),u=!0;break}}if(!u){var d={crossOrigin:t.crossOrigin,loadType:f.Resource.LOAD_TYPE.IMAGE,metadata:Object.assign({pageFile:s},t.metadata.imageMetadata),parentResource:t};this.add(l,d,o)}}}else r();else r()}};var p=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}}(e("path")),f=e("resource-loader"),n=e("../extras");function m(e,t){e.bitmapFont=n.BitmapText.registerFont(e.data,t)}},{"../extras":315,path:195,"resource-loader":369}],337:[function(e,t,r){r.__esModule=!0,r.shared=r.Resource=r.textureParser=r.getResourcePath=r.spritesheetParser=r.parseBitmapFontData=r.bitmapFontParser=r.Loader=void 0;var n=e("./bitmapFontParser");Object.defineProperty(r,"bitmapFontParser",{enumerable:!0,get:function(){return u(n).default}}),Object.defineProperty(r,"parseBitmapFontData",{enumerable:!0,get:function(){return n.parse}});var i=e("./spritesheetParser");Object.defineProperty(r,"spritesheetParser",{enumerable:!0,get:function(){return u(i).default}}),Object.defineProperty(r,"getResourcePath",{enumerable:!0,get:function(){return i.getResourcePath}});var o=e("./textureParser");Object.defineProperty(r,"textureParser",{enumerable:!0,get:function(){return u(o).default}});var a=e("resource-loader");Object.defineProperty(r,"Resource",{enumerable:!0,get:function(){return a.Resource}});var s=u(e("../core/Application")),l=u(e("./loader"));function u(e){return e&&e.__esModule?e:{default:e}}r.Loader=l.default;var c=new l.default;c.destroy=function(){},r.shared=c;var h=s.default.prototype;h._loader=null,Object.defineProperty(h,"loader",{get:function(){if(!this._loader){var e=this._options.sharedLoader;this._loader=e?c:new l.default}return this._loader}}),h._parentDestroy=h.destroy,h.destroy=function(e,t){this._loader&&(this._loader.destroy(),this._loader=null),this._parentDestroy(e,t)}},{"../core/Application":217,"./bitmapFontParser":336,"./loader":338,"./spritesheetParser":339,"./textureParser":340,"resource-loader":369}],338:[function(e,t,r){r.__esModule=!0;var n=u(e("resource-loader")),i=e("resource-loader/lib/middlewares/parsing/blob"),a=u(e("eventemitter3")),o=u(e("./textureParser")),s=u(e("./spritesheetParser")),l=u(e("./bitmapFontParser"));function u(e){return e&&e.__esModule?e:{default:e}}var c=function(i){function o(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==_typeof2(t)&&"function"!=typeof t?e:t}(this,i.call(this,e,t));a.default.call(n);for(var r=0;r<o._pixiMiddleware.length;++r)n.use(o._pixiMiddleware[r]());return n.onStart.add(function(e){return n.emit("start",e)}),n.onProgress.add(function(e,t){return n.emit("progress",e,t)}),n.onError.add(function(e,t,r){return n.emit("error",e,t,r)}),n.onLoad.add(function(e,t){return n.emit("load",e,t)}),n.onComplete.add(function(e,t){return n.emit("complete",e,t)}),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+_typeof2(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(o,i),o.addPixiMiddleware=function(e){o._pixiMiddleware.push(e)},o.prototype.destroy=function(){this.removeAllListeners(),this.reset()},o}(n.default);for(var h in r.default=c,a.default.prototype)c.prototype[h]=a.default.prototype[h];c._pixiMiddleware=[i.blobMiddlewareFactory,o.default,s.default,l.default];var d=n.default.Resource;d.setExtensionXhrType("fnt",d.XHR_RESPONSE_TYPE.DOCUMENT)},{"./bitmapFontParser":336,"./spritesheetParser":339,"./textureParser":340,eventemitter3:179,"resource-loader":369,"resource-loader/lib/middlewares/parsing/blob":370}],339:[function(e,t,r){r.__esModule=!0,r.default=function(){return function(r,n){var e=r.name+"_image";if(r.data&&r.type===o.Resource.TYPE.JSON&&r.data.frames&&!this.resources[e]){var t={crossOrigin:r.crossOrigin,metadata:r.metadata.imageMetadata,parentResource:r},i=l(r,this.baseUrl);this.add(e,i,t,function(e){if(e.error)n(e.error);else{var t=new s.Spritesheet(e.texture.baseTexture,r.data,r.url);t.parse(function(){r.spritesheet=t,r.textures=t.textures,n()})}})}else n()}},r.getResourcePath=l;var n,o=e("resource-loader"),i=e("url"),a=(n=i)&&n.__esModule?n:{default:n},s=e("../core");function l(e,t){return e.isDataUrl?e.data.meta.image:a.default.resolve(e.url.replace(t,""),e.data.meta.image)}},{"../core":239,"resource-loader":369,url:188}],340:[function(e,t,r){r.__esModule=!0,r.default=function(){return function(e,t){e.data&&e.type===i.Resource.TYPE.IMAGE&&(e.texture=a.default.fromLoader(e.data,e.url,e.name)),t()}};var n,i=e("resource-loader"),o=e("../core/textures/Texture"),a=(n=o)&&n.__esModule?n:{default:n}},{"../core/textures/Texture":289,"resource-loader":369}],341:[function(e,t,r){r.__esModule=!0;var n,i=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),s=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}}(e("../core")),o=e("../core/textures/Texture"),l=(n=o)&&n.__esModule?n:{default:n};var h=new s.Point,d=new s.Polygon,a=function(a){function c(e,t,r,n,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c);var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==_typeof2(t)&&"function"!=typeof t?e:t}(this,a.call(this));return o._texture=e||l.default.EMPTY,o.uvs=r||new Float32Array([0,0,1,0,1,1,0,1]),o.vertices=t||new Float32Array([0,0,100,0,100,100,0,100]),o.indices=n||new Uint16Array([0,1,3,2]),o.dirty=0,o.indexDirty=0,o.vertexDirty=0,o.autoUpdate=!0,o.blendMode=s.BLEND_MODES.NORMAL,o.canvasPadding=s.settings.MESH_CANVAS_PADDING,o.drawMode=i||c.DRAW_MODES.TRIANGLE_MESH,o.shader=null,o.tintRgb=new Float32Array([1,1,1]),o._glDatas={},o._uvTransform=new s.TextureMatrix(o._texture),o.uploadUvTransform=!1,o.pluginName="mesh",o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+_typeof2(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(c,a),c.prototype._renderWebGL=function(e){this.refresh(),e.setObjectRenderer(e.plugins[this.pluginName]),e.plugins[this.pluginName].render(this)},c.prototype._renderCanvas=function(e){this.refresh(),e.plugins[this.pluginName].render(this)},c.prototype._onTextureUpdate=function(){this._uvTransform.texture=this._texture,this.refresh()},c.prototype.multiplyUvs=function(){this.uploadUvTransform||this._uvTransform.multiplyUvs(this.uvs)},c.prototype.refresh=function(e){this.autoUpdate&&this.vertexDirty++,this._uvTransform.update(e)&&this._refresh()},c.prototype._refresh=function(){},c.prototype._calculateBounds=function(){this._bounds.addVertices(this.transform,this.vertices,0,this.vertices.length)},c.prototype.containsPoint=function(e){if(!this.getBounds().contains(e.x,e.y))return!1;this.worldTransform.applyInverse(e,h);for(var t=this.vertices,r=d.points,n=this.indices,i=this.indices.length,o=this.drawMode===c.DRAW_MODES.TRIANGLES?3:1,a=0;a+2<i;a+=o){var s=2*n[a],l=2*n[a+1],u=2*n[a+2];if(r[0]=t[s],r[1]=t[s+1],r[2]=t[l],r[3]=t[l+1],r[4]=t[u],r[5]=t[u+1],d.contains(h.x,h.y))return!0}return!1},c.prototype.destroy=function(e){for(var t in this._glDatas){var r=this._glDatas[t];r.destroy?r.destroy():(r.vertexBuffer&&(r.vertexBuffer.destroy(),r.vertexBuffer=null),r.indexBuffer&&(r.indexBuffer.destroy(),r.indexBuffer=null),r.uvBuffer&&(r.uvBuffer.destroy(),r.uvBuffer=null),r.vao&&(r.vao.destroy(),r.vao=null))}this._glDatas=null,a.prototype.destroy.call(this,e)},i(c,[{key:"texture",get:function(){return this._texture},set:function(e){this._texture!==e&&(this._texture=e)&&(e.baseTexture.hasLoaded?this._onTextureUpdate():e.once("update",this._onTextureUpdate,this))}},{key:"tint",get:function(){return s.utils.rgb2hex(this.tintRgb)},set:function(e){this.tintRgb=s.utils.hex2rgb(e,this.tintRgb)}}]),c}(s.Container);(r.default=a).DRAW_MODES={TRIANGLE_MESH:0,TRIANGLES:1}},{"../core":239,"../core/textures/Texture":289}],342:[function(e,t,r){r.__esModule=!0;var n,i=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),o=e("./Plane"),a=(n=o)&&n.__esModule?n:{default:n};var s=function(a){function s(e,t,r,n,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s);var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==_typeof2(t)&&"function"!=typeof t?e:t}(this,a.call(this,e,4,4));return o._origWidth=e.orig.width,o._origHeight=e.orig.height,o._width=o._origWidth,o._height=o._origHeight,o._leftWidth=void 0!==t?t:10,o._rightWidth=void 0!==n?n:10,o._topHeight=void 0!==r?r:10,o._bottomHeight=void 0!==i?i:10,o.refresh(!0),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+_typeof2(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(s,a),s.prototype.updateHorizontalVertices=function(){var e=this.vertices,t=this._topHeight+this._bottomHeight,r=this._height>t?1:this._height/t;e[9]=e[11]=e[13]=e[15]=this._topHeight*r,e[17]=e[19]=e[21]=e[23]=this._height-this._bottomHeight*r,e[25]=e[27]=e[29]=e[31]=this._height},s.prototype.updateVerticalVertices=function(){var e=this.vertices,t=this._leftWidth+this._rightWidth,r=this._width>t?1:this._width/t;e[2]=e[10]=e[18]=e[26]=this._leftWidth*r,e[4]=e[12]=e[20]=e[28]=this._width-this._rightWidth*r,e[6]=e[14]=e[22]=e[30]=this._width},s.prototype._renderCanvas=function(e){var t=e.context;t.globalAlpha=this.worldAlpha,e.setBlendMode(this.blendMode);var r=this.worldTransform,n=e.resolution;e.roundPixels?t.setTransform(r.a*n,r.b*n,r.c*n,r.d*n,r.tx*n|0,r.ty*n|0):t.setTransform(r.a*n,r.b*n,r.c*n,r.d*n,r.tx*n,r.ty*n);var i=this._texture.baseTexture,o=i.source,a=i.width*i.resolution,s=i.height*i.resolution;this.drawSegment(t,o,a,s,0,1,10,11),this.drawSegment(t,o,a,s,2,3,12,13),this.drawSegment(t,o,a,s,4,5,14,15),this.drawSegment(t,o,a,s,8,9,18,19),this.drawSegment(t,o,a,s,10,11,20,21),this.drawSegment(t,o,a,s,12,13,22,23),this.drawSegment(t,o,a,s,16,17,26,27),this.drawSegment(t,o,a,s,18,19,28,29),this.drawSegment(t,o,a,s,20,21,30,31)},s.prototype.drawSegment=function(e,t,r,n,i,o,a,s){var l=this.uvs,u=this.vertices,c=(l[a]-l[i])*r,h=(l[s]-l[o])*n,d=u[a]-u[i],p=u[s]-u[o];c<1&&(c=1),h<1&&(h=1),d<1&&(d=1),p<1&&(p=1),e.drawImage(t,l[i]*r,l[o]*n,c,h,u[i],u[o],d,p)},s.prototype._refresh=function(){a.prototype._refresh.call(this);var e=this.uvs,t=this._texture;this._origWidth=t.orig.width,this._origHeight=t.orig.height;var r=1/this._origWidth,n=1/this._origHeight;e[0]=e[8]=e[16]=e[24]=0,e[1]=e[3]=e[5]=e[7]=0,e[6]=e[14]=e[22]=e[30]=1,e[25]=e[27]=e[29]=e[31]=1,e[2]=e[10]=e[18]=e[26]=r*this._leftWidth,e[4]=e[12]=e[20]=e[28]=1-r*this._rightWidth,e[9]=e[11]=e[13]=e[15]=n*this._topHeight,e[17]=e[19]=e[21]=e[23]=1-n*this._bottomHeight,this.updateHorizontalVertices(),this.updateVerticalVertices(),this.dirty++,this.multiplyUvs()},i(s,[{key:"width",get:function(){return this._width},set:function(e){this._width=e,this._refresh()}},{key:"height",get:function(){return this._height},set:function(e){this._height=e,this._refresh()}},{key:"leftWidth",get:function(){return this._leftWidth},set:function(e){this._leftWidth=e,this._refresh()}},{key:"rightWidth",get:function(){return this._rightWidth},set:function(e){this._rightWidth=e,this._refresh()}},{key:"topHeight",get:function(){return this._topHeight},set:function(e){this._topHeight=e,this._refresh()}},{key:"bottomHeight",get:function(){return this._bottomHeight},set:function(e){this._bottomHeight=e,this._refresh()}}]),s}(a.default);r.default=s},{"./Plane":343}],343:[function(e,t,r){r.__esModule=!0;var n,i=e("./Mesh"),a=(n=i)&&n.__esModule?n:{default:n};var o=function(i){function o(e,t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==_typeof2(t)&&"function"!=typeof t?e:t}(this,i.call(this,e));return n._ready=!0,n.verticesX=t||10,n.verticesY=r||10,n.drawMode=a.default.DRAW_MODES.TRIANGLES,n.refresh(),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+_typeof2(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(o,i),o.prototype._refresh=function(){for(var e=this._texture,t=this.verticesX*this.verticesY,r=[],n=[],i=[],o=this.verticesX-1,a=this.verticesY-1,s=e.width/o,l=e.height/a,u=0;u<t;u++){var c=u%this.verticesX,h=u/this.verticesX|0;r.push(c*s,h*l),n.push(c/o,h/a)}for(var d=o*a,p=0;p<d;p++){var f=p%o,m=p/o|0,v=m*this.verticesX+f,b=m*this.verticesX+f+1,y=(m+1)*this.verticesX+f,g=(m+1)*this.verticesX+f+1;i.push(v,b,y),i.push(b,g,y)}this.vertices=new Float32Array(r),this.uvs=new Float32Array(n),this.colors=new Float32Array([]),this.indices=new Uint16Array(i),this.dirty++,this.indexDirty++,this.multiplyUvs()},o.prototype._onTextureUpdate=function(){a.default.prototype._onTextureUpdate.call(this),this._ready&&this.refresh()},o}(a.default);r.default=o},{"./Mesh":341}],344:[function(e,t,r){r.__esModule=!0;var n,i=e("./Mesh");var o=function(n){function i(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==_typeof2(t)&&"function"!=typeof t?e:t}(this,n.call(this,e));return r.points=t,r.vertices=new Float32Array(4*t.length),r.uvs=new Float32Array(4*t.length),r.colors=new Float32Array(2*t.length),r.indices=new Uint16Array(2*t.length),r.autoUpdate=!0,r.refresh(),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+_typeof2(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(i,n),i.prototype._refresh=function(){var e=this.points;if(!(e.length<1)&&this._texture._uvs){this.vertices.length/4!==e.length&&(this.vertices=new Float32Array(4*e.length),this.uvs=new Float32Array(4*e.length),this.colors=new Float32Array(2*e.length),this.indices=new Uint16Array(2*e.length));var t=this.uvs,r=this.indices,n=this.colors;t[0]=0,t[1]=0,t[2]=0,t[3]=1,n[0]=1,n[1]=1,r[0]=0,r[1]=1;for(var i=e.length,o=1;o<i;o++){var a=4*o,s=o/(i-1);t[a]=s,t[a+1]=0,t[a+2]=s,t[a+3]=1,n[a=2*o]=1,n[a+1]=1,r[a=2*o]=a,r[a+1]=a+1}this.dirty++,this.indexDirty++,this.multiplyUvs(),this.refreshVertices()}},i.prototype.refreshVertices=function(){var e=this.points;if(!(e.length<1))for(var t=e[0],r=void 0,n=0,i=0,o=this.vertices,a=e.length,s=0;s<a;s++){var l=e[s],u=4*s;i=-((r=s<e.length-1?e[s+1]:l).x-t.x),n=r.y-t.y;var c=10*(1-s/(a-1));1<c&&(c=1);var h=Math.sqrt(n*n+i*i),d=this._texture.height/2;n/=h,i/=h,n*=d,i*=d,o[u]=l.x+n,o[u+1]=l.y+i,o[u+2]=l.x-n,o[u+3]=l.y-i,t=l}},i.prototype.updateTransform=function(){this.autoUpdate&&this.refreshVertices(),this.containerUpdateTransform()},i}(((n=i)&&n.__esModule?n:{default:n}).default);r.default=o},{"./Mesh":341}],345:[function(e,t,r){r.__esModule=!0;var n,i=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}}(e("../../core")),o=e("../Mesh"),a=(n=o)&&n.__esModule?n:{default:n};var s=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.renderer=e}return t.prototype.render=function(e){var t=this.renderer,r=t.context,n=e.worldTransform,i=t.resolution;t.roundPixels?r.setTransform(n.a*i,n.b*i,n.c*i,n.d*i,n.tx*i|0,n.ty*i|0):r.setTransform(n.a*i,n.b*i,n.c*i,n.d*i,n.tx*i,n.ty*i),t.context.globalAlpha=e.worldAlpha,t.setBlendMode(e.blendMode),e.drawMode===a.default.DRAW_MODES.TRIANGLE_MESH?this._renderTriangleMesh(e):this._renderTriangles(e)},t.prototype._renderTriangleMesh=function(e){for(var t=e.vertices.length/2,r=0;r<t-2;r++){var n=2*r;this._renderDrawTriangle(e,n,n+2,n+4)}},t.prototype._renderTriangles=function(e){for(var t=e.indices,r=t.length,n=0;n<r;n+=3){var i=2*t[n],o=2*t[n+1],a=2*t[n+2];this._renderDrawTriangle(e,i,o,a)}},t.prototype._renderDrawTriangle=function(e,t,r,n){var i=this.renderer.context,o=e.uvs,a=e.vertices,s=e._texture;if(s.valid){var l=s.baseTexture,u=l.source,c=l.width,h=l.height,d=void 0,p=void 0,f=void 0,m=void 0,v=void 0,b=void 0;if(e.uploadUvTransform){var y=e._uvTransform.mapCoord;d=(o[t]*y.a+o[t+1]*y.c+y.tx)*l.width,p=(o[r]*y.a+o[r+1]*y.c+y.tx)*l.width,f=(o[n]*y.a+o[n+1]*y.c+y.tx)*l.width,m=(o[t]*y.b+o[t+1]*y.d+y.ty)*l.height,v=(o[r]*y.b+o[r+1]*y.d+y.ty)*l.height,b=(o[n]*y.b+o[n+1]*y.d+y.ty)*l.height}else d=o[t]*l.width,p=o[r]*l.width,f=o[n]*l.width,m=o[t+1]*l.height,v=o[r+1]*l.height,b=o[n+1]*l.height;var g=a[t],w=a[r],_=a[n],x=a[t+1],S=a[r+1],C=a[n+1],k=e.canvasPadding/this.renderer.resolution;if(0<k){var T=k/Math.abs(e.worldTransform.a),A=k/Math.abs(e.worldTransform.d),E=(g+w+_)/3,O=(x+S+C)/3,M=g-E,P=x-O,I=Math.sqrt(M*M+P*P);g=E+M/I*(I+T),x=O+P/I*(I+A),P=S-O,w=E+(M=w-E)/(I=Math.sqrt(M*M+P*P))*(I+T),S=O+P/I*(I+A),P=C-O,_=E+(M=_-E)/(I=Math.sqrt(M*M+P*P))*(I+T),C=O+P/I*(I+A)}i.save(),i.beginPath(),i.moveTo(g,x),i.lineTo(w,S),i.lineTo(_,C),i.closePath(),i.clip();var R=d*v+m*f+p*b-v*f-m*p-d*b,D=g*v+m*_+w*b-v*_-m*w-g*b,B=d*w+g*f+p*_-w*f-g*p-d*_,L=d*v*_+m*w*f+g*p*b-g*v*f-m*p*_-d*w*b,F=x*v+m*C+S*b-v*C-m*S-x*b,j=d*S+x*f+p*C-S*f-x*p-d*C,N=d*v*C+m*S*f+x*p*b-x*v*f-m*p*C-d*S*b;i.transform(D/R,F/R,B/R,j/R,L/R,N/R),i.drawImage(u,0,0,c*l.resolution,h*l.resolution,0,0,c,h),i.restore(),this.renderer.invalidateBlendMode()}},t.prototype.renderMeshFlat=function(e){var t=this.renderer.context,r=e.vertices,n=r.length/2;t.beginPath();for(var i=1;i<n-2;++i){var o=2*i,a=r[o],s=r[o+1],l=r[o+2],u=r[o+3],c=r[o+4],h=r[o+5];t.moveTo(a,s),t.lineTo(l,u),t.lineTo(c,h)}t.fillStyle="#FF0000",t.fill(),t.closePath()},t.prototype.destroy=function(){this.renderer=null},t}();r.default=s,i.CanvasRenderer.registerPlugin("mesh",s)},{"../../core":239,"../Mesh":341}],346:[function(e,t,r){r.__esModule=!0;var n=e("./Mesh");Object.defineProperty(r,"Mesh",{enumerable:!0,get:function(){return u(n).default}});var i=e("./webgl/MeshRenderer");Object.defineProperty(r,"MeshRenderer",{enumerable:!0,get:function(){return u(i).default}});var o=e("./canvas/CanvasMeshRenderer");Object.defineProperty(r,"CanvasMeshRenderer",{enumerable:!0,get:function(){return u(o).default}});var a=e("./Plane");Object.defineProperty(r,"Plane",{enumerable:!0,get:function(){return u(a).default}});var s=e("./NineSlicePlane");Object.defineProperty(r,"NineSlicePlane",{enumerable:!0,get:function(){return u(s).default}});var l=e("./Rope");function u(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"Rope",{enumerable:!0,get:function(){return u(l).default}})},{"./Mesh":341,"./NineSlicePlane":342,"./Plane":343,"./Rope":344,"./canvas/CanvasMeshRenderer":345,"./webgl/MeshRenderer":347}],347:[function(e,t,r){r.__esModule=!0;var a=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}}(e("../../core")),s=n(e("pixi-gl-core")),l=n(e("../Mesh"));e("path");function n(e){return e&&e.__esModule?e:{default:e}}var u=a.Matrix.IDENTITY,i=function(r){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==_typeof2(t)&&"function"!=typeof t?e:t}(this,r.call(this,e));return t.shader=null,t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+_typeof2(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,r),n.prototype.onContextChange=function(){var e=this.renderer.gl;this.shader=new a.Shader(e,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n","varying vec2 vTextureCoord;\nuniform vec4 uColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;\n}\n")},n.prototype.render=function(e){var t=this.renderer,r=t.gl,n=e._texture;if(n.valid){var i=e._glDatas[t.CONTEXT_UID];i||(t.bindVao(null),(i={shader:this.shader,vertexBuffer:s.default.GLBuffer.createVertexBuffer(r,e.vertices,r.STREAM_DRAW),uvBuffer:s.default.GLBuffer.createVertexBuffer(r,e.uvs,r.STREAM_DRAW),indexBuffer:s.default.GLBuffer.createIndexBuffer(r,e.indices,r.STATIC_DRAW),vao:null,dirty:e.dirty,indexDirty:e.indexDirty,vertexDirty:e.vertexDirty}).vao=new s.default.VertexArrayObject(r).addIndex(i.indexBuffer).addAttribute(i.vertexBuffer,i.shader.attributes.aVertexPosition,r.FLOAT,!1,8,0).addAttribute(i.uvBuffer,i.shader.attributes.aTextureCoord,r.FLOAT,!1,8,0),e._glDatas[t.CONTEXT_UID]=i),t.bindVao(i.vao),e.dirty!==i.dirty&&(i.dirty=e.dirty,i.uvBuffer.upload(e.uvs)),e.indexDirty!==i.indexDirty&&(i.indexDirty=e.indexDirty,i.indexBuffer.upload(e.indices)),e.vertexDirty!==i.vertexDirty&&(i.vertexDirty=e.vertexDirty,i.vertexBuffer.upload(e.vertices)),t.bindShader(i.shader),i.shader.uniforms.uSampler=t.bindTexture(n),t.state.setBlendMode(a.utils.correctBlendMode(e.blendMode,n.baseTexture.premultipliedAlpha)),i.shader.uniforms.uTransform&&(e.uploadUvTransform?i.shader.uniforms.uTransform=e._uvTransform.mapCoord.toArray(!0):i.shader.uniforms.uTransform=u.toArray(!0)),i.shader.uniforms.translationMatrix=e.worldTransform.toArray(!0),i.shader.uniforms.uColor=a.utils.premultiplyRgba(e.tintRgb,e.worldAlpha,i.shader.uniforms.uColor,n.baseTexture.premultipliedAlpha);var o=e.drawMode===l.default.DRAW_MODES.TRIANGLE_MESH?r.TRIANGLE_STRIP:r.TRIANGLES;i.vao.draw(o,e.indices.length,0)}},n}(a.ObjectRenderer);r.default=i,a.WebGLRenderer.registerPlugin("mesh",i)},{"../../core":239,"../Mesh":341,path:195,"pixi-gl-core":203}],348:[function(e,t,r){r.__esModule=!0;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),s=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}}(e("../core")),i=e("../core/utils");var o=function(o){function a(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1500,t=arguments[1],r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:16384,n=3<arguments.length&&void 0!==arguments[3]&&arguments[3];!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==_typeof2(t)&&"function"!=typeof t?e:t}(this,o.call(this));return 16384<r&&(r=16384),e<r&&(r=e),i._properties=[!1,!0,!1,!1,!1],i._maxSize=e,i._batchSize=r,i._glBuffers={},i._bufferUpdateIDs=[],i._updateID=0,i.interactiveChildren=!1,i.blendMode=s.BLEND_MODES.NORMAL,i.autoResize=n,i.roundPixels=!0,i.baseTexture=null,i.setProperties(t),i._tint=0,i.tintRgb=new Float32Array(4),i.tint=16777215,i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+_typeof2(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,o),a.prototype.setProperties=function(e){e&&(this._properties[0]="vertices"in e||"scale"in e?!!e.vertices||!!e.scale:this._properties[0],this._properties[1]="position"in e?!!e.position:this._properties[1],this._properties[2]="rotation"in e?!!e.rotation:this._properties[2],this._properties[3]="uvs"in e?!!e.uvs:this._properties[3],this._properties[4]="tint"in e||"alpha"in e?!!e.tint||!!e.alpha:this._properties[4])},a.prototype.updateTransform=function(){this.displayObjectUpdateTransform()},a.prototype.renderWebGL=function(e){var t=this;this.visible&&!(this.worldAlpha<=0)&&this.children.length&&this.renderable&&(this.baseTexture||(this.baseTexture=this.children[0]._texture.baseTexture,this.baseTexture.hasLoaded||this.baseTexture.once("update",function(){return t.onChildrenChange(0)})),e.setObjectRenderer(e.plugins.particle),e.plugins.particle.render(this))},a.prototype.onChildrenChange=function(e){for(var t=Math.floor(e/this._batchSize);this._bufferUpdateIDs.length<t;)this._bufferUpdateIDs.push(0);this._bufferUpdateIDs[t]=++this._updateID},a.prototype.renderCanvas=function(e){if(this.visible&&!(this.worldAlpha<=0)&&this.children.length&&this.renderable){var t=e.context,r=this.worldTransform,n=!0,i=0,o=0,a=0,s=0;e.setBlendMode(this.blendMode),t.globalAlpha=this.worldAlpha,this.displayObjectUpdateTransform();for(var l=0;l<this.children.length;++l){var u=this.children[l];if(u.visible){var c=u._texture.frame;if(t.globalAlpha=this.worldAlpha*u.alpha,u.rotation%(2*Math.PI)==0)n&&(t.setTransform(r.a,r.b,r.c,r.d,r.tx*e.resolution,r.ty*e.resolution),n=!1),i=u.anchor.x*(-c.width*u.scale.x)+u.position.x+.5,o=u.anchor.y*(-c.height*u.scale.y)+u.position.y+.5,a=c.width*u.scale.x,s=c.height*u.scale.y;else{n||(n=!0),u.displayObjectUpdateTransform();var h=u.worldTransform;e.roundPixels?t.setTransform(h.a,h.b,h.c,h.d,h.tx*e.resolution|0,h.ty*e.resolution|0):t.setTransform(h.a,h.b,h.c,h.d,h.tx*e.resolution,h.ty*e.resolution),i=u.anchor.x*-c.width+.5,o=u.anchor.y*-c.height+.5,a=c.width,s=c.height}var d=u._texture.baseTexture.resolution;t.drawImage(u._texture.baseTexture.source,c.x*d,c.y*d,c.width*d,c.height*d,i*e.resolution,o*e.resolution,a*e.resolution,s*e.resolution)}}}},a.prototype.destroy=function(e){if(o.prototype.destroy.call(this,e),this._buffers)for(var t=0;t<this._buffers.length;++t)this._buffers[t].destroy();this._properties=null,this._buffers=null,this._bufferUpdateIDs=null},n(a,[{key:"tint",get:function(){return this._tint},set:function(e){this._tint=e,(0,i.hex2rgb)(e,this.tintRgb)}}]),a}(s.Container);r.default=o},{"../core":239,"../core/utils":299}],349:[function(e,t,r){r.__esModule=!0;var n=e("./ParticleContainer");Object.defineProperty(r,"ParticleContainer",{enumerable:!0,get:function(){return o(n).default}});var i=e("./webgl/ParticleRenderer");function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"ParticleRenderer",{enumerable:!0,get:function(){return o(i).default}})},{"./ParticleContainer":348,"./webgl/ParticleRenderer":351}],350:[function(e,t,r){r.__esModule=!0;var p=n(e("pixi-gl-core")),f=n(e("../../core/utils/createIndicesForQuads"));function n(e){return e&&e.__esModule?e:{default:e}}var i=function(){function a(e,t,r,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),this.gl=e,this.size=n,this.dynamicProperties=[],this.staticProperties=[];for(var i=0;i<t.length;++i){var o=t[i];o={attribute:o.attribute,size:o.size,uploadFunction:o.uploadFunction,unsignedByte:o.unsignedByte,offset:o.offset},r[i]?this.dynamicProperties.push(o):this.staticProperties.push(o)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}return a.prototype.initBuffers=function(){var e=this.gl,t=0;this.indices=(0,f.default)(this.size),this.indexBuffer=p.default.GLBuffer.createIndexBuffer(e,this.indices,e.STATIC_DRAW);for(var r=this.dynamicStride=0;r<this.dynamicProperties.length;++r){var n=this.dynamicProperties[r];n.offset=t,t+=n.size,this.dynamicStride+=n.size}var i=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(i),this.dynamicDataUint32=new Uint32Array(i),this.dynamicBuffer=p.default.GLBuffer.createVertexBuffer(e,i,e.STREAM_DRAW);for(var o=0,a=this.staticStride=0;a<this.staticProperties.length;++a){var s=this.staticProperties[a];s.offset=o,o+=s.size,this.staticStride+=s.size}var l=new ArrayBuffer(this.size*this.staticStride*4*4);this.staticData=new Float32Array(l),this.staticDataUint32=new Uint32Array(l),this.staticBuffer=p.default.GLBuffer.createVertexBuffer(e,l,e.STATIC_DRAW),this.vao=new p.default.VertexArrayObject(e).addIndex(this.indexBuffer);for(var u=0;u<this.dynamicProperties.length;++u){var c=this.dynamicProperties[u];c.unsignedByte?this.vao.addAttribute(this.dynamicBuffer,c.attribute,e.UNSIGNED_BYTE,!0,4*this.dynamicStride,4*c.offset):this.vao.addAttribute(this.dynamicBuffer,c.attribute,e.FLOAT,!1,4*this.dynamicStride,4*c.offset)}for(var h=0;h<this.staticProperties.length;++h){var d=this.staticProperties[h];d.unsignedByte?this.vao.addAttribute(this.staticBuffer,d.attribute,e.UNSIGNED_BYTE,!0,4*this.staticStride,4*d.offset):this.vao.addAttribute(this.staticBuffer,d.attribute,e.FLOAT,!1,4*this.staticStride,4*d.offset)}},a.prototype.uploadDynamic=function(e,t,r){for(var n=0;n<this.dynamicProperties.length;n++){var i=this.dynamicProperties[n];i.uploadFunction(e,t,r,i.unsignedByte?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,i.offset)}this.dynamicBuffer.upload()},a.prototype.uploadStatic=function(e,t,r){for(var n=0;n<this.staticProperties.length;n++){var i=this.staticProperties[n];i.uploadFunction(e,t,r,i.unsignedByte?this.staticDataUint32:this.staticData,this.staticStride,i.offset)}this.staticBuffer.upload()},a.prototype.destroy=function(){this.dynamicProperties=null,this.dynamicBuffer.destroy(),this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer.destroy(),this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null},a}();r.default=i},{"../../core/utils/createIndicesForQuads":297,"pixi-gl-core":203}],351:[function(e,t,r){r.__esModule=!0;var v=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}}(e("../../core")),i=n(e("./ParticleShader")),s=n(e("./ParticleBuffer")),h=e("../../core/utils");function n(e){return e&&e.__esModule?e:{default:e}}var o=function(r){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==_typeof2(t)&&"function"!=typeof t?e:t}(this,r.call(this,e));return t.shader=null,t.indexBuffer=null,t.properties=null,t.tempMatrix=new v.Matrix,t.CONTEXT_UID=0,t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+_typeof2(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,r),n.prototype.onContextChange=function(){var e=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.shader=new i.default(e),this.properties=[{attribute:this.shader.attributes.aVertexPosition,size:2,uploadFunction:this.uploadVertices,offset:0},{attribute:this.shader.attributes.aPositionCoord,size:2,uploadFunction:this.uploadPosition,offset:0},{attribute:this.shader.attributes.aRotation,size:1,uploadFunction:this.uploadRotation,offset:0},{attribute:this.shader.attributes.aTextureCoord,size:2,uploadFunction:this.uploadUvs,offset:0},{attribute:this.shader.attributes.aColor,size:1,unsignedByte:!0,uploadFunction:this.uploadTint,offset:0}]},n.prototype.start=function(){this.renderer.bindShader(this.shader)},n.prototype.render=function(e){var t=e.children,r=e._maxSize,n=e._batchSize,i=this.renderer,o=t.length;if(0!==o){r<o&&(o=r);var a=e._glBuffers[i.CONTEXT_UID];a||(a=e._glBuffers[i.CONTEXT_UID]=this.generateBuffers(e));var s=t[0]._texture.baseTexture;this.renderer.setBlendMode(v.utils.correctBlendMode(e.blendMode,s.premultipliedAlpha));var l=i.gl,u=e.worldTransform.copy(this.tempMatrix);u.prepend(i._activeRenderTarget.projectionMatrix),this.shader.uniforms.projectionMatrix=u.toArray(!0),this.shader.uniforms.uColor=v.utils.premultiplyRgba(e.tintRgb,e.worldAlpha,this.shader.uniforms.uColor,s.premultipliedAlpha),this.shader.uniforms.uSampler=i.bindTexture(s);for(var c=!1,h=0,d=0;h<o;h+=n,d+=1){var p=o-h;if(n<p&&(p=n),d>=a.length){if(!e.autoResize)break;a.push(this._generateOneMoreBuffer(e))}var f=a[d];f.uploadDynamic(t,h,p);var m=e._bufferUpdateIDs[d]||0;(c=c||f._updateID<m)&&(f._updateID=e._updateID,f.uploadStatic(t,h,p)),i.bindVao(f.vao),f.vao.draw(l.TRIANGLES,6*p)}}},n.prototype.generateBuffers=function(e){for(var t=this.renderer.gl,r=[],n=e._maxSize,i=e._batchSize,o=e._properties,a=0;a<n;a+=i)r.push(new s.default(t,this.properties,o,i));return r},n.prototype._generateOneMoreBuffer=function(e){var t=this.renderer.gl,r=e._batchSize,n=e._properties;return new s.default(t,this.properties,n,r)},n.prototype.uploadVertices=function(e,t,r,n,i,o){for(var a=0,s=0,l=0,u=0,c=0;c<r;++c){var h=e[t+c],d=h._texture,p=h.scale.x,f=h.scale.y,m=d.trim,v=d.orig;m?(a=(s=m.x-h.anchor.x*v.width)+m.width,l=(u=m.y-h.anchor.y*v.height)+m.height):(a=v.width*(1-h.anchor.x),s=v.width*-h.anchor.x,l=v.height*(1-h.anchor.y),u=v.height*-h.anchor.y),n[o]=s*p,n[o+1]=u*f,n[o+i]=a*p,n[o+i+1]=u*f,n[o+2*i]=a*p,n[o+2*i+1]=l*f,n[o+3*i]=s*p,n[o+3*i+1]=l*f,o+=4*i}},n.prototype.uploadPosition=function(e,t,r,n,i,o){for(var a=0;a<r;a++){var s=e[t+a].position;n[o]=s.x,n[o+1]=s.y,n[o+i]=s.x,n[o+i+1]=s.y,n[o+2*i]=s.x,n[o+2*i+1]=s.y,n[o+3*i]=s.x,n[o+3*i+1]=s.y,o+=4*i}},n.prototype.uploadRotation=function(e,t,r,n,i,o){for(var a=0;a<r;a++){var s=e[t+a].rotation;n[o]=s,n[o+i]=s,n[o+2*i]=s,n[o+3*i]=s,o+=4*i}},n.prototype.uploadUvs=function(e,t,r,n,i,o){for(var a=0;a<r;++a){var s=e[t+a]._texture._uvs;n[o+3*i+1]=s?(n[o]=s.x0,n[o+1]=s.y0,n[o+i]=s.x1,n[o+i+1]=s.y1,n[o+2*i]=s.x2,n[o+2*i+1]=s.y2,n[o+3*i]=s.x3,s.y3):(n[o]=0,n[o+1]=0,n[o+i]=0,n[o+i+1]=0,n[o+2*i]=0,n[o+2*i+1]=0,n[o+3*i]=0),o+=4*i}},n.prototype.uploadTint=function(e,t,r,n,i,o){for(var a=0;a<r;++a){var s=e[t+a],l=s._texture.baseTexture.premultipliedAlpha,u=s.alpha,c=u<1&&l?(0,h.premultiplyTint)(s._tintRGB,u):s._tintRGB+(255*u<<24);n[o]=c,n[o+i]=c,n[o+2*i]=c,n[o+3*i]=c,o+=4*i}},n.prototype.destroy=function(){this.renderer.gl&&this.renderer.gl.deleteBuffer(this.indexBuffer),r.prototype.destroy.call(this),this.shader.destroy(),this.indices=null,this.tempMatrix=null},n}(v.ObjectRenderer);r.default=o,v.WebGLRenderer.registerPlugin("particle",o)},{"../../core":239,"../../core/utils":299,"./ParticleBuffer":350,"./ParticleShader":352}],352:[function(e,t,r){r.__esModule=!0;var n,i=e("../../core/Shader");var o=function(t){function r(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==_typeof2(t)&&"function"!=typeof t?e:t}(this,t.call(this,e,["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","attribute vec4 aColor;","attribute vec2 aPositionCoord;","attribute float aRotation;","uniform mat3 projectionMatrix;","uniform vec4 uColor;","varying vec2 vTextureCoord;","varying vec4 vColor;","void main(void){","   float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);","   float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);","   vec2 v = vec2(x, y);","   v = v + aPositionCoord;","   gl_Position = vec4((projectionMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);","   vTextureCoord = aTextureCoord;","   vColor = aColor * uColor;","}"].join("\n"),["varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D uSampler;","void main(void){","  vec4 color = texture2D(uSampler, vTextureCoord) * vColor;","  gl_FragColor = color;","}"].join("\n")))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+_typeof2(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,t),r}(((n=i)&&n.__esModule?n:{default:n}).default);r.default=o},{"../../core/Shader":218}],353:[function(e,t,r){Math.sign||(Math.sign=function(e){return 0===(e=Number(e))||isNaN(e)?e:0<e?1:-1})},{}],354:[function(e,t,r){Number.isInteger||(Number.isInteger=function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e})},{}],355:[function(e,t,r){var n,i=e("object-assign"),o=(n=i)&&n.__esModule?n:{default:n};Object.assign||(Object.assign=o.default)},{"object-assign":193}],356:[function(e,t,r){e("./Object.assign"),e("./requestAnimationFrame"),e("./Math.sign"),e("./Number.isInteger"),window.ArrayBuffer||(window.ArrayBuffer=Array),window.Float32Array||(window.Float32Array=Array),window.Uint32Array||(window.Uint32Array=Array),window.Uint16Array||(window.Uint16Array=Array)},{"./Math.sign":353,"./Number.isInteger":354,"./Object.assign":355,"./requestAnimationFrame":357}],357:[function(e,t,r){(function(e){if(Date.now&&Date.prototype.getTime||(Date.now=function(){return(new Date).getTime()}),!e.performance||!e.performance.now){var t=Date.now();e.performance||(e.performance={}),e.performance.now=function(){return Date.now()-t}}for(var n=Date.now(),r=["ms","moz","webkit","o"],i=0;i<r.length&&!e.requestAnimationFrame;++i){var o=r[i];e.requestAnimationFrame=e[o+"RequestAnimationFrame"],e.cancelAnimationFrame=e[o+"CancelAnimationFrame"]||e[o+"CancelRequestAnimationFrame"]}e.requestAnimationFrame||(e.requestAnimationFrame=function(e){if("function"!=typeof e)throw new TypeError(e+"is not a function");var t=Date.now(),r=16+n-t;return r<0&&(r=0),n=t,setTimeout(function(){n=Date.now(),e(performance.now())},r)}),e.cancelAnimationFrame||(e.cancelAnimationFrame=function(e){return clearTimeout(e)})}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],358:[function(e,t,r){r.__esModule=!0;var n,s=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}}(e("../core")),i=e("./limiters/CountLimiter"),o=(n=i)&&n.__esModule?n:{default:n};var l=s.ticker.shared;s.settings.UPLOADS_PER_FRAME=4;var a=function(){function r(e){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),this.limiter=new o.default(s.settings.UPLOADS_PER_FRAME),this.renderer=e,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=function(){t.queue&&t.prepareItems()},this.registerFindHook(f),this.registerFindHook(m),this.registerFindHook(u),this.registerFindHook(c),this.registerFindHook(h),this.registerUploadHook(d),this.registerUploadHook(p)}return r.prototype.upload=function(e,t){"function"==typeof e&&(t=e,e=null),e&&this.add(e),this.queue.length?(t&&this.completes.push(t),this.ticking||(this.ticking=!0,l.addOnce(this.tick,this,s.UPDATE_PRIORITY.UTILITY))):t&&t()},r.prototype.tick=function(){setTimeout(this.delayedTick,0)},r.prototype.prepareItems=function(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){var e=this.queue[0],t=!1;if(e&&!e._destroyed)for(var r=0,n=this.uploadHooks.length;r<n;r++)if(this.uploadHooks[r](this.uploadHookHelper,e)){this.queue.shift(),t=!0;break}t||this.queue.shift()}if(this.queue.length)l.addOnce(this.tick,this,s.UPDATE_PRIORITY.UTILITY);else{this.ticking=!1;for(var i=this.completes.slice(0),o=this.completes.length=0,a=i.length;o<a;o++)i[o]()}},r.prototype.registerFindHook=function(e){return e&&this.addHooks.push(e),this},r.prototype.registerUploadHook=function(e){return e&&this.uploadHooks.push(e),this},r.prototype.add=function(e){for(var t=0,r=this.addHooks.length;t<r&&!this.addHooks[t](e,this.queue);t++);if(e instanceof s.Container)for(var n=e.children.length-1;0<=n;n--)this.add(e.children[n]);return this},r.prototype.destroy=function(){this.ticking&&l.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null},r}();function u(e,t){var r=!1;if(e&&e._textures&&e._textures.length)for(var n=0;n<e._textures.length;n++)if(e._textures[n]instanceof s.Texture){var i=e._textures[n].baseTexture;-1===t.indexOf(i)&&(t.push(i),r=!0)}return r}function c(e,t){return e instanceof s.BaseTexture&&(-1===t.indexOf(e)&&t.push(e),!0)}function h(e,t){if(e._texture&&e._texture instanceof s.Texture){var r=e._texture.baseTexture;return-1===t.indexOf(r)&&t.push(r),!0}return!1}function d(e,t){return t instanceof s.Text&&(t.updateText(!0),!0)}function p(e,t){if(t instanceof s.TextStyle){var r=t.toFontString();return s.TextMetrics.measureFont(r),!0}return!1}function f(e,t){if(e instanceof s.Text){-1===t.indexOf(e.style)&&t.push(e.style),-1===t.indexOf(e)&&t.push(e);var r=e._texture.baseTexture;return-1===t.indexOf(r)&&t.push(r),!0}return!1}function m(e,t){return e instanceof s.TextStyle&&(-1===t.indexOf(e)&&t.push(e),!0)}r.default=a},{"../core":239,"./limiters/CountLimiter":361}],359:[function(e,t,r){r.__esModule=!0;var n,o=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}}(e("../../core")),i=e("../BasePrepare"),a=(n=i)&&n.__esModule?n:{default:n};var s=function(r){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==_typeof2(t)&&"function"!=typeof t?e:t}(this,r.call(this,e));return(t.uploadHookHelper=t).canvas=document.createElement("canvas"),t.canvas.width=16,t.canvas.height=16,t.ctx=t.canvas.getContext("2d"),t.registerUploadHook(l),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+_typeof2(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,r),n.prototype.destroy=function(){r.prototype.destroy.call(this),this.ctx=null,this.canvas=null},n}(a.default);function l(e,t){if(t instanceof o.BaseTexture){var r=t.source,n=0===r.width?e.canvas.width:Math.min(e.canvas.width,r.width),i=0===r.height?e.canvas.height:Math.min(e.canvas.height,r.height);return e.ctx.drawImage(r,0,0,n,i,0,0,e.canvas.width,e.canvas.height),!0}return!1}r.default=s,o.CanvasRenderer.registerPlugin("prepare",s)},{"../../core":239,"../BasePrepare":358}],360:[function(e,t,r){r.__esModule=!0;var n=e("./webgl/WebGLPrepare");Object.defineProperty(r,"webgl",{enumerable:!0,get:function(){return l(n).default}});var i=e("./canvas/CanvasPrepare");Object.defineProperty(r,"canvas",{enumerable:!0,get:function(){return l(i).default}});var o=e("./BasePrepare");Object.defineProperty(r,"BasePrepare",{enumerable:!0,get:function(){return l(o).default}});var a=e("./limiters/CountLimiter");Object.defineProperty(r,"CountLimiter",{enumerable:!0,get:function(){return l(a).default}});var s=e("./limiters/TimeLimiter");function l(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"TimeLimiter",{enumerable:!0,get:function(){return l(s).default}})},{"./BasePrepare":358,"./canvas/CanvasPrepare":359,"./limiters/CountLimiter":361,"./limiters/TimeLimiter":362,"./webgl/WebGLPrepare":363}],361:[function(e,t,r){r.__esModule=!0;var n=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.maxItemsPerFrame=e,this.itemsLeft=0}return t.prototype.beginFrame=function(){this.itemsLeft=this.maxItemsPerFrame},t.prototype.allowedToUpload=function(){return 0<this.itemsLeft--},t}();r.default=n},{}],362:[function(e,t,r){r.__esModule=!0;var n=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.maxMilliseconds=e,this.frameStart=0}return t.prototype.beginFrame=function(){this.frameStart=Date.now()},t.prototype.allowedToUpload=function(){return Date.now()-this.frameStart<this.maxMilliseconds},t}();r.default=n},{}],363:[function(e,t,r){r.__esModule=!0;var n,i=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}}(e("../../core")),o=e("../BasePrepare");var a=function(r){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==_typeof2(t)&&"function"!=typeof t?e:t}(this,r.call(this,e));return t.uploadHookHelper=t.renderer,t.registerFindHook(u),t.registerUploadHook(s),t.registerUploadHook(l),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+_typeof2(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,r),n}(((n=o)&&n.__esModule?n:{default:n}).default);function s(e,t){return t instanceof i.BaseTexture&&(t._glTextures[e.CONTEXT_UID]||e.textureManager.updateTexture(t),!0)}function l(e,t){return t instanceof i.Graphics&&((t.dirty||t.clearDirty||!t._webGL[e.plugins.graphics.CONTEXT_UID])&&e.plugins.graphics.updateGraphics(t),!0)}function u(e,t){return e instanceof i.Graphics&&(t.push(e),!0)}r.default=a,i.WebGLRenderer.registerPlugin("prepare",a)},{"../../core":239,"../BasePrepare":358}],364:[function(e,t,r){t.exports=function(e,t,r){var n,i=e.length;if(!(i<=t||0===r)){var o=i-(r=i<t+r?i-t:r);for(n=t;n<o;++n)e[n]=e[n+r];e.length=o}}},{}],365:[function(e,t,r){r.__esModule=!0,r.Loader=void 0;var c="function"==typeof Symbol&&"symbol"===_typeof2(Symbol.iterator)?function(e){return _typeof2(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof2(e)},n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),a=o(e("mini-signals")),i=o(e("parse-uri")),s=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}}(e("./async")),h=e("./Resource");function o(e){return e&&e.__esModule?e:{default:e}}var l=/(#[\w-]+)?$/,u=r.Loader=function(){function o(){var r=this,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:10;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),this.baseUrl=e,this.progress=0,this.loading=!1,this.defaultQueryString="",this._beforeMiddleware=[],this._afterMiddleware=[],this._resourcesParsing=[],this._boundLoadResource=function(e,t){return r._loadResource(e,t)},this._queue=s.queue(this._boundLoadResource,t),this._queue.pause(),this.resources={},this.onProgress=new a.default,this.onError=new a.default,this.onLoad=new a.default,this.onStart=new a.default,this.onComplete=new a.default;for(var n=0;n<o._defaultBeforeMiddleware.length;++n)this.pre(o._defaultBeforeMiddleware[n]);for(var i=0;i<o._defaultAfterMiddleware.length;++i)this.use(o._defaultAfterMiddleware[i])}return o.prototype.add=function(e,t,r,n){if(Array.isArray(e)){for(var i=0;i<e.length;++i)this.add(e[i]);return this}if("object"===(void 0===e?"undefined":c(e))&&(n=t||e.callback||e.onComplete,t=(r=e).url,e=e.name||e.key||e.url),"string"!=typeof t&&(n=r,r=t,t=e),"string"!=typeof t)throw new Error("No url passed to add resource to loader.");if("function"==typeof r&&(n=r,r=null),this.loading&&(!r||!r.parentResource))throw new Error("Cannot add resources while the loader is running.");if(this.resources[e])throw new Error('Resource named "'+e+'" already exists.');if(t=this._prepareUrl(t),this.resources[e]=new h.Resource(e,t,r),"function"==typeof n&&this.resources[e].onAfterMiddleware.once(n),this.loading){for(var o=r.parentResource,a=[],s=0;s<o.children.length;++s)o.children[s].isComplete||a.push(o.children[s]);var l=o.progressChunk*(a.length+1)/(a.length+2);o.children.push(this.resources[e]),o.progressChunk=l;for(var u=0;u<a.length;++u)a[u].progressChunk=l;this.resources[e].progressChunk=l}return this._queue.push(this.resources[e]),this},o.prototype.pre=function(e){return this._beforeMiddleware.push(e),this},o.prototype.use=function(e){return this._afterMiddleware.push(e),this},o.prototype.reset=function(){for(var e in this.progress=0,this.loading=!1,this._queue.kill(),this._queue.pause(),this.resources){var t=this.resources[e];t._onLoadBinding&&t._onLoadBinding.detach(),t.isLoading&&t.abort()}return this.resources={},this},o.prototype.load=function(e){if("function"==typeof e&&this.onComplete.once(e),this.loading)return this;if(this._queue.idle())this._onStart(),this._onComplete();else{for(var t=100/this._queue._tasks.length,r=0;r<this._queue._tasks.length;++r)this._queue._tasks[r].data.progressChunk=t;this._onStart(),this._queue.resume()}return this},o.prototype._prepareUrl=function(e){var t=(0,i.default)(e,{strictMode:!0}),r=void 0;if(r=t.protocol||!t.path||0===e.indexOf("//")?e:this.baseUrl.length&&this.baseUrl.lastIndexOf("/")!==this.baseUrl.length-1&&"/"!==e.charAt(0)?this.baseUrl+"/"+e:this.baseUrl+e,this.defaultQueryString){var n=l.exec(r)[0];-1!==(r=r.substr(0,r.length-n.length)).indexOf("?")?r+="&"+this.defaultQueryString:r+="?"+this.defaultQueryString,r+=n}return r},o.prototype._loadResource=function(r,e){var n=this;r._dequeue=e,s.eachSeries(this._beforeMiddleware,function(e,t){e.call(n,r,function(){t(r.isComplete?{}:null)})},function(){r.isComplete?n._onLoad(r):(r._onLoadBinding=r.onComplete.once(n._onLoad,n),r.load())},!0)},o.prototype._onStart=function(){this.progress=0,this.loading=!0,this.onStart.dispatch(this)},o.prototype._onComplete=function(){this.progress=100,this.loading=!1,this.onComplete.dispatch(this,this.resources)},o.prototype._onLoad=function(r){var n=this;r._onLoadBinding=null,this._resourcesParsing.push(r),r._dequeue(),s.eachSeries(this._afterMiddleware,function(e,t){e.call(n,r,t)},function(){r.onAfterMiddleware.dispatch(r),n.progress=Math.min(100,n.progress+r.progressChunk),n.onProgress.dispatch(n,r),r.error?n.onError.dispatch(r.error,n,r):n.onLoad.dispatch(n,r),n._resourcesParsing.splice(n._resourcesParsing.indexOf(r),1),n._queue.idle()&&0===n._resourcesParsing.length&&n._onComplete()},!0)},n(o,[{key:"concurrency",get:function(){return this._queue.concurrency},set:function(e){this._queue.concurrency=e}}]),o}();u._defaultBeforeMiddleware=[],u._defaultAfterMiddleware=[],u.pre=function(e){return u._defaultBeforeMiddleware.push(e),u},u.use=function(e){return u._defaultAfterMiddleware.push(e),u}},{"./Resource":366,"./async":367,"mini-signals":192,"parse-uri":194}],366:[function(e,t,r){r.__esModule=!0,r.Resource=void 0;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=o(e("parse-uri")),a=o(e("mini-signals"));function o(e){return e&&e.__esModule?e:{default:e}}var s=!(!window.XDomainRequest||"withCredentials"in new XMLHttpRequest),l=null;function u(){}var c=r.Resource=function(){function o(e,t,r){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),"string"!=typeof e||"string"!=typeof t)throw new Error("Both name and url are required for constructing a resource.");r=r||{},this._flags=0,this._setFlag(o.STATUS_FLAGS.DATA_URL,0===t.indexOf("data:")),this.name=e,this.url=t,this.extension=this._getExtension(),this.data=null,this.crossOrigin=!0===r.crossOrigin?"anonymous":r.crossOrigin,this.timeout=r.timeout||0,this.loadType=r.loadType||this._determineLoadType(),this.xhrType=r.xhrType,this.metadata=r.metadata||{},this.error=null,this.xhr=null,this.children=[],this.type=o.TYPE.UNKNOWN,this.progressChunk=0,this._dequeue=u,this._onLoadBinding=null,this._elementTimer=0,this._boundComplete=this.complete.bind(this),this._boundOnError=this._onError.bind(this),this._boundOnProgress=this._onProgress.bind(this),this._boundOnTimeout=this._onTimeout.bind(this),this._boundXhrOnError=this._xhrOnError.bind(this),this._boundXhrOnTimeout=this._xhrOnTimeout.bind(this),this._boundXhrOnAbort=this._xhrOnAbort.bind(this),this._boundXhrOnLoad=this._xhrOnLoad.bind(this),this.onStart=new a.default,this.onProgress=new a.default,this.onComplete=new a.default,this.onAfterMiddleware=new a.default}return o.setExtensionLoadType=function(e,t){h(o._loadTypeMap,e,t)},o.setExtensionXhrType=function(e,t){h(o._xhrTypeMap,e,t)},o.prototype.complete=function(){this._clearEvents(),this._finish()},o.prototype.abort=function(e){if(!this.error){if(this.error=new Error(e),this._clearEvents(),this.xhr)this.xhr.abort();else if(this.xdr)this.xdr.abort();else if(this.data)if(this.data.src)this.data.src=o.EMPTY_GIF;else for(;this.data.firstChild;)this.data.removeChild(this.data.firstChild);this._finish()}},o.prototype.load=function(e){var t=this;if(!this.isLoading)if(this.isComplete)e&&setTimeout(function(){return e(t)},1);else switch(e&&this.onComplete.once(e),this._setFlag(o.STATUS_FLAGS.LOADING,!0),this.onStart.dispatch(this),!1!==this.crossOrigin&&"string"==typeof this.crossOrigin||(this.crossOrigin=this._determineCrossOrigin(this.url)),this.loadType){case o.LOAD_TYPE.IMAGE:this.type=o.TYPE.IMAGE,this._loadElement("image");break;case o.LOAD_TYPE.AUDIO:this.type=o.TYPE.AUDIO,this._loadSourceElement("audio");break;case o.LOAD_TYPE.VIDEO:this.type=o.TYPE.VIDEO,this._loadSourceElement("video");break;case o.LOAD_TYPE.XHR:default:s&&this.crossOrigin?this._loadXdr():this._loadXhr()}},o.prototype._hasFlag=function(e){return 0!=(this._flags&e)},o.prototype._setFlag=function(e,t){this._flags=t?this._flags|e:this._flags&~e},o.prototype._clearEvents=function(){clearTimeout(this._elementTimer),this.data&&this.data.removeEventListener&&(this.data.removeEventListener("error",this._boundOnError,!1),this.data.removeEventListener("load",this._boundComplete,!1),this.data.removeEventListener("progress",this._boundOnProgress,!1),this.data.removeEventListener("canplaythrough",this._boundComplete,!1)),this.xhr&&(this.xhr.removeEventListener?(this.xhr.removeEventListener("error",this._boundXhrOnError,!1),this.xhr.removeEventListener("timeout",this._boundXhrOnTimeout,!1),this.xhr.removeEventListener("abort",this._boundXhrOnAbort,!1),this.xhr.removeEventListener("progress",this._boundOnProgress,!1),this.xhr.removeEventListener("load",this._boundXhrOnLoad,!1)):(this.xhr.onerror=null,this.xhr.ontimeout=null,this.xhr.onprogress=null,this.xhr.onload=null))},o.prototype._finish=function(){if(this.isComplete)throw new Error("Complete called again for an already completed resource.");this._setFlag(o.STATUS_FLAGS.COMPLETE,!0),this._setFlag(o.STATUS_FLAGS.LOADING,!1),this.onComplete.dispatch(this)},o.prototype._loadElement=function(e){this.metadata.loadElement?this.data=this.metadata.loadElement:"image"===e&&void 0!==window.Image?this.data=new Image:this.data=document.createElement(e),this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),this.metadata.skipSource||(this.data.src=this.url),this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))},o.prototype._loadSourceElement=function(e){if(this.metadata.loadElement?this.data=this.metadata.loadElement:"audio"===e&&void 0!==window.Audio?this.data=new Audio:this.data=document.createElement(e),null!==this.data){if(this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),!this.metadata.skipSource)if(navigator.isCocoonJS)this.data.src=Array.isArray(this.url)?this.url[0]:this.url;else if(Array.isArray(this.url))for(var t=this.metadata.mimeType,r=0;r<this.url.length;++r)this.data.appendChild(this._createSource(e,this.url[r],Array.isArray(t)?t[r]:t));else{var n=this.metadata.mimeType;this.data.appendChild(this._createSource(e,this.url,Array.isArray(n)?n[0]:n))}this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.data.addEventListener("canplaythrough",this._boundComplete,!1),this.data.load(),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))}else this.abort("Unsupported element: "+e)},o.prototype._loadXhr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var e=this.xhr=new XMLHttpRequest;e.open("GET",this.url,!0),e.timeout=this.timeout,this.xhrType===o.XHR_RESPONSE_TYPE.JSON||this.xhrType===o.XHR_RESPONSE_TYPE.DOCUMENT?e.responseType=o.XHR_RESPONSE_TYPE.TEXT:e.responseType=this.xhrType,e.addEventListener("error",this._boundXhrOnError,!1),e.addEventListener("timeout",this._boundXhrOnTimeout,!1),e.addEventListener("abort",this._boundXhrOnAbort,!1),e.addEventListener("progress",this._boundOnProgress,!1),e.addEventListener("load",this._boundXhrOnLoad,!1),e.send()},o.prototype._loadXdr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var e=this.xhr=new XDomainRequest;e.timeout=this.timeout||5e3,e.onerror=this._boundXhrOnError,e.ontimeout=this._boundXhrOnTimeout,e.onprogress=this._boundOnProgress,e.onload=this._boundXhrOnLoad,e.open("GET",this.url,!0),setTimeout(function(){return e.send()},1)},o.prototype._createSource=function(e,t,r){r||(r=e+"/"+this._getExtension(t));var n=document.createElement("source");return n.src=t,n.type=r,n},o.prototype._onError=function(e){this.abort("Failed to load element using: "+e.target.nodeName)},o.prototype._onProgress=function(e){e&&e.lengthComputable&&this.onProgress.dispatch(this,e.loaded/e.total)},o.prototype._onTimeout=function(){this.abort("Load timed out.")},o.prototype._xhrOnError=function(){var e=this.xhr;this.abort(d(e)+" Request failed. Status: "+e.status+', text: "'+e.statusText+'"')},o.prototype._xhrOnTimeout=function(){var e=this.xhr;this.abort(d(e)+" Request timed out.")},o.prototype._xhrOnAbort=function(){var e=this.xhr;this.abort(d(e)+" Request was aborted by the user.")},o.prototype._xhrOnLoad=function(){var e=this.xhr,t="",r=void 0===e.status?200:e.status;if(""!==e.responseType&&"text"!==e.responseType&&void 0!==e.responseType||(t=e.responseText),0===r&&(0<t.length||e.responseType===o.XHR_RESPONSE_TYPE.BUFFER)?r=200:1223===r&&(r=204),2===(r/100|0)){if(this.xhrType===o.XHR_RESPONSE_TYPE.TEXT)this.data=t,this.type=o.TYPE.TEXT;else if(this.xhrType===o.XHR_RESPONSE_TYPE.JSON)try{this.data=JSON.parse(t),this.type=o.TYPE.JSON}catch(e){return void this.abort("Error trying to parse loaded json: "+e)}else if(this.xhrType===o.XHR_RESPONSE_TYPE.DOCUMENT)try{if(window.DOMParser){var n=new DOMParser;this.data=n.parseFromString(t,"text/xml")}else{var i=document.createElement("div");i.innerHTML=t,this.data=i}this.type=o.TYPE.XML}catch(e){return void this.abort("Error trying to parse loaded xml: "+e)}else this.data=e.response||t;this.complete()}else this.abort("["+e.status+"] "+e.statusText+": "+e.responseURL)},o.prototype._determineCrossOrigin=function(e,t){if(0===e.indexOf("data:"))return"";if(window.origin!==window.location.origin)return"anonymous";t=t||window.location,l||(l=document.createElement("a")),l.href=e;var r=!(e=(0,i.default)(l.href,{strictMode:!0})).port&&""===t.port||e.port===t.port,n=e.protocol?e.protocol+":":"";return e.host===t.hostname&&r&&n===t.protocol?"":"anonymous"},o.prototype._determineXhrType=function(){return o._xhrTypeMap[this.extension]||o.XHR_RESPONSE_TYPE.TEXT},o.prototype._determineLoadType=function(){return o._loadTypeMap[this.extension]||o.LOAD_TYPE.XHR},o.prototype._getExtension=function(){var e=this.url,t="";if(this.isDataUrl){var r=e.indexOf("/");t=e.substring(r+1,e.indexOf(";",r))}else{var n=e.indexOf("?"),i=e.indexOf("#"),o=Math.min(-1<n?n:e.length,-1<i?i:e.length);t=(e=e.substring(0,o)).substring(e.lastIndexOf(".")+1)}return t.toLowerCase()},o.prototype._getMimeFromXhrType=function(e){switch(e){case o.XHR_RESPONSE_TYPE.BUFFER:return"application/octet-binary";case o.XHR_RESPONSE_TYPE.BLOB:return"application/blob";case o.XHR_RESPONSE_TYPE.DOCUMENT:return"application/xml";case o.XHR_RESPONSE_TYPE.JSON:return"application/json";case o.XHR_RESPONSE_TYPE.DEFAULT:case o.XHR_RESPONSE_TYPE.TEXT:default:return"text/plain"}},n(o,[{key:"isDataUrl",get:function(){return this._hasFlag(o.STATUS_FLAGS.DATA_URL)}},{key:"isComplete",get:function(){return this._hasFlag(o.STATUS_FLAGS.COMPLETE)}},{key:"isLoading",get:function(){return this._hasFlag(o.STATUS_FLAGS.LOADING)}}]),o}();function h(e,t,r){t&&0===t.indexOf(".")&&(t=t.substring(1)),t&&(e[t]=r)}function d(e){return e.toString().replace("object ","")}c.STATUS_FLAGS={NONE:0,DATA_URL:1,COMPLETE:2,LOADING:4},c.TYPE={UNKNOWN:0,JSON:1,XML:2,IMAGE:3,AUDIO:4,VIDEO:5,TEXT:6},c.LOAD_TYPE={XHR:1,IMAGE:2,AUDIO:3,VIDEO:4},c.XHR_RESPONSE_TYPE={DEFAULT:"text",BUFFER:"arraybuffer",BLOB:"blob",DOCUMENT:"document",JSON:"json",TEXT:"text"},c._loadTypeMap={gif:c.LOAD_TYPE.IMAGE,png:c.LOAD_TYPE.IMAGE,bmp:c.LOAD_TYPE.IMAGE,jpg:c.LOAD_TYPE.IMAGE,jpeg:c.LOAD_TYPE.IMAGE,tif:c.LOAD_TYPE.IMAGE,tiff:c.LOAD_TYPE.IMAGE,webp:c.LOAD_TYPE.IMAGE,tga:c.LOAD_TYPE.IMAGE,svg:c.LOAD_TYPE.IMAGE,"svg+xml":c.LOAD_TYPE.IMAGE,mp3:c.LOAD_TYPE.AUDIO,ogg:c.LOAD_TYPE.AUDIO,wav:c.LOAD_TYPE.AUDIO,mp4:c.LOAD_TYPE.VIDEO,webm:c.LOAD_TYPE.VIDEO},c._xhrTypeMap={xhtml:c.XHR_RESPONSE_TYPE.DOCUMENT,html:c.XHR_RESPONSE_TYPE.DOCUMENT,htm:c.XHR_RESPONSE_TYPE.DOCUMENT,xml:c.XHR_RESPONSE_TYPE.DOCUMENT,tmx:c.XHR_RESPONSE_TYPE.DOCUMENT,svg:c.XHR_RESPONSE_TYPE.DOCUMENT,tsx:c.XHR_RESPONSE_TYPE.DOCUMENT,gif:c.XHR_RESPONSE_TYPE.BLOB,png:c.XHR_RESPONSE_TYPE.BLOB,bmp:c.XHR_RESPONSE_TYPE.BLOB,jpg:c.XHR_RESPONSE_TYPE.BLOB,jpeg:c.XHR_RESPONSE_TYPE.BLOB,tif:c.XHR_RESPONSE_TYPE.BLOB,tiff:c.XHR_RESPONSE_TYPE.BLOB,webp:c.XHR_RESPONSE_TYPE.BLOB,tga:c.XHR_RESPONSE_TYPE.BLOB,json:c.XHR_RESPONSE_TYPE.JSON,text:c.XHR_RESPONSE_TYPE.TEXT,txt:c.XHR_RESPONSE_TYPE.TEXT,ttf:c.XHR_RESPONSE_TYPE.BUFFER,otf:c.XHR_RESPONSE_TYPE.BUFFER},c.EMPTY_GIF="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==",void 0!==t&&(t.exports.default=c)},{"mini-signals":192,"parse-uri":194}],367:[function(e,t,r){function a(){}function s(t){return function(){if(null===t)throw new Error("Callback was already called.");var e=t;t=null,e.apply(this,arguments)}}r.__esModule=!0,r.eachSeries=function(r,n,i,o){var a=0,s=r.length;!function e(t){t||a===s?i&&i(t):o?setTimeout(function(){n(r[a++],e)},1):n(r[a++],e)}()},r.queue=function(t,e){if(null==e)e=1;else if(0===e)throw new Error("Concurrency must not be zero");var r=0,i={_tasks:[],concurrency:e,saturated:a,unsaturated:a,buffer:e/4,empty:a,drain:a,error:a,started:!1,paused:!1,push:function(e,t){n(e,!1,t)},kill:function(){r=0,i.drain=a,i.started=!1,i._tasks=[]},unshift:function(e,t){n(e,!0,t)},process:function(){for(;!i.paused&&r<i.concurrency&&i._tasks.length;){var e=i._tasks.shift();0===i._tasks.length&&i.empty(),(r+=1)===i.concurrency&&i.saturated(),t(e.data,s(o(e)))}},length:function(){return i._tasks.length},running:function(){return r},idle:function(){return i._tasks.length+r===0},pause:function(){!0!==i.paused&&(i.paused=!0)},resume:function(){if(!1!==i.paused){i.paused=!1;for(var e=1;e<=i.concurrency;e++)i.process()}}};function n(e,t,r){if(null!=r&&"function"!=typeof r)throw new Error("task callback must be a function");if(i.started=!0,null==e&&i.idle())setTimeout(function(){return i.drain()},1);else{var n={data:e,callback:"function"==typeof r?r:a};t?i._tasks.unshift(n):i._tasks.push(n),setTimeout(function(){return i.process()},1)}}function o(e){return function(){r-=1,e.callback.apply(e,arguments),null!=arguments[0]&&i.error(arguments[0],e.data),r<=i.concurrency-i.buffer&&i.unsaturated(),i.idle()&&i.drain(),i.process()}}return i}},{}],368:[function(e,t,r){r.__esModule=!0,r.encodeBinary=n;var s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function n(e){for(var t="",r=0;r<e.length;){for(var n=[0,0,0],i=[0,0,0,0],o=0;o<n.length;++o)r<e.length?n[o]=255&e.charCodeAt(r++):n[o]=0;switch(i[0]=n[0]>>2,i[1]=(3&n[0])<<4|n[1]>>4,i[2]=(15&n[1])<<2|n[2]>>6,i[3]=63&n[2],r-(e.length-1)){case 2:i[3]=64,i[2]=64;break;case 1:i[3]=64}for(var a=0;a<i.length;++a)t+=s.charAt(i[a])}return t}void 0!==t&&(t.exports.default=n)},{}],369:[function(e,t,r){var n=e("./Loader").Loader,i=e("./Resource").Resource,o=e("./async"),a=e("./b64");n.Resource=i,n.async=o,n.encodeBinary=a,n.base64=a,t.exports=n,t.exports.Loader=n,t.exports.default=n},{"./Loader":365,"./Resource":366,"./async":367,"./b64":368}],370:[function(e,t,r){r.__esModule=!0,r.blobMiddlewareFactory=function(){return function(e,t){if(e.data){if(e.xhr&&e.xhrType===i.Resource.XHR_RESPONSE_TYPE.BLOB)if(window.Blob&&"string"!=typeof e.data){if(0===e.data.type.indexOf("image")){var r=a.createObjectURL(e.data);return e.blob=e.data,e.data=new Image,e.data.src=r,e.type=i.Resource.TYPE.IMAGE,void(e.data.onload=function(){a.revokeObjectURL(r),e.data.onload=null,t()})}}else{var n=e.xhr.getResponseHeader("content-type");if(n&&0===n.indexOf("image"))return e.data=new Image,e.data.src="data:"+n+";base64,"+(0,o.encodeBinary)(e.xhr.responseText),e.type=i.Resource.TYPE.IMAGE,void(e.data.onload=function(){e.data.onload=null,t()})}t()}else t()}};var i=e("../../Resource"),o=e("../../b64"),a=window.URL||window.webkitURL},{"../../Resource":366,"../../b64":368}],371:[function(e,t,r){var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=e("./Subject"),o=e("./Subscription"),a=function(t){function e(){t.apply(this,arguments),this.value=null,this.hasNext=!1,this.hasCompleted=!1}return n(e,t),e.prototype._subscribe=function(e){return this.hasError?(e.error(this.thrownError),o.Subscription.EMPTY):this.hasCompleted&&this.hasNext?(e.next(this.value),e.complete(),o.Subscription.EMPTY):t.prototype._subscribe.call(this,e)},e.prototype.next=function(e){this.hasCompleted||(this.value=e,this.hasNext=!0)},e.prototype.error=function(e){this.hasCompleted||t.prototype.error.call(this,e)},e.prototype.complete=function(){this.hasCompleted=!0,this.hasNext&&t.prototype.next.call(this,this.value),t.prototype.complete.call(this)},e}(i.Subject);r.AsyncSubject=a},{"./Subject":381,"./Subscription":384}],372:[function(e,t,r){var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=e("./Subject"),o=e("./util/ObjectUnsubscribedError"),a=function(r){function e(e){r.call(this),this._value=e}return n(e,r),Object.defineProperty(e.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),e.prototype._subscribe=function(e){var t=r.prototype._subscribe.call(this,e);return t&&!t.closed&&e.next(this._value),t},e.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new o.ObjectUnsubscribedError;return this._value},e.prototype.next=function(e){r.prototype.next.call(this,this._value=e)},e}(i.Subject);r.BehaviorSubject=a},{"./Subject":381,"./util/ObjectUnsubscribedError":799}],373:[function(e,t,r){var i=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},n=function(n){function e(e,t,r){n.call(this),this.parent=e,this.outerValue=t,this.outerIndex=r,this.index=0}return i(e,n),e.prototype._next=function(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)},e.prototype._error=function(e){this.parent.notifyError(e,this),this.unsubscribe()},e.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},e}(e("./Subscriber").Subscriber);r.InnerSubscriber=n},{"./Subscriber":383}],374:[function(e,t,r){var n=e("./Observable"),i=function(){function t(e,t,r){this.kind=e,this.value=t,this.error=r,this.hasValue="N"===e}return t.prototype.observe=function(e){switch(this.kind){case"N":return e.next&&e.next(this.value);case"E":return e.error&&e.error(this.error);case"C":return e.complete&&e.complete()}},t.prototype.do=function(e,t,r){switch(this.kind){case"N":return e&&e(this.value);case"E":return t&&t(this.error);case"C":return r&&r()}},t.prototype.accept=function(e,t,r){return e&&"function"==typeof e.next?this.observe(e):this.do(e,t,r)},t.prototype.toObservable=function(){switch(this.kind){case"N":return n.Observable.of(this.value);case"E":return n.Observable.throw(this.error);case"C":return n.Observable.empty()}throw new Error("unexpected notification kind value")},t.createNext=function(e){return void 0!==e?new t("N",e):t.undefinedValueNotification},t.createError=function(e){return new t("E",void 0,e)},t.createComplete=function(){return t.completeNotification},t.completeNotification=new t("C"),t.undefinedValueNotification=new t("N",void 0),t}();r.Notification=i},{"./Observable":375}],375:[function(e,t,r){var o=e("./util/root"),a=e("./util/toSubscriber"),n=e("./symbol/observable"),i=e("./util/pipe"),s=function(){function r(e){this._isScalar=!1,e&&(this._subscribe=e)}return r.prototype.lift=function(e){var t=new r;return t.source=this,t.operator=e,t},r.prototype.subscribe=function(e,t,r){var n=this.operator,i=a.toSubscriber(e,t,r);if(n?n.call(i,this.source):i.add(this.source||!i.syncErrorThrowable?this._subscribe(i):this._trySubscribe(i)),i.syncErrorThrowable&&(i.syncErrorThrowable=!1,i.syncErrorThrown))throw i.syncErrorValue;return i},r.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){t.syncErrorThrown=!0,t.syncErrorValue=e,t.error(e)}},r.prototype.forEach=function(n,e){var i=this;if(e||(o.root.Rx&&o.root.Rx.config&&o.root.Rx.config.Promise?e=o.root.Rx.config.Promise:o.root.Promise&&(e=o.root.Promise)),!e)throw new Error("no Promise impl found");return new e(function(e,t){var r;r=i.subscribe(function(e){if(r)try{n(e)}catch(e){t(e),r.unsubscribe()}else n(e)},t,e)})},r.prototype._subscribe=function(e){return this.source.subscribe(e)},r.prototype[n.observable]=function(){return this},r.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return 0===e.length?this:i.pipeFromArray(e)(this)},r.prototype.toPromise=function(e){var n=this;if(e||(o.root.Rx&&o.root.Rx.config&&o.root.Rx.config.Promise?e=o.root.Rx.config.Promise:o.root.Promise&&(e=o.root.Promise)),!e)throw new Error("no Promise impl found");return new e(function(e,t){var r;n.subscribe(function(e){return r=e},function(e){return t(e)},function(){return e(r)})})},r.create=function(e){return new r(e)},r}();r.Observable=s},{"./symbol/observable":785,"./util/pipe":817,"./util/root":818,"./util/toSubscriber":820}],376:[function(e,t,r){r.empty={closed:!0,next:function(e){},error:function(e){throw e},complete:function(){}}},{}],377:[function(e,t,r){var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=function(e){function t(){e.apply(this,arguments)}return n(t,e),t.prototype.notifyNext=function(e,t,r,n,i){this.destination.next(t)},t.prototype.notifyError=function(e,t){this.destination.error(e)},t.prototype.notifyComplete=function(e){this.destination.complete()},t}(e("./Subscriber").Subscriber);r.OuterSubscriber=i},{"./Subscriber":383}],378:[function(e,t,r){var i=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},n=e("./Subject"),o=e("./scheduler/queue"),a=e("./Subscription"),s=e("./operators/observeOn"),l=e("./util/ObjectUnsubscribedError"),u=e("./SubjectSubscription"),c=function(n){function e(e,t,r){void 0===e&&(e=Number.POSITIVE_INFINITY),void 0===t&&(t=Number.POSITIVE_INFINITY),n.call(this),this.scheduler=r,this._events=[],this._bufferSize=e<1?1:e,this._windowTime=t<1?1:t}return i(e,n),e.prototype.next=function(e){var t=this._getNow();this._events.push(new h(t,e)),this._trimBufferThenGetEvents(),n.prototype.next.call(this,e)},e.prototype._subscribe=function(e){var t,r=this._trimBufferThenGetEvents(),n=this.scheduler;if(this.closed)throw new l.ObjectUnsubscribedError;t=this.hasError?a.Subscription.EMPTY:this.isStopped?a.Subscription.EMPTY:(this.observers.push(e),new u.SubjectSubscription(this,e)),n&&e.add(e=new s.ObserveOnSubscriber(e,n));for(var i=r.length,o=0;o<i&&!e.closed;o++)e.next(r[o].value);return this.hasError?e.error(this.thrownError):this.isStopped&&e.complete(),t},e.prototype._getNow=function(){return(this.scheduler||o.queue).now()},e.prototype._trimBufferThenGetEvents=function(){for(var e=this._getNow(),t=this._bufferSize,r=this._windowTime,n=this._events,i=n.length,o=0;o<i&&!(e-n[o].time<r);)o++;return t<i&&(o=Math.max(o,i-t)),0<o&&n.splice(0,o),n},e}(n.Subject);r.ReplaySubject=c;var h=function(e,t){this.time=e,this.value=t}},{"./Subject":381,"./SubjectSubscription":382,"./Subscription":384,"./operators/observeOn":718,"./scheduler/queue":783,"./util/ObjectUnsubscribedError":799}],379:[function(e,t,r){var n=e("./Subject");r.Subject=n.Subject,r.AnonymousSubject=n.AnonymousSubject;var i=e("./Observable");r.Observable=i.Observable,e("./add/observable/bindCallback"),e("./add/observable/bindNodeCallback"),e("./add/observable/combineLatest"),e("./add/observable/concat"),e("./add/observable/defer"),e("./add/observable/empty"),e("./add/observable/forkJoin"),e("./add/observable/from"),e("./add/observable/fromEvent"),e("./add/observable/fromEventPattern"),e("./add/observable/fromPromise"),e("./add/observable/generate"),e("./add/observable/if"),e("./add/observable/interval"),e("./add/observable/merge"),e("./add/observable/race"),e("./add/observable/never"),e("./add/observable/of"),e("./add/observable/onErrorResumeNext"),e("./add/observable/pairs"),e("./add/observable/range"),e("./add/observable/using"),e("./add/observable/throw"),e("./add/observable/timer"),e("./add/observable/zip"),e("./add/observable/dom/ajax"),e("./add/observable/dom/webSocket"),e("./add/operator/buffer"),e("./add/operator/bufferCount"),e("./add/operator/bufferTime"),e("./add/operator/bufferToggle"),e("./add/operator/bufferWhen"),e("./add/operator/catch"),e("./add/operator/combineAll"),e("./add/operator/combineLatest"),e("./add/operator/concat"),e("./add/operator/concatAll"),e("./add/operator/concatMap"),e("./add/operator/concatMapTo"),e("./add/operator/count"),e("./add/operator/dematerialize"),e("./add/operator/debounce"),e("./add/operator/debounceTime"),e("./add/operator/defaultIfEmpty"),e("./add/operator/delay"),e("./add/operator/delayWhen"),e("./add/operator/distinct"),e("./add/operator/distinctUntilChanged"),e("./add/operator/distinctUntilKeyChanged"),e("./add/operator/do"),e("./add/operator/exhaust"),e("./add/operator/exhaustMap"),e("./add/operator/expand"),e("./add/operator/elementAt"),e("./add/operator/filter"),e("./add/operator/finally"),e("./add/operator/find"),e("./add/operator/findIndex"),e("./add/operator/first"),e("./add/operator/groupBy"),e("./add/operator/ignoreElements"),e("./add/operator/isEmpty"),e("./add/operator/audit"),e("./add/operator/auditTime"),e("./add/operator/last"),e("./add/operator/let"),e("./add/operator/every"),e("./add/operator/map"),e("./add/operator/mapTo"),e("./add/operator/materialize"),e("./add/operator/max"),e("./add/operator/merge"),e("./add/operator/mergeAll"),e("./add/operator/mergeMap"),e("./add/operator/mergeMapTo"),e("./add/operator/mergeScan"),e("./add/operator/min"),e("./add/operator/multicast"),e("./add/operator/observeOn"),e("./add/operator/onErrorResumeNext"),e("./add/operator/pairwise"),e("./add/operator/partition"),e("./add/operator/pluck"),e("./add/operator/publish"),e("./add/operator/publishBehavior"),e("./add/operator/publishReplay"),e("./add/operator/publishLast"),e("./add/operator/race"),e("./add/operator/reduce"),e("./add/operator/repeat"),e("./add/operator/repeatWhen"),e("./add/operator/retry"),e("./add/operator/retryWhen"),e("./add/operator/sample"),e("./add/operator/sampleTime"),e("./add/operator/scan"),e("./add/operator/sequenceEqual"),e("./add/operator/share"),e("./add/operator/shareReplay"),e("./add/operator/single"),e("./add/operator/skip"),e("./add/operator/skipLast"),e("./add/operator/skipUntil"),e("./add/operator/skipWhile"),e("./add/operator/startWith"),e("./add/operator/subscribeOn"),e("./add/operator/switch"),e("./add/operator/switchMap"),e("./add/operator/switchMapTo"),e("./add/operator/take"),e("./add/operator/takeLast"),e("./add/operator/takeUntil"),e("./add/operator/takeWhile"),e("./add/operator/throttle"),e("./add/operator/throttleTime"),e("./add/operator/timeInterval"),e("./add/operator/timeout"),e("./add/operator/timeoutWith"),e("./add/operator/timestamp"),e("./add/operator/toArray"),e("./add/operator/toPromise"),e("./add/operator/window"),e("./add/operator/windowCount"),e("./add/operator/windowTime"),e("./add/operator/windowToggle"),e("./add/operator/windowWhen"),e("./add/operator/withLatestFrom"),e("./add/operator/zip"),e("./add/operator/zipAll");var o=e("./Subscription");r.Subscription=o.Subscription;var a=e("./Subscriber");r.Subscriber=a.Subscriber;var s=e("./AsyncSubject");r.AsyncSubject=s.AsyncSubject;var l=e("./ReplaySubject");r.ReplaySubject=l.ReplaySubject;var u=e("./BehaviorSubject");r.BehaviorSubject=u.BehaviorSubject;var c=e("./observable/ConnectableObservable");r.ConnectableObservable=c.ConnectableObservable;var h=e("./Notification");r.Notification=h.Notification;var d=e("./util/EmptyError");r.EmptyError=d.EmptyError;var p=e("./util/ArgumentOutOfRangeError");r.ArgumentOutOfRangeError=p.ArgumentOutOfRangeError;var f=e("./util/ObjectUnsubscribedError");r.ObjectUnsubscribedError=f.ObjectUnsubscribedError;var m=e("./util/TimeoutError");r.TimeoutError=m.TimeoutError;var v=e("./util/UnsubscriptionError");r.UnsubscriptionError=v.UnsubscriptionError;var b=e("./operator/timeInterval");r.TimeInterval=b.TimeInterval;var y=e("./operators/timestamp");r.Timestamp=y.Timestamp;var g=e("./testing/TestScheduler");r.TestScheduler=g.TestScheduler;var w=e("./scheduler/VirtualTimeScheduler");r.VirtualTimeScheduler=w.VirtualTimeScheduler;var _=e("./observable/dom/AjaxObservable");r.AjaxResponse=_.AjaxResponse,r.AjaxError=_.AjaxError,r.AjaxTimeoutError=_.AjaxTimeoutError;var x=e("./util/pipe");r.pipe=x.pipe;var S=e("./scheduler/asap"),C=e("./scheduler/async"),k=e("./scheduler/queue"),T=e("./scheduler/animationFrame"),A=e("./symbol/rxSubscriber"),E=e("./symbol/iterator"),O=e("./symbol/observable"),M=e("./operators");r.operators=M;var P={asap:S.asap,queue:k.queue,animationFrame:T.animationFrame,async:C.async};r.Scheduler=P;var I={rxSubscriber:A.rxSubscriber,observable:O.observable,iterator:E.iterator};r.Symbol=I},{"./AsyncSubject":371,"./BehaviorSubject":372,"./Notification":374,"./Observable":375,"./ReplaySubject":378,"./Subject":381,"./Subscriber":383,"./Subscription":384,"./add/observable/bindCallback":385,"./add/observable/bindNodeCallback":386,"./add/observable/combineLatest":387,"./add/observable/concat":388,"./add/observable/defer":389,"./add/observable/dom/ajax":390,"./add/observable/dom/webSocket":391,"./add/observable/empty":392,"./add/observable/forkJoin":393,"./add/observable/from":394,"./add/observable/fromEvent":395,"./add/observable/fromEventPattern":396,"./add/observable/fromPromise":397,"./add/observable/generate":398,"./add/observable/if":399,"./add/observable/interval":400,"./add/observable/merge":401,"./add/observable/never":402,"./add/observable/of":403,"./add/observable/onErrorResumeNext":404,"./add/observable/pairs":405,"./add/observable/race":406,"./add/observable/range":407,"./add/observable/throw":408,"./add/observable/timer":409,"./add/observable/using":410,"./add/observable/zip":411,"./add/operator/audit":412,"./add/operator/auditTime":413,"./add/operator/buffer":414,"./add/operator/bufferCount":415,"./add/operator/bufferTime":416,"./add/operator/bufferToggle":417,"./add/operator/bufferWhen":418,"./add/operator/catch":419,"./add/operator/combineAll":420,"./add/operator/combineLatest":421,"./add/operator/concat":422,"./add/operator/concatAll":423,"./add/operator/concatMap":424,"./add/operator/concatMapTo":425,"./add/operator/count":426,"./add/operator/debounce":427,"./add/operator/debounceTime":428,"./add/operator/defaultIfEmpty":429,"./add/operator/delay":430,"./add/operator/delayWhen":431,"./add/operator/dematerialize":432,"./add/operator/distinct":433,"./add/operator/distinctUntilChanged":434,"./add/operator/distinctUntilKeyChanged":435,"./add/operator/do":436,"./add/operator/elementAt":437,"./add/operator/every":438,"./add/operator/exhaust":439,"./add/operator/exhaustMap":440,"./add/operator/expand":441,"./add/operator/filter":442,"./add/operator/finally":443,"./add/operator/find":444,"./add/operator/findIndex":445,"./add/operator/first":446,"./add/operator/groupBy":447,"./add/operator/ignoreElements":448,"./add/operator/isEmpty":449,"./add/operator/last":450,"./add/operator/let":451,"./add/operator/map":452,"./add/operator/mapTo":453,"./add/operator/materialize":454,"./add/operator/max":455,"./add/operator/merge":456,"./add/operator/mergeAll":457,"./add/operator/mergeMap":458,"./add/operator/mergeMapTo":459,"./add/operator/mergeScan":460,"./add/operator/min":461,"./add/operator/multicast":462,"./add/operator/observeOn":463,"./add/operator/onErrorResumeNext":464,"./add/operator/pairwise":465,"./add/operator/partition":466,"./add/operator/pluck":467,"./add/operator/publish":468,"./add/operator/publishBehavior":469,"./add/operator/publishLast":470,"./add/operator/publishReplay":471,"./add/operator/race":472,"./add/operator/reduce":473,"./add/operator/repeat":474,"./add/operator/repeatWhen":475,"./add/operator/retry":476,"./add/operator/retryWhen":477,"./add/operator/sample":478,"./add/operator/sampleTime":479,"./add/operator/scan":480,"./add/operator/sequenceEqual":481,"./add/operator/share":482,"./add/operator/shareReplay":483,"./add/operator/single":484,"./add/operator/skip":485,"./add/operator/skipLast":486,"./add/operator/skipUntil":487,"./add/operator/skipWhile":488,"./add/operator/startWith":489,"./add/operator/subscribeOn":490,"./add/operator/switch":491,"./add/operator/switchMap":492,"./add/operator/switchMapTo":493,"./add/operator/take":494,"./add/operator/takeLast":495,"./add/operator/takeUntil":496,"./add/operator/takeWhile":497,"./add/operator/throttle":498,"./add/operator/throttleTime":499,"./add/operator/timeInterval":500,"./add/operator/timeout":501,"./add/operator/timeoutWith":502,"./add/operator/timestamp":503,"./add/operator/toArray":504,"./add/operator/toPromise":505,"./add/operator/window":506,"./add/operator/windowCount":507,"./add/operator/windowTime":508,"./add/operator/windowToggle":509,"./add/operator/windowWhen":510,"./add/operator/withLatestFrom":511,"./add/operator/zip":512,"./add/operator/zipAll":513,"./observable/ConnectableObservable":518,"./observable/dom/AjaxObservable":543,"./operator/timeInterval":655,"./operators":668,"./operators/timestamp":760,"./scheduler/VirtualTimeScheduler":779,"./scheduler/animationFrame":780,"./scheduler/asap":781,"./scheduler/async":782,"./scheduler/queue":783,"./symbol/iterator":784,"./symbol/observable":785,"./symbol/rxSubscriber":786,"./testing/TestScheduler":791,"./util/ArgumentOutOfRangeError":793,"./util/EmptyError":794,"./util/ObjectUnsubscribedError":799,"./util/TimeoutError":801,"./util/UnsubscriptionError":802,"./util/pipe":817}],380:[function(e,t,r){var n=function(){function r(e,t){void 0===t&&(t=r.now),this.SchedulerAction=e,this.now=t}return r.prototype.schedule=function(e,t,r){return void 0===t&&(t=0),new this.SchedulerAction(this,e).schedule(r,t)},r.now=Date.now?Date.now:function(){return+new Date},r}();r.Scheduler=n},{}],381:[function(e,t,r){var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=e("./Observable"),o=e("./Subscriber"),a=e("./Subscription"),s=e("./util/ObjectUnsubscribedError"),l=e("./SubjectSubscription"),u=e("./symbol/rxSubscriber"),c=function(t){function e(e){t.call(this,e),this.destination=e}return n(e,t),e}(o.Subscriber);r.SubjectSubscriber=c;var h=function(t){function e(){t.call(this),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}return n(e,t),e.prototype[u.rxSubscriber]=function(){return new c(this)},e.prototype.lift=function(e){var t=new d(this,this);return t.operator=e,t},e.prototype.next=function(e){if(this.closed)throw new s.ObjectUnsubscribedError;if(!this.isStopped)for(var t=this.observers,r=t.length,n=t.slice(),i=0;i<r;i++)n[i].next(e)},e.prototype.error=function(e){if(this.closed)throw new s.ObjectUnsubscribedError;this.hasError=!0,this.thrownError=e,this.isStopped=!0;for(var t=this.observers,r=t.length,n=t.slice(),i=0;i<r;i++)n[i].error(e);this.observers.length=0},e.prototype.complete=function(){if(this.closed)throw new s.ObjectUnsubscribedError;this.isStopped=!0;for(var e=this.observers,t=e.length,r=e.slice(),n=0;n<t;n++)r[n].complete();this.observers.length=0},e.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},e.prototype._trySubscribe=function(e){if(this.closed)throw new s.ObjectUnsubscribedError;return t.prototype._trySubscribe.call(this,e)},e.prototype._subscribe=function(e){if(this.closed)throw new s.ObjectUnsubscribedError;return this.hasError?(e.error(this.thrownError),a.Subscription.EMPTY):this.isStopped?(e.complete(),a.Subscription.EMPTY):(this.observers.push(e),new l.SubjectSubscription(this,e))},e.prototype.asObservable=function(){var e=new i.Observable;return e.source=this,e},e.create=function(e,t){return new d(e,t)},e}(i.Observable),d=function(r){function e(e,t){r.call(this),this.destination=e,this.source=t}return n(e,r),e.prototype.next=function(e){var t=this.destination;t&&t.next&&t.next(e)},e.prototype.error=function(e){var t=this.destination;t&&t.error&&this.destination.error(e)},e.prototype.complete=function(){var e=this.destination;e&&e.complete&&this.destination.complete()},e.prototype._subscribe=function(e){return this.source?this.source.subscribe(e):a.Subscription.EMPTY},e}(r.Subject=h);r.AnonymousSubject=d},{"./Observable":375,"./SubjectSubscription":382,"./Subscriber":383,"./Subscription":384,"./symbol/rxSubscriber":786,"./util/ObjectUnsubscribedError":799}],382:[function(e,t,r){var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=function(r){function e(e,t){r.call(this),this.subject=e,this.subscriber=t,this.closed=!1}return n(e,r),e.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var e=this.subject,t=e.observers;if(this.subject=null,t&&0!==t.length&&!e.isStopped&&!e.closed){var r=t.indexOf(this.subscriber);-1!==r&&t.splice(r,1)}}},e}(e("./Subscription").Subscription);r.SubjectSubscription=i},{"./Subscription":384}],383:[function(e,t,r){var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},s=e("./util/isFunction"),i=e("./Subscription"),l=e("./Observer"),a=e("./symbol/rxSubscriber"),u=function(o){function i(e,t,r){switch(o.call(this),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=l.empty;break;case 1:if(!e){this.destination=l.empty;break}if("object"===_typeof2(e)){if((i=e)instanceof u||"syncErrorThrowable"in i&&i[a.rxSubscriber]){var n=e[a.rxSubscriber]();this.syncErrorThrowable=n.syncErrorThrowable,(this.destination=n).add(this)}else this.syncErrorThrowable=!0,this.destination=new c(this,e);break}default:this.syncErrorThrowable=!0,this.destination=new c(this,e,t,r)}var i}return n(i,o),i.prototype[a.rxSubscriber]=function(){return this},i.create=function(e,t,r){var n=new i(e,t,r);return n.syncErrorThrowable=!1,n},i.prototype.next=function(e){this.isStopped||this._next(e)},i.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},i.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},i.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,o.prototype.unsubscribe.call(this))},i.prototype._next=function(e){this.destination.next(e)},i.prototype._error=function(e){this.destination.error(e),this.unsubscribe()},i.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},i.prototype._unsubscribeAndRecycle=function(){var e=this._parent,t=this._parents;return this._parent=null,this._parents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parent=e,this._parents=t,this},i}(i.Subscription),c=function(a){function e(e,t,r,n){var i;a.call(this),this._parentSubscriber=e;var o=this;s.isFunction(t)?i=t:t&&(i=t.next,r=t.error,n=t.complete,t!==l.empty&&(o=Object.create(t),s.isFunction(o.unsubscribe)&&this.add(o.unsubscribe.bind(o)),o.unsubscribe=this.unsubscribe.bind(this))),this._context=o,this._next=i,this._error=r,this._complete=n}return n(e,a),e.prototype.next=function(e){if(!this.isStopped&&this._next){var t=this._parentSubscriber;t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}},e.prototype.error=function(e){if(!this.isStopped){var t=this._parentSubscriber;if(this._error)t.syncErrorThrowable?this.__tryOrSetError(t,this._error,e):this.__tryOrUnsub(this._error,e),this.unsubscribe();else{if(!t.syncErrorThrowable)throw this.unsubscribe(),e;t.syncErrorValue=e,t.syncErrorThrown=!0,this.unsubscribe()}}},e.prototype.complete=function(){var e=this;if(!this.isStopped){var t=this._parentSubscriber;if(this._complete){var r=function(){return e._complete.call(e._context)};t.syncErrorThrowable?this.__tryOrSetError(t,r):this.__tryOrUnsub(r),this.unsubscribe()}else this.unsubscribe()}},e.prototype.__tryOrUnsub=function(e,t){try{e.call(this._context,t)}catch(e){throw this.unsubscribe(),e}},e.prototype.__tryOrSetError=function(t,e,r){try{e.call(this._context,r)}catch(e){return t.syncErrorValue=e,t.syncErrorThrown=!0}return!1},e.prototype._unsubscribe=function(){var e=this._parentSubscriber;this._context=null,this._parentSubscriber=null,e.unsubscribe()},e}(r.Subscriber=u)},{"./Observer":376,"./Subscription":384,"./symbol/rxSubscriber":786,"./util/isFunction":810}],384:[function(e,t,r){var c=e("./util/isArray"),h=e("./util/isObject"),d=e("./util/isFunction"),p=e("./util/tryCatch"),f=e("./util/errorObject"),m=e("./util/UnsubscriptionError"),n=function(){function n(e){this.closed=!1,this._parent=null,this._parents=null,this._subscriptions=null,e&&(this._unsubscribe=e)}var e;return n.prototype.unsubscribe=function(){var e,t=!1;if(!this.closed){var r=this._parent,n=this._parents,i=this._unsubscribe,o=this._subscriptions;this.closed=!0,this._parent=null,this._parents=null,this._subscriptions=null;for(var a=-1,s=n?n.length:0;r;)r.remove(this),r=++a<s&&n[a]||null;if(d.isFunction(i))p.tryCatch(i).call(this)===f.errorObject&&(t=!0,e=e||(f.errorObject.e instanceof m.UnsubscriptionError?v(f.errorObject.e.errors):[f.errorObject.e]));if(c.isArray(o))for(a=-1,s=o.length;++a<s;){var l=o[a];if(h.isObject(l))if(p.tryCatch(l.unsubscribe).call(l)===f.errorObject){t=!0,e=e||[];var u=f.errorObject.e;u instanceof m.UnsubscriptionError?e=e.concat(v(u.errors)):e.push(u)}}if(t)throw new m.UnsubscriptionError(e)}},n.prototype.add=function(e){if(!e||e===n.EMPTY)return n.EMPTY;if(e===this)return this;var t=e;switch(_typeof2(e)){case"function":t=new n(e);case"object":if(t.closed||"function"!=typeof t.unsubscribe)return t;if(this.closed)return t.unsubscribe(),t;if("function"!=typeof t._addParent){var r=t;(t=new n)._subscriptions=[r]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}return(this._subscriptions||(this._subscriptions=[])).push(t),t._addParent(this),t},n.prototype.remove=function(e){var t=this._subscriptions;if(t){var r=t.indexOf(e);-1!==r&&t.splice(r,1)}},n.prototype._addParent=function(e){var t=this._parent,r=this._parents;t&&t!==e?r?-1===r.indexOf(e)&&r.push(e):this._parents=[e]:this._parent=e},n.EMPTY=((e=new n).closed=!0,e),n}();function v(e){return e.reduce(function(e,t){return e.concat(t instanceof m.UnsubscriptionError?t.errors:t)},[])}r.Subscription=n},{"./util/UnsubscriptionError":802,"./util/errorObject":805,"./util/isArray":807,"./util/isFunction":810,"./util/isObject":812,"./util/tryCatch":821}],385:[function(e,t,r){var n=e("../../Observable"),i=e("../../observable/bindCallback");n.Observable.bindCallback=i.bindCallback},{"../../Observable":375,"../../observable/bindCallback":538}],386:[function(e,t,r){var n=e("../../Observable"),i=e("../../observable/bindNodeCallback");n.Observable.bindNodeCallback=i.bindNodeCallback},{"../../Observable":375,"../../observable/bindNodeCallback":539}],387:[function(e,t,r){var n=e("../../Observable"),i=e("../../observable/combineLatest");n.Observable.combineLatest=i.combineLatest},{"../../Observable":375,"../../observable/combineLatest":540}],388:[function(e,t,r){var n=e("../../Observable"),i=e("../../observable/concat");n.Observable.concat=i.concat},{"../../Observable":375,"../../observable/concat":541}],389:[function(e,t,r){var n=e("../../Observable"),i=e("../../observable/defer");n.Observable.defer=i.defer},{"../../Observable":375,"../../observable/defer":542}],390:[function(e,t,r){var n=e("../../../Observable"),i=e("../../../observable/dom/ajax");n.Observable.ajax=i.ajax},{"../../../Observable":375,"../../../observable/dom/ajax":545}],391:[function(e,t,r){var n=e("../../../Observable"),i=e("../../../observable/dom/webSocket");n.Observable.webSocket=i.webSocket},{"../../../Observable":375,"../../../observable/dom/webSocket":546}],392:[function(e,t,r){var n=e("../../Observable"),i=e("../../observable/empty");n.Observable.empty=i.empty},{"../../Observable":375,"../../observable/empty":547}],393:[function(e,t,r){var n=e("../../Observable"),i=e("../../observable/forkJoin");n.Observable.forkJoin=i.forkJoin},{"../../Observable":375,"../../observable/forkJoin":548}],394:[function(e,t,r){var n=e("../../Observable"),i=e("../../observable/from");n.Observable.from=i.from},{"../../Observable":375,"../../observable/from":549}],395:[function(e,t,r){var n=e("../../Observable"),i=e("../../observable/fromEvent");n.Observable.fromEvent=i.fromEvent},{"../../Observable":375,"../../observable/fromEvent":550}],396:[function(e,t,r){var n=e("../../Observable"),i=e("../../observable/fromEventPattern");n.Observable.fromEventPattern=i.fromEventPattern},{"../../Observable":375,"../../observable/fromEventPattern":551}],397:[function(e,t,r){var n=e("../../Observable"),i=e("../../observable/fromPromise");n.Observable.fromPromise=i.fromPromise},{"../../Observable":375,"../../observable/fromPromise":552}],398:[function(e,t,r){var n=e("../../Observable"),i=e("../../observable/generate");n.Observable.generate=i.generate},{"../../Observable":375,"../../observable/generate":553}],399:[function(e,t,r){var n=e("../../Observable"),i=e("../../observable/if");n.Observable.if=i._if},{"../../Observable":375,"../../observable/if":554}],400:[function(e,t,r){var n=e("../../Observable"),i=e("../../observable/interval");n.Observable.interval=i.interval},{"../../Observable":375,"../../observable/interval":555}],401:[function(e,t,r){var n=e("../../Observable"),i=e("../../observable/merge");n.Observable.merge=i.merge},{"../../Observable":375,"../../observable/merge":556}],402:[function(e,t,r){var n=e("../../Observable"),i=e("../../observable/never");n.Observable.never=i.never},{"../../Observable":375,"../../observable/never":557}],403:[function(e,t,r){var n=e("../../Observable"),i=e("../../observable/of");n.Observable.of=i.of},{"../../Observable":375,"../../observable/of":558}],404:[function(e,t,r){var n=e("../../Observable"),i=e("../../observable/onErrorResumeNext");n.Observable.onErrorResumeNext=i.onErrorResumeNext},{"../../Observable":375,"../../observable/onErrorResumeNext":559}],405:[function(e,t,r){var n=e("../../Observable"),i=e("../../observable/pairs");n.Observable.pairs=i.pairs},{"../../Observable":375,"../../observable/pairs":560}],406:[function(e,t,r){var n=e("../../Observable"),i=e("../../observable/race");n.Observable.race=i.race},{"../../Observable":375,"../../observable/race":561}],407:[function(e,t,r){var n=e("../../Observable"),i=e("../../observable/range");n.Observable.range=i.range},{"../../Observable":375,"../../observable/range":562}],408:[function(e,t,r){var n=e("../../Observable"),i=e("../../observable/throw");n.Observable.throw=i._throw},{"../../Observable":375,"../../observable/throw":563}],409:[function(e,t,r){var n=e("../../Observable"),i=e("../../observable/timer");n.Observable.timer=i.timer},{"../../Observable":375,"../../observable/timer":564}],410:[function(e,t,r){var n=e("../../Observable"),i=e("../../observable/using");n.Observable.using=i.using},{"../../Observable":375,"../../observable/using":565}],411:[function(e,t,r){var n=e("../../Observable"),i=e("../../observable/zip");n.Observable.zip=i.zip},{"../../Observable":375,"../../observable/zip":566}],412:[function(e,t,r){var n=e("../../Observable"),i=e("../../operator/audit");n.Observable.prototype.audit=i.audit},{"../../Observable":375,"../../operator/audit":567}],413:[function(e,t,r){var n=e("../../Observable"),i=e("../../operator/auditTime");n.Observable.prototype.auditTime=i.auditTime},{"../../Observable":375,"../../operator/auditTime":568}],414:[function(e,t,r){var n=e("../../Observable"),i=e("../../operator/buffer");n.Observable.prototype.buffer=i.buffer},{"../../Observable":375,"../../operator/buffer":569}],415:[function(e,t,r){var n=e("../../Observable"),i=e("../../operator/bufferCount");n.Observable.prototype.bufferCount=i.bufferCount},{"../../Observable":375,"../../operator/bufferCount":570}],416:[function(e,t,r){var n=e("../../Observable"),i=e("../../operator/bufferTime");n.Observable.prototype.bufferTime=i.bufferTime},{"../../Observable":375,"../../operator/bufferTime":571}],417:[function(e,t,r){var n=e("../../Observable"),i=e("../../operator/bufferToggle");n.Observable.prototype.bufferToggle=i.bufferToggle},{"../../Observable":375,"../../operator/bufferToggle":572}],418:[function(e,t,r){var n=e("../../Observable"),i=e("../../operator/bufferWhen");n.Observable.prototype.bufferWhen=i.bufferWhen},{"../../Observable":375,"../../operator/bufferWhen":573}],419:[function(e,t,r){var n=e("../../Observable"),i=e("../../operator/catch");n.Observable.prototype.catch=i._catch,n.Observable.prototype._catch=i._catch},{"../../Observable":375,"../../operator/catch":574}],420:[function(e,t,r){var n=e("../../Observable"),i=e("../../operator/combineAll");n.Observable.prototype.combineAll=i.combineAll},{"../../Observable":375,"../../operator/combineAll":575}],421:[function(e,t,r){var n=e("../../Observable"),i=e("../../operator/combineLatest");n.Observable.prototype.combineLatest=i.combineLatest},{"../../Observable":375,"../../operator/combineLatest":576}],422:[function(e,t,r){var n=e("../../Observable"),i=e("../../operator/concat");n.Observable.prototype.concat=i.concat},{"../../Observable":375,"../../operator/concat":577}],423:[function(e,t,r){var n=e("../../Observable"),i=e("../../operator/concatAll");n.Observable.prototype.concatAll=i.concatAll},{"../../Observable":375,"../../operator/concatAll":578}],424:[function(e,t,r){var n=e("../../Observable"),i=e("../../operator/concatMap");n.Observable.prototype.concatMap=i.concatMap},{"../../Observable":375,"../../operator/concatMap":579}],425:[function(e,t,r){var n=e("../../Observable"),i=e("../../operator/concatMapTo");n.Observable.prototype.concatMapTo=i.concatMapTo},{"../../Observable":375,"../../operator/concatMapTo":580}],426:[function(e,t,r){var n=e("../../Observable"),i=e("../../operator/count");n.Observable.prototype.count=i.count},{"../../Observable":375,"../../operator/count":581}],427:[function(e,t,r){var n=e("../../Observable"),i=e("../../operator/debounce");n.Observable.prototype.debounce=i.debounce},{"../../Observable":375,"../../operator/debounce":582}],428:[function(e,t,r){var n=e("../../Observable"),i=e("../../operator/debounceTime");n.Observable.prototype.debounceTime=i.debounceTime},{"../../Observable":375,"../../operator/debounceTime":583}],429:[function(e,t,r){var n=e("../../Observable"),i=e("../../operator/defaultIfEmpty");n.Observable.prototype.defaultIfEmpty=i.defaultIfEmpty},{"../../Observable":375,"../../operator/defaultIfEmpty":584}],430:[function(e,t,r){var n=e("../../Observable"),i=e("../../operator/delay");n.Observable.prototype.delay=i.delay},{"../../Observable":375,"../../operator/delay":585}],431:[function(e,t,r){var n=e("../../Observable"),i=e("../../operator/delayWhen");n.Observable.prototype.delayWhen=i.delayWhen},{"../../Observable":375,"../../operator/delayWhen":586}],432:[function(e,t,r){var n=e("../../Observable"),i=e("../../operator/dematerialize");n.Observable.prototype.dematerialize=i.dematerialize},{"../../Observable":375,"../../operator/dematerialize":587}],433:[function(e,t,r){var n=e("../../Observable"),i=e("../../operator/distinct");n.Observable.prototype.distinct=i.distinct},{"../../Observable":375,"../../operator/distinct":588}],434:[function(e,t,r){var n=e("../../Observable"),i=e("../../operator/distinctUntilChanged");n.Observable.prototype.distinctUntilChanged=i.distinctUntilChanged},{"../../Observable":375,"../../operator/distinctUntilChanged":589}],435:[function(e,t,r){var n=e("../../Observable"),i=e("../../operator/distinctUntilKeyChanged");n.Observable.prototype.distinctUntilKeyChanged=i.distinctUntilKeyChanged},{"../../Observable":375,"../../operator/distinctUntilKeyChanged":590}],436:[function(e,t,r){var n=e("../../Observable"),i=e("../../operator/do");n.Observable.prototype.do=i._do,n.Observable.prototype._do=i._do},{"../../Observable":375,"../../operator/do":591}],437:[function(e,t,r){var n=e("../../Observable"),i=e("../../operator/elementAt");n.Observable.prototype.elementAt=i.elementAt},{"../../Observable":375,"../../operator/elementAt":592}],438:[function(e,t,r){var n=e("../../Observable"),i=e("../../operator/every");n.Observable.prototype.every=i.every},{"../../Observable":375,"../../operator/every":593}],439:[function(e,t,r){var n=e("../../Observable"),i=e("../../operator/exhaust");n.Observable.prototype.exhaust=i.exhaust},{"../../Observable":375,"../../operator/exhaust":594}],440:[function(e,t,r){var n=e("../../Observable"),i=e("../../operator/exhaustMap");n.Observable.prototype.exhaustMap=i.exhaustMap},{"../../Observable":375,"../../operator/exhaustMap":595}],441:[function(e,t,r){var n=e("../../Observable"),i=e("../../operator/expand");n.Observable.prototype.expand=i.expand},{"../../Observable":375,"../../operator/expand":596}],442:[function(e,t,r){var n=e("../../Observable"),i=e("../../operator/filter");n.Observable.prototype.filter=i.filter},{"../../Observable":375,"../../operator/filter":597}],443:[function(e,t,r){var n=e("../../Observable"),i=e("../../operator/finally");n.Observable.prototype.finally=i._finally,n.Observable.prototype._finally=i._finally},{"../../Observable":375,"../../operator/finally":598}],444:[function(e,t,r){var n=e("../../Observable"),i=e("../../operator/find");n.Observable.prototype.find=i.find},{"../../Observable":375,"../../operator/find":599}],445:[function(e,t,r){var n=e("../../Observable"),i=e("../../operator/findIndex");n.Observable.prototype.findIndex=i.findIndex},{"../../Observable":375,"../../operator/findIndex":600}],446:[function(e,t,r){var n=e("../../Observable"),i=e("../../operator/first");n.Observable.prototype.first=i.first},{"../../Observable":375,"../../operator/first":601}],447:[function(e,t,r){var n=e("../../Observable"),i=e("../../operator/groupBy");n.Observable.prototype.groupBy=i.groupBy},{"../../Observable":375,"../../operator/groupBy":602}],448:[function(e,t,r){var n=e("../../Observable"),i=e("../../operator/ignoreElements");n.Observable.prototype.ignoreElements=i.ignoreElements},{"../../Observable":375,"../../operator/ignoreElements":603}],449:[function(e,t,r){var n=e("../../Observable"),i=e("../../operator/isEmpty");n.Observable.prototype.isEmpty=i.isEmpty},{"../../Observable":375,"../../operator/isEmpty":604}],450:[function(e,t,r){var n=e("../../Observable"),i=e("../../operator/last");n.Observable.prototype.last=i.last},{"../../Observable":375,"../../operator/last":605}],451:[function(e,t,r){var n=e("../../Observable"),i=e("../../operator/let");n.Observable.prototype.let=i.letProto,n.Observable.prototype.letBind=i.letProto},{"../../Observable":375,"../../operator/let":606}],452:[function(e,t,r){var n=e("../../Observable"),i=e("../../operator/map");n.Observable.prototype.map=i.map},{"../../Observable":375,"../../operator/map":607}],453:[function(e,t,r){var n=e("../../Observable"),i=e("../../operator/mapTo");n.Observable.prototype.mapTo=i.mapTo},{"../../Observable":375,"../../operator/mapTo":608}],454:[function(e,t,r){var n=e("../../Observable"),i=e("../../operator/materialize");n.Observable.prototype.materialize=i.materialize},{"../../Observable":375,"../../operator/materialize":609}],455:[function(e,t,r){var n=e("../../Observable"),i=e("../../operator/max");n.Observable.prototype.max=i.max},{"../../Observable":375,"../../operator/max":610}],456:[function(e,t,r){var n=e("../../Observable"),i=e("../../operator/merge");n.Observable.prototype.merge=i.merge},{"../../Observable":375,"../../operator/merge":611}],457:[function(e,t,r){var n=e("../../Observable"),i=e("../../operator/mergeAll");n.Observable.prototype.mergeAll=i.mergeAll},{"../../Observable":375,"../../operator/mergeAll":612}],458:[function(e,t,r){var n=e("../../Observable"),i=e("../../operator/mergeMap");n.Observable.prototype.mergeMap=i.mergeMap,n.Observable.prototype.flatMap=i.mergeMap},{"../../Observable":375,"../../operator/mergeMap":613}],459:[function(e,t,r){var n=e("../../Observable"),i=e("../../operator/mergeMapTo");n.Observable.prototype.flatMapTo=i.mergeMapTo,n.Observable.prototype.mergeMapTo=i.mergeMapTo},{"../../Observable":375,"../../operator/mergeMapTo":614}],460:[function(e,t,r){var n=e("../../Observable"),i=e("../../operator/mergeScan");n.Observable.prototype.mergeScan=i.mergeScan},{"../../Observable":375,"../../operator/mergeScan":615}],461:[function(e,t,r){var n=e("../../Observable"),i=e("../../operator/min");n.Observable.prototype.min=i.min},{"../../Observable":375,"../../operator/min":616}],462:[function(e,t,r){var n=e("../../Observable"),i=e("../../operator/multicast");n.Observable.prototype.multicast=i.multicast},{"../../Observable":375,"../../operator/multicast":617}],463:[function(e,t,r){var n=e("../../Observable"),i=e("../../operator/observeOn");n.Observable.prototype.observeOn=i.observeOn},{"../../Observable":375,"../../operator/observeOn":618}],464:[function(e,t,r){var n=e("../../Observable"),i=e("../../operator/onErrorResumeNext");n.Observable.prototype.onErrorResumeNext=i.onErrorResumeNext},{"../../Observable":375,"../../operator/onErrorResumeNext":619}],465:[function(e,t,r){var n=e("../../Observable"),i=e("../../operator/pairwise");n.Observable.prototype.pairwise=i.pairwise},{"../../Observable":375,"../../operator/pairwise":620}],466:[function(e,t,r){var n=e("../../Observable"),i=e("../../operator/partition");n.Observable.prototype.partition=i.partition},{"../../Observable":375,"../../operator/partition":621}],467:[function(e,t,r){var n=e("../../Observable"),i=e("../../operator/pluck");n.Observable.prototype.pluck=i.pluck},{"../../Observable":375,"../../operator/pluck":622}],468:[function(e,t,r){var n=e("../../Observable"),i=e("../../operator/publish");n.Observable.prototype.publish=i.publish},{"../../Observable":375,"../../operator/publish":623}],469:[function(e,t,r){var n=e("../../Observable"),i=e("../../operator/publishBehavior");n.Observable.prototype.publishBehavior=i.publishBehavior},{"../../Observable":375,"../../operator/publishBehavior":624}],470:[function(e,t,r){var n=e("../../Observable"),i=e("../../operator/publishLast");n.Observable.prototype.publishLast=i.publishLast},{"../../Observable":375,"../../operator/publishLast":625}],471:[function(e,t,r){var n=e("../../Observable"),i=e("../../operator/publishReplay");n.Observable.prototype.publishReplay=i.publishReplay},{"../../Observable":375,"../../operator/publishReplay":626}],472:[function(e,t,r){var n=e("../../Observable"),i=e("../../operator/race");n.Observable.prototype.race=i.race},{"../../Observable":375,"../../operator/race":627}],473:[function(e,t,r){var n=e("../../Observable"),i=e("../../operator/reduce");n.Observable.prototype.reduce=i.reduce},{"../../Observable":375,"../../operator/reduce":628}],474:[function(e,t,r){var n=e("../../Observable"),i=e("../../operator/repeat");n.Observable.prototype.repeat=i.repeat},{"../../Observable":375,"../../operator/repeat":629}],475:[function(e,t,r){var n=e("../../Observable"),i=e("../../operator/repeatWhen");n.Observable.prototype.repeatWhen=i.repeatWhen},{"../../Observable":375,"../../operator/repeatWhen":630}],476:[function(e,t,r){var n=e("../../Observable"),i=e("../../operator/retry");n.Observable.prototype.retry=i.retry},{"../../Observable":375,"../../operator/retry":631}],477:[function(e,t,r){var n=e("../../Observable"),i=e("../../operator/retryWhen");n.Observable.prototype.retryWhen=i.retryWhen},{"../../Observable":375,"../../operator/retryWhen":632}],478:[function(e,t,r){var n=e("../../Observable"),i=e("../../operator/sample");n.Observable.prototype.sample=i.sample},{"../../Observable":375,"../../operator/sample":633}],479:[function(e,t,r){var n=e("../../Observable"),i=e("../../operator/sampleTime");n.Observable.prototype.sampleTime=i.sampleTime},{"../../Observable":375,"../../operator/sampleTime":634}],480:[function(e,t,r){var n=e("../../Observable"),i=e("../../operator/scan");n.Observable.prototype.scan=i.scan},{"../../Observable":375,"../../operator/scan":635}],481:[function(e,t,r){var n=e("../../Observable"),i=e("../../operator/sequenceEqual");n.Observable.prototype.sequenceEqual=i.sequenceEqual},{"../../Observable":375,"../../operator/sequenceEqual":636}],482:[function(e,t,r){var n=e("../../Observable"),i=e("../../operator/share");n.Observable.prototype.share=i.share},{"../../Observable":375,"../../operator/share":637}],483:[function(e,t,r){var n=e("../../Observable"),i=e("../../operator/shareReplay");n.Observable.prototype.shareReplay=i.shareReplay},{"../../Observable":375,"../../operator/shareReplay":638}],484:[function(e,t,r){var n=e("../../Observable"),i=e("../../operator/single");n.Observable.prototype.single=i.single},{"../../Observable":375,"../../operator/single":639}],485:[function(e,t,r){var n=e("../../Observable"),i=e("../../operator/skip");n.Observable.prototype.skip=i.skip},{"../../Observable":375,"../../operator/skip":640}],486:[function(e,t,r){var n=e("../../Observable"),i=e("../../operator/skipLast");n.Observable.prototype.skipLast=i.skipLast},{"../../Observable":375,"../../operator/skipLast":641}],487:[function(e,t,r){var n=e("../../Observable"),i=e("../../operator/skipUntil");n.Observable.prototype.skipUntil=i.skipUntil},{"../../Observable":375,"../../operator/skipUntil":642}],488:[function(e,t,r){var n=e("../../Observable"),i=e("../../operator/skipWhile");n.Observable.prototype.skipWhile=i.skipWhile},{"../../Observable":375,"../../operator/skipWhile":643}],489:[function(e,t,r){var n=e("../../Observable"),i=e("../../operator/startWith");n.Observable.prototype.startWith=i.startWith},{"../../Observable":375,"../../operator/startWith":644}],490:[function(e,t,r){var n=e("../../Observable"),i=e("../../operator/subscribeOn");n.Observable.prototype.subscribeOn=i.subscribeOn},{"../../Observable":375,"../../operator/subscribeOn":645}],491:[function(e,t,r){var n=e("../../Observable"),i=e("../../operator/switch");n.Observable.prototype.switch=i._switch,n.Observable.prototype._switch=i._switch},{"../../Observable":375,"../../operator/switch":646}],492:[function(e,t,r){var n=e("../../Observable"),i=e("../../operator/switchMap");n.Observable.prototype.switchMap=i.switchMap},{"../../Observable":375,"../../operator/switchMap":647}],493:[function(e,t,r){var n=e("../../Observable"),i=e("../../operator/switchMapTo");n.Observable.prototype.switchMapTo=i.switchMapTo},{"../../Observable":375,"../../operator/switchMapTo":648}],494:[function(e,t,r){var n=e("../../Observable"),i=e("../../operator/take");n.Observable.prototype.take=i.take},{"../../Observable":375,"../../operator/take":649}],495:[function(e,t,r){var n=e("../../Observable"),i=e("../../operator/takeLast");n.Observable.prototype.takeLast=i.takeLast},{"../../Observable":375,"../../operator/takeLast":650}],496:[function(e,t,r){var n=e("../../Observable"),i=e("../../operator/takeUntil");n.Observable.prototype.takeUntil=i.takeUntil},{"../../Observable":375,"../../operator/takeUntil":651}],497:[function(e,t,r){var n=e("../../Observable"),i=e("../../operator/takeWhile");n.Observable.prototype.takeWhile=i.takeWhile},{"../../Observable":375,"../../operator/takeWhile":652}],498:[function(e,t,r){var n=e("../../Observable"),i=e("../../operator/throttle");n.Observable.prototype.throttle=i.throttle},{"../../Observable":375,"../../operator/throttle":653}],499:[function(e,t,r){var n=e("../../Observable"),i=e("../../operator/throttleTime");n.Observable.prototype.throttleTime=i.throttleTime},{"../../Observable":375,"../../operator/throttleTime":654}],500:[function(e,t,r){var n=e("../../Observable"),i=e("../../operator/timeInterval");n.Observable.prototype.timeInterval=i.timeInterval},{"../../Observable":375,"../../operator/timeInterval":655}],501:[function(e,t,r){var n=e("../../Observable"),i=e("../../operator/timeout");n.Observable.prototype.timeout=i.timeout},{"../../Observable":375,"../../operator/timeout":656}],502:[function(e,t,r){var n=e("../../Observable"),i=e("../../operator/timeoutWith");n.Observable.prototype.timeoutWith=i.timeoutWith},{"../../Observable":375,"../../operator/timeoutWith":657}],503:[function(e,t,r){var n=e("../../Observable"),i=e("../../operator/timestamp");n.Observable.prototype.timestamp=i.timestamp},{"../../Observable":375,"../../operator/timestamp":658}],504:[function(e,t,r){var n=e("../../Observable"),i=e("../../operator/toArray");n.Observable.prototype.toArray=i.toArray},{"../../Observable":375,"../../operator/toArray":659}],505:[function(e,t,r){},{}],506:[function(e,t,r){var n=e("../../Observable"),i=e("../../operator/window");n.Observable.prototype.window=i.window},{"../../Observable":375,"../../operator/window":660}],507:[function(e,t,r){var n=e("../../Observable"),i=e("../../operator/windowCount");n.Observable.prototype.windowCount=i.windowCount},{"../../Observable":375,"../../operator/windowCount":661}],508:[function(e,t,r){var n=e("../../Observable"),i=e("../../operator/windowTime");n.Observable.prototype.windowTime=i.windowTime},{"../../Observable":375,"../../operator/windowTime":662}],509:[function(e,t,r){var n=e("../../Observable"),i=e("../../operator/windowToggle");n.Observable.prototype.windowToggle=i.windowToggle},{"../../Observable":375,"../../operator/windowToggle":663}],510:[function(e,t,r){var n=e("../../Observable"),i=e("../../operator/windowWhen");n.Observable.prototype.windowWhen=i.windowWhen},{"../../Observable":375,"../../operator/windowWhen":664}],511:[function(e,t,r){var n=e("../../Observable"),i=e("../../operator/withLatestFrom");n.Observable.prototype.withLatestFrom=i.withLatestFrom},{"../../Observable":375,"../../operator/withLatestFrom":665}],512:[function(e,t,r){var n=e("../../Observable"),i=e("../../operator/zip");n.Observable.prototype.zip=i.zipProto},{"../../Observable":375,"../../operator/zip":666}],513:[function(e,t,r){var n=e("../../Observable"),i=e("../../operator/zipAll");n.Observable.prototype.zipAll=i.zipAll},{"../../Observable":375,"../../operator/zipAll":667}],514:[function(e,t,r){var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=e("../Observable"),a=e("./ScalarObservable"),s=e("./EmptyObservable"),o=function(r){function o(e,t){r.call(this),this.arrayLike=e,(this.scheduler=t)||1!==e.length||(this._isScalar=!0,this.value=e[0])}return n(o,r),o.create=function(e,t){var r=e.length;return 0===r?new s.EmptyObservable:1===r?new a.ScalarObservable(e[0],t):new o(e,t)},o.dispatch=function(e){var t=e.arrayLike,r=e.index,n=e.length,i=e.subscriber;i.closed||(n<=r?i.complete():(i.next(t[r]),e.index=r+1,this.schedule(e)))},o.prototype._subscribe=function(e){var t=this.arrayLike,r=this.scheduler,n=t.length;if(r)return r.schedule(o.dispatch,0,{arrayLike:t,index:0,length:n,subscriber:e});for(var i=0;i<n&&!e.closed;i++)e.next(t[i]);e.complete()},o}(i.Observable);r.ArrayLikeObservable=o},{"../Observable":375,"./EmptyObservable":520,"./ScalarObservable":534}],515:[function(e,t,r){var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=e("../Observable"),a=e("./ScalarObservable"),s=e("./EmptyObservable"),l=e("../util/isScheduler"),o=function(r){function o(e,t){r.call(this),this.array=e,(this.scheduler=t)||1!==e.length||(this._isScalar=!0,this.value=e[0])}return n(o,r),o.create=function(e,t){return new o(e,t)},o.of=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];var r=e[e.length-1];l.isScheduler(r)?e.pop():r=null;var n=e.length;return 1<n?new o(e,r):1===n?new a.ScalarObservable(e[0],r):new s.EmptyObservable(r)},o.dispatch=function(e){var t=e.array,r=e.index,n=e.count,i=e.subscriber;n<=r?i.complete():(i.next(t[r]),i.closed||(e.index=r+1,this.schedule(e)))},o.prototype._subscribe=function(e){var t=this.array,r=t.length,n=this.scheduler;if(n)return n.schedule(o.dispatch,0,{array:t,index:0,count:r,subscriber:e});for(var i=0;i<r&&!e.closed;i++)e.next(t[i]);e.complete()},o}(i.Observable);r.ArrayObservable=o},{"../Observable":375,"../util/isScheduler":814,"./EmptyObservable":520,"./ScalarObservable":534}],516:[function(e,t,r){var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=e("../Observable"),c=e("../util/tryCatch"),h=e("../util/errorObject"),d=e("../AsyncSubject"),o=function(o){function a(e,t,r,n,i){o.call(this),this.callbackFunc=e,this.selector=t,this.args=r,this.context=n,this.scheduler=i}return n(a,o),a.create=function(r,n,i){return void 0===n&&(n=void 0),function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return new a(r,n,e,this,i)}},a.prototype._subscribe=function(e){var t=this.callbackFunc,r=this.args,n=this.scheduler,i=this.subject;if(n)return n.schedule(a.dispatch,0,{source:this,subscriber:e,context:this.context});if(!i){i=this.subject=new d.AsyncSubject;var o=function e(){for(var t=[],r=0;r<arguments.length;r++)t[r-0]=arguments[r];var n=e.source,i=n.selector,o=n.subject;if(i){var a=c.tryCatch(i).apply(this,t);a===h.errorObject?o.error(h.errorObject.e):(o.next(a),o.complete())}else o.next(t.length<=1?t[0]:t),o.complete()};o.source=this,c.tryCatch(t).apply(this.context,r.concat(o))===h.errorObject&&i.error(h.errorObject.e)}return i.subscribe(e)},a.dispatch=function(e){var l=this,t=e.source,r=e.subscriber,n=e.context,i=t.callbackFunc,o=t.args,u=t.scheduler,a=t.subject;if(!a){a=t.subject=new d.AsyncSubject;var s=function e(){for(var t=[],r=0;r<arguments.length;r++)t[r-0]=arguments[r];var n=e.source,i=n.selector,o=n.subject;if(i){var a=c.tryCatch(i).apply(this,t);a===h.errorObject?l.add(u.schedule(f,0,{err:h.errorObject.e,subject:o})):l.add(u.schedule(p,0,{value:a,subject:o}))}else{var s=t.length<=1?t[0]:t;l.add(u.schedule(p,0,{value:s,subject:o}))}};s.source=t,c.tryCatch(i).apply(n,o.concat(s))===h.errorObject&&a.error(h.errorObject.e)}l.add(a.subscribe(r))},a}(i.Observable);function p(e){var t=e.value,r=e.subject;r.next(t),r.complete()}function f(e){var t=e.err;e.subject.error(t)}r.BoundCallbackObservable=o},{"../AsyncSubject":371,"../Observable":375,"../util/errorObject":805,"../util/tryCatch":821}],517:[function(e,t,r){var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=e("../Observable"),h=e("../util/tryCatch"),d=e("../util/errorObject"),p=e("../AsyncSubject"),o=function(o){function a(e,t,r,n,i){o.call(this),this.callbackFunc=e,this.selector=t,this.args=r,this.context=n,this.scheduler=i}return n(a,o),a.create=function(r,n,i){return void 0===n&&(n=void 0),function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return new a(r,n,e,this,i)}},a.prototype._subscribe=function(e){var t=this.callbackFunc,r=this.args,n=this.scheduler,i=this.subject;if(n)return n.schedule(s,0,{source:this,subscriber:e,context:this.context});if(!i){i=this.subject=new p.AsyncSubject;var o=function e(){for(var t=[],r=0;r<arguments.length;r++)t[r-0]=arguments[r];var n=e.source,i=n.selector,o=n.subject,a=t.shift();if(a)o.error(a);else if(i){var s=h.tryCatch(i).apply(this,t);s===d.errorObject?o.error(d.errorObject.e):(o.next(s),o.complete())}else o.next(t.length<=1?t[0]:t),o.complete()};o.source=this,h.tryCatch(t).apply(this.context,r.concat(o))===d.errorObject&&i.error(d.errorObject.e)}return i.subscribe(e)},a}(i.Observable);function s(e){var u=this,t=e.source,r=e.subscriber,n=e.context,i=t,o=i.callbackFunc,a=i.args,c=i.scheduler,s=t.subject;if(!s){s=t.subject=new p.AsyncSubject;var l=function e(){for(var t=[],r=0;r<arguments.length;r++)t[r-0]=arguments[r];var n=e.source,i=n.selector,o=n.subject,a=t.shift();if(a)u.add(c.schedule(m,0,{err:a,subject:o}));else if(i){var s=h.tryCatch(i).apply(this,t);s===d.errorObject?u.add(c.schedule(m,0,{err:d.errorObject.e,subject:o})):u.add(c.schedule(f,0,{value:s,subject:o}))}else{var l=t.length<=1?t[0]:t;u.add(c.schedule(f,0,{value:l,subject:o}))}};l.source=t,h.tryCatch(o).apply(n,a.concat(l))===d.errorObject&&u.add(c.schedule(m,0,{err:d.errorObject.e,subject:s}))}u.add(s.subscribe(r))}function f(e){var t=e.value,r=e.subject;r.next(t),r.complete()}function m(e){var t=e.err;e.subject.error(t)}r.BoundNodeCallbackObservable=o},{"../AsyncSubject":371,"../Observable":375,"../util/errorObject":805,"../util/tryCatch":821}],518:[function(e,t,r){var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=e("../Subject"),o=e("../Observable"),a=e("../Subscriber"),s=e("../Subscription"),l=e("../operators/refCount"),u=function(r){function e(e,t){r.call(this),this.source=e,this.subjectFactory=t,this._refCount=0,this._isComplete=!1}return n(e,r),e.prototype._subscribe=function(e){return this.getSubject().subscribe(e)},e.prototype.getSubject=function(){var e=this._subject;return e&&!e.isStopped||(this._subject=this.subjectFactory()),this._subject},e.prototype.connect=function(){var e=this._connection;return e||(this._isComplete=!1,(e=this._connection=new s.Subscription).add(this.source.subscribe(new h(this.getSubject(),this))),e.closed?(this._connection=null,e=s.Subscription.EMPTY):this._connection=e),e},e.prototype.refCount=function(){return l.refCount()(this)},e}(o.Observable),c=(r.ConnectableObservable=u).prototype;r.connectableObservableDescriptor={operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:c._subscribe},_isComplete:{value:c._isComplete,writable:!0},getSubject:{value:c.getSubject},connect:{value:c.connect},refCount:{value:c.refCount}};var h=function(r){function e(e,t){r.call(this,e),this.connectable=t}return n(e,r),e.prototype._error=function(e){this._unsubscribe(),r.prototype._error.call(this,e)},e.prototype._complete=function(){this.connectable._isComplete=!0,this._unsubscribe(),r.prototype._complete.call(this)},e.prototype._unsubscribe=function(){var e=this.connectable;if(e){this.connectable=null;var t=e._connection;e._refCount=0,e._subject=null,e._connection=null,t&&t.unsubscribe()}},e}(i.SubjectSubscriber),d=(function(){function e(e){this.connectable=e}e.prototype.call=function(e,t){var r=this.connectable;r._refCount++;var n=new d(e,r),i=t.subscribe(n);return n.closed||(n.connection=r.connect()),i}}(),function(r){function e(e,t){r.call(this,e),this.connectable=t}return n(e,r),e.prototype._unsubscribe=function(){var e=this.connectable;if(e){this.connectable=null;var t=e._refCount;if(t<=0)this.connection=null;else if(e._refCount=t-1,1<t)this.connection=null;else{var r=this.connection,n=e._connection;this.connection=null,!n||r&&n!==r||n.unsubscribe()}}else this.connection=null},e}(a.Subscriber))},{"../Observable":375,"../Subject":381,"../Subscriber":383,"../Subscription":384,"../operators/refCount":729}],519:[function(e,t,r){var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=e("../Observable"),o=e("../util/subscribeToResult"),a=e("../OuterSubscriber"),s=function(t){function r(e){t.call(this),this.observableFactory=e}return n(r,t),r.create=function(e){return new r(e)},r.prototype._subscribe=function(e){return new l(e,this.observableFactory)},r}(i.Observable);r.DeferObservable=s;var l=function(r){function e(e,t){r.call(this,e),this.factory=t,this.tryDefer()}return n(e,r),e.prototype.tryDefer=function(){try{this._callFactory()}catch(e){this._error(e)}},e.prototype._callFactory=function(){var e=this.factory();e&&this.add(o.subscribeToResult(this,e))},e}(a.OuterSubscriber)},{"../Observable":375,"../OuterSubscriber":377,"../util/subscribeToResult":819}],520:[function(e,t,r){var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=function(t){function r(e){t.call(this),this.scheduler=e}return n(r,t),r.create=function(e){return new r(e)},r.dispatch=function(e){e.subscriber.complete()},r.prototype._subscribe=function(e){var t=this.scheduler;if(t)return t.schedule(r.dispatch,0,{subscriber:e});e.complete()},r}(e("../Observable").Observable);r.EmptyObservable=i},{"../Observable":375}],521:[function(e,t,r){var i=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},n=function(r){function n(e,t){r.call(this),this.error=e,this.scheduler=t}return i(n,r),n.create=function(e,t){return new n(e,t)},n.dispatch=function(e){var t=e.error;e.subscriber.error(t)},n.prototype._subscribe=function(e){var t=this.error,r=this.scheduler;if(e.syncErrorThrowable=!0,r)return r.schedule(n.dispatch,0,{error:t,subscriber:e});e.error(t)},n}(e("../Observable").Observable);r.ErrorObservable=n},{"../Observable":375}],522:[function(e,t,r){var i=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},n=e("../Observable"),o=e("./EmptyObservable"),a=e("../util/isArray"),l=e("../util/subscribeToResult"),s=e("../OuterSubscriber"),u=function(r){function n(e,t){r.call(this),this.sources=e,this.resultSelector=t}return i(n,r),n.create=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];if(null===e||0===arguments.length)return new o.EmptyObservable;var r=null;return"function"==typeof e[e.length-1]&&(r=e.pop()),1===e.length&&a.isArray(e[0])&&(e=e[0]),0===e.length?new o.EmptyObservable:new n(e,r)},n.prototype._subscribe=function(e){return new c(e,this.sources,this.resultSelector)},n}(n.Observable);r.ForkJoinObservable=u;var c=function(s){function e(e,t,r){s.call(this,e),this.sources=t,this.resultSelector=r,this.completed=0,this.haveValues=0;var n=t.length;this.total=n,this.values=new Array(n);for(var i=0;i<n;i++){var o=t[i],a=l.subscribeToResult(this,o,null,i);a&&(a.outerIndex=i,this.add(a))}}return i(e,s),e.prototype.notifyNext=function(e,t,r,n,i){this.values[r]=t,i._hasValue||(i._hasValue=!0,this.haveValues++)},e.prototype.notifyComplete=function(e){var t=this.destination,r=this.haveValues,n=this.resultSelector,i=this.values,o=i.length;if(e._hasValue){if(this.completed++,this.completed===o){if(r===o){var a=n?n.apply(this,i):i;t.next(a)}t.complete()}}else t.complete()},e}(s.OuterSubscriber)},{"../Observable":375,"../OuterSubscriber":377,"../util/isArray":807,"../util/subscribeToResult":819,"./EmptyObservable":520}],523:[function(e,t,r){var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=e("../Observable"),o=e("../util/tryCatch"),a=e("../util/isFunction"),s=e("../util/errorObject"),b=e("../Subscription"),y=Object.prototype.toString;var l=function(i){function v(e,t,r,n){i.call(this),this.sourceObj=e,this.eventName=t,this.selector=r,this.options=n}return n(v,i),v.create=function(e,t,r,n){return a.isFunction(r)&&(n=r,r=void 0),new v(e,t,n,r)},v.setupSubscription=function(e,t,r,n,i){var o,a,s,l,u,c;if((c=e)&&"[object NodeList]"===y.call(c)||(u=e)&&"[object HTMLCollection]"===y.call(u))for(var h=0,d=e.length;h<d;h++)v.setupSubscription(e[h],t,r,n,i);else if((l=e)&&"function"==typeof l.addEventListener&&"function"==typeof l.removeEventListener){var p=e;e.addEventListener(t,r,i),o=function(){return p.removeEventListener(t,r,i)}}else if((s=e)&&"function"==typeof s.on&&"function"==typeof s.off){var f=e;e.on(t,r),o=function(){return f.off(t,r)}}else{if(!(a=e)||"function"!=typeof a.addListener||"function"!=typeof a.removeListener)throw new TypeError("Invalid event target");var m=e;e.addListener(t,r),o=function(){return m.removeListener(t,r)}}n.add(new b.Subscription(o))},v.prototype._subscribe=function(n){var e=this.sourceObj,t=this.eventName,r=this.options,i=this.selector;v.setupSubscription(e,t,i?function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];var r=o.tryCatch(i).apply(void 0,e);r===s.errorObject?n.error(s.errorObject.e):n.next(r)}:function(e){return n.next(e)},n,r)},v}(i.Observable);r.FromEventObservable=l},{"../Observable":375,"../Subscription":384,"../util/errorObject":805,"../util/isFunction":810,"../util/tryCatch":821}],524:[function(e,t,r){var o=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},a=e("../util/isFunction"),n=e("../Observable"),s=e("../Subscription"),i=function(n){function i(e,t,r){n.call(this),this.addHandler=e,this.removeHandler=t,this.selector=r}return o(i,n),i.create=function(e,t,r){return new i(e,t,r)},i.prototype._subscribe=function(r){var n=this,e=this.removeHandler,t=this.selector?function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];n._callSelector(r,e)}:function(e){r.next(e)},i=this._callAddHandler(t,r);a.isFunction(e)&&r.add(new s.Subscription(function(){e(t,i)}))},i.prototype._callSelector=function(t,e){try{var r=this.selector.apply(this,e);t.next(r)}catch(e){t.error(e)}},i.prototype._callAddHandler=function(e,t){try{return this.addHandler(e)||null}catch(e){t.error(e)}},i}(n.Observable);r.FromEventPatternObservable=i},{"../Observable":375,"../Subscription":384,"../util/isFunction":810}],525:[function(e,t,r){var i=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},o=e("../util/isArray"),a=e("../util/isArrayLike"),s=e("../util/isPromise"),l=e("./PromiseObservable"),u=e("./IteratorObservable"),c=e("./ArrayObservable"),h=e("./ArrayLikeObservable"),d=e("../symbol/iterator"),p=e("../Observable"),f=e("../operators/observeOn"),m=e("../symbol/observable"),n=function(r){function n(e,t){r.call(this,null),this.ish=e,this.scheduler=t}return i(n,r),n.create=function(e,t){if(null!=e){if("function"==typeof e[m.observable])return e instanceof p.Observable&&!t?e:new n(e,t);if(o.isArray(e))return new c.ArrayObservable(e,t);if(s.isPromise(e))return new l.PromiseObservable(e,t);if("function"==typeof e[d.iterator]||"string"==typeof e)return new u.IteratorObservable(e,t);if(a.isArrayLike(e))return new h.ArrayLikeObservable(e,t)}throw new TypeError((null!==e&&_typeof2(e)||e)+" is not observable")},n.prototype._subscribe=function(e){var t=this.ish,r=this.scheduler;return null==r?t[m.observable]().subscribe(e):t[m.observable]().subscribe(new f.ObserveOnSubscriber(e,r,0))},n}(p.Observable);r.FromObservable=n},{"../Observable":375,"../operators/observeOn":718,"../symbol/iterator":784,"../symbol/observable":785,"../util/isArray":807,"../util/isArrayLike":808,"../util/isPromise":813,"./ArrayLikeObservable":514,"./ArrayObservable":515,"./IteratorObservable":529,"./PromiseObservable":532}],526:[function(e,t,r){var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=e("../Observable"),a=e("../util/isScheduler"),l=function(e){return e},o=function(o){function s(e,t,r,n,i){o.call(this),this.initialState=e,this.condition=t,this.iterate=r,this.resultSelector=n,this.scheduler=i}return n(s,o),s.create=function(e,t,r,n,i){return 1==arguments.length?new s(e.initialState,e.condition,e.iterate,e.resultSelector||l,e.scheduler):void 0===n||a.isScheduler(n)?new s(e,t,r,l,n):new s(e,t,r,n,i)},s.prototype._subscribe=function(t){var e=this.initialState;if(this.scheduler)return this.scheduler.schedule(s.dispatch,0,{subscriber:t,iterate:this.iterate,condition:this.condition,resultSelector:this.resultSelector,state:e});for(var r=this.condition,n=this.resultSelector,i=this.iterate;;){if(r){var o=void 0;try{o=r(e)}catch(e){return void t.error(e)}if(!o){t.complete();break}}var a=void 0;try{a=n(e)}catch(e){return void t.error(e)}if(t.next(a),t.closed)break;try{e=i(e)}catch(e){return void t.error(e)}}},s.dispatch=function(e){var t=e.subscriber,r=e.condition;if(!t.closed){if(e.needIterate)try{e.state=e.iterate(e.state)}catch(e){return void t.error(e)}else e.needIterate=!0;if(r){var n=void 0;try{n=r(e.state)}catch(e){return void t.error(e)}if(!n)return void t.complete();if(t.closed)return}var i;try{i=e.resultSelector(e.state)}catch(e){return void t.error(e)}if(!t.closed&&(t.next(i),!t.closed))return this.schedule(e)}},s}(i.Observable);r.GenerateObservable=o},{"../Observable":375,"../util/isScheduler":814}],527:[function(e,t,r){var o=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},n=e("../Observable"),a=e("../util/subscribeToResult"),i=e("../OuterSubscriber"),s=function(n){function i(e,t,r){n.call(this),this.condition=e,this.thenSource=t,this.elseSource=r}return o(i,n),i.create=function(e,t,r){return new i(e,t,r)},i.prototype._subscribe=function(e){var t=this.condition,r=this.thenSource,n=this.elseSource;return new l(e,t,r,n)},i}(n.Observable);r.IfObservable=s;var l=function(i){function e(e,t,r,n){i.call(this,e),this.condition=t,this.thenSource=r,this.elseSource=n,this.tryIf()}return o(e,i),e.prototype.tryIf=function(){var e=this.condition,t=this.thenSource,r=this.elseSource;try{var n=e()?t:r;n?this.add(a.subscribeToResult(this,n)):this._complete()}catch(e){this._error(e)}},e}(i.OuterSubscriber)},{"../Observable":375,"../OuterSubscriber":377,"../util/subscribeToResult":819}],528:[function(e,t,r){var i=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},o=e("../util/isNumeric"),n=e("../Observable"),a=e("../scheduler/async"),s=function(r){function n(e,t){void 0===e&&(e=0),void 0===t&&(t=a.async),r.call(this),this.period=e,this.scheduler=t,(!o.isNumeric(e)||e<0)&&(this.period=0),t&&"function"==typeof t.schedule||(this.scheduler=a.async)}return i(n,r),n.create=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=a.async),new n(e,t)},n.dispatch=function(e){var t=e.index,r=e.subscriber,n=e.period;r.next(t),r.closed||(e.index+=1,this.schedule(e,n))},n.prototype._subscribe=function(e){var t=this.period,r=this.scheduler;e.add(r.schedule(n.dispatch,t,{index:0,subscriber:e,period:t}))},n}(n.Observable);r.IntervalObservable=s},{"../Observable":375,"../scheduler/async":782,"../util/isNumeric":811}],529:[function(e,t,r){var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},o=e("../util/root"),i=e("../Observable"),a=e("../symbol/iterator"),s=function(r){function i(e,t){if(r.call(this),this.scheduler=t,null==e)throw new Error("iterator cannot be null.");this.iterator=function(e){var t=e[a.iterator];if(!t&&"string"==typeof e)return new l(e);if(!t&&void 0!==e.length)return new u(e);if(t)return e[a.iterator]();throw new TypeError("object is not iterable")}(e)}return n(i,r),i.create=function(e,t){return new i(e,t)},i.dispatch=function(e){var t=e.index,r=e.hasError,n=e.iterator,i=e.subscriber;if(r)i.error(e.error);else{var o=n.next();o.done?i.complete():(i.next(o.value),e.index=t+1,i.closed?"function"==typeof n.return&&n.return():this.schedule(e))}},i.prototype._subscribe=function(e){var t=this.iterator,r=this.scheduler;if(r)return r.schedule(i.dispatch,0,{index:0,iterator:t,subscriber:e});for(;;){var n=t.next();if(n.done){e.complete();break}if(e.next(n.value),e.closed){"function"==typeof t.return&&t.return();break}}},i}(i.Observable);r.IteratorObservable=s;var l=function(){function e(e,t,r){void 0===t&&(t=0),void 0===r&&(r=e.length),this.str=e,this.idx=t,this.len=r}return e.prototype[a.iterator]=function(){return this},e.prototype.next=function(){return this.idx<this.len?{done:!1,value:this.str.charAt(this.idx++)}:{done:!0,value:void 0}},e}(),u=function(){function e(e,t,r){void 0===t&&(t=0),void 0===r&&(r=function(e){var t=+e.length;if(isNaN(t))return 0;if(0===t||(r=t,"number"!=typeof r||!o.root.isFinite(r)))return t;var r;if(n=t,i=+n,(t=(0===i?i:isNaN(i)?i:i<0?-1:1)*Math.floor(Math.abs(t)))<=0)return 0;var n,i;if(c<t)return c;return t}(e)),this.arr=e,this.idx=t,this.len=r}return e.prototype[a.iterator]=function(){return this},e.prototype.next=function(){return this.idx<this.len?{done:!1,value:this.arr[this.idx++]}:{done:!0,value:void 0}},e}();var c=Math.pow(2,53)-1},{"../Observable":375,"../symbol/iterator":784,"../util/root":818}],530:[function(e,t,r){var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=e("../Observable"),o=e("../util/noop"),a=function(e){function t(){e.call(this)}return n(t,e),t.create=function(){return new t},t.prototype._subscribe=function(e){o.noop()},t}(i.Observable);r.NeverObservable=a},{"../Observable":375,"../util/noop":815}],531:[function(e,t,r){var i=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};function a(e){var t=e.obj,r=e.keys,n=e.length,i=e.index,o=e.subscriber;if(i!==n){var a=r[i];o.next([a,t[a]]),e.index=i+1,this.schedule(e)}else o.complete()}var n=function(r){function n(e,t){r.call(this),this.obj=e,this.scheduler=t,this.keys=Object.keys(e)}return i(n,r),n.create=function(e,t){return new n(e,t)},n.prototype._subscribe=function(e){var t=this.keys,r=this.scheduler,n=t.length;if(r)return r.schedule(a,0,{obj:this.obj,keys:t,length:n,index:0,subscriber:e});for(var i=0;i<n;i++){var o=t[i];e.next([o,this.obj[o]])}e.complete()},n}(e("../Observable").Observable);r.PairsObservable=n},{"../Observable":375}],532:[function(e,t,r){var i=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},o=e("../util/root"),n=function(r){function n(e,t){r.call(this),this.promise=e,this.scheduler=t}return i(n,r),n.create=function(e,t){return new n(e,t)},n.prototype._subscribe=function(t){var r=this,e=this.promise,n=this.scheduler;if(null==n)this._isScalar?t.closed||(t.next(this.value),t.complete()):e.then(function(e){r.value=e,r._isScalar=!0,t.closed||(t.next(e),t.complete())},function(e){t.closed||t.error(e)}).then(null,function(e){o.root.setTimeout(function(){throw e})});else if(this._isScalar){if(!t.closed)return n.schedule(a,0,{value:this.value,subscriber:t})}else e.then(function(e){r.value=e,r._isScalar=!0,t.closed||t.add(n.schedule(a,0,{value:e,subscriber:t}))},function(e){t.closed||t.add(n.schedule(s,0,{err:e,subscriber:t}))}).then(null,function(e){o.root.setTimeout(function(){throw e})})},n}(e("../Observable").Observable);function a(e){var t=e.value,r=e.subscriber;r.closed||(r.next(t),r.complete())}function s(e){var t=e.err,r=e.subscriber;r.closed||r.error(t)}r.PromiseObservable=n},{"../Observable":375,"../util/root":818}],533:[function(e,t,r){var i=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},n=function(n){function o(e,t,r){n.call(this),this.start=e,this._count=t,this.scheduler=r}return i(o,n),o.create=function(e,t,r){return void 0===e&&(e=0),void 0===t&&(t=0),new o(e,t,r)},o.dispatch=function(e){var t=e.start,r=e.index,n=e.count,i=e.subscriber;n<=r?i.complete():(i.next(t),i.closed||(e.index=r+1,e.start=t+1,this.schedule(e)))},o.prototype._subscribe=function(e){var t=0,r=this.start,n=this._count,i=this.scheduler;if(i)return i.schedule(o.dispatch,0,{index:t,count:n,start:r,subscriber:e});for(;;){if(t++>=n){e.complete();break}if(e.next(r++),e.closed)break}},o}(e("../Observable").Observable);r.RangeObservable=n},{"../Observable":375}],534:[function(e,t,r){var i=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},n=function(r){function n(e,t){r.call(this),this.value=e,this.scheduler=t,this._isScalar=!0,t&&(this._isScalar=!1)}return i(n,r),n.create=function(e,t){return new n(e,t)},n.dispatch=function(e){var t=e.done,r=e.value,n=e.subscriber;t?n.complete():(n.next(r),n.closed||(e.done=!0,this.schedule(e)))},n.prototype._subscribe=function(e){var t=this.value,r=this.scheduler;if(r)return r.schedule(n.dispatch,0,{done:!1,value:t,subscriber:e});e.next(t),e.closed||e.complete()},n}(e("../Observable").Observable);r.ScalarObservable=n},{"../Observable":375}],535:[function(e,t,r){var o=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},n=e("../Observable"),a=e("../scheduler/asap"),s=e("../util/isNumeric"),i=function(n){function i(e,t,r){void 0===t&&(t=0),void 0===r&&(r=a.asap),n.call(this),this.source=e,this.delayTime=t,this.scheduler=r,(!s.isNumeric(t)||t<0)&&(this.delayTime=0),r&&"function"==typeof r.schedule||(this.scheduler=a.asap)}return o(i,n),i.create=function(e,t,r){return void 0===t&&(t=0),void 0===r&&(r=a.asap),new i(e,t,r)},i.dispatch=function(e){var t=e.source,r=e.subscriber;return this.add(t.subscribe(r))},i.prototype._subscribe=function(e){var t=this.delayTime,r=this.source;return this.scheduler.schedule(i.dispatch,t,{source:r,subscriber:e})},i}(n.Observable);r.SubscribeOnObservable=i},{"../Observable":375,"../scheduler/asap":781,"../util/isNumeric":811}],536:[function(e,t,r){var o=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},a=e("../util/isNumeric"),n=e("../Observable"),s=e("../scheduler/async"),l=e("../util/isScheduler"),u=e("../util/isDate"),i=function(n){function i(e,t,r){void 0===e&&(e=0),n.call(this),this.period=-1,this.dueTime=0,a.isNumeric(t)?this.period=Number(t)<1?1:Number(t):l.isScheduler(t)&&(r=t),l.isScheduler(r)||(r=s.async),this.scheduler=r,this.dueTime=u.isDate(e)?+e-this.scheduler.now():e}return o(i,n),i.create=function(e,t,r){return void 0===e&&(e=0),new i(e,t,r)},i.dispatch=function(e){var t=e.index,r=e.period,n=e.subscriber;if(n.next(t),!n.closed){if(-1===r)return n.complete();e.index=t+1,this.schedule(e,r)}},i.prototype._subscribe=function(e){var t=this.period,r=this.dueTime;return this.scheduler.schedule(i.dispatch,r,{index:0,period:t,subscriber:e})},i}(n.Observable);r.TimerObservable=i},{"../Observable":375,"../scheduler/async":782,"../util/isDate":809,"../util/isNumeric":811,"../util/isScheduler":814}],537:[function(e,t,r){var i=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},n=e("../Observable"),o=e("../util/subscribeToResult"),a=e("../OuterSubscriber"),s=function(r){function n(e,t){r.call(this),this.resourceFactory=e,this.observableFactory=t}return i(n,r),n.create=function(e,t){return new n(e,t)},n.prototype._subscribe=function(t){var e,r=this.resourceFactory,n=this.observableFactory;try{return e=r(),new l(t,e,n)}catch(e){t.error(e)}},n}(n.Observable);r.UsingObservable=s;var l=function(n){function e(e,t,r){n.call(this,e),this.resource=t,this.observableFactory=r,e.add(t),this.tryUse()}return i(e,n),e.prototype.tryUse=function(){try{var e=this.observableFactory.call(this,this.resource);e&&this.add(o.subscribeToResult(this,e))}catch(e){this._error(e)}},e}(a.OuterSubscriber)},{"../Observable":375,"../OuterSubscriber":377,"../util/subscribeToResult":819}],538:[function(e,t,r){var n=e("./BoundCallbackObservable");r.bindCallback=n.BoundCallbackObservable.create},{"./BoundCallbackObservable":516}],539:[function(e,t,r){var n=e("./BoundNodeCallbackObservable");r.bindNodeCallback=n.BoundNodeCallbackObservable.create},{"./BoundNodeCallbackObservable":517}],540:[function(e,t,r){var i=e("../util/isScheduler"),o=e("../util/isArray"),a=e("./ArrayObservable"),s=e("../operators/combineLatest");r.combineLatest=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];var r=null,n=null;return i.isScheduler(e[e.length-1])&&(n=e.pop()),"function"==typeof e[e.length-1]&&(r=e.pop()),1===e.length&&o.isArray(e[0])&&(e=e[0]),new a.ArrayObservable(e,n).lift(new s.CombineLatestOperator(r))}},{"../operators/combineLatest":678,"../util/isArray":807,"../util/isScheduler":814,"./ArrayObservable":515}],541:[function(e,t,r){var n=e("../util/isScheduler"),i=e("./of"),o=e("./from"),a=e("../operators/concatAll");r.concat=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return 1===e.length||2===e.length&&n.isScheduler(e[1])?o.from(e[0]):a.concatAll()(i.of.apply(void 0,e))}},{"../operators/concatAll":680,"../util/isScheduler":814,"./from":549,"./of":558}],542:[function(e,t,r){var n=e("./DeferObservable");r.defer=n.DeferObservable.create},{"./DeferObservable":519}],543:[function(e,t,r){var i=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},s=e("../../util/root"),h=e("../../util/tryCatch"),d=e("../../util/errorObject"),n=e("../../Observable"),o=e("../../Subscriber"),a=e("../../operators/map");function l(e,t){return void 0===t&&(t=null),new b({method:"GET",url:e,headers:t})}function u(e,t,r){return new b({method:"POST",url:e,body:t,headers:r})}function c(e,t){return new b({method:"DELETE",url:e,headers:t})}function p(e,t,r){return new b({method:"PUT",url:e,body:t,headers:r})}function f(e,t,r){return new b({method:"PATCH",url:e,body:t,headers:r})}r.ajaxGet=l,r.ajaxPost=u,r.ajaxDelete=c,r.ajaxPut=p,r.ajaxPatch=f;var m=a.map(function(e,t){return e.response});function v(e,t){return m(new b({method:"GET",url:e,responseType:"json",headers:t}))}r.ajaxGetJSON=v;var b=function(n){function t(e){n.call(this);var t={async:!0,createXHR:function(){return this.crossDomain?function(){if(s.root.XMLHttpRequest)return new s.root.XMLHttpRequest;if(s.root.XDomainRequest)return new s.root.XDomainRequest;throw new Error("CORS is not supported by your browser")}.call(this):function(){if(s.root.XMLHttpRequest)return new s.root.XMLHttpRequest;var e=void 0;try{for(var t=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],r=0;r<3;r++)try{if(e=t[r],new s.root.ActiveXObject(e))break}catch(e){}return new s.root.ActiveXObject(e)}catch(e){throw new Error("XMLHttpRequest is not supported by your browser")}}()},crossDomain:!1,withCredentials:!1,headers:{},method:"GET",responseType:"json",timeout:0};if("string"==typeof e)t.url=e;else for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);this.request=t}var e;return i(t,n),t.prototype._subscribe=function(e){return new y(e,this.request)},t.create=((e=function(e){return new t(e)}).get=l,e.post=u,e.delete=c,e.put=p,e.patch=f,e.getJSON=v,e),t}(n.Observable);r.AjaxObservable=b;var y=function(n){function e(e,t){n.call(this,e),this.request=t,this.done=!1;var r=t.headers=t.headers||{};t.crossDomain||r["X-Requested-With"]||(r["X-Requested-With"]="XMLHttpRequest"),"Content-Type"in r||s.root.FormData&&t.body instanceof s.root.FormData||void 0===t.body||(r["Content-Type"]="application/x-www-form-urlencoded; charset=UTF-8"),t.body=this.serializeBody(t.body,t.headers["Content-Type"]),this.send()}return i(e,n),e.prototype.next=function(e){this.done=!0;var t=this.xhr,r=this.request,n=this.destination,i=new g(e,t,r);n.next(i)},e.prototype.send=function(){var e=this.request,t=this.request,r=t.user,n=t.method,i=t.url,o=t.async,a=t.password,s=t.headers,l=t.body,u=e.createXHR,c=h.tryCatch(u).call(e);if(c===d.errorObject)this.error(d.errorObject.e);else{this.xhr=c,this.setupEvents(c,e);if((r?h.tryCatch(c.open).call(c,n,i,o,r,a):h.tryCatch(c.open).call(c,n,i,o))===d.errorObject)return this.error(d.errorObject.e),null;if(o&&(c.timeout=e.timeout,c.responseType=e.responseType),"withCredentials"in c&&(c.withCredentials=!!e.withCredentials),this.setHeaders(c,s),(l?h.tryCatch(c.send).call(c,l):h.tryCatch(c.send).call(c))===d.errorObject)return this.error(d.errorObject.e),null}return c},e.prototype.serializeBody=function(t,e){if(!t||"string"==typeof t)return t;if(s.root.FormData&&t instanceof s.root.FormData)return t;if(e){var r=e.indexOf(";");-1!==r&&(e=e.substring(0,r))}switch(e){case"application/x-www-form-urlencoded":return Object.keys(t).map(function(e){return encodeURIComponent(e)+"="+encodeURIComponent(t[e])}).join("&");case"application/json":return JSON.stringify(t);default:return t}},e.prototype.setHeaders=function(e,t){for(var r in t)t.hasOwnProperty(r)&&e.setRequestHeader(r,t[r])},e.prototype.setupEvents=function(e,t){var r=t.progressSubscriber;function i(e){var t=i.subscriber,r=i.progressSubscriber,n=i.request;r&&r.error(e),t.error(new x(this,n))}if((e.ontimeout=i).request=t,i.subscriber=this,i.progressSubscriber=r,e.upload&&"withCredentials"in e){var n,o;if(r)n=function(e){n.progressSubscriber.next(e)},s.root.XDomainRequest?e.onprogress=n:e.upload.onprogress=n,n.progressSubscriber=r;o=function(e){var t=o,r=t.progressSubscriber,n=t.subscriber,i=t.request;r&&r.error(e),n.error(new w("ajax error",this,i))},(e.onerror=o).request=t,o.subscriber=this,o.progressSubscriber=r}function a(e){var t=a.subscriber,r=a.progressSubscriber,n=a.request;if(4===this.readyState){var i=1223===this.status?204:this.status,o="text"===this.responseType?this.response||this.responseText:this.response;0===i&&(i=o?200:0),200<=i&&i<300?(r&&r.complete(),t.next(e),t.complete()):(r&&r.error(e),t.error(new w("ajax error "+i,this,n)))}}(e.onreadystatechange=a).subscriber=this,a.progressSubscriber=r,a.request=t},e.prototype.unsubscribe=function(){var e=this.done,t=this.xhr;!e&&t&&4!==t.readyState&&"function"==typeof t.abort&&t.abort(),n.prototype.unsubscribe.call(this)},e}(o.Subscriber);r.AjaxSubscriber=y;var g=function(e,t,r){this.originalEvent=e,this.xhr=t,this.request=r,this.status=t.status,this.responseType=t.responseType||r.responseType,this.response=_(this.responseType,t)};r.AjaxResponse=g;var w=function(n){function e(e,t,r){n.call(this,e),this.message=e,this.xhr=t,this.request=r,this.status=t.status,this.responseType=t.responseType||r.responseType,this.response=_(this.responseType,t)}return i(e,n),e}(Error);function _(e,t){switch(e){case"json":return"response"in t?t.responseType?t.response:JSON.parse(t.response||t.responseText||"null"):JSON.parse(t.responseText||"null");case"xml":return t.responseXML;case"text":default:return"response"in t?t.response:t.responseText}}var x=function(r){function e(e,t){r.call(this,"ajax timeout",e,t)}return i(e,r),e}(r.AjaxError=w);r.AjaxTimeoutError=x},{"../../Observable":375,"../../Subscriber":383,"../../operators/map":707,"../../util/errorObject":805,"../../util/root":818,"../../util/tryCatch":821}],544:[function(e,t,r){var i=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},o=e("../../Subject"),s=e("../../Subscriber"),l=e("../../Observable"),u=e("../../Subscription"),a=e("../../util/root"),c=e("../../ReplaySubject"),h=e("../../util/tryCatch"),d=e("../../util/errorObject"),p=e("../../util/assign"),n=function(r){function n(e,t){if(e instanceof l.Observable)r.call(this,t,e);else{if(r.call(this),this.WebSocketCtor=a.root.WebSocket,this._output=new o.Subject,"string"==typeof e?this.url=e:p.assign(this,e),!this.WebSocketCtor)throw new Error("no WebSocket constructor can be found");this.destination=new c.ReplaySubject}}return i(n,r),n.prototype.resultSelector=function(e){return JSON.parse(e.data)},n.create=function(e){return new n(e)},n.prototype.lift=function(e){var t=new n(this,this.destination);return t.operator=e,t},n.prototype._resetState=function(){this.socket=null,this.source||(this.destination=new c.ReplaySubject),this._output=new o.Subject},n.prototype.multiplex=function(n,i,o){var a=this;return new l.Observable(function(r){var e=h.tryCatch(n)();e===d.errorObject?r.error(d.errorObject.e):a.next(e);var t=a.subscribe(function(e){var t=h.tryCatch(o)(e);t===d.errorObject?r.error(d.errorObject.e):t&&r.next(e)},function(e){return r.error(e)},function(){return r.complete()});return function(){var e=h.tryCatch(i)();e===d.errorObject?r.error(d.errorObject.e):a.next(e),t.unsubscribe()}})},n.prototype._connectSocket=function(){var n=this,e=this.WebSocketCtor,i=this._output,o=null;try{o=this.protocol?new e(this.url,this.protocol):new e(this.url),this.socket=o,this.binaryType&&(this.socket.binaryType=this.binaryType)}catch(e){return void i.error(e)}var a=new u.Subscription(function(){n.socket=null,o&&1===o.readyState&&o.close()});o.onopen=function(e){var t=n.openObserver;t&&t.next(e);var r=n.destination;n.destination=s.Subscriber.create(function(e){return 1===o.readyState&&o.send(e)},function(e){var t=n.closingObserver;t&&t.next(void 0),e&&e.code?o.close(e.code,e.reason):i.error(new TypeError("WebSocketSubject.error must be called with an object with an error code, and an optional reason: { code: number, reason: string }")),n._resetState()},function(){var e=n.closingObserver;e&&e.next(void 0),o.close(),n._resetState()}),r&&r instanceof c.ReplaySubject&&a.add(r.subscribe(n.destination))},o.onerror=function(e){n._resetState(),i.error(e)},o.onclose=function(e){n._resetState();var t=n.closeObserver;t&&t.next(e),e.wasClean?i.complete():i.error(e)},o.onmessage=function(e){var t=h.tryCatch(n.resultSelector)(e);t===d.errorObject?i.error(d.errorObject.e):i.next(t)}},n.prototype._subscribe=function(e){var t=this,r=this.source;if(r)return r.subscribe(e);this.socket||this._connectSocket();var n=new u.Subscription;return n.add(this._output.subscribe(e)),n.add(function(){var e=t.socket;0===t._output.observers.length&&(e&&1===e.readyState&&e.close(),t._resetState())}),n},n.prototype.unsubscribe=function(){var e=this.source,t=this.socket;t&&1===t.readyState&&(t.close(),this._resetState()),r.prototype.unsubscribe.call(this),e||(this.destination=new c.ReplaySubject)},n}(o.AnonymousSubject);r.WebSocketSubject=n},{"../../Observable":375,"../../ReplaySubject":378,"../../Subject":381,"../../Subscriber":383,"../../Subscription":384,"../../util/assign":804,"../../util/errorObject":805,"../../util/root":818,"../../util/tryCatch":821}],545:[function(e,t,r){var n=e("./AjaxObservable");r.ajax=n.AjaxObservable.create},{"./AjaxObservable":543}],546:[function(e,t,r){var n=e("./WebSocketSubject");r.webSocket=n.WebSocketSubject.create},{"./WebSocketSubject":544}],547:[function(e,t,r){var n=e("./EmptyObservable");r.empty=n.EmptyObservable.create},{"./EmptyObservable":520}],548:[function(e,t,r){var n=e("./ForkJoinObservable");r.forkJoin=n.ForkJoinObservable.create},{"./ForkJoinObservable":522}],549:[function(e,t,r){var n=e("./FromObservable");r.from=n.FromObservable.create},{"./FromObservable":525}],550:[function(e,t,r){var n=e("./FromEventObservable");r.fromEvent=n.FromEventObservable.create},{"./FromEventObservable":523}],551:[function(e,t,r){var n=e("./FromEventPatternObservable");r.fromEventPattern=n.FromEventPatternObservable.create},{"./FromEventPatternObservable":524}],552:[function(e,t,r){var n=e("./PromiseObservable");r.fromPromise=n.PromiseObservable.create},{"./PromiseObservable":532}],553:[function(e,t,r){var n=e("./GenerateObservable");r.generate=n.GenerateObservable.create},{"./GenerateObservable":526}],554:[function(e,t,r){var n=e("./IfObservable");r._if=n.IfObservable.create},{"./IfObservable":527}],555:[function(e,t,r){var n=e("./IntervalObservable");r.interval=n.IntervalObservable.create},{"./IntervalObservable":528}],556:[function(e,t,r){var o=e("../Observable"),a=e("./ArrayObservable"),s=e("../util/isScheduler"),l=e("../operators/mergeAll");r.merge=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];var r=Number.POSITIVE_INFINITY,n=null,i=e[e.length-1];return s.isScheduler(i)?(n=e.pop(),1<e.length&&"number"==typeof e[e.length-1]&&(r=e.pop())):"number"==typeof i&&(r=e.pop()),null===n&&1===e.length&&e[0]instanceof o.Observable?e[0]:l.mergeAll(r)(new a.ArrayObservable(e,n))}},{"../Observable":375,"../operators/mergeAll":712,"../util/isScheduler":814,"./ArrayObservable":515}],557:[function(e,t,r){var n=e("./NeverObservable");r.never=n.NeverObservable.create},{"./NeverObservable":530}],558:[function(e,t,r){var n=e("./ArrayObservable");r.of=n.ArrayObservable.of},{"./ArrayObservable":515}],559:[function(e,t,r){var n=e("../operators/onErrorResumeNext");r.onErrorResumeNext=n.onErrorResumeNextStatic},{"../operators/onErrorResumeNext":719}],560:[function(e,t,r){var n=e("./PairsObservable");r.pairs=n.PairsObservable.create},{"./PairsObservable":531}],561:[function(e,t,r){var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=e("../util/isArray"),o=e("../observable/ArrayObservable"),a=e("../OuterSubscriber"),s=e("../util/subscribeToResult");r.race=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];if(1===e.length){if(!i.isArray(e[0]))return e[0];e=e[0]}return new o.ArrayObservable(e).lift(new l)};var l=function(){function e(){}return e.prototype.call=function(e,t){return t.subscribe(new u(e))},e}();r.RaceOperator=l;var u=function(t){function e(e){t.call(this,e),this.hasFirst=!1,this.observables=[],this.subscriptions=[]}return n(e,t),e.prototype._next=function(e){this.observables.push(e)},e.prototype._complete=function(){var e=this.observables,t=e.length;if(0===t)this.destination.complete();else{for(var r=0;r<t&&!this.hasFirst;r++){var n=e[r],i=s.subscribeToResult(this,n,n,r);this.subscriptions&&this.subscriptions.push(i),this.add(i)}this.observables=null}},e.prototype.notifyNext=function(e,t,r,n,i){if(!this.hasFirst){this.hasFirst=!0;for(var o=0;o<this.subscriptions.length;o++)if(o!==r){var a=this.subscriptions[o];a.unsubscribe(),this.remove(a)}this.subscriptions=null}this.destination.next(t)},e}(a.OuterSubscriber);r.RaceSubscriber=u},{"../OuterSubscriber":377,"../observable/ArrayObservable":515,"../util/isArray":807,"../util/subscribeToResult":819}],562:[function(e,t,r){var n=e("./RangeObservable");r.range=n.RangeObservable.create},{"./RangeObservable":533}],563:[function(e,t,r){var n=e("./ErrorObservable");r._throw=n.ErrorObservable.create},{"./ErrorObservable":521}],564:[function(e,t,r){var n=e("./TimerObservable");r.timer=n.TimerObservable.create},{"./TimerObservable":536}],565:[function(e,t,r){var n=e("./UsingObservable");r.using=n.UsingObservable.create},{"./UsingObservable":537}],566:[function(e,t,r){var n=e("../operators/zip");r.zip=n.zipStatic},{"../operators/zip":768}],567:[function(e,t,r){var n=e("../operators/audit");r.audit=function(e){return n.audit(e)(this)}},{"../operators/audit":669}],568:[function(e,t,r){var n=e("../scheduler/async"),i=e("../operators/auditTime");r.auditTime=function(e,t){return void 0===t&&(t=n.async),i.auditTime(e,t)(this)}},{"../operators/auditTime":670,"../scheduler/async":782}],569:[function(e,t,r){var n=e("../operators/buffer");r.buffer=function(e){return n.buffer(e)(this)}},{"../operators/buffer":671}],570:[function(e,t,r){var n=e("../operators/bufferCount");r.bufferCount=function(e,t){return void 0===t&&(t=null),n.bufferCount(e,t)(this)}},{"../operators/bufferCount":672}],571:[function(e,t,r){var o=e("../scheduler/async"),a=e("../util/isScheduler"),s=e("../operators/bufferTime");r.bufferTime=function(e){var t=arguments.length,r=o.async;a.isScheduler(arguments[arguments.length-1])&&(r=arguments[arguments.length-1],t--);var n=null;2<=t&&(n=arguments[1]);var i=Number.POSITIVE_INFINITY;return 3<=t&&(i=arguments[2]),s.bufferTime(e,n,i,r)(this)}},{"../operators/bufferTime":673,"../scheduler/async":782,"../util/isScheduler":814}],572:[function(e,t,r){var n=e("../operators/bufferToggle");r.bufferToggle=function(e,t){return n.bufferToggle(e,t)(this)}},{"../operators/bufferToggle":674}],573:[function(e,t,r){var n=e("../operators/bufferWhen");r.bufferWhen=function(e){return n.bufferWhen(e)(this)}},{"../operators/bufferWhen":675}],574:[function(e,t,r){var n=e("../operators/catchError");r._catch=function(e){return n.catchError(e)(this)}},{"../operators/catchError":676}],575:[function(e,t,r){var n=e("../operators/combineAll");r.combineAll=function(e){return n.combineAll(e)(this)}},{"../operators/combineAll":677}],576:[function(e,t,r){var n=e("../operators/combineLatest");r.combineLatest=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return n.combineLatest.apply(void 0,e)(this)}},{"../operators/combineLatest":678}],577:[function(e,t,r){var n=e("../operators/concat"),i=e("../observable/concat");r.concatStatic=i.concat,r.concat=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return n.concat.apply(void 0,e)(this)}},{"../observable/concat":541,"../operators/concat":679}],578:[function(e,t,r){var n=e("../operators/concatAll");r.concatAll=function(){return n.concatAll()(this)}},{"../operators/concatAll":680}],579:[function(e,t,r){var n=e("../operators/concatMap");r.concatMap=function(e,t){return n.concatMap(e,t)(this)}},{"../operators/concatMap":681}],580:[function(e,t,r){var n=e("../operators/concatMapTo");r.concatMapTo=function(e,t){return n.concatMapTo(e,t)(this)}},{"../operators/concatMapTo":682}],581:[function(e,t,r){var n=e("../operators/count");r.count=function(e){return n.count(e)(this)}},{"../operators/count":683}],582:[function(e,t,r){var n=e("../operators/debounce");r.debounce=function(e){return n.debounce(e)(this)}},{"../operators/debounce":684}],583:[function(e,t,r){var n=e("../scheduler/async"),i=e("../operators/debounceTime");r.debounceTime=function(e,t){return void 0===t&&(t=n.async),i.debounceTime(e,t)(this)}},{"../operators/debounceTime":685,"../scheduler/async":782}],584:[function(e,t,r){var n=e("../operators/defaultIfEmpty");r.defaultIfEmpty=function(e){return void 0===e&&(e=null),n.defaultIfEmpty(e)(this)}},{"../operators/defaultIfEmpty":686}],585:[function(e,t,r){var n=e("../scheduler/async"),i=e("../operators/delay");r.delay=function(e,t){return void 0===t&&(t=n.async),i.delay(e,t)(this)}},{"../operators/delay":687,"../scheduler/async":782}],586:[function(e,t,r){var n=e("../operators/delayWhen");r.delayWhen=function(e,t){return n.delayWhen(e,t)(this)}},{"../operators/delayWhen":688}],587:[function(e,t,r){var n=e("../operators/dematerialize");r.dematerialize=function(){return n.dematerialize()(this)}},{"../operators/dematerialize":689}],588:[function(e,t,r){var n=e("../operators/distinct");r.distinct=function(e,t){return n.distinct(e,t)(this)}},{"../operators/distinct":690}],589:[function(e,t,r){var n=e("../operators/distinctUntilChanged");r.distinctUntilChanged=function(e,t){return n.distinctUntilChanged(e,t)(this)}},{"../operators/distinctUntilChanged":691}],590:[function(e,t,r){var n=e("../operators/distinctUntilKeyChanged");r.distinctUntilKeyChanged=function(e,t){return n.distinctUntilKeyChanged(e,t)(this)}},{"../operators/distinctUntilKeyChanged":692}],591:[function(e,t,r){var n=e("../operators/tap");r._do=function(e,t,r){return n.tap(e,t,r)(this)}},{"../operators/tap":754}],592:[function(e,t,r){var n=e("../operators/elementAt");r.elementAt=function(e,t){return n.elementAt(e,t)(this)}},{"../operators/elementAt":693}],593:[function(e,t,r){var n=e("../operators/every");r.every=function(e,t){return n.every(e,t)(this)}},{"../operators/every":694}],594:[function(e,t,r){var n=e("../operators/exhaust");r.exhaust=function(){return n.exhaust()(this)}},{"../operators/exhaust":695}],595:[function(e,t,r){var n=e("../operators/exhaustMap");r.exhaustMap=function(e,t){return n.exhaustMap(e,t)(this)}},{"../operators/exhaustMap":696}],596:[function(e,t,r){var n=e("../operators/expand");r.expand=function(e,t,r){return void 0===t&&(t=Number.POSITIVE_INFINITY),void 0===r&&(r=void 0),t=(t||0)<1?Number.POSITIVE_INFINITY:t,n.expand(e,t,r)(this)}},{"../operators/expand":697}],597:[function(e,t,r){var n=e("../operators/filter");r.filter=function(e,t){return n.filter(e,t)(this)}},{"../operators/filter":698}],598:[function(e,t,r){var n=e("../operators/finalize");r._finally=function(e){return n.finalize(e)(this)}},{"../operators/finalize":699}],599:[function(e,t,r){var n=e("../operators/find");r.find=function(e,t){return n.find(e,t)(this)}},{"../operators/find":700}],600:[function(e,t,r){var n=e("../operators/findIndex");r.findIndex=function(e,t){return n.findIndex(e,t)(this)}},{"../operators/findIndex":701}],601:[function(e,t,r){var n=e("../operators/first");r.first=function(e,t,r){return n.first(e,t,r)(this)}},{"../operators/first":702}],602:[function(e,t,r){var i=e("../operators/groupBy");r.GroupedObservable=i.GroupedObservable,r.groupBy=function(e,t,r,n){return i.groupBy(e,t,r,n)(this)}},{"../operators/groupBy":703}],603:[function(e,t,r){var n=e("../operators/ignoreElements");r.ignoreElements=function(){return n.ignoreElements()(this)}},{"../operators/ignoreElements":704}],604:[function(e,t,r){var n=e("../operators/isEmpty");r.isEmpty=function(){return n.isEmpty()(this)}},{"../operators/isEmpty":705}],605:[function(e,t,r){var n=e("../operators/last");r.last=function(e,t,r){return n.last(e,t,r)(this)}},{"../operators/last":706}],606:[function(e,t,r){r.letProto=function(e){return e(this)}},{}],607:[function(e,t,r){var n=e("../operators/map");r.map=function(e,t){return n.map(e,t)(this)}},{"../operators/map":707}],608:[function(e,t,r){var n=e("../operators/mapTo");r.mapTo=function(e){return n.mapTo(e)(this)}},{"../operators/mapTo":708}],609:[function(e,t,r){var n=e("../operators/materialize");r.materialize=function(){return n.materialize()(this)}},{"../operators/materialize":709}],610:[function(e,t,r){var n=e("../operators/max");r.max=function(e){return n.max(e)(this)}},{"../operators/max":710}],611:[function(e,t,r){var n=e("../operators/merge"),i=e("../observable/merge");r.mergeStatic=i.merge,r.merge=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return n.merge.apply(void 0,e)(this)}},{"../observable/merge":556,"../operators/merge":711}],612:[function(e,t,r){var n=e("../operators/mergeAll");r.mergeAll=function(e){return void 0===e&&(e=Number.POSITIVE_INFINITY),n.mergeAll(e)(this)}},{"../operators/mergeAll":712}],613:[function(e,t,r){var n=e("../operators/mergeMap");r.mergeMap=function(e,t,r){return void 0===r&&(r=Number.POSITIVE_INFINITY),n.mergeMap(e,t,r)(this)}},{"../operators/mergeMap":713}],614:[function(e,t,r){var n=e("../operators/mergeMapTo");r.mergeMapTo=function(e,t,r){return void 0===r&&(r=Number.POSITIVE_INFINITY),n.mergeMapTo(e,t,r)(this)}},{"../operators/mergeMapTo":714}],615:[function(e,t,r){var n=e("../operators/mergeScan");r.mergeScan=function(e,t,r){return void 0===r&&(r=Number.POSITIVE_INFINITY),n.mergeScan(e,t,r)(this)}},{"../operators/mergeScan":715}],616:[function(e,t,r){var n=e("../operators/min");r.min=function(e){return n.min(e)(this)}},{"../operators/min":716}],617:[function(e,t,r){var n=e("../operators/multicast");r.multicast=function(e,t){return n.multicast(e,t)(this)}},{"../operators/multicast":717}],618:[function(e,t,r){var n=e("../operators/observeOn");r.observeOn=function(e,t){return void 0===t&&(t=0),n.observeOn(e,t)(this)}},{"../operators/observeOn":718}],619:[function(e,t,r){var n=e("../operators/onErrorResumeNext");r.onErrorResumeNext=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return n.onErrorResumeNext.apply(void 0,e)(this)}},{"../operators/onErrorResumeNext":719}],620:[function(e,t,r){var n=e("../operators/pairwise");r.pairwise=function(){return n.pairwise()(this)}},{"../operators/pairwise":720}],621:[function(e,t,r){var n=e("../operators/partition");r.partition=function(e,t){return n.partition(e,t)(this)}},{"../operators/partition":721}],622:[function(e,t,r){var n=e("../operators/pluck");r.pluck=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return n.pluck.apply(void 0,e)(this)}},{"../operators/pluck":722}],623:[function(e,t,r){var n=e("../operators/publish");r.publish=function(e){return n.publish(e)(this)}},{"../operators/publish":723}],624:[function(e,t,r){var n=e("../operators/publishBehavior");r.publishBehavior=function(e){return n.publishBehavior(e)(this)}},{"../operators/publishBehavior":724}],625:[function(e,t,r){var n=e("../operators/publishLast");r.publishLast=function(){return n.publishLast()(this)}},{"../operators/publishLast":725}],626:[function(e,t,r){var i=e("../operators/publishReplay");r.publishReplay=function(e,t,r,n){return i.publishReplay(e,t,r,n)(this)}},{"../operators/publishReplay":726}],627:[function(e,t,r){var n=e("../operators/race"),i=e("../observable/race");r.raceStatic=i.race,r.race=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return n.race.apply(void 0,e)(this)}},{"../observable/race":561,"../operators/race":727}],628:[function(e,t,r){var n=e("../operators/reduce");r.reduce=function(e,t){return 2<=arguments.length?n.reduce(e,t)(this):n.reduce(e)(this)}},{"../operators/reduce":728}],629:[function(e,t,r){var n=e("../operators/repeat");r.repeat=function(e){return void 0===e&&(e=-1),n.repeat(e)(this)}},{"../operators/repeat":730}],630:[function(e,t,r){var n=e("../operators/repeatWhen");r.repeatWhen=function(e){return n.repeatWhen(e)(this)}},{"../operators/repeatWhen":731}],631:[function(e,t,r){var n=e("../operators/retry");r.retry=function(e){return void 0===e&&(e=-1),n.retry(e)(this)}},{"../operators/retry":732}],632:[function(e,t,r){var n=e("../operators/retryWhen");r.retryWhen=function(e){return n.retryWhen(e)(this)}},{"../operators/retryWhen":733}],633:[function(e,t,r){var n=e("../operators/sample");r.sample=function(e){return n.sample(e)(this)}},{"../operators/sample":734}],634:[function(e,t,r){var n=e("../scheduler/async"),i=e("../operators/sampleTime");r.sampleTime=function(e,t){return void 0===t&&(t=n.async),i.sampleTime(e,t)(this)}},{"../operators/sampleTime":735,"../scheduler/async":782}],635:[function(e,t,r){var n=e("../operators/scan");r.scan=function(e,t){return 2<=arguments.length?n.scan(e,t)(this):n.scan(e)(this)}},{"../operators/scan":736}],636:[function(e,t,r){var n=e("../operators/sequenceEqual");r.sequenceEqual=function(e,t){return n.sequenceEqual(e,t)(this)}},{"../operators/sequenceEqual":737}],637:[function(e,t,r){var n=e("../operators/share");r.share=function(){return n.share()(this)}},{"../operators/share":738}],638:[function(e,t,r){var n=e("../operators/shareReplay");r.shareReplay=function(e,t,r){return n.shareReplay(e,t,r)(this)}},{"../operators/shareReplay":739}],639:[function(e,t,r){var n=e("../operators/single");r.single=function(e){return n.single(e)(this)}},{"../operators/single":740}],640:[function(e,t,r){var n=e("../operators/skip");r.skip=function(e){return n.skip(e)(this)}},{"../operators/skip":741}],641:[function(e,t,r){var n=e("../operators/skipLast");r.skipLast=function(e){return n.skipLast(e)(this)}},{"../operators/skipLast":742}],642:[function(e,t,r){var n=e("../operators/skipUntil");r.skipUntil=function(e){return n.skipUntil(e)(this)}},{"../operators/skipUntil":743}],643:[function(e,t,r){var n=e("../operators/skipWhile");r.skipWhile=function(e){return n.skipWhile(e)(this)}},{"../operators/skipWhile":744}],644:[function(e,t,r){var n=e("../operators/startWith");r.startWith=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return n.startWith.apply(void 0,e)(this)}},{"../operators/startWith":745}],645:[function(e,t,r){var n=e("../operators/subscribeOn");r.subscribeOn=function(e,t){return void 0===t&&(t=0),n.subscribeOn(e,t)(this)}},{"../operators/subscribeOn":746}],646:[function(e,t,r){var n=e("../operators/switchAll");r._switch=function(){return n.switchAll()(this)}},{"../operators/switchAll":747}],647:[function(e,t,r){var n=e("../operators/switchMap");r.switchMap=function(e,t){return n.switchMap(e,t)(this)}},{"../operators/switchMap":748}],648:[function(e,t,r){var n=e("../operators/switchMapTo");r.switchMapTo=function(e,t){return n.switchMapTo(e,t)(this)}},{"../operators/switchMapTo":749}],649:[function(e,t,r){var n=e("../operators/take");r.take=function(e){return n.take(e)(this)}},{"../operators/take":750}],650:[function(e,t,r){var n=e("../operators/takeLast");r.takeLast=function(e){return n.takeLast(e)(this)}},{"../operators/takeLast":751}],651:[function(e,t,r){var n=e("../operators/takeUntil");r.takeUntil=function(e){return n.takeUntil(e)(this)}},{"../operators/takeUntil":752}],652:[function(e,t,r){var n=e("../operators/takeWhile");r.takeWhile=function(e){return n.takeWhile(e)(this)}},{"../operators/takeWhile":753}],653:[function(e,t,r){var n=e("../operators/throttle");r.throttle=function(e,t){return void 0===t&&(t=n.defaultThrottleConfig),n.throttle(e,t)(this)}},{"../operators/throttle":755}],654:[function(e,t,r){var n=e("../scheduler/async"),i=e("../operators/throttle"),o=e("../operators/throttleTime");r.throttleTime=function(e,t,r){return void 0===t&&(t=n.async),void 0===r&&(r=i.defaultThrottleConfig),o.throttleTime(e,t,r)(this)}},{"../operators/throttle":755,"../operators/throttleTime":756,"../scheduler/async":782}],655:[function(e,t,r){var n=e("../scheduler/async"),i=e("../operators/timeInterval");r.TimeInterval=i.TimeInterval,r.timeInterval=function(e){return void 0===e&&(e=n.async),i.timeInterval(e)(this)}},{"../operators/timeInterval":757,"../scheduler/async":782}],656:[function(e,t,r){var n=e("../scheduler/async"),i=e("../operators/timeout");r.timeout=function(e,t){return void 0===t&&(t=n.async),i.timeout(e,t)(this)}},{"../operators/timeout":758,"../scheduler/async":782}],657:[function(e,t,r){var n=e("../scheduler/async"),i=e("../operators/timeoutWith");r.timeoutWith=function(e,t,r){return void 0===r&&(r=n.async),i.timeoutWith(e,t,r)(this)}},{"../operators/timeoutWith":759,"../scheduler/async":782}],658:[function(e,t,r){var n=e("../scheduler/async"),i=e("../operators/timestamp");r.timestamp=function(e){return void 0===e&&(e=n.async),i.timestamp(e)(this)}},{"../operators/timestamp":760,"../scheduler/async":782}],659:[function(e,t,r){var n=e("../operators/toArray");r.toArray=function(){return n.toArray()(this)}},{"../operators/toArray":761}],660:[function(e,t,r){var n=e("../operators/window");r.window=function(e){return n.window(e)(this)}},{"../operators/window":762}],661:[function(e,t,r){var n=e("../operators/windowCount");r.windowCount=function(e,t){return void 0===t&&(t=0),n.windowCount(e,t)(this)}},{"../operators/windowCount":763}],662:[function(e,t,r){var i=e("../scheduler/async"),o=e("../util/isNumeric"),a=e("../util/isScheduler"),s=e("../operators/windowTime");r.windowTime=function(e){var t=i.async,r=null,n=Number.POSITIVE_INFINITY;return a.isScheduler(arguments[3])&&(t=arguments[3]),a.isScheduler(arguments[2])?t=arguments[2]:o.isNumeric(arguments[2])&&(n=arguments[2]),a.isScheduler(arguments[1])?t=arguments[1]:o.isNumeric(arguments[1])&&(r=arguments[1]),s.windowTime(e,r,n,t)(this)}},{"../operators/windowTime":764,"../scheduler/async":782,"../util/isNumeric":811,"../util/isScheduler":814}],663:[function(e,t,r){var n=e("../operators/windowToggle");r.windowToggle=function(e,t){return n.windowToggle(e,t)(this)}},{"../operators/windowToggle":765}],664:[function(e,t,r){var n=e("../operators/windowWhen");r.windowWhen=function(e){return n.windowWhen(e)(this)}},{"../operators/windowWhen":766}],665:[function(e,t,r){var n=e("../operators/withLatestFrom");r.withLatestFrom=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return n.withLatestFrom.apply(void 0,e)(this)}},{"../operators/withLatestFrom":767}],666:[function(e,t,r){var n=e("../operators/zip");r.zipProto=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return n.zip.apply(void 0,e)(this)}},{"../operators/zip":768}],667:[function(e,t,r){var n=e("../operators/zipAll");r.zipAll=function(e){return n.zipAll(e)(this)}},{"../operators/zipAll":769}],668:[function(e,t,r){var n=e("./operators/audit");r.audit=n.audit;var i=e("./operators/auditTime");r.auditTime=i.auditTime;var o=e("./operators/buffer");r.buffer=o.buffer;var a=e("./operators/bufferCount");r.bufferCount=a.bufferCount;var s=e("./operators/bufferTime");r.bufferTime=s.bufferTime;var l=e("./operators/bufferToggle");r.bufferToggle=l.bufferToggle;var u=e("./operators/bufferWhen");r.bufferWhen=u.bufferWhen;var c=e("./operators/catchError");r.catchError=c.catchError;var h=e("./operators/combineAll");r.combineAll=h.combineAll;var d=e("./operators/combineLatest");r.combineLatest=d.combineLatest;var p=e("./operators/concat");r.concat=p.concat;var f=e("./operators/concatAll");r.concatAll=f.concatAll;var m=e("./operators/concatMap");r.concatMap=m.concatMap;var v=e("./operators/concatMapTo");r.concatMapTo=v.concatMapTo;var b=e("./operators/count");r.count=b.count;var y=e("./operators/debounce");r.debounce=y.debounce;var g=e("./operators/debounceTime");r.debounceTime=g.debounceTime;var w=e("./operators/defaultIfEmpty");r.defaultIfEmpty=w.defaultIfEmpty;var _=e("./operators/delay");r.delay=_.delay;var x=e("./operators/delayWhen");r.delayWhen=x.delayWhen;var S=e("./operators/dematerialize");r.dematerialize=S.dematerialize;var C=e("./operators/distinct");r.distinct=C.distinct;var k=e("./operators/distinctUntilChanged");r.distinctUntilChanged=k.distinctUntilChanged;var T=e("./operators/distinctUntilKeyChanged");r.distinctUntilKeyChanged=T.distinctUntilKeyChanged;var A=e("./operators/elementAt");r.elementAt=A.elementAt;var E=e("./operators/every");r.every=E.every;var O=e("./operators/exhaust");r.exhaust=O.exhaust;var M=e("./operators/exhaustMap");r.exhaustMap=M.exhaustMap;var P=e("./operators/expand");r.expand=P.expand;var I=e("./operators/filter");r.filter=I.filter;var R=e("./operators/finalize");r.finalize=R.finalize;var D=e("./operators/find");r.find=D.find;var B=e("./operators/findIndex");r.findIndex=B.findIndex;var L=e("./operators/first");r.first=L.first;var F=e("./operators/groupBy");r.groupBy=F.groupBy;var j=e("./operators/ignoreElements");r.ignoreElements=j.ignoreElements;var N=e("./operators/isEmpty");r.isEmpty=N.isEmpty;var G=e("./operators/last");r.last=G.last;var z=e("./operators/map");r.map=z.map;var U=e("./operators/mapTo");r.mapTo=U.mapTo;var V=e("./operators/materialize");r.materialize=V.materialize;var H=e("./operators/max");r.max=H.max;var W=e("./operators/merge");r.merge=W.merge;var q=e("./operators/mergeAll");r.mergeAll=q.mergeAll;var X=e("./operators/mergeMap");r.mergeMap=X.mergeMap;var Y=e("./operators/mergeMap");r.flatMap=Y.mergeMap;var K=e("./operators/mergeMapTo");r.mergeMapTo=K.mergeMapTo;var J=e("./operators/mergeScan");r.mergeScan=J.mergeScan;var Z=e("./operators/min");r.min=Z.min;var Q=e("./operators/multicast");r.multicast=Q.multicast;var $=e("./operators/observeOn");r.observeOn=$.observeOn;var ee=e("./operators/onErrorResumeNext");r.onErrorResumeNext=ee.onErrorResumeNext;var te=e("./operators/pairwise");r.pairwise=te.pairwise;var re=e("./operators/partition");r.partition=re.partition;var ne=e("./operators/pluck");r.pluck=ne.pluck;var ie=e("./operators/publish");r.publish=ie.publish;var oe=e("./operators/publishBehavior");r.publishBehavior=oe.publishBehavior;var ae=e("./operators/publishLast");r.publishLast=ae.publishLast;var se=e("./operators/publishReplay");r.publishReplay=se.publishReplay;var le=e("./operators/race");r.race=le.race;var ue=e("./operators/reduce");r.reduce=ue.reduce;var ce=e("./operators/repeat");r.repeat=ce.repeat;var he=e("./operators/repeatWhen");r.repeatWhen=he.repeatWhen;var de=e("./operators/retry");r.retry=de.retry;var pe=e("./operators/retryWhen");r.retryWhen=pe.retryWhen;var fe=e("./operators/refCount");r.refCount=fe.refCount;var me=e("./operators/sample");r.sample=me.sample;var ve=e("./operators/sampleTime");r.sampleTime=ve.sampleTime;var be=e("./operators/scan");r.scan=be.scan;var ye=e("./operators/sequenceEqual");r.sequenceEqual=ye.sequenceEqual;var ge=e("./operators/share");r.share=ge.share;var we=e("./operators/shareReplay");r.shareReplay=we.shareReplay;var _e=e("./operators/single");r.single=_e.single;var xe=e("./operators/skip");r.skip=xe.skip;var Se=e("./operators/skipLast");r.skipLast=Se.skipLast;var Ce=e("./operators/skipUntil");r.skipUntil=Ce.skipUntil;var ke=e("./operators/skipWhile");r.skipWhile=ke.skipWhile;var Te=e("./operators/startWith");r.startWith=Te.startWith;var Ae=e("./operators/switchAll");r.switchAll=Ae.switchAll;var Ee=e("./operators/switchMap");r.switchMap=Ee.switchMap;var Oe=e("./operators/switchMapTo");r.switchMapTo=Oe.switchMapTo;var Me=e("./operators/take");r.take=Me.take;var Pe=e("./operators/takeLast");r.takeLast=Pe.takeLast;var Ie=e("./operators/takeUntil");r.takeUntil=Ie.takeUntil;var Re=e("./operators/takeWhile");r.takeWhile=Re.takeWhile;var De=e("./operators/tap");r.tap=De.tap;var Be=e("./operators/throttle");r.throttle=Be.throttle;var Le=e("./operators/throttleTime");r.throttleTime=Le.throttleTime;var Fe=e("./operators/timeInterval");r.timeInterval=Fe.timeInterval;var je=e("./operators/timeout");r.timeout=je.timeout;var Ne=e("./operators/timeoutWith");r.timeoutWith=Ne.timeoutWith;var Ge=e("./operators/timestamp");r.timestamp=Ge.timestamp;var ze=e("./operators/toArray");r.toArray=ze.toArray;var Ue=e("./operators/window");r.window=Ue.window;var Ve=e("./operators/windowCount");r.windowCount=Ve.windowCount;var He=e("./operators/windowTime");r.windowTime=He.windowTime;var We=e("./operators/windowToggle");r.windowToggle=We.windowToggle;var qe=e("./operators/windowWhen");r.windowWhen=qe.windowWhen;var Xe=e("./operators/withLatestFrom");r.withLatestFrom=Xe.withLatestFrom;var Ye=e("./operators/zip");r.zip=Ye.zip;var Ke=e("./operators/zipAll");r.zipAll=Ke.zipAll},{"./operators/audit":669,"./operators/auditTime":670,"./operators/buffer":671,"./operators/bufferCount":672,"./operators/bufferTime":673,"./operators/bufferToggle":674,"./operators/bufferWhen":675,"./operators/catchError":676,"./operators/combineAll":677,"./operators/combineLatest":678,"./operators/concat":679,"./operators/concatAll":680,"./operators/concatMap":681,"./operators/concatMapTo":682,"./operators/count":683,"./operators/debounce":684,"./operators/debounceTime":685,"./operators/defaultIfEmpty":686,"./operators/delay":687,"./operators/delayWhen":688,"./operators/dematerialize":689,"./operators/distinct":690,"./operators/distinctUntilChanged":691,"./operators/distinctUntilKeyChanged":692,"./operators/elementAt":693,"./operators/every":694,"./operators/exhaust":695,"./operators/exhaustMap":696,"./operators/expand":697,"./operators/filter":698,"./operators/finalize":699,"./operators/find":700,"./operators/findIndex":701,"./operators/first":702,"./operators/groupBy":703,"./operators/ignoreElements":704,"./operators/isEmpty":705,"./operators/last":706,"./operators/map":707,"./operators/mapTo":708,"./operators/materialize":709,"./operators/max":710,"./operators/merge":711,"./operators/mergeAll":712,"./operators/mergeMap":713,"./operators/mergeMapTo":714,"./operators/mergeScan":715,"./operators/min":716,"./operators/multicast":717,"./operators/observeOn":718,"./operators/onErrorResumeNext":719,"./operators/pairwise":720,"./operators/partition":721,"./operators/pluck":722,"./operators/publish":723,"./operators/publishBehavior":724,"./operators/publishLast":725,"./operators/publishReplay":726,"./operators/race":727,"./operators/reduce":728,"./operators/refCount":729,"./operators/repeat":730,"./operators/repeatWhen":731,"./operators/retry":732,"./operators/retryWhen":733,"./operators/sample":734,"./operators/sampleTime":735,"./operators/scan":736,"./operators/sequenceEqual":737,"./operators/share":738,"./operators/shareReplay":739,"./operators/single":740,"./operators/skip":741,"./operators/skipLast":742,"./operators/skipUntil":743,"./operators/skipWhile":744,"./operators/startWith":745,"./operators/switchAll":747,"./operators/switchMap":748,"./operators/switchMapTo":749,"./operators/take":750,"./operators/takeLast":751,"./operators/takeUntil":752,"./operators/takeWhile":753,"./operators/tap":754,"./operators/throttle":755,"./operators/throttleTime":756,"./operators/timeInterval":757,"./operators/timeout":758,"./operators/timeoutWith":759,"./operators/timestamp":760,"./operators/toArray":761,"./operators/window":762,"./operators/windowCount":763,"./operators/windowTime":764,"./operators/windowToggle":765,"./operators/windowWhen":766,"./operators/withLatestFrom":767,"./operators/zip":768,"./operators/zipAll":769}],669:[function(e,t,r){var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=e("../util/tryCatch"),o=e("../util/errorObject"),a=e("../OuterSubscriber"),s=e("../util/subscribeToResult");r.audit=function(t){return function(e){return e.lift(new l(t))}};var l=function(){function e(e){this.durationSelector=e}return e.prototype.call=function(e,t){return t.subscribe(new u(e,this.durationSelector))},e}(),u=function(r){function e(e,t){r.call(this,e),this.durationSelector=t,this.hasValue=!1}return n(e,r),e.prototype._next=function(e){if(this.value=e,this.hasValue=!0,!this.throttled){var t=i.tryCatch(this.durationSelector)(e);if(t===o.errorObject)this.destination.error(o.errorObject.e);else{var r=s.subscribeToResult(this,t);r.closed?this.clearThrottle():this.add(this.throttled=r)}}},e.prototype.clearThrottle=function(){var e=this.value,t=this.hasValue,r=this.throttled;r&&(this.remove(r),this.throttled=null,r.unsubscribe()),t&&(this.value=null,this.hasValue=!1,this.destination.next(e))},e.prototype.notifyNext=function(e,t,r,n){this.clearThrottle()},e.prototype.notifyComplete=function(){this.clearThrottle()},e}(a.OuterSubscriber)},{"../OuterSubscriber":377,"../util/errorObject":805,"../util/subscribeToResult":819,"../util/tryCatch":821}],670:[function(e,t,r){var n=e("../scheduler/async"),i=e("./audit"),o=e("../observable/timer");r.auditTime=function(e,t){return void 0===t&&(t=n.async),i.audit(function(){return o.timer(e,t)})}},{"../observable/timer":564,"../scheduler/async":782,"./audit":669}],671:[function(e,t,r){var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=e("../OuterSubscriber"),o=e("../util/subscribeToResult");r.buffer=function(t){return function(e){return e.lift(new a(t))}};var a=function(){function e(e){this.closingNotifier=e}return e.prototype.call=function(e,t){return t.subscribe(new s(e,this.closingNotifier))},e}(),s=function(r){function e(e,t){r.call(this,e),this.buffer=[],this.add(o.subscribeToResult(this,t))}return n(e,r),e.prototype._next=function(e){this.buffer.push(e)},e.prototype.notifyNext=function(e,t,r,n,i){var o=this.buffer;this.buffer=[],this.destination.next(o)},e}(i.OuterSubscriber)},{"../OuterSubscriber":377,"../util/subscribeToResult":819}],672:[function(e,t,r){var i=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},n=e("../Subscriber");r.bufferCount=function(t,r){return void 0===r&&(r=null),function(e){return e.lift(new o(t,r))}};var o=function(){function e(e,t){this.bufferSize=e,this.startBufferEvery=t,this.subscriberClass=t&&e!==t?s:a}return e.prototype.call=function(e,t){return t.subscribe(new this.subscriberClass(e,this.bufferSize,this.startBufferEvery))},e}(),a=function(r){function e(e,t){r.call(this,e),this.bufferSize=t,this.buffer=[]}return i(e,r),e.prototype._next=function(e){var t=this.buffer;t.push(e),t.length==this.bufferSize&&(this.destination.next(t),this.buffer=[])},e.prototype._complete=function(){var e=this.buffer;0<e.length&&this.destination.next(e),r.prototype._complete.call(this)},e}(n.Subscriber),s=function(n){function e(e,t,r){n.call(this,e),this.bufferSize=t,this.startBufferEvery=r,this.buffers=[],this.count=0}return i(e,n),e.prototype._next=function(e){var t=this.bufferSize,r=this.startBufferEvery,n=this.buffers,i=this.count;this.count++,i%r==0&&n.push([]);for(var o=n.length;o--;){var a=n[o];a.push(e),a.length===t&&(n.splice(o,1),this.destination.next(a))}},e.prototype._complete=function(){for(var e=this.buffers,t=this.destination;0<e.length;){var r=e.shift();0<r.length&&t.next(r)}n.prototype._complete.call(this)},e}(n.Subscriber)},{"../Subscriber":383}],673:[function(e,t,r){var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},o=e("../scheduler/async"),i=e("../Subscriber"),a=e("../util/isScheduler");r.bufferTime=function(t){var e=arguments.length,r=o.async;a.isScheduler(arguments[arguments.length-1])&&(r=arguments[arguments.length-1],e--);var n=null;2<=e&&(n=arguments[1]);var i=Number.POSITIVE_INFINITY;return 3<=e&&(i=arguments[2]),function(e){return e.lift(new s(t,n,i,r))}};var s=function(){function e(e,t,r,n){this.bufferTimeSpan=e,this.bufferCreationInterval=t,this.maxBufferSize=r,this.scheduler=n}return e.prototype.call=function(e,t){return t.subscribe(new u(e,this.bufferTimeSpan,this.bufferCreationInterval,this.maxBufferSize,this.scheduler))},e}(),l=function(){this.buffer=[]},u=function(u){function e(e,t,r,n,i){u.call(this,e),this.bufferTimeSpan=t,this.bufferCreationInterval=r,this.maxBufferSize=n,this.scheduler=i,this.contexts=[];var o=this.openContext();if(this.timespanOnly=null==r||r<0,this.timespanOnly){var a={subscriber:this,context:o,bufferTimeSpan:t};this.add(o.closeAction=i.schedule(c,t,a))}else{var s={subscriber:this,context:o},l={bufferTimeSpan:t,bufferCreationInterval:r,subscriber:this,scheduler:i};this.add(o.closeAction=i.schedule(d,t,s)),this.add(i.schedule(h,r,l))}}return n(e,u),e.prototype._next=function(e){for(var t,r=this.contexts,n=r.length,i=0;i<n;i++){var o=r[i],a=o.buffer;a.push(e),a.length==this.maxBufferSize&&(t=o)}t&&this.onBufferFull(t)},e.prototype._error=function(e){this.contexts.length=0,u.prototype._error.call(this,e)},e.prototype._complete=function(){for(var e=this.contexts,t=this.destination;0<e.length;){var r=e.shift();t.next(r.buffer)}u.prototype._complete.call(this)},e.prototype._unsubscribe=function(){this.contexts=null},e.prototype.onBufferFull=function(e){this.closeContext(e);var t=e.closeAction;if(t.unsubscribe(),this.remove(t),!this.closed&&this.timespanOnly){e=this.openContext();var r=this.bufferTimeSpan,n={subscriber:this,context:e,bufferTimeSpan:r};this.add(e.closeAction=this.scheduler.schedule(c,r,n))}},e.prototype.openContext=function(){var e=new l;return this.contexts.push(e),e},e.prototype.closeContext=function(e){this.destination.next(e.buffer);var t=this.contexts;0<=(t?t.indexOf(e):-1)&&t.splice(t.indexOf(e),1)},e}(i.Subscriber);function c(e){var t=e.subscriber,r=e.context;r&&t.closeContext(r),t.closed||(e.context=t.openContext(),e.context.closeAction=this.schedule(e,e.bufferTimeSpan))}function h(e){var t=e.bufferCreationInterval,r=e.bufferTimeSpan,n=e.subscriber,i=e.scheduler,o=n.openContext();n.closed||(n.add(o.closeAction=i.schedule(d,r,{subscriber:n,context:o})),this.schedule(e,t))}function d(e){var t=e.subscriber,r=e.context;t.closeContext(r)}},{"../Subscriber":383,"../scheduler/async":782,"../util/isScheduler":814}],674:[function(e,t,r){var i=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},o=e("../Subscription"),a=e("../util/subscribeToResult"),n=e("../OuterSubscriber");r.bufferToggle=function(t,r){return function(e){return e.lift(new s(t,r))}};var s=function(){function e(e,t){this.openings=e,this.closingSelector=t}return e.prototype.call=function(e,t){return t.subscribe(new l(e,this.openings,this.closingSelector))},e}(),l=function(n){function e(e,t,r){n.call(this,e),this.openings=t,this.closingSelector=r,this.contexts=[],this.add(a.subscribeToResult(this,t))}return i(e,n),e.prototype._next=function(e){for(var t=this.contexts,r=t.length,n=0;n<r;n++)t[n].buffer.push(e)},e.prototype._error=function(e){for(var t=this.contexts;0<t.length;){var r=t.shift();r.subscription.unsubscribe(),r.buffer=null,r.subscription=null}this.contexts=null,n.prototype._error.call(this,e)},e.prototype._complete=function(){for(var e=this.contexts;0<e.length;){var t=e.shift();this.destination.next(t.buffer),t.subscription.unsubscribe(),t.buffer=null,t.subscription=null}this.contexts=null,n.prototype._complete.call(this)},e.prototype.notifyNext=function(e,t,r,n,i){e?this.closeBuffer(e):this.openBuffer(t)},e.prototype.notifyComplete=function(e){this.closeBuffer(e.context)},e.prototype.openBuffer=function(e){try{var t=this.closingSelector.call(this,e);t&&this.trySubscribe(t)}catch(e){this._error(e)}},e.prototype.closeBuffer=function(e){var t=this.contexts;if(t&&e){var r=e.buffer,n=e.subscription;this.destination.next(r),t.splice(t.indexOf(e),1),this.remove(n),n.unsubscribe()}},e.prototype.trySubscribe=function(e){var t=this.contexts,r=new o.Subscription,n={buffer:[],subscription:r};t.push(n);var i=a.subscribeToResult(this,e,n);!i||i.closed?this.closeBuffer(n):(i.context=n,this.add(i),r.add(i))},e}(n.OuterSubscriber)},{"../OuterSubscriber":377,"../Subscription":384,"../util/subscribeToResult":819}],675:[function(e,t,r){var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=e("../Subscription"),o=e("../util/tryCatch"),a=e("../util/errorObject"),s=e("../OuterSubscriber"),l=e("../util/subscribeToResult");r.bufferWhen=function(t){return function(e){return e.lift(new u(t))}};var u=function(){function e(e){this.closingSelector=e}return e.prototype.call=function(e,t){return t.subscribe(new c(e,this.closingSelector))},e}(),c=function(r){function e(e,t){r.call(this,e),this.closingSelector=t,this.subscribing=!1,this.openBuffer()}return n(e,r),e.prototype._next=function(e){this.buffer.push(e)},e.prototype._complete=function(){var e=this.buffer;e&&this.destination.next(e),r.prototype._complete.call(this)},e.prototype._unsubscribe=function(){this.buffer=null,this.subscribing=!1},e.prototype.notifyNext=function(e,t,r,n,i){this.openBuffer()},e.prototype.notifyComplete=function(){this.subscribing?this.complete():this.openBuffer()},e.prototype.openBuffer=function(){var e=this.closingSubscription;e&&(this.remove(e),e.unsubscribe());var t=this.buffer;this.buffer&&this.destination.next(t),this.buffer=[];var r=o.tryCatch(this.closingSelector)();r===a.errorObject?this.error(a.errorObject.e):(e=new i.Subscription,this.closingSubscription=e,this.add(e),this.subscribing=!0,e.add(l.subscribeToResult(this,r)),this.subscribing=!1)},e}(s.OuterSubscriber)},{"../OuterSubscriber":377,"../Subscription":384,"../util/errorObject":805,"../util/subscribeToResult":819,"../util/tryCatch":821}],676:[function(e,t,r){var i=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},n=e("../OuterSubscriber"),o=e("../util/subscribeToResult");r.catchError=function(n){return function(e){var t=new a(n),r=e.lift(t);return t.caught=r}};var a=function(){function e(e){this.selector=e}return e.prototype.call=function(e,t){return t.subscribe(new s(e,this.selector,this.caught))},e}(),s=function(n){function e(e,t,r){n.call(this,e),this.selector=t,this.caught=r}return i(e,n),e.prototype.error=function(e){if(!this.isStopped){var t=void 0;try{t=this.selector(e,this.caught)}catch(e){return void n.prototype.error.call(this,e)}this._unsubscribeAndRecycle(),this.add(o.subscribeToResult(this,t))}},e}(n.OuterSubscriber)},{"../OuterSubscriber":377,"../util/subscribeToResult":819}],677:[function(e,t,r){var n=e("../operators/combineLatest");r.combineAll=function(t){return function(e){return e.lift(new n.CombineLatestOperator(t))}}},{"../operators/combineLatest":678}],678:[function(e,t,r){var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=e("../observable/ArrayObservable"),o=e("../util/isArray"),a=e("../OuterSubscriber"),s=e("../util/subscribeToResult"),l={};r.combineLatest=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];var r=null;return"function"==typeof t[t.length-1]&&(r=t.pop()),1===t.length&&o.isArray(t[0])&&(t=t[0].slice()),function(e){return e.lift.call(new i.ArrayObservable([e].concat(t)),new u(r))}};var u=function(){function e(e){this.project=e}return e.prototype.call=function(e,t){return t.subscribe(new c(e,this.project))},e}();r.CombineLatestOperator=u;var c=function(r){function e(e,t){r.call(this,e),this.project=t,this.active=0,this.values=[],this.observables=[]}return n(e,r),e.prototype._next=function(e){this.values.push(l),this.observables.push(e)},e.prototype._complete=function(){var e=this.observables,t=e.length;if(0===t)this.destination.complete();else{this.active=t,this.toRespond=t;for(var r=0;r<t;r++){var n=e[r];this.add(s.subscribeToResult(this,n,n,r))}}},e.prototype.notifyComplete=function(e){0==(this.active-=1)&&this.destination.complete()},e.prototype.notifyNext=function(e,t,r,n,i){var o=this.values,a=o[r],s=this.toRespond?a===l?--this.toRespond:this.toRespond:0;o[r]=t,0===s&&(this.project?this._tryProject(o):this.destination.next(o.slice()))},e.prototype._tryProject=function(e){var t;try{t=this.project.apply(this,e)}catch(e){return void this.destination.error(e)}this.destination.next(t)},e}(a.OuterSubscriber);r.CombineLatestSubscriber=c},{"../OuterSubscriber":377,"../observable/ArrayObservable":515,"../util/isArray":807,"../util/subscribeToResult":819}],679:[function(e,t,r){var n=e("../observable/concat"),i=e("../observable/concat");r.concatStatic=i.concat,r.concat=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];return function(e){return e.lift.call(n.concat.apply(void 0,[e].concat(t)))}}},{"../observable/concat":541}],680:[function(e,t,r){var n=e("./mergeAll");r.concatAll=function(){return n.mergeAll(1)}},{"./mergeAll":712}],681:[function(e,t,r){var n=e("./mergeMap");r.concatMap=function(e,t){return n.mergeMap(e,t,1)}},{"./mergeMap":713}],682:[function(e,t,r){var n=e("./concatMap");r.concatMapTo=function(e,t){return n.concatMap(function(){return e},t)}},{"./concatMap":681}],683:[function(e,t,r){var i=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},n=e("../Subscriber");r.count=function(t){return function(e){return e.lift(new o(t,e))}};var o=function(){function e(e,t){this.predicate=e,this.source=t}return e.prototype.call=function(e,t){return t.subscribe(new a(e,this.predicate,this.source))},e}(),a=function(n){function e(e,t,r){n.call(this,e),this.predicate=t,this.source=r,this.count=0,this.index=0}return i(e,n),e.prototype._next=function(e){this.predicate?this._tryPredicate(e):this.count++},e.prototype._tryPredicate=function(e){var t;try{t=this.predicate(e,this.index++,this.source)}catch(e){return void this.destination.error(e)}t&&this.count++},e.prototype._complete=function(){this.destination.next(this.count),this.destination.complete()},e}(n.Subscriber)},{"../Subscriber":383}],684:[function(e,t,r){var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=e("../OuterSubscriber"),o=e("../util/subscribeToResult");r.debounce=function(t){return function(e){return e.lift(new a(t))}};var a=function(){function e(e){this.durationSelector=e}return e.prototype.call=function(e,t){return t.subscribe(new s(e,this.durationSelector))},e}(),s=function(r){function e(e,t){r.call(this,e),this.durationSelector=t,this.hasValue=!1,this.durationSubscription=null}return n(e,r),e.prototype._next=function(e){try{var t=this.durationSelector.call(this,e);t&&this._tryNext(e,t)}catch(e){this.destination.error(e)}},e.prototype._complete=function(){this.emitValue(),this.destination.complete()},e.prototype._tryNext=function(e,t){var r=this.durationSubscription;this.value=e,this.hasValue=!0,r&&(r.unsubscribe(),this.remove(r)),(r=o.subscribeToResult(this,t)).closed||this.add(this.durationSubscription=r)},e.prototype.notifyNext=function(e,t,r,n,i){this.emitValue()},e.prototype.notifyComplete=function(){this.emitValue()},e.prototype.emitValue=function(){if(this.hasValue){var e=this.value,t=this.durationSubscription;t&&(this.durationSubscription=null,t.unsubscribe(),this.remove(t)),this.value=null,this.hasValue=!1,r.prototype._next.call(this,e)}},e}(i.OuterSubscriber)},{"../OuterSubscriber":377,"../util/subscribeToResult":819}],685:[function(e,t,r){var i=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},n=e("../Subscriber"),o=e("../scheduler/async");r.debounceTime=function(t,r){return void 0===r&&(r=o.async),function(e){return e.lift(new a(t,r))}};var a=function(){function e(e,t){this.dueTime=e,this.scheduler=t}return e.prototype.call=function(e,t){return t.subscribe(new s(e,this.dueTime,this.scheduler))},e}(),s=function(n){function e(e,t,r){n.call(this,e),this.dueTime=t,this.scheduler=r,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}return i(e,n),e.prototype._next=function(e){this.clearDebounce(),this.lastValue=e,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(l,this.dueTime,this))},e.prototype._complete=function(){this.debouncedNext(),this.destination.complete()},e.prototype.debouncedNext=function(){this.clearDebounce(),this.hasValue&&(this.destination.next(this.lastValue),this.lastValue=null,this.hasValue=!1)},e.prototype.clearDebounce=function(){var e=this.debouncedSubscription;null!==e&&(this.remove(e),e.unsubscribe(),this.debouncedSubscription=null)},e}(n.Subscriber);function l(e){e.debouncedNext()}},{"../Subscriber":383,"../scheduler/async":782}],686:[function(e,t,r){var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=e("../Subscriber");r.defaultIfEmpty=function(t){return void 0===t&&(t=null),function(e){return e.lift(new o(t))}};var o=function(){function e(e){this.defaultValue=e}return e.prototype.call=function(e,t){return t.subscribe(new a(e,this.defaultValue))},e}(),a=function(r){function e(e,t){r.call(this,e),this.defaultValue=t,this.isEmpty=!0}return n(e,r),e.prototype._next=function(e){this.isEmpty=!1,this.destination.next(e)},e.prototype._complete=function(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()},e}(i.Subscriber)},{"../Subscriber":383}],687:[function(e,t,r){var i=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},n=e("../scheduler/async"),o=e("../util/isDate"),a=e("../Subscriber"),s=e("../Notification");r.delay=function(e,t){void 0===t&&(t=n.async);var r=o.isDate(e)?+e-t.now():Math.abs(e);return function(e){return e.lift(new l(r,t))}};var l=function(){function e(e,t){this.delay=e,this.scheduler=t}return e.prototype.call=function(e,t){return t.subscribe(new u(e,this.delay,this.scheduler))},e}(),u=function(n){function t(e,t,r){n.call(this,e),this.delay=t,this.scheduler=r,this.queue=[],this.active=!1,this.errored=!1}return i(t,n),t.dispatch=function(e){for(var t=e.source,r=t.queue,n=e.scheduler,i=e.destination;0<r.length&&r[0].time-n.now()<=0;)r.shift().notification.observe(i);if(0<r.length){var o=Math.max(0,r[0].time-n.now());this.schedule(e,o)}else this.unsubscribe(),t.active=!1},t.prototype._schedule=function(e){this.active=!0,this.add(e.schedule(t.dispatch,this.delay,{source:this,destination:this.destination,scheduler:e}))},t.prototype.scheduleNotification=function(e){if(!0!==this.errored){var t=this.scheduler,r=new c(t.now()+this.delay,e);this.queue.push(r),!1===this.active&&this._schedule(t)}},t.prototype._next=function(e){this.scheduleNotification(s.Notification.createNext(e))},t.prototype._error=function(e){this.errored=!0,this.queue=[],this.destination.error(e)},t.prototype._complete=function(){this.scheduleNotification(s.Notification.createComplete())},t}(a.Subscriber),c=function(e,t){this.time=e,this.notification=t}},{"../Notification":374,"../Subscriber":383,"../scheduler/async":782,"../util/isDate":809}],688:[function(e,t,r){var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=e("../Subscriber"),o=e("../Observable"),a=e("../OuterSubscriber"),s=e("../util/subscribeToResult");r.delayWhen=function(t,r){return r?function(e){return new c(e,r).lift(new l(t))}:function(e){return e.lift(new l(t))}};var l=function(){function e(e){this.delayDurationSelector=e}return e.prototype.call=function(e,t){return t.subscribe(new u(e,this.delayDurationSelector))},e}(),u=function(r){function e(e,t){r.call(this,e),this.delayDurationSelector=t,this.completed=!1,this.delayNotifierSubscriptions=[],this.values=[]}return n(e,r),e.prototype.notifyNext=function(e,t,r,n,i){this.destination.next(e),this.removeSubscription(i),this.tryComplete()},e.prototype.notifyError=function(e,t){this._error(e)},e.prototype.notifyComplete=function(e){var t=this.removeSubscription(e);t&&this.destination.next(t),this.tryComplete()},e.prototype._next=function(e){try{var t=this.delayDurationSelector(e);t&&this.tryDelay(t,e)}catch(e){this.destination.error(e)}},e.prototype._complete=function(){this.completed=!0,this.tryComplete()},e.prototype.removeSubscription=function(e){e.unsubscribe();var t=this.delayNotifierSubscriptions.indexOf(e),r=null;return-1!==t&&(r=this.values[t],this.delayNotifierSubscriptions.splice(t,1),this.values.splice(t,1)),r},e.prototype.tryDelay=function(e,t){var r=s.subscribeToResult(this,e,t);r&&!r.closed&&(this.add(r),this.delayNotifierSubscriptions.push(r)),this.values.push(t)},e.prototype.tryComplete=function(){this.completed&&0===this.delayNotifierSubscriptions.length&&this.destination.complete()},e}(a.OuterSubscriber),c=function(r){function e(e,t){r.call(this),this.source=e,this.subscriptionDelay=t}return n(e,r),e.prototype._subscribe=function(e){this.subscriptionDelay.subscribe(new h(e,this.source))},e}(o.Observable),h=function(r){function e(e,t){r.call(this),this.parent=e,this.source=t,this.sourceSubscribed=!1}return n(e,r),e.prototype._next=function(e){this.subscribeToSource()},e.prototype._error=function(e){this.unsubscribe(),this.parent.error(e)},e.prototype._complete=function(){this.subscribeToSource()},e.prototype.subscribeToSource=function(){this.sourceSubscribed||(this.sourceSubscribed=!0,this.unsubscribe(),this.source.subscribe(this.parent))},e}(i.Subscriber)},{"../Observable":375,"../OuterSubscriber":377,"../Subscriber":383,"../util/subscribeToResult":819}],689:[function(e,t,r){var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=e("../Subscriber");r.dematerialize=function(){return function(e){return e.lift(new o)}};var o=function(){function e(){}return e.prototype.call=function(e,t){return t.subscribe(new a(e))},e}(),a=function(t){function e(e){t.call(this,e)}return n(e,t),e.prototype._next=function(e){e.observe(this.destination)},e}(i.Subscriber)},{"../Subscriber":383}],690:[function(e,t,r){var i=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},n=e("../OuterSubscriber"),o=e("../util/subscribeToResult"),a=e("../util/Set");r.distinct=function(t,r){return function(e){return e.lift(new s(t,r))}};var s=function(){function e(e,t){this.keySelector=e,this.flushes=t}return e.prototype.call=function(e,t){return t.subscribe(new l(e,this.keySelector,this.flushes))},e}(),l=function(n){function e(e,t,r){n.call(this,e),this.keySelector=t,this.values=new a.Set,r&&this.add(o.subscribeToResult(this,r))}return i(e,n),e.prototype.notifyNext=function(e,t,r,n,i){this.values.clear()},e.prototype.notifyError=function(e,t){this._error(e)},e.prototype._next=function(e){this.keySelector?this._useKeySelector(e):this._finalizeNext(e,e)},e.prototype._useKeySelector=function(e){var t,r=this.destination;try{t=this.keySelector(e)}catch(e){return void r.error(e)}this._finalizeNext(t,e)},e.prototype._finalizeNext=function(e,t){var r=this.values;r.has(e)||(r.add(e),this.destination.next(t))},e}(n.OuterSubscriber);r.DistinctSubscriber=l},{"../OuterSubscriber":377,"../util/Set":800,"../util/subscribeToResult":819}],691:[function(e,t,r){var i=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},n=e("../Subscriber"),o=e("../util/tryCatch"),a=e("../util/errorObject");r.distinctUntilChanged=function(t,r){return function(e){return e.lift(new s(t,r))}};var s=function(){function e(e,t){this.compare=e,this.keySelector=t}return e.prototype.call=function(e,t){return t.subscribe(new l(e,this.compare,this.keySelector))},e}(),l=function(n){function e(e,t,r){n.call(this,e),this.keySelector=r,this.hasKey=!1,"function"==typeof t&&(this.compare=t)}return i(e,n),e.prototype.compare=function(e,t){return e===t},e.prototype._next=function(e){var t=e;if(this.keySelector&&(t=o.tryCatch(this.keySelector)(e))===a.errorObject)return this.destination.error(a.errorObject.e);var r=!1;if(this.hasKey){if((r=o.tryCatch(this.compare)(this.key,t))===a.errorObject)return this.destination.error(a.errorObject.e)}else this.hasKey=!0;!1===Boolean(r)&&(this.key=t,this.destination.next(e))},e}(n.Subscriber)},{"../Subscriber":383,"../util/errorObject":805,"../util/tryCatch":821}],692:[function(e,t,r){var i=e("./distinctUntilChanged");r.distinctUntilKeyChanged=function(r,n){return i.distinctUntilChanged(function(e,t){return n?n(e[r],t[r]):e[r]===t[r]})}},{"./distinctUntilChanged":691}],693:[function(e,t,r){var i=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},n=e("../Subscriber"),o=e("../util/ArgumentOutOfRangeError");r.elementAt=function(t,r){return function(e){return e.lift(new a(t,r))}};var a=function(){function e(e,t){if(this.index=e,this.defaultValue=t,e<0)throw new o.ArgumentOutOfRangeError}return e.prototype.call=function(e,t){return t.subscribe(new s(e,this.index,this.defaultValue))},e}(),s=function(n){function e(e,t,r){n.call(this,e),this.index=t,this.defaultValue=r}return i(e,n),e.prototype._next=function(e){0==this.index--&&(this.destination.next(e),this.destination.complete())},e.prototype._complete=function(){var e=this.destination;0<=this.index&&(void 0!==this.defaultValue?e.next(this.defaultValue):e.error(new o.ArgumentOutOfRangeError)),e.complete()},e}(n.Subscriber)},{"../Subscriber":383,"../util/ArgumentOutOfRangeError":793}],694:[function(e,t,r){var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=e("../Subscriber");r.every=function(t,r){return function(e){return e.lift(new o(t,r,e))}};var o=function(){function e(e,t,r){this.predicate=e,this.thisArg=t,this.source=r}return e.prototype.call=function(e,t){return t.subscribe(new a(e,this.predicate,this.thisArg,this.source))},e}(),a=function(i){function e(e,t,r,n){i.call(this,e),this.predicate=t,this.thisArg=r,this.source=n,this.index=0,this.thisArg=r||this}return n(e,i),e.prototype.notifyComplete=function(e){this.destination.next(e),this.destination.complete()},e.prototype._next=function(e){var t=!1;try{t=this.predicate.call(this.thisArg,e,this.index++,this.source)}catch(e){return void this.destination.error(e)}t||this.notifyComplete(!1)},e.prototype._complete=function(){this.notifyComplete(!0)},e}(i.Subscriber)},{"../Subscriber":383}],695:[function(e,t,r){var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=e("../OuterSubscriber"),o=e("../util/subscribeToResult");r.exhaust=function(){return function(e){return e.lift(new a)}};var a=function(){function e(){}return e.prototype.call=function(e,t){return t.subscribe(new s(e))},e}(),s=function(t){function e(e){t.call(this,e),this.hasCompleted=!1,this.hasSubscription=!1}return n(e,t),e.prototype._next=function(e){this.hasSubscription||(this.hasSubscription=!0,this.add(o.subscribeToResult(this,e)))},e.prototype._complete=function(){this.hasCompleted=!0,this.hasSubscription||this.destination.complete()},e.prototype.notifyComplete=function(e){this.remove(e),this.hasSubscription=!1,this.hasCompleted&&this.destination.complete()},e}(i.OuterSubscriber)},{"../OuterSubscriber":377,"../util/subscribeToResult":819}],696:[function(e,t,r){var i=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},n=e("../OuterSubscriber"),o=e("../util/subscribeToResult");r.exhaustMap=function(t,r){return function(e){return e.lift(new a(t,r))}};var a=function(){function e(e,t){this.project=e,this.resultSelector=t}return e.prototype.call=function(e,t){return t.subscribe(new s(e,this.project,this.resultSelector))},e}(),s=function(n){function e(e,t,r){n.call(this,e),this.project=t,this.resultSelector=r,this.hasSubscription=!1,this.hasCompleted=!1,this.index=0}return i(e,n),e.prototype._next=function(e){this.hasSubscription||this.tryNext(e)},e.prototype.tryNext=function(e){var t=this.index++,r=this.destination;try{var n=this.project(e,t);this.hasSubscription=!0,this.add(o.subscribeToResult(this,n,e,t))}catch(e){r.error(e)}},e.prototype._complete=function(){this.hasCompleted=!0,this.hasSubscription||this.destination.complete()},e.prototype.notifyNext=function(e,t,r,n,i){var o=this.resultSelector,a=this.destination;o?this.trySelectResult(e,t,r,n):a.next(t)},e.prototype.trySelectResult=function(e,t,r,n){var i=this.resultSelector,o=this.destination;try{var a=i(e,t,r,n);o.next(a)}catch(e){o.error(e)}},e.prototype.notifyError=function(e){this.destination.error(e)},e.prototype.notifyComplete=function(e){this.remove(e),this.hasSubscription=!1,this.hasCompleted&&this.destination.complete()},e}(n.OuterSubscriber)},{"../OuterSubscriber":377,"../util/subscribeToResult":819}],697:[function(e,t,r){var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},a=e("../util/tryCatch"),s=e("../util/errorObject"),i=e("../OuterSubscriber"),l=e("../util/subscribeToResult");r.expand=function(t,r,n){return void 0===r&&(r=Number.POSITIVE_INFINITY),void 0===n&&(n=void 0),r=(r||0)<1?Number.POSITIVE_INFINITY:r,function(e){return e.lift(new o(t,r,n))}};var o=function(){function e(e,t,r){this.project=e,this.concurrent=t,this.scheduler=r}return e.prototype.call=function(e,t){return t.subscribe(new u(e,this.project,this.concurrent,this.scheduler))},e}();r.ExpandOperator=o;var u=function(i){function o(e,t,r,n){i.call(this,e),this.project=t,this.concurrent=r,this.scheduler=n,this.index=0,this.active=0,this.hasCompleted=!1,r<Number.POSITIVE_INFINITY&&(this.buffer=[])}return n(o,i),o.dispatch=function(e){var t=e.subscriber,r=e.result,n=e.value,i=e.index;t.subscribeToProjection(r,n,i)},o.prototype._next=function(e){var t=this.destination;if(t.closed)this._complete();else{var r=this.index++;if(this.active<this.concurrent){t.next(e);var n=a.tryCatch(this.project)(e,r);if(n===s.errorObject)t.error(s.errorObject.e);else if(this.scheduler){var i={subscriber:this,result:n,value:e,index:r};this.add(this.scheduler.schedule(o.dispatch,0,i))}else this.subscribeToProjection(n,e,r)}else this.buffer.push(e)}},o.prototype.subscribeToProjection=function(e,t,r){this.active++,this.add(l.subscribeToResult(this,e,t,r))},o.prototype._complete=function(){this.hasCompleted=!0,this.hasCompleted&&0===this.active&&this.destination.complete()},o.prototype.notifyNext=function(e,t,r,n,i){this._next(t)},o.prototype.notifyComplete=function(e){var t=this.buffer;this.remove(e),this.active--,t&&0<t.length&&this._next(t.shift()),this.hasCompleted&&0===this.active&&this.destination.complete()},o}(i.OuterSubscriber);r.ExpandSubscriber=u},{"../OuterSubscriber":377,"../util/errorObject":805,"../util/subscribeToResult":819,"../util/tryCatch":821}],698:[function(e,t,r){var i=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},n=e("../Subscriber");r.filter=function(t,r){return function(e){return e.lift(new o(t,r))}};var o=function(){function e(e,t){this.predicate=e,this.thisArg=t}return e.prototype.call=function(e,t){return t.subscribe(new a(e,this.predicate,this.thisArg))},e}(),a=function(n){function e(e,t,r){n.call(this,e),this.predicate=t,this.thisArg=r,this.count=0}return i(e,n),e.prototype._next=function(e){var t;try{t=this.predicate.call(this.thisArg,e,this.count++)}catch(e){return void this.destination.error(e)}t&&this.destination.next(e)},e}(n.Subscriber)},{"../Subscriber":383}],699:[function(e,t,r){var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=e("../Subscriber"),o=e("../Subscription");r.finalize=function(t){return function(e){return e.lift(new a(t))}};var a=function(){function e(e){this.callback=e}return e.prototype.call=function(e,t){return t.subscribe(new s(e,this.callback))},e}(),s=function(r){function e(e,t){r.call(this,e),this.add(new o.Subscription(t))}return n(e,r),e}(i.Subscriber)},{"../Subscriber":383,"../Subscription":384}],700:[function(e,t,r){var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=e("../Subscriber");r.find=function(t,r){if("function"!=typeof t)throw new TypeError("predicate is not a function");return function(e){return e.lift(new o(t,e,!1,r))}};var o=function(){function e(e,t,r,n){this.predicate=e,this.source=t,this.yieldIndex=r,this.thisArg=n}return e.prototype.call=function(e,t){return t.subscribe(new a(e,this.predicate,this.source,this.yieldIndex,this.thisArg))},e}();r.FindValueOperator=o;var a=function(o){function e(e,t,r,n,i){o.call(this,e),this.predicate=t,this.source=r,this.yieldIndex=n,this.thisArg=i,this.index=0}return n(e,o),e.prototype.notifyComplete=function(e){var t=this.destination;t.next(e),t.complete()},e.prototype._next=function(e){var t=this.predicate,r=this.thisArg,n=this.index++;try{t.call(r||this,e,n,this.source)&&this.notifyComplete(this.yieldIndex?n:e)}catch(e){this.destination.error(e)}},e.prototype._complete=function(){this.notifyComplete(this.yieldIndex?-1:void 0)},e}(i.Subscriber);r.FindValueSubscriber=a},{"../Subscriber":383}],701:[function(e,t,r){var n=e("../operators/find");r.findIndex=function(t,r){return function(e){return e.lift(new n.FindValueOperator(t,e,!0,r))}}},{"../operators/find":700}],702:[function(e,t,r){var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=e("../Subscriber"),a=e("../util/EmptyError");r.first=function(t,r,n){return function(e){return e.lift(new o(t,r,n,e))}};var o=function(){function e(e,t,r,n){this.predicate=e,this.resultSelector=t,this.defaultValue=r,this.source=n}return e.prototype.call=function(e,t){return t.subscribe(new s(e,this.predicate,this.resultSelector,this.defaultValue,this.source))},e}(),s=function(o){function e(e,t,r,n,i){o.call(this,e),this.predicate=t,this.resultSelector=r,this.defaultValue=n,this.source=i,this.index=0,this.hasCompleted=!1,this._emitted=!1}return n(e,o),e.prototype._next=function(e){var t=this.index++;this.predicate?this._tryPredicate(e,t):this._emit(e,t)},e.prototype._tryPredicate=function(e,t){var r;try{r=this.predicate(e,t,this.source)}catch(e){return void this.destination.error(e)}r&&this._emit(e,t)},e.prototype._emit=function(e,t){this.resultSelector?this._tryResultSelector(e,t):this._emitFinal(e)},e.prototype._tryResultSelector=function(e,t){var r;try{r=this.resultSelector(e,t)}catch(e){return void this.destination.error(e)}this._emitFinal(r)},e.prototype._emitFinal=function(e){var t=this.destination;this._emitted||(this._emitted=!0,t.next(e),t.complete(),this.hasCompleted=!0)},e.prototype._complete=function(){var e=this.destination;this.hasCompleted||void 0===this.defaultValue?this.hasCompleted||e.error(new a.EmptyError):(e.next(this.defaultValue),e.complete())},e}(i.Subscriber)},{"../Subscriber":383,"../util/EmptyError":794}],703:[function(e,t,r){var i=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},n=e("../Subscriber"),o=e("../Subscription"),a=e("../Observable"),s=e("../Subject"),l=e("../util/Map"),u=e("../util/FastMap");r.groupBy=function(t,r,n,i){return function(e){return e.lift(new c(t,r,n,i))}};var c=function(){function e(e,t,r,n){this.keySelector=e,this.elementSelector=t,this.durationSelector=r,this.subjectSelector=n}return e.prototype.call=function(e,t){return t.subscribe(new h(e,this.keySelector,this.elementSelector,this.durationSelector,this.subjectSelector))},e}(),h=function(o){function e(e,t,r,n,i){o.call(this,e),this.keySelector=t,this.elementSelector=r,this.durationSelector=n,this.subjectSelector=i,this.groups=null,this.attemptedToUnsubscribe=!1,this.count=0}return i(e,o),e.prototype._next=function(e){var t;try{t=this.keySelector(e)}catch(e){return void this.error(e)}this._group(e,t)},e.prototype._group=function(e,t){var r=this.groups;r||(r=this.groups="string"==typeof t?new u.FastMap:new l.Map);var n,i=r.get(t);if(this.elementSelector)try{n=this.elementSelector(e)}catch(e){this.error(e)}else n=e;if(!i){i=this.subjectSelector?this.subjectSelector():new s.Subject,r.set(t,i);var o=new p(t,i,this);if(this.destination.next(o),this.durationSelector){var a=void 0;try{a=this.durationSelector(new p(t,i))}catch(e){return void this.error(e)}this.add(a.subscribe(new d(t,i,this)))}}i.closed||i.next(n)},e.prototype._error=function(r){var e=this.groups;e&&(e.forEach(function(e,t){e.error(r)}),e.clear()),this.destination.error(r)},e.prototype._complete=function(){var e=this.groups;e&&(e.forEach(function(e,t){e.complete()}),e.clear()),this.destination.complete()},e.prototype.removeGroup=function(e){this.groups.delete(e)},e.prototype.unsubscribe=function(){this.closed||(this.attemptedToUnsubscribe=!0,0===this.count&&o.prototype.unsubscribe.call(this))},e}(n.Subscriber),d=function(n){function e(e,t,r){n.call(this,t),this.key=e,this.group=t,this.parent=r}return i(e,n),e.prototype._next=function(e){this.complete()},e.prototype._unsubscribe=function(){var e=this.parent,t=this.key;this.key=this.parent=null,e&&e.removeGroup(t)},e}(n.Subscriber),p=function(n){function e(e,t,r){n.call(this),this.key=e,this.groupSubject=t,this.refCountSubscription=r}return i(e,n),e.prototype._subscribe=function(e){var t=new o.Subscription,r=this.refCountSubscription,n=this.groupSubject;return r&&!r.closed&&t.add(new f(r)),t.add(n.subscribe(e)),t},e}(a.Observable);r.GroupedObservable=p;var f=function(t){function e(e){t.call(this),(this.parent=e).count++}return i(e,t),e.prototype.unsubscribe=function(){var e=this.parent;e.closed||this.closed||(t.prototype.unsubscribe.call(this),e.count-=1,0===e.count&&e.attemptedToUnsubscribe&&e.unsubscribe())},e}(o.Subscription)},{"../Observable":375,"../Subject":381,"../Subscriber":383,"../Subscription":384,"../util/FastMap":795,"../util/Map":797}],704:[function(e,t,r){var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=e("../Subscriber"),o=e("../util/noop");r.ignoreElements=function(){return function(e){return e.lift(new a)}};var a=function(){function e(){}return e.prototype.call=function(e,t){return t.subscribe(new s(e))},e}(),s=function(e){function t(){e.apply(this,arguments)}return n(t,e),t.prototype._next=function(e){o.noop()},t}(i.Subscriber)},{"../Subscriber":383,"../util/noop":815}],705:[function(e,t,r){var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=e("../Subscriber");r.isEmpty=function(){return function(e){return e.lift(new o)}};var o=function(){function e(){}return e.prototype.call=function(e,t){return t.subscribe(new a(e))},e}(),a=function(t){function e(e){t.call(this,e)}return n(e,t),e.prototype.notifyComplete=function(e){var t=this.destination;t.next(e),t.complete()},e.prototype._next=function(e){this.notifyComplete(!1)},e.prototype._complete=function(){this.notifyComplete(!0)},e}(i.Subscriber)},{"../Subscriber":383}],706:[function(e,t,r){var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=e("../Subscriber"),a=e("../util/EmptyError");r.last=function(t,r,n){return function(e){return e.lift(new o(t,r,n,e))}};var o=function(){function e(e,t,r,n){this.predicate=e,this.resultSelector=t,this.defaultValue=r,this.source=n}return e.prototype.call=function(e,t){return t.subscribe(new s(e,this.predicate,this.resultSelector,this.defaultValue,this.source))},e}(),s=function(o){function e(e,t,r,n,i){o.call(this,e),this.predicate=t,this.resultSelector=r,this.defaultValue=n,this.source=i,this.hasValue=!1,void(this.index=0)!==n&&(this.lastValue=n,this.hasValue=!0)}return n(e,o),e.prototype._next=function(e){var t=this.index++;if(this.predicate)this._tryPredicate(e,t);else{if(this.resultSelector)return void this._tryResultSelector(e,t);this.lastValue=e,this.hasValue=!0}},e.prototype._tryPredicate=function(e,t){var r;try{r=this.predicate(e,t,this.source)}catch(e){return void this.destination.error(e)}if(r){if(this.resultSelector)return void this._tryResultSelector(e,t);this.lastValue=e,this.hasValue=!0}},e.prototype._tryResultSelector=function(e,t){var r;try{r=this.resultSelector(e,t)}catch(e){return void this.destination.error(e)}this.lastValue=r,this.hasValue=!0},e.prototype._complete=function(){var e=this.destination;this.hasValue?(e.next(this.lastValue),e.complete()):e.error(new a.EmptyError)},e}(i.Subscriber)},{"../Subscriber":383,"../util/EmptyError":794}],707:[function(e,t,r){var i=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},n=e("../Subscriber");r.map=function(t,r){return function(e){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return e.lift(new o(t,r))}};var o=function(){function e(e,t){this.project=e,this.thisArg=t}return e.prototype.call=function(e,t){return t.subscribe(new a(e,this.project,this.thisArg))},e}();r.MapOperator=o;var a=function(n){function e(e,t,r){n.call(this,e),this.project=t,this.count=0,this.thisArg=r||this}return i(e,n),e.prototype._next=function(e){var t;try{t=this.project.call(this.thisArg,e,this.count++)}catch(e){return void this.destination.error(e)}this.destination.next(t)},e}(n.Subscriber)},{"../Subscriber":383}],708:[function(e,t,r){var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=e("../Subscriber");r.mapTo=function(t){return function(e){return e.lift(new o(t))}};var o=function(){function e(e){this.value=e}return e.prototype.call=function(e,t){return t.subscribe(new a(e,this.value))},e}(),a=function(r){function e(e,t){r.call(this,e),this.value=t}return n(e,r),e.prototype._next=function(e){this.destination.next(this.value)},e}(i.Subscriber)},{"../Subscriber":383}],709:[function(e,t,r){var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=e("../Subscriber"),o=e("../Notification");r.materialize=function(){return function(e){return e.lift(new a)}};var a=function(){function e(){}return e.prototype.call=function(e,t){return t.subscribe(new s(e))},e}(),s=function(t){function e(e){t.call(this,e)}return n(e,t),e.prototype._next=function(e){this.destination.next(o.Notification.createNext(e))},e.prototype._error=function(e){var t=this.destination;t.next(o.Notification.createError(e)),t.complete()},e.prototype._complete=function(){var e=this.destination;e.next(o.Notification.createComplete()),e.complete()},e}(i.Subscriber)},{"../Notification":374,"../Subscriber":383}],710:[function(e,t,r){var n=e("./reduce");r.max=function(r){var e="function"==typeof r?function(e,t){return 0<r(e,t)?e:t}:function(e,t){return t<e?e:t};return n.reduce(e)}},{"./reduce":728}],711:[function(e,t,r){var n=e("../observable/merge"),i=e("../observable/merge");r.mergeStatic=i.merge,r.merge=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];return function(e){return e.lift.call(n.merge.apply(void 0,[e].concat(t)))}}},{"../observable/merge":556}],712:[function(e,t,r){var n=e("./mergeMap"),i=e("../util/identity");r.mergeAll=function(e){return void 0===e&&(e=Number.POSITIVE_INFINITY),n.mergeMap(i.identity,null,e)}},{"../util/identity":806,"./mergeMap":713}],713:[function(e,t,r){var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},o=e("../util/subscribeToResult"),i=e("../OuterSubscriber");r.mergeMap=function(t,r,n){return void 0===n&&(n=Number.POSITIVE_INFINITY),function(e){return"number"==typeof r&&(n=r,r=null),e.lift(new a(t,r,n))}};var a=function(){function e(e,t,r){void 0===r&&(r=Number.POSITIVE_INFINITY),this.project=e,this.resultSelector=t,this.concurrent=r}return e.prototype.call=function(e,t){return t.subscribe(new s(e,this.project,this.resultSelector,this.concurrent))},e}();r.MergeMapOperator=a;var s=function(i){function e(e,t,r,n){void 0===n&&(n=Number.POSITIVE_INFINITY),i.call(this,e),this.project=t,this.resultSelector=r,this.concurrent=n,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}return n(e,i),e.prototype._next=function(e){this.active<this.concurrent?this._tryNext(e):this.buffer.push(e)},e.prototype._tryNext=function(e){var t,r=this.index++;try{t=this.project(e,r)}catch(e){return void this.destination.error(e)}this.active++,this._innerSub(t,e,r)},e.prototype._innerSub=function(e,t,r){this.add(o.subscribeToResult(this,e,t,r))},e.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete()},e.prototype.notifyNext=function(e,t,r,n,i){this.resultSelector?this._notifyResultSelector(e,t,r,n):this.destination.next(t)},e.prototype._notifyResultSelector=function(e,t,r,n){var i;try{i=this.resultSelector(e,t,r,n)}catch(e){return void this.destination.error(e)}this.destination.next(i)},e.prototype.notifyComplete=function(e){var t=this.buffer;this.remove(e),this.active--,0<t.length?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},e}(i.OuterSubscriber);r.MergeMapSubscriber=s},{"../OuterSubscriber":377,"../util/subscribeToResult":819}],714:[function(e,t,r){var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=e("../OuterSubscriber"),o=e("../util/subscribeToResult");r.mergeMapTo=function(t,r,n){return void 0===n&&(n=Number.POSITIVE_INFINITY),"number"==typeof r&&(n=r,r=null),function(e){return e.lift(new a(t,r,n))}};var a=function(){function e(e,t,r){void 0===r&&(r=Number.POSITIVE_INFINITY),this.ish=e,this.resultSelector=t,this.concurrent=r}return e.prototype.call=function(e,t){return t.subscribe(new s(e,this.ish,this.resultSelector,this.concurrent))},e}();r.MergeMapToOperator=a;var s=function(i){function e(e,t,r,n){void 0===n&&(n=Number.POSITIVE_INFINITY),i.call(this,e),this.ish=t,this.resultSelector=r,this.concurrent=n,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}return n(e,i),e.prototype._next=function(e){if(this.active<this.concurrent){var t=this.resultSelector,r=this.index++,n=this.ish,i=this.destination;this.active++,this._innerSub(n,i,t,e,r)}else this.buffer.push(e)},e.prototype._innerSub=function(e,t,r,n,i){this.add(o.subscribeToResult(this,e,n,i))},e.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete()},e.prototype.notifyNext=function(e,t,r,n,i){var o=this.resultSelector,a=this.destination;o?this.trySelectResult(e,t,r,n):a.next(t)},e.prototype.trySelectResult=function(e,t,r,n){var i,o=this.resultSelector,a=this.destination;try{i=o(e,t,r,n)}catch(e){return void a.error(e)}a.next(i)},e.prototype.notifyError=function(e){this.destination.error(e)},e.prototype.notifyComplete=function(e){var t=this.buffer;this.remove(e),this.active--,0<t.length?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},e}(i.OuterSubscriber);r.MergeMapToSubscriber=s},{"../OuterSubscriber":377,"../util/subscribeToResult":819}],715:[function(e,t,r){var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},o=e("../util/tryCatch"),a=e("../util/errorObject"),s=e("../util/subscribeToResult"),i=e("../OuterSubscriber");r.mergeScan=function(t,r,n){return void 0===n&&(n=Number.POSITIVE_INFINITY),function(e){return e.lift(new l(t,r,n))}};var l=function(){function e(e,t,r){this.accumulator=e,this.seed=t,this.concurrent=r}return e.prototype.call=function(e,t){return t.subscribe(new u(e,this.accumulator,this.seed,this.concurrent))},e}();r.MergeScanOperator=l;var u=function(i){function e(e,t,r,n){i.call(this,e),this.accumulator=t,this.acc=r,this.concurrent=n,this.hasValue=!1,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}return n(e,i),e.prototype._next=function(e){if(this.active<this.concurrent){var t=this.index++,r=o.tryCatch(this.accumulator)(this.acc,e),n=this.destination;r===a.errorObject?n.error(a.errorObject.e):(this.active++,this._innerSub(r,e,t))}else this.buffer.push(e)},e.prototype._innerSub=function(e,t,r){this.add(s.subscribeToResult(this,e,t,r))},e.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&(!1===this.hasValue&&this.destination.next(this.acc),this.destination.complete())},e.prototype.notifyNext=function(e,t,r,n,i){var o=this.destination;this.acc=t,this.hasValue=!0,o.next(t)},e.prototype.notifyComplete=function(e){var t=this.buffer;this.remove(e),this.active--,0<t.length?this._next(t.shift()):0===this.active&&this.hasCompleted&&(!1===this.hasValue&&this.destination.next(this.acc),this.destination.complete())},e}(i.OuterSubscriber);r.MergeScanSubscriber=u},{"../OuterSubscriber":377,"../util/errorObject":805,"../util/subscribeToResult":819,"../util/tryCatch":821}],716:[function(e,t,r){var n=e("./reduce");r.min=function(r){var e="function"==typeof r?function(e,t){return r(e,t)<0?e:t}:function(e,t){return e<t?e:t};return n.reduce(e)}},{"./reduce":728}],717:[function(e,t,r){var o=e("../observable/ConnectableObservable");r.multicast=function(n,i){return function(e){var t;if(t="function"==typeof n?n:function(){return n},"function"==typeof i)return e.lift(new a(t,i));var r=Object.create(e,o.connectableObservableDescriptor);return r.source=e,r.subjectFactory=t,r}};var a=function(){function e(e,t){this.subjectFactory=e,this.selector=t}return e.prototype.call=function(e,t){var r=this.selector,n=this.subjectFactory(),i=r(n).subscribe(e);return i.add(t.subscribe(n)),i},e}();r.MulticastOperator=a},{"../observable/ConnectableObservable":518}],718:[function(e,t,r){var i=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},n=e("../Subscriber"),o=e("../Notification");r.observeOn=function(t,r){return void 0===r&&(r=0),function(e){return e.lift(new a(t,r))}};var a=function(){function e(e,t){void 0===t&&(t=0),this.scheduler=e,this.delay=t}return e.prototype.call=function(e,t){return t.subscribe(new s(e,this.scheduler,this.delay))},e}();r.ObserveOnOperator=a;var s=function(n){function t(e,t,r){void 0===r&&(r=0),n.call(this,e),this.scheduler=t,this.delay=r}return i(t,n),t.dispatch=function(e){var t=e.notification,r=e.destination;t.observe(r),this.unsubscribe()},t.prototype.scheduleMessage=function(e){this.add(this.scheduler.schedule(t.dispatch,this.delay,new l(e,this.destination)))},t.prototype._next=function(e){this.scheduleMessage(o.Notification.createNext(e))},t.prototype._error=function(e){this.scheduleMessage(o.Notification.createError(e))},t.prototype._complete=function(){this.scheduleMessage(o.Notification.createComplete())},t}(n.Subscriber);r.ObserveOnSubscriber=s;var l=function(e,t){this.notification=e,this.destination=t};r.ObserveOnMessage=l},{"../Notification":374,"../Subscriber":383}],719:[function(e,t,r){var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=e("../observable/FromObservable"),o=e("../util/isArray"),a=e("../OuterSubscriber"),s=e("../util/subscribeToResult");r.onErrorResumeNext=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];return 1===t.length&&o.isArray(t[0])&&(t=t[0]),function(e){return e.lift(new l(t))}},r.onErrorResumeNextStatic=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];var r;return 1===e.length&&o.isArray(e[0])&&(e=e[0]),r=e.shift(),new i.FromObservable(r,null).lift(new l(e))};var l=function(){function e(e){this.nextSources=e}return e.prototype.call=function(e,t){return t.subscribe(new u(e,this.nextSources))},e}(),u=function(r){function e(e,t){r.call(this,e),this.destination=e,this.nextSources=t}return n(e,r),e.prototype.notifyError=function(e,t){this.subscribeToNextSource()},e.prototype.notifyComplete=function(e){this.subscribeToNextSource()},e.prototype._error=function(e){this.subscribeToNextSource()},e.prototype._complete=function(){this.subscribeToNextSource()},e.prototype.subscribeToNextSource=function(){var e=this.nextSources.shift();e?this.add(s.subscribeToResult(this,e)):this.destination.complete()},e}(a.OuterSubscriber)},{"../OuterSubscriber":377,"../observable/FromObservable":525,"../util/isArray":807,"../util/subscribeToResult":819}],720:[function(e,t,r){var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=e("../Subscriber");r.pairwise=function(){return function(e){return e.lift(new o)}};var o=function(){function e(){}return e.prototype.call=function(e,t){return t.subscribe(new a(e))},e}(),a=function(t){function e(e){t.call(this,e),this.hasPrev=!1}return n(e,t),e.prototype._next=function(e){this.hasPrev?this.destination.next([this.prev,e]):this.hasPrev=!0,this.prev=e},e}(i.Subscriber)},{"../Subscriber":383}],721:[function(e,t,r){var n=e("../util/not"),i=e("./filter");r.partition=function(t,r){return function(e){return[i.filter(t,r)(e),i.filter(n.not(t,r))(e)]}}},{"../util/not":816,"./filter":698}],722:[function(e,t,r){var n=e("./map");r.pluck=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];var r=t.length;if(0===r)throw new Error("list of properties cannot be empty.");return function(e){return n.map((i=t,o=r,function(e){for(var t=e,r=0;r<o;r++){var n=t[i[r]];if(void 0===n)return;t=n}return t}))(e);var i,o}}},{"./map":707}],723:[function(e,t,r){var n=e("../Subject"),i=e("./multicast");r.publish=function(e){return e?i.multicast(function(){return new n.Subject},e):i.multicast(new n.Subject)}},{"../Subject":381,"./multicast":717}],724:[function(e,t,r){var n=e("../BehaviorSubject"),i=e("./multicast");r.publishBehavior=function(t){return function(e){return i.multicast(new n.BehaviorSubject(t))(e)}}},{"../BehaviorSubject":372,"./multicast":717}],725:[function(e,t,r){var n=e("../AsyncSubject"),i=e("./multicast");r.publishLast=function(){return function(e){return i.multicast(new n.AsyncSubject)(e)}}},{"../AsyncSubject":371,"./multicast":717}],726:[function(e,t,r){var a=e("../ReplaySubject"),s=e("./multicast");r.publishReplay=function(e,t,r,n){r&&"function"!=typeof r&&(n=r);var i="function"==typeof r?r:void 0,o=new a.ReplaySubject(e,t,n);return function(e){return s.multicast(function(){return o},i)(e)}}},{"../ReplaySubject":378,"./multicast":717}],727:[function(e,t,r){var n=e("../util/isArray"),i=e("../observable/race");r.race=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];return function(e){return 1===t.length&&n.isArray(t[0])&&(t=t[0]),e.lift.call(i.race.apply(void 0,[e].concat(t)))}}},{"../observable/race":561,"../util/isArray":807}],728:[function(e,t,r){var i=e("./scan"),o=e("./takeLast"),a=e("./defaultIfEmpty"),s=e("../util/pipe");r.reduce=function(n,t){return 2<=arguments.length?function(e){return s.pipe(i.scan(n,t),o.takeLast(1),a.defaultIfEmpty(t))(e)}:function(e){return s.pipe(i.scan(function(e,t,r){return n(e,t,r+1)}),o.takeLast(1))(e)}}},{"../util/pipe":817,"./defaultIfEmpty":686,"./scan":736,"./takeLast":751}],729:[function(e,t,r){var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=e("../Subscriber");r.refCount=function(){return function(e){return e.lift(new o(e))}};var o=function(){function e(e){this.connectable=e}return e.prototype.call=function(e,t){var r=this.connectable;r._refCount++;var n=new a(e,r),i=t.subscribe(n);return n.closed||(n.connection=r.connect()),i},e}(),a=function(r){function e(e,t){r.call(this,e),this.connectable=t}return n(e,r),e.prototype._unsubscribe=function(){var e=this.connectable;if(e){this.connectable=null;var t=e._refCount;if(t<=0)this.connection=null;else if(e._refCount=t-1,1<t)this.connection=null;else{var r=this.connection,n=e._connection;this.connection=null,!n||r&&n!==r||n.unsubscribe()}}else this.connection=null},e}(i.Subscriber)},{"../Subscriber":383}],730:[function(e,t,r){var i=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},n=e("../Subscriber"),o=e("../observable/EmptyObservable");r.repeat=function(t){return void 0===t&&(t=-1),function(e){return 0===t?new o.EmptyObservable:t<0?e.lift(new a(-1,e)):e.lift(new a(t-1,e))}};var a=function(){function e(e,t){this.count=e,this.source=t}return e.prototype.call=function(e,t){return t.subscribe(new s(e,this.count,this.source))},e}(),s=function(n){function e(e,t,r){n.call(this,e),this.count=t,this.source=r}return i(e,n),e.prototype.complete=function(){if(!this.isStopped){var e=this.source,t=this.count;if(0===t)return n.prototype.complete.call(this);-1<t&&(this.count=t-1),e.subscribe(this._unsubscribeAndRecycle())}},e}(n.Subscriber)},{"../Subscriber":383,"../observable/EmptyObservable":520}],731:[function(e,t,r){var i=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},o=e("../Subject"),a=e("../util/tryCatch"),s=e("../util/errorObject"),n=e("../OuterSubscriber"),l=e("../util/subscribeToResult");r.repeatWhen=function(t){return function(e){return e.lift(new u(t))}};var u=function(){function e(e){this.notifier=e}return e.prototype.call=function(e,t){return t.subscribe(new c(e,this.notifier,t))},e}(),c=function(n){function e(e,t,r){n.call(this,e),this.notifier=t,this.source=r,this.sourceIsBeingSubscribedTo=!0}return i(e,n),e.prototype.notifyNext=function(e,t,r,n,i){this.sourceIsBeingSubscribedTo=!0,this.source.subscribe(this)},e.prototype.notifyComplete=function(e){if(!1===this.sourceIsBeingSubscribedTo)return n.prototype.complete.call(this)},e.prototype.complete=function(){if(this.sourceIsBeingSubscribedTo=!1,!this.isStopped){if(this.retries||this.subscribeToRetries(),!this.retriesSubscription||this.retriesSubscription.closed)return n.prototype.complete.call(this);this._unsubscribeAndRecycle(),this.notifications.next()}},e.prototype._unsubscribe=function(){var e=this.notifications,t=this.retriesSubscription;e&&(e.unsubscribe(),this.notifications=null),t&&(t.unsubscribe(),this.retriesSubscription=null),this.retries=null},e.prototype._unsubscribeAndRecycle=function(){var e=this.notifications,t=this.retries,r=this.retriesSubscription;return this.notifications=null,this.retries=null,this.retriesSubscription=null,n.prototype._unsubscribeAndRecycle.call(this),this.notifications=e,this.retries=t,this.retriesSubscription=r,this},e.prototype.subscribeToRetries=function(){this.notifications=new o.Subject;var e=a.tryCatch(this.notifier)(this.notifications);if(e===s.errorObject)return n.prototype.complete.call(this);this.retries=e,this.retriesSubscription=l.subscribeToResult(this,e)},e}(n.OuterSubscriber)},{"../OuterSubscriber":377,"../Subject":381,"../util/errorObject":805,"../util/subscribeToResult":819,"../util/tryCatch":821}],732:[function(e,t,r){var i=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},n=e("../Subscriber");r.retry=function(t){return void 0===t&&(t=-1),function(e){return e.lift(new o(t,e))}};var o=function(){function e(e,t){this.count=e,this.source=t}return e.prototype.call=function(e,t){return t.subscribe(new a(e,this.count,this.source))},e}(),a=function(n){function e(e,t,r){n.call(this,e),this.count=t,this.source=r}return i(e,n),e.prototype.error=function(e){if(!this.isStopped){var t=this.source,r=this.count;if(0===r)return n.prototype.error.call(this,e);-1<r&&(this.count=r-1),t.subscribe(this._unsubscribeAndRecycle())}},e}(n.Subscriber)},{"../Subscriber":383}],733:[function(e,t,r){var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},o=e("../Subject"),a=e("../util/tryCatch"),s=e("../util/errorObject"),i=e("../OuterSubscriber"),l=e("../util/subscribeToResult");r.retryWhen=function(t){return function(e){return e.lift(new u(t,e))}};var u=function(){function e(e,t){this.notifier=e,this.source=t}return e.prototype.call=function(e,t){return t.subscribe(new c(e,this.notifier,this.source))},e}(),c=function(i){function e(e,t,r){i.call(this,e),this.notifier=t,this.source=r}return n(e,i),e.prototype.error=function(e){if(!this.isStopped){var t=this.errors,r=this.retries,n=this.retriesSubscription;if(r)this.errors=null,this.retriesSubscription=null;else{if(t=new o.Subject,(r=a.tryCatch(this.notifier)(t))===s.errorObject)return i.prototype.error.call(this,s.errorObject.e);n=l.subscribeToResult(this,r)}this._unsubscribeAndRecycle(),this.errors=t,this.retries=r,this.retriesSubscription=n,t.next(e)}},e.prototype._unsubscribe=function(){var e=this.errors,t=this.retriesSubscription;e&&(e.unsubscribe(),this.errors=null),t&&(t.unsubscribe(),this.retriesSubscription=null),this.retries=null},e.prototype.notifyNext=function(e,t,r,n,i){var o=this.errors,a=this.retries,s=this.retriesSubscription;this.errors=null,this.retries=null,this.retriesSubscription=null,this._unsubscribeAndRecycle(),this.errors=o,this.retries=a,this.retriesSubscription=s,this.source.subscribe(this)},e}(i.OuterSubscriber)},{"../OuterSubscriber":377,"../Subject":381,"../util/errorObject":805,"../util/subscribeToResult":819,"../util/tryCatch":821}],734:[function(e,t,r){var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=e("../OuterSubscriber"),o=e("../util/subscribeToResult");r.sample=function(t){return function(e){return e.lift(new a(t))}};var a=function(){function e(e){this.notifier=e}return e.prototype.call=function(e,t){var r=new s(e),n=t.subscribe(r);return n.add(o.subscribeToResult(r,this.notifier)),n},e}(),s=function(e){function t(){e.apply(this,arguments),this.hasValue=!1}return n(t,e),t.prototype._next=function(e){this.value=e,this.hasValue=!0},t.prototype.notifyNext=function(e,t,r,n,i){this.emitValue()},t.prototype.notifyComplete=function(){this.emitValue()},t.prototype.emitValue=function(){this.hasValue&&(this.hasValue=!1,this.destination.next(this.value))},t}(i.OuterSubscriber)},{"../OuterSubscriber":377,"../util/subscribeToResult":819}],735:[function(e,t,r){var i=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},n=e("../Subscriber"),o=e("../scheduler/async");r.sampleTime=function(t,r){return void 0===r&&(r=o.async),function(e){return e.lift(new a(t,r))}};var a=function(){function e(e,t){this.period=e,this.scheduler=t}return e.prototype.call=function(e,t){return t.subscribe(new s(e,this.period,this.scheduler))},e}(),s=function(n){function e(e,t,r){n.call(this,e),this.period=t,this.scheduler=r,this.hasValue=!1,this.add(r.schedule(l,t,{subscriber:this,period:t}))}return i(e,n),e.prototype._next=function(e){this.lastValue=e,this.hasValue=!0},e.prototype.notifyNext=function(){this.hasValue&&(this.hasValue=!1,this.destination.next(this.lastValue))},e}(n.Subscriber);function l(e){var t=e.subscriber,r=e.period;t.notifyNext(),this.schedule(e,r)}},{"../Subscriber":383,"../scheduler/async":782}],736:[function(e,t,r){var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=e("../Subscriber");r.scan=function(t,r){var n=!1;return 2<=arguments.length&&(n=!0),function(e){return e.lift(new o(t,r,n))}};var o=function(){function e(e,t,r){void 0===r&&(r=!1),this.accumulator=e,this.seed=t,this.hasSeed=r}return e.prototype.call=function(e,t){return t.subscribe(new a(e,this.accumulator,this.seed,this.hasSeed))},e}(),a=function(i){function e(e,t,r,n){i.call(this,e),this.accumulator=t,this._seed=r,this.hasSeed=n,this.index=0}return n(e,i),Object.defineProperty(e.prototype,"seed",{get:function(){return this._seed},set:function(e){this.hasSeed=!0,this._seed=e},enumerable:!0,configurable:!0}),e.prototype._next=function(e){if(this.hasSeed)return this._tryNext(e);this.seed=e,this.destination.next(e)},e.prototype._tryNext=function(e){var t,r=this.index++;try{t=this.accumulator(this.seed,e,r)}catch(e){this.destination.error(e)}this.seed=t,this.destination.next(t)},e}(i.Subscriber)},{"../Subscriber":383}],737:[function(e,t,r){var i=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},n=e("../Subscriber"),a=e("../util/tryCatch"),s=e("../util/errorObject");r.sequenceEqual=function(t,r){return function(e){return e.lift(new o(t,r))}};var o=function(){function e(e,t){this.compareTo=e,this.comparor=t}return e.prototype.call=function(e,t){return t.subscribe(new l(e,this.compareTo,this.comparor))},e}();r.SequenceEqualOperator=o;var l=function(n){function e(e,t,r){n.call(this,e),this.compareTo=t,this.comparor=r,this._a=[],this._b=[],this._oneComplete=!1,this.add(t.subscribe(new u(e,this)))}return i(e,n),e.prototype._next=function(e){this._oneComplete&&0===this._b.length?this.emit(!1):(this._a.push(e),this.checkValues())},e.prototype._complete=function(){this._oneComplete?this.emit(0===this._a.length&&0===this._b.length):this._oneComplete=!0},e.prototype.checkValues=function(){for(var e=this._a,t=this._b,r=this.comparor;0<e.length&&0<t.length;){var n=e.shift(),i=t.shift(),o=!1;r?(o=a.tryCatch(r)(n,i))===s.errorObject&&this.destination.error(s.errorObject.e):o=n===i,o||this.emit(!1)}},e.prototype.emit=function(e){var t=this.destination;t.next(e),t.complete()},e.prototype.nextB=function(e){this._oneComplete&&0===this._a.length?this.emit(!1):(this._b.push(e),this.checkValues())},e}(n.Subscriber);r.SequenceEqualSubscriber=l;var u=function(r){function e(e,t){r.call(this,e),this.parent=t}return i(e,r),e.prototype._next=function(e){this.parent.nextB(e)},e.prototype._error=function(e){this.parent.error(e)},e.prototype._complete=function(){this.parent._complete()},e}(n.Subscriber)},{"../Subscriber":383,"../util/errorObject":805,"../util/tryCatch":821}],738:[function(e,t,r){var n=e("./multicast"),i=e("./refCount"),o=e("../Subject");function a(){return new o.Subject}r.share=function(){return function(e){return i.refCount()(n.multicast(a)(e))}}},{"../Subject":381,"./multicast":717,"./refCount":729}],739:[function(e,t,r){var d=e("../ReplaySubject");r.shareReplay=function(t,c,h){return function(e){return e.lift((r=t,n=c,i=h,s=0,u=l=!1,function(e){s++,o&&!l||(l=!1,o=new d.ReplaySubject(r,n,i),a=e.subscribe({next:function(e){o.next(e)},error:function(e){l=!0,o.error(e)},complete:function(){u=!0,o.complete()}}));var t=o.subscribe(this);return function(){s--,t.unsubscribe(),a&&0===s&&u&&a.unsubscribe()}}));var r,n,i,o,a,s,l,u}}},{"../ReplaySubject":378}],740:[function(e,t,r){var i=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},n=e("../Subscriber"),o=e("../util/EmptyError");r.single=function(t){return function(e){return e.lift(new a(t,e))}};var a=function(){function e(e,t){this.predicate=e,this.source=t}return e.prototype.call=function(e,t){return t.subscribe(new s(e,this.predicate,this.source))},e}(),s=function(n){function e(e,t,r){n.call(this,e),this.predicate=t,this.source=r,this.seenValue=!1,this.index=0}return i(e,n),e.prototype.applySingleValue=function(e){this.seenValue?this.destination.error("Sequence contains more than one element"):(this.seenValue=!0,this.singleValue=e)},e.prototype._next=function(e){var t=this.index++;this.predicate?this.tryNext(e,t):this.applySingleValue(e)},e.prototype.tryNext=function(e,t){try{this.predicate(e,t,this.source)&&this.applySingleValue(e)}catch(e){this.destination.error(e)}},e.prototype._complete=function(){var e=this.destination;0<this.index?(e.next(this.seenValue?this.singleValue:void 0),e.complete()):e.error(new o.EmptyError)},e}(n.Subscriber)},{"../Subscriber":383,"../util/EmptyError":794}],741:[function(e,t,r){var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=e("../Subscriber");r.skip=function(t){return function(e){return e.lift(new o(t))}};var o=function(){function e(e){this.total=e}return e.prototype.call=function(e,t){return t.subscribe(new a(e,this.total))},e}(),a=function(r){function e(e,t){r.call(this,e),this.total=t,this.count=0}return n(e,r),e.prototype._next=function(e){++this.count>this.total&&this.destination.next(e)},e}(i.Subscriber)},{"../Subscriber":383}],742:[function(e,t,r){var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=e("../Subscriber"),o=e("../util/ArgumentOutOfRangeError");r.skipLast=function(t){return function(e){return e.lift(new a(t))}};var a=function(){function e(e){if(this._skipCount=e,this._skipCount<0)throw new o.ArgumentOutOfRangeError}return e.prototype.call=function(e,t){return 0===this._skipCount?t.subscribe(new i.Subscriber(e)):t.subscribe(new s(e,this._skipCount))},e}(),s=function(r){function e(e,t){r.call(this,e),this._skipCount=t,this._count=0,this._ring=new Array(t)}return n(e,r),e.prototype._next=function(e){var t=this._skipCount,r=this._count++;if(r<t)this._ring[r]=e;else{var n=r%t,i=this._ring,o=i[n];i[n]=e,this.destination.next(o)}},e}(i.Subscriber)},{"../Subscriber":383,"../util/ArgumentOutOfRangeError":793}],743:[function(e,t,r){var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=e("../OuterSubscriber"),o=e("../util/subscribeToResult");r.skipUntil=function(t){return function(e){return e.lift(new a(t))}};var a=function(){function e(e){this.notifier=e}return e.prototype.call=function(e,t){return t.subscribe(new s(e,this.notifier))},e}(),s=function(r){function e(e,t){r.call(this,e),this.hasValue=!1,this.isInnerStopped=!1,this.add(o.subscribeToResult(this,t))}return n(e,r),e.prototype._next=function(e){this.hasValue&&r.prototype._next.call(this,e)},e.prototype._complete=function(){this.isInnerStopped?r.prototype._complete.call(this):this.unsubscribe()},e.prototype.notifyNext=function(e,t,r,n,i){this.hasValue=!0},e.prototype.notifyComplete=function(){this.isInnerStopped=!0,this.isStopped&&r.prototype._complete.call(this)},e}(i.OuterSubscriber)},{"../OuterSubscriber":377,"../util/subscribeToResult":819}],744:[function(e,t,r){var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=e("../Subscriber");r.skipWhile=function(t){return function(e){return e.lift(new o(t))}};var o=function(){function e(e){this.predicate=e}return e.prototype.call=function(e,t){return t.subscribe(new a(e,this.predicate))},e}(),a=function(r){function e(e,t){r.call(this,e),this.predicate=t,this.skipping=!0,this.index=0}return n(e,r),e.prototype._next=function(e){var t=this.destination;this.skipping&&this.tryCallPredicate(e),this.skipping||t.next(e)},e.prototype.tryCallPredicate=function(e){try{var t=this.predicate(e,this.index++);this.skipping=Boolean(t)}catch(e){this.destination.error(e)}},e}(i.Subscriber)},{"../Subscriber":383}],745:[function(e,t,r){var i=e("../observable/ArrayObservable"),o=e("../observable/ScalarObservable"),a=e("../observable/EmptyObservable"),s=e("../observable/concat"),l=e("../util/isScheduler");r.startWith=function(){for(var n=[],e=0;e<arguments.length;e++)n[e-0]=arguments[e];return function(e){var t=n[n.length-1];l.isScheduler(t)?n.pop():t=null;var r=n.length;return 1===r?s.concat(new o.ScalarObservable(n[0],t),e):1<r?s.concat(new i.ArrayObservable(n,t),e):s.concat(new a.EmptyObservable(t),e)}}},{"../observable/ArrayObservable":515,"../observable/EmptyObservable":520,"../observable/ScalarObservable":534,"../observable/concat":541,"../util/isScheduler":814}],746:[function(e,t,r){var n=e("../observable/SubscribeOnObservable");r.subscribeOn=function(t,r){return void 0===r&&(r=0),function(e){return e.lift(new i(t,r))}};var i=function(){function e(e,t){this.scheduler=e,this.delay=t}return e.prototype.call=function(e,t){return new n.SubscribeOnObservable(t,this.delay,this.scheduler).subscribe(e)},e}()},{"../observable/SubscribeOnObservable":535}],747:[function(e,t,r){var n=e("./switchMap"),i=e("../util/identity");r.switchAll=function(){return n.switchMap(i.identity)}},{"../util/identity":806,"./switchMap":748}],748:[function(e,t,r){var i=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},n=e("../OuterSubscriber"),o=e("../util/subscribeToResult");r.switchMap=function(t,r){return function(e){return e.lift(new a(t,r))}};var a=function(){function e(e,t){this.project=e,this.resultSelector=t}return e.prototype.call=function(e,t){return t.subscribe(new s(e,this.project,this.resultSelector))},e}(),s=function(n){function e(e,t,r){n.call(this,e),this.project=t,this.resultSelector=r,this.index=0}return i(e,n),e.prototype._next=function(e){var t,r=this.index++;try{t=this.project(e,r)}catch(e){return void this.destination.error(e)}this._innerSub(t,e,r)},e.prototype._innerSub=function(e,t,r){var n=this.innerSubscription;n&&n.unsubscribe(),this.add(this.innerSubscription=o.subscribeToResult(this,e,t,r))},e.prototype._complete=function(){var e=this.innerSubscription;e&&!e.closed||n.prototype._complete.call(this)},e.prototype._unsubscribe=function(){this.innerSubscription=null},e.prototype.notifyComplete=function(e){this.remove(e),this.innerSubscription=null,this.isStopped&&n.prototype._complete.call(this)},e.prototype.notifyNext=function(e,t,r,n,i){this.resultSelector?this._tryNotifyNext(e,t,r,n):this.destination.next(t)},e.prototype._tryNotifyNext=function(e,t,r,n){var i;try{i=this.resultSelector(e,t,r,n)}catch(e){return void this.destination.error(e)}this.destination.next(i)},e}(n.OuterSubscriber)},{"../OuterSubscriber":377,"../util/subscribeToResult":819}],749:[function(e,t,r){var i=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},n=e("../OuterSubscriber"),o=e("../util/subscribeToResult");r.switchMapTo=function(t,r){return function(e){return e.lift(new a(t,r))}};var a=function(){function e(e,t){this.observable=e,this.resultSelector=t}return e.prototype.call=function(e,t){return t.subscribe(new s(e,this.observable,this.resultSelector))},e}(),s=function(n){function e(e,t,r){n.call(this,e),this.inner=t,this.resultSelector=r,this.index=0}return i(e,n),e.prototype._next=function(e){var t=this.innerSubscription;t&&t.unsubscribe(),this.add(this.innerSubscription=o.subscribeToResult(this,this.inner,e,this.index++))},e.prototype._complete=function(){var e=this.innerSubscription;e&&!e.closed||n.prototype._complete.call(this)},e.prototype._unsubscribe=function(){this.innerSubscription=null},e.prototype.notifyComplete=function(e){this.remove(e),this.innerSubscription=null,this.isStopped&&n.prototype._complete.call(this)},e.prototype.notifyNext=function(e,t,r,n,i){var o=this.resultSelector,a=this.destination;o?this.tryResultSelector(e,t,r,n):a.next(t)},e.prototype.tryResultSelector=function(e,t,r,n){var i,o=this.resultSelector,a=this.destination;try{i=o(e,t,r,n)}catch(e){return void a.error(e)}a.next(i)},e}(n.OuterSubscriber)},{"../OuterSubscriber":377,"../util/subscribeToResult":819}],750:[function(e,t,r){var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=e("../Subscriber"),o=e("../util/ArgumentOutOfRangeError"),a=e("../observable/EmptyObservable");r.take=function(t){return function(e){return 0===t?new a.EmptyObservable:e.lift(new s(t))}};var s=function(){function e(e){if(this.total=e,this.total<0)throw new o.ArgumentOutOfRangeError}return e.prototype.call=function(e,t){return t.subscribe(new l(e,this.total))},e}(),l=function(r){function e(e,t){r.call(this,e),this.total=t,this.count=0}return n(e,r),e.prototype._next=function(e){var t=this.total,r=++this.count;r<=t&&(this.destination.next(e),r===t&&(this.destination.complete(),this.unsubscribe()))},e}(i.Subscriber)},{"../Subscriber":383,"../observable/EmptyObservable":520,"../util/ArgumentOutOfRangeError":793}],751:[function(e,t,r){var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=e("../Subscriber"),o=e("../util/ArgumentOutOfRangeError"),a=e("../observable/EmptyObservable");r.takeLast=function(t){return function(e){return 0===t?new a.EmptyObservable:e.lift(new s(t))}};var s=function(){function e(e){if(this.total=e,this.total<0)throw new o.ArgumentOutOfRangeError}return e.prototype.call=function(e,t){return t.subscribe(new l(e,this.total))},e}(),l=function(r){function e(e,t){r.call(this,e),this.total=t,this.ring=new Array,this.count=0}return n(e,r),e.prototype._next=function(e){var t=this.ring,r=this.total,n=this.count++;t.length<r?t.push(e):t[n%r]=e},e.prototype._complete=function(){var e=this.destination,t=this.count;if(0<t)for(var r=this.count>=this.total?this.total:this.count,n=this.ring,i=0;i<r;i++){var o=t++%r;e.next(n[o])}e.complete()},e}(i.Subscriber)},{"../Subscriber":383,"../observable/EmptyObservable":520,"../util/ArgumentOutOfRangeError":793}],752:[function(e,t,r){var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=e("../OuterSubscriber"),o=e("../util/subscribeToResult");r.takeUntil=function(t){return function(e){return e.lift(new a(t))}};var a=function(){function e(e){this.notifier=e}return e.prototype.call=function(e,t){return t.subscribe(new s(e,this.notifier))},e}(),s=function(r){function e(e,t){r.call(this,e),this.notifier=t,this.add(o.subscribeToResult(this,t))}return n(e,r),e.prototype.notifyNext=function(e,t,r,n,i){this.complete()},e.prototype.notifyComplete=function(){},e}(i.OuterSubscriber)},{"../OuterSubscriber":377,"../util/subscribeToResult":819}],753:[function(e,t,r){var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=e("../Subscriber");r.takeWhile=function(t){return function(e){return e.lift(new o(t))}};var o=function(){function e(e){this.predicate=e}return e.prototype.call=function(e,t){return t.subscribe(new a(e,this.predicate))},e}(),a=function(r){function e(e,t){r.call(this,e),this.predicate=t,this.index=0}return n(e,r),e.prototype._next=function(e){var t,r=this.destination;try{t=this.predicate(e,this.index++)}catch(e){return void r.error(e)}this.nextOrComplete(e,t)},e.prototype.nextOrComplete=function(e,t){var r=this.destination;Boolean(t)?r.next(e):r.complete()},e}(i.Subscriber)},{"../Subscriber":383}],754:[function(e,t,r){var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},a=e("../Subscriber");r.tap=function(t,r,n){return function(e){return e.lift(new i(t,r,n))}};var i=function(){function e(e,t,r){this.nextOrObserver=e,this.error=t,this.complete=r}return e.prototype.call=function(e,t){return t.subscribe(new o(e,this.nextOrObserver,this.error,this.complete))},e}(),o=function(o){function e(e,t,r,n){o.call(this,e);var i=new a.Subscriber(t,r,n);i.syncErrorThrowable=!0,this.add(i),this.safeSubscriber=i}return n(e,o),e.prototype._next=function(e){var t=this.safeSubscriber;t.next(e),t.syncErrorThrown?this.destination.error(t.syncErrorValue):this.destination.next(e)},e.prototype._error=function(e){var t=this.safeSubscriber;t.error(e),t.syncErrorThrown?this.destination.error(t.syncErrorValue):this.destination.error(e)},e.prototype._complete=function(){var e=this.safeSubscriber;e.complete(),e.syncErrorThrown?this.destination.error(e.syncErrorValue):this.destination.complete()},e}(a.Subscriber)},{"../Subscriber":383}],755:[function(e,t,n){var r=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=e("../OuterSubscriber"),o=e("../util/subscribeToResult");n.defaultThrottleConfig={leading:!0,trailing:!1},n.throttle=function(t,r){return void 0===r&&(r=n.defaultThrottleConfig),function(e){return e.lift(new a(t,r.leading,r.trailing))}};var a=function(){function e(e,t,r){this.durationSelector=e,this.leading=t,this.trailing=r}return e.prototype.call=function(e,t){return t.subscribe(new s(e,this.durationSelector,this.leading,this.trailing))},e}(),s=function(i){function e(e,t,r,n){i.call(this,e),this.destination=e,this.durationSelector=t,this._leading=r,this._trailing=n,this._hasTrailingValue=!1}return r(e,i),e.prototype._next=function(e){if(this.throttled)this._trailing&&(this._hasTrailingValue=!0,this._trailingValue=e);else{var t=this.tryDurationSelector(e);t&&this.add(this.throttled=o.subscribeToResult(this,t)),this._leading&&(this.destination.next(e),this._trailing&&(this._hasTrailingValue=!0,this._trailingValue=e))}},e.prototype.tryDurationSelector=function(e){try{return this.durationSelector(e)}catch(e){return this.destination.error(e),null}},e.prototype._unsubscribe=function(){var e=this.throttled;this._trailingValue,this._hasTrailingValue,this._trailing;this._trailingValue=null,this._hasTrailingValue=!1,e&&(this.remove(e),this.throttled=null,e.unsubscribe())},e.prototype._sendTrailing=function(){var e=this.destination,t=this.throttled,r=this._trailing,n=this._trailingValue,i=this._hasTrailingValue;t&&r&&i&&(e.next(n),this._trailingValue=null,this._hasTrailingValue=!1)},e.prototype.notifyNext=function(e,t,r,n,i){this._sendTrailing(),this._unsubscribe()},e.prototype.notifyComplete=function(){this._sendTrailing(),this._unsubscribe()},e}(i.OuterSubscriber)},{"../OuterSubscriber":377,"../util/subscribeToResult":819}],756:[function(e,t,r){var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=e("../Subscriber"),o=e("../scheduler/async"),a=e("./throttle");r.throttleTime=function(t,r,n){return void 0===r&&(r=o.async),void 0===n&&(n=a.defaultThrottleConfig),function(e){return e.lift(new s(t,r,n.leading,n.trailing))}};var s=function(){function e(e,t,r,n){this.duration=e,this.scheduler=t,this.leading=r,this.trailing=n}return e.prototype.call=function(e,t){return t.subscribe(new l(e,this.duration,this.scheduler,this.leading,this.trailing))},e}(),l=function(o){function e(e,t,r,n,i){o.call(this,e),this.duration=t,this.scheduler=r,this.leading=n,this.trailing=i,this._hasTrailingValue=!1,this._trailingValue=null}return n(e,o),e.prototype._next=function(e){this.throttled?this.trailing&&(this._trailingValue=e,this._hasTrailingValue=!0):(this.add(this.throttled=this.scheduler.schedule(u,this.duration,{subscriber:this})),this.leading&&this.destination.next(e))},e.prototype.clearThrottle=function(){var e=this.throttled;e&&(this.trailing&&this._hasTrailingValue&&(this.destination.next(this._trailingValue),this._trailingValue=null,this._hasTrailingValue=!1),e.unsubscribe(),this.remove(e),this.throttled=null)},e}(i.Subscriber);function u(e){e.subscriber.clearThrottle()}},{"../Subscriber":383,"../scheduler/async":782,"./throttle":755}],757:[function(e,t,r){var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=e("../Subscriber"),o=e("../scheduler/async");r.timeInterval=function(t){return void 0===t&&(t=o.async),function(e){return e.lift(new s(t))}};var a=function(e,t){this.value=e,this.interval=t};r.TimeInterval=a;var s=function(){function e(e){this.scheduler=e}return e.prototype.call=function(e,t){return t.subscribe(new l(e,this.scheduler))},e}(),l=function(r){function e(e,t){r.call(this,e),this.scheduler=t,this.lastTime=0,this.lastTime=t.now()}return n(e,r),e.prototype._next=function(e){var t=this.scheduler.now(),r=t-this.lastTime;this.lastTime=t,this.destination.next(new a(e,r))},e}(i.Subscriber)},{"../Subscriber":383,"../scheduler/async":782}],758:[function(e,t,r){var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=e("../scheduler/async"),o=e("../util/isDate"),a=e("../Subscriber"),s=e("../util/TimeoutError");r.timeout=function(e,t){void 0===t&&(t=i.async);var r=o.isDate(e),n=r?+e-t.now():Math.abs(e);return function(e){return e.lift(new l(n,r,t,new s.TimeoutError))}};var l=function(){function e(e,t,r,n){this.waitFor=e,this.absoluteTimeout=t,this.scheduler=r,this.errorInstance=n}return e.prototype.call=function(e,t){return t.subscribe(new u(e,this.absoluteTimeout,this.waitFor,this.scheduler,this.errorInstance))},e}(),u=function(o){function t(e,t,r,n,i){o.call(this,e),this.absoluteTimeout=t,this.waitFor=r,this.scheduler=n,this.errorInstance=i,this.action=null,this.scheduleTimeout()}return n(t,o),t.dispatchTimeout=function(e){e.error(e.errorInstance)},t.prototype.scheduleTimeout=function(){var e=this.action;e?this.action=e.schedule(this,this.waitFor):this.add(this.action=this.scheduler.schedule(t.dispatchTimeout,this.waitFor,this))},t.prototype._next=function(e){this.absoluteTimeout||this.scheduleTimeout(),o.prototype._next.call(this,e)},t.prototype._unsubscribe=function(){this.action=null,this.scheduler=null,this.errorInstance=null},t}(a.Subscriber)},{"../Subscriber":383,"../scheduler/async":782,"../util/TimeoutError":801,"../util/isDate":809}],759:[function(e,t,r){var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},a=e("../scheduler/async"),s=e("../util/isDate"),i=e("../OuterSubscriber"),l=e("../util/subscribeToResult");r.timeoutWith=function(n,i,o){return void 0===o&&(o=a.async),function(e){var t=s.isDate(n),r=t?+n-o.now():Math.abs(n);return e.lift(new u(r,t,i,o))}};var u=function(){function e(e,t,r,n){this.waitFor=e,this.absoluteTimeout=t,this.withObservable=r,this.scheduler=n}return e.prototype.call=function(e,t){return t.subscribe(new o(e,this.absoluteTimeout,this.waitFor,this.withObservable,this.scheduler))},e}(),o=function(o){function t(e,t,r,n,i){o.call(this,e),this.absoluteTimeout=t,this.waitFor=r,this.withObservable=n,this.scheduler=i,this.action=null,this.scheduleTimeout()}return n(t,o),t.dispatchTimeout=function(e){var t=e.withObservable;e._unsubscribeAndRecycle(),e.add(l.subscribeToResult(e,t))},t.prototype.scheduleTimeout=function(){var e=this.action;e?this.action=e.schedule(this,this.waitFor):this.add(this.action=this.scheduler.schedule(t.dispatchTimeout,this.waitFor,this))},t.prototype._next=function(e){this.absoluteTimeout||this.scheduleTimeout(),o.prototype._next.call(this,e)},t.prototype._unsubscribe=function(){this.action=null,this.scheduler=null,this.withObservable=null},t}(i.OuterSubscriber)},{"../OuterSubscriber":377,"../scheduler/async":782,"../util/isDate":809,"../util/subscribeToResult":819}],760:[function(e,t,r){var n=e("../scheduler/async"),i=e("./map");r.timestamp=function(t){return void 0===t&&(t=n.async),i.map(function(e){return new o(e,t.now())})};var o=function(e,t){this.value=e,this.timestamp=t};r.Timestamp=o},{"../scheduler/async":782,"./map":707}],761:[function(e,t,r){var n=e("./reduce");function i(e,t,r){return 0===r?[t]:(e.push(t),e)}r.toArray=function(){return n.reduce(i,[])}},{"./reduce":728}],762:[function(e,t,r){var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=e("../Subject"),o=e("../OuterSubscriber"),a=e("../util/subscribeToResult");r.window=function(t){return function(e){return e.lift(new s(t))}};var s=function(){function e(e){this.windowBoundaries=e}return e.prototype.call=function(e,t){var r=new l(e),n=t.subscribe(r);return n.closed||r.add(a.subscribeToResult(r,this.windowBoundaries)),n},e}(),l=function(t){function e(e){t.call(this,e),this.window=new i.Subject,e.next(this.window)}return n(e,t),e.prototype.notifyNext=function(e,t,r,n,i){this.openWindow()},e.prototype.notifyError=function(e,t){this._error(e)},e.prototype.notifyComplete=function(e){this._complete()},e.prototype._next=function(e){this.window.next(e)},e.prototype._error=function(e){this.window.error(e),this.destination.error(e)},e.prototype._complete=function(){this.window.complete(),this.destination.complete()},e.prototype._unsubscribe=function(){this.window=null},e.prototype.openWindow=function(){var e=this.window;e&&e.complete();var t=this.destination,r=this.window=new i.Subject;t.next(r)},e}(o.OuterSubscriber)},{"../OuterSubscriber":377,"../Subject":381,"../util/subscribeToResult":819}],763:[function(e,t,r){var i=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},n=e("../Subscriber"),u=e("../Subject");r.windowCount=function(t,r){return void 0===r&&(r=0),function(e){return e.lift(new o(t,r))}};var o=function(){function e(e,t){this.windowSize=e,this.startWindowEvery=t}return e.prototype.call=function(e,t){return t.subscribe(new a(e,this.windowSize,this.startWindowEvery))},e}(),a=function(n){function e(e,t,r){n.call(this,e),this.destination=e,this.windowSize=t,this.startWindowEvery=r,this.windows=[new u.Subject],this.count=0,e.next(this.windows[0])}return i(e,n),e.prototype._next=function(e){for(var t=0<this.startWindowEvery?this.startWindowEvery:this.windowSize,r=this.destination,n=this.windowSize,i=this.windows,o=i.length,a=0;a<o&&!this.closed;a++)i[a].next(e);var s=this.count-n+1;if(0<=s&&s%t==0&&!this.closed&&i.shift().complete(),++this.count%t==0&&!this.closed){var l=new u.Subject;i.push(l),r.next(l)}},e.prototype._error=function(e){var t=this.windows;if(t)for(;0<t.length&&!this.closed;)t.shift().error(e);this.destination.error(e)},e.prototype._complete=function(){var e=this.windows;if(e)for(;0<e.length&&!this.closed;)e.shift().complete();this.destination.complete()},e.prototype._unsubscribe=function(){this.count=0,this.windows=null},e}(n.Subscriber)},{"../Subject":381,"../Subscriber":383}],764:[function(e,t,r){var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=e("../Subject"),o=e("../scheduler/async"),a=e("../Subscriber"),s=e("../util/isNumeric"),l=e("../util/isScheduler");r.windowTime=function(t){var r=o.async,n=null,i=Number.POSITIVE_INFINITY;return l.isScheduler(arguments[3])&&(r=arguments[3]),l.isScheduler(arguments[2])?r=arguments[2]:s.isNumeric(arguments[2])&&(i=arguments[2]),l.isScheduler(arguments[1])?r=arguments[1]:s.isNumeric(arguments[1])&&(n=arguments[1]),function(e){return e.lift(new u(t,n,i,r))}};var u=function(){function e(e,t,r,n){this.windowTimeSpan=e,this.windowCreationInterval=t,this.maxWindowSize=r,this.scheduler=n}return e.prototype.call=function(e,t){return t.subscribe(new h(e,this.windowTimeSpan,this.windowCreationInterval,this.maxWindowSize,this.scheduler))},e}(),c=function(t){function e(){t.apply(this,arguments),this._numberOfNextedValues=0}return n(e,t),e.prototype.next=function(e){this._numberOfNextedValues++,t.prototype.next.call(this,e)},Object.defineProperty(e.prototype,"numberOfNextedValues",{get:function(){return this._numberOfNextedValues},enumerable:!0,configurable:!0}),e}(i.Subject),h=function(u){function e(e,t,r,n,i){u.call(this,e),this.destination=e,this.windowTimeSpan=t,this.windowCreationInterval=r,this.maxWindowSize=n,this.scheduler=i,this.windows=[];var o=this.openWindow();if(null!==r&&0<=r){var a={subscriber:this,window:o,context:null},s={windowTimeSpan:t,windowCreationInterval:r,subscriber:this,scheduler:i};this.add(i.schedule(f,t,a)),this.add(i.schedule(p,r,s))}else{var l={subscriber:this,window:o,windowTimeSpan:t};this.add(i.schedule(d,t,l))}}return n(e,u),e.prototype._next=function(e){for(var t=this.windows,r=t.length,n=0;n<r;n++){var i=t[n];i.closed||(i.next(e),i.numberOfNextedValues>=this.maxWindowSize&&this.closeWindow(i))}},e.prototype._error=function(e){for(var t=this.windows;0<t.length;)t.shift().error(e);this.destination.error(e)},e.prototype._complete=function(){for(var e=this.windows;0<e.length;){var t=e.shift();t.closed||t.complete()}this.destination.complete()},e.prototype.openWindow=function(){var e=new c;return this.windows.push(e),this.destination.next(e),e},e.prototype.closeWindow=function(e){e.complete();var t=this.windows;t.splice(t.indexOf(e),1)},e}(a.Subscriber);function d(e){var t=e.subscriber,r=e.windowTimeSpan,n=e.window;n&&t.closeWindow(n),e.window=t.openWindow(),this.schedule(e,r)}function p(e){var t=e.windowTimeSpan,r=e.subscriber,n=e.scheduler,i=e.windowCreationInterval,o=r.openWindow(),a={action:this,subscription:null},s={subscriber:r,window:o,context:a};a.subscription=n.schedule(f,t,s),this.add(a.subscription),this.schedule(e,i)}function f(e){var t=e.subscriber,r=e.window,n=e.context;n&&n.action&&n.subscription&&n.action.remove(n.subscription),t.closeWindow(r)}},{"../Subject":381,"../Subscriber":383,"../scheduler/async":782,"../util/isNumeric":811,"../util/isScheduler":814}],765:[function(e,t,r){var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},h=e("../Subject"),d=e("../Subscription"),p=e("../util/tryCatch"),f=e("../util/errorObject"),i=e("../OuterSubscriber"),m=e("../util/subscribeToResult");r.windowToggle=function(t,r){return function(e){return e.lift(new o(t,r))}};var o=function(){function e(e,t){this.openings=e,this.closingSelector=t}return e.prototype.call=function(e,t){return t.subscribe(new a(e,this.openings,this.closingSelector))},e}(),a=function(o){function e(e,t,r){o.call(this,e),this.openings=t,this.closingSelector=r,this.contexts=[],this.add(this.openSubscription=m.subscribeToResult(this,t,t))}return n(e,o),e.prototype._next=function(e){var t=this.contexts;if(t)for(var r=t.length,n=0;n<r;n++)t[n].window.next(e)},e.prototype._error=function(e){var t=this.contexts;if(this.contexts=null,t)for(var r=t.length,n=-1;++n<r;){var i=t[n];i.window.error(e),i.subscription.unsubscribe()}o.prototype._error.call(this,e)},e.prototype._complete=function(){var e=this.contexts;if(this.contexts=null,e)for(var t=e.length,r=-1;++r<t;){var n=e[r];n.window.complete(),n.subscription.unsubscribe()}o.prototype._complete.call(this)},e.prototype._unsubscribe=function(){var e=this.contexts;if(this.contexts=null,e)for(var t=e.length,r=-1;++r<t;){var n=e[r];n.window.unsubscribe(),n.subscription.unsubscribe()}},e.prototype.notifyNext=function(e,t,r,n,i){if(e===this.openings){var o=this.closingSelector,a=p.tryCatch(o)(t);if(a===f.errorObject)return this.error(f.errorObject.e);var s=new h.Subject,l=new d.Subscription,u={window:s,subscription:l};this.contexts.push(u);var c=m.subscribeToResult(this,a,u);c.closed?this.closeWindow(this.contexts.length-1):(c.context=u,l.add(c)),this.destination.next(s)}else this.closeWindow(this.contexts.indexOf(e))},e.prototype.notifyError=function(e){this.error(e)},e.prototype.notifyComplete=function(e){e!==this.openSubscription&&this.closeWindow(this.contexts.indexOf(e.context))},e.prototype.closeWindow=function(e){if(-1!==e){var t=this.contexts,r=t[e],n=r.window,i=r.subscription;t.splice(e,1),n.complete(),i.unsubscribe()}},e}(i.OuterSubscriber)},{"../OuterSubscriber":377,"../Subject":381,"../Subscription":384,"../util/errorObject":805,"../util/subscribeToResult":819,"../util/tryCatch":821}],766:[function(e,t,r){var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},o=e("../Subject"),a=e("../util/tryCatch"),s=e("../util/errorObject"),i=e("../OuterSubscriber"),l=e("../util/subscribeToResult");r.windowWhen=function(t){return function(e){return e.lift(new u(t))}};var u=function(){function e(e){this.closingSelector=e}return e.prototype.call=function(e,t){return t.subscribe(new c(e,this.closingSelector))},e}(),c=function(r){function e(e,t){r.call(this,e),this.destination=e,this.closingSelector=t,this.openWindow()}return n(e,r),e.prototype.notifyNext=function(e,t,r,n,i){this.openWindow(i)},e.prototype.notifyError=function(e,t){this._error(e)},e.prototype.notifyComplete=function(e){this.openWindow(e)},e.prototype._next=function(e){this.window.next(e)},e.prototype._error=function(e){this.window.error(e),this.destination.error(e),this.unsubscribeClosingNotification()},e.prototype._complete=function(){this.window.complete(),this.destination.complete(),this.unsubscribeClosingNotification()},e.prototype.unsubscribeClosingNotification=function(){this.closingNotification&&this.closingNotification.unsubscribe()},e.prototype.openWindow=function(e){void 0===e&&(e=null),e&&(this.remove(e),e.unsubscribe());var t=this.window;t&&t.complete();var r=this.window=new o.Subject;this.destination.next(r);var n=a.tryCatch(this.closingSelector)();if(n===s.errorObject){var i=s.errorObject.e;this.destination.error(i),this.window.error(i)}else this.add(this.closingNotification=l.subscribeToResult(this,n))},e}(i.OuterSubscriber)},{"../OuterSubscriber":377,"../Subject":381,"../util/errorObject":805,"../util/subscribeToResult":819,"../util/tryCatch":821}],767:[function(e,t,r){var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=e("../OuterSubscriber"),s=e("../util/subscribeToResult");r.withLatestFrom=function(){for(var n=[],e=0;e<arguments.length;e++)n[e-0]=arguments[e];return function(e){var t;"function"==typeof n[n.length-1]&&(t=n.pop());var r=n;return e.lift(new o(r,t))}};var o=function(){function e(e,t){this.observables=e,this.project=t}return e.prototype.call=function(e,t){return t.subscribe(new a(e,this.observables,this.project))},e}(),a=function(a){function e(e,t,r){a.call(this,e),this.observables=t,this.project=r,this.toRespond=[];var n=t.length;this.values=new Array(n);for(var i=0;i<n;i++)this.toRespond.push(i);for(i=0;i<n;i++){var o=t[i];this.add(s.subscribeToResult(this,o,o,i))}}return n(e,a),e.prototype.notifyNext=function(e,t,r,n,i){this.values[r]=t;var o=this.toRespond;if(0<o.length){var a=o.indexOf(r);-1!==a&&o.splice(a,1)}},e.prototype.notifyComplete=function(){},e.prototype._next=function(e){if(0===this.toRespond.length){var t=[e].concat(this.values);this.project?this._tryProject(t):this.destination.next(t)}},e.prototype._tryProject=function(e){var t;try{t=this.project.apply(this,e)}catch(e){return void this.destination.error(e)}this.destination.next(t)},e}(i.OuterSubscriber)},{"../OuterSubscriber":377,"../util/subscribeToResult":819}],768:[function(e,t,r){var i=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},n=e("../observable/ArrayObservable"),o=e("../util/isArray"),a=e("../Subscriber"),s=e("../OuterSubscriber"),l=e("../util/subscribeToResult"),u=e("../symbol/iterator");function c(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];var r=e[e.length-1];return"function"==typeof r&&e.pop(),new n.ArrayObservable(e).lift(new h(r))}r.zip=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];return function(e){return e.lift.call(c.apply(void 0,[e].concat(t)))}},r.zipStatic=c;var h=function(){function e(e){this.project=e}return e.prototype.call=function(e,t){return t.subscribe(new d(e,this.project))},e}();r.ZipOperator=h;var d=function(n){function e(e,t,r){void 0===r&&(r=Object.create(null)),n.call(this,e),this.iterators=[],this.active=0,this.project="function"==typeof t?t:null,this.values=r}return i(e,n),e.prototype._next=function(e){var t=this.iterators;o.isArray(e)?t.push(new f(e)):"function"==typeof e[u.iterator]?t.push(new p(e[u.iterator]())):t.push(new m(this.destination,this,e))},e.prototype._complete=function(){var e=this.iterators,t=e.length;if(0!==t){this.active=t;for(var r=0;r<t;r++){var n=e[r];n.stillUnsubscribed?this.add(n.subscribe(n,r)):this.active--}}else this.destination.complete()},e.prototype.notifyInactive=function(){this.active--,0===this.active&&this.destination.complete()},e.prototype.checkIterators=function(){for(var e=this.iterators,t=e.length,r=this.destination,n=0;n<t;n++){if("function"==typeof(a=e[n]).hasValue&&!a.hasValue())return}var i=!1,o=[];for(n=0;n<t;n++){var a,s=(a=e[n]).next();if(a.hasCompleted()&&(i=!0),s.done)return void r.complete();o.push(s.value)}this.project?this._tryProject(o):r.next(o),i&&r.complete()},e.prototype._tryProject=function(e){var t;try{t=this.project.apply(this,e)}catch(e){return void this.destination.error(e)}this.destination.next(t)},e}(a.Subscriber);r.ZipSubscriber=d;var p=function(){function e(e){this.iterator=e,this.nextResult=e.next()}return e.prototype.hasValue=function(){return!0},e.prototype.next=function(){var e=this.nextResult;return this.nextResult=this.iterator.next(),e},e.prototype.hasCompleted=function(){var e=this.nextResult;return e&&e.done},e}(),f=function(){function e(e){this.array=e,this.index=0,this.length=0,this.length=e.length}return e.prototype[u.iterator]=function(){return this},e.prototype.next=function(e){var t=this.index++,r=this.array;return t<this.length?{value:r[t],done:!1}:{value:null,done:!0}},e.prototype.hasValue=function(){return this.array.length>this.index},e.prototype.hasCompleted=function(){return this.array.length===this.index},e}(),m=function(n){function e(e,t,r){n.call(this,e),this.parent=t,this.observable=r,this.stillUnsubscribed=!0,this.buffer=[],this.isComplete=!1}return i(e,n),e.prototype[u.iterator]=function(){return this},e.prototype.next=function(){var e=this.buffer;return 0===e.length&&this.isComplete?{value:null,done:!0}:{value:e.shift(),done:!1}},e.prototype.hasValue=function(){return 0<this.buffer.length},e.prototype.hasCompleted=function(){return 0===this.buffer.length&&this.isComplete},e.prototype.notifyComplete=function(){0<this.buffer.length?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()},e.prototype.notifyNext=function(e,t,r,n,i){this.buffer.push(t),this.parent.checkIterators()},e.prototype.subscribe=function(e,t){return l.subscribeToResult(this,this.observable,this,t)},e}(s.OuterSubscriber)},{"../OuterSubscriber":377,"../Subscriber":383,"../observable/ArrayObservable":515,"../symbol/iterator":784,"../util/isArray":807,"../util/subscribeToResult":819}],769:[function(e,t,r){var n=e("./zip");r.zipAll=function(t){return function(e){return e.lift(new n.ZipOperator(t))}}},{"./zip":768}],770:[function(e,t,r){var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=function(r){function e(e,t){r.call(this)}return n(e,r),e.prototype.schedule=function(e,t){return void 0===t&&(t=0),this},e}(e("../Subscription").Subscription);r.Action=i},{"../Subscription":384}],771:[function(e,t,r){var i=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},n=e("./AsyncAction"),o=e("../util/AnimationFrame"),a=function(n){function e(e,t){n.call(this,e,t),this.scheduler=e,this.work=t}return i(e,n),e.prototype.requestAsyncId=function(e,t,r){return void 0===r&&(r=0),null!==r&&0<r?n.prototype.requestAsyncId.call(this,e,t,r):(e.actions.push(this),e.scheduled||(e.scheduled=o.AnimationFrame.requestAnimationFrame(e.flush.bind(e,null))))},e.prototype.recycleAsyncId=function(e,t,r){if(void 0===r&&(r=0),null!==r&&0<r||null===r&&0<this.delay)return n.prototype.recycleAsyncId.call(this,e,t,r);0===e.actions.length&&(o.AnimationFrame.cancelAnimationFrame(t),e.scheduled=void 0)},e}(n.AsyncAction);r.AnimationFrameAction=a},{"../util/AnimationFrame":792,"./AsyncAction":775}],772:[function(e,t,r){var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=function(e){function t(){e.apply(this,arguments)}return n(t,e),t.prototype.flush=function(e){this.active=!0,this.scheduled=void 0;var t,r=this.actions,n=-1,i=r.length;e=e||r.shift();do{if(t=e.execute(e.state,e.delay))break}while(++n<i&&(e=r.shift()));if(this.active=!1,t){for(;++n<i&&(e=r.shift());)e.unsubscribe();throw t}},t}(e("./AsyncScheduler").AsyncScheduler);r.AnimationFrameScheduler=i},{"./AsyncScheduler":776}],773:[function(e,t,r){var i=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},o=e("../util/Immediate"),n=function(n){function e(e,t){n.call(this,e,t),this.scheduler=e,this.work=t}return i(e,n),e.prototype.requestAsyncId=function(e,t,r){return void 0===r&&(r=0),null!==r&&0<r?n.prototype.requestAsyncId.call(this,e,t,r):(e.actions.push(this),e.scheduled||(e.scheduled=o.Immediate.setImmediate(e.flush.bind(e,null))))},e.prototype.recycleAsyncId=function(e,t,r){if(void 0===r&&(r=0),null!==r&&0<r||null===r&&0<this.delay)return n.prototype.recycleAsyncId.call(this,e,t,r);0===e.actions.length&&(o.Immediate.clearImmediate(t),e.scheduled=void 0)},e}(e("./AsyncAction").AsyncAction);r.AsapAction=n},{"../util/Immediate":796,"./AsyncAction":775}],774:[function(e,t,r){var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=function(e){function t(){e.apply(this,arguments)}return n(t,e),t.prototype.flush=function(e){this.active=!0,this.scheduled=void 0;var t,r=this.actions,n=-1,i=r.length;e=e||r.shift();do{if(t=e.execute(e.state,e.delay))break}while(++n<i&&(e=r.shift()));if(this.active=!1,t){for(;++n<i&&(e=r.shift());)e.unsubscribe();throw t}},t}(e("./AsyncScheduler").AsyncScheduler);r.AsapScheduler=i},{"./AsyncScheduler":776}],775:[function(e,t,r){var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=e("../util/root"),o=function(r){function e(e,t){r.call(this,e,t),this.scheduler=e,this.pending=!1,this.work=t}return n(e,r),e.prototype.schedule=function(e,t){if(void 0===t&&(t=0),this.closed)return this;this.state=e,this.pending=!0;var r=this.id,n=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(n,r,t)),this.delay=t,this.id=this.id||this.requestAsyncId(n,this.id,t),this},e.prototype.requestAsyncId=function(e,t,r){return void 0===r&&(r=0),i.root.setInterval(e.flush.bind(e,this),r)},e.prototype.recycleAsyncId=function(e,t,r){if(void 0===r&&(r=0),null!==r&&this.delay===r&&!1===this.pending)return t;i.root.clearInterval(t)},e.prototype.execute=function(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var r=this._execute(e,t);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},e.prototype._execute=function(e,t){var r=!1,n=void 0;try{this.work(e)}catch(e){r=!0,n=!!e&&e||new Error(e)}if(r)return this.unsubscribe(),n},e.prototype._unsubscribe=function(){var e=this.id,t=this.scheduler,r=t.actions,n=r.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==n&&r.splice(n,1),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null},e}(e("./Action").Action);r.AsyncAction=o},{"../util/root":818,"./Action":770}],776:[function(e,t,r){var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=function(e){function t(){e.apply(this,arguments),this.actions=[],this.active=!1,this.scheduled=void 0}return n(t,e),t.prototype.flush=function(e){var t=this.actions;if(this.active)t.push(e);else{var r;this.active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=t.shift());if(this.active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}},t}(e("../Scheduler").Scheduler);r.AsyncScheduler=i},{"../Scheduler":380}],777:[function(e,t,r){var i=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},n=function(n){function e(e,t){n.call(this,e,t),this.scheduler=e,this.work=t}return i(e,n),e.prototype.schedule=function(e,t){return void 0===t&&(t=0),0<t?n.prototype.schedule.call(this,e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)},e.prototype.execute=function(e,t){return 0<t||this.closed?n.prototype.execute.call(this,e,t):this._execute(e,t)},e.prototype.requestAsyncId=function(e,t,r){return void 0===r&&(r=0),null!==r&&0<r||null===r&&0<this.delay?n.prototype.requestAsyncId.call(this,e,t,r):e.flush(this)},e}(e("./AsyncAction").AsyncAction);r.QueueAction=n},{"./AsyncAction":775}],778:[function(e,t,r){var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=function(e){function t(){e.apply(this,arguments)}return n(t,e),t}(e("./AsyncScheduler").AsyncScheduler);r.QueueScheduler=i},{"./AsyncScheduler":776}],779:[function(e,t,r){var o=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},n=e("./AsyncAction"),i=function(n){function e(e,t){var r=this;void 0===e&&(e=a),void 0===t&&(t=Number.POSITIVE_INFINITY),n.call(this,e,function(){return r.frame}),this.maxFrames=t,this.frame=0,this.index=-1}return o(e,n),e.prototype.flush=function(){for(var e,t,r=this.actions,n=this.maxFrames;(t=r.shift())&&(this.frame=t.delay)<=n&&!(e=t.execute(t.state,t.delay)););if(e){for(;t=r.shift();)t.unsubscribe();throw e}},e.frameTimeFactor=10,e}(e("./AsyncScheduler").AsyncScheduler);r.VirtualTimeScheduler=i;var a=function(n){function i(e,t,r){void 0===r&&(r=e.index+=1),n.call(this,e,t),this.scheduler=e,this.work=t,this.index=r,this.active=!0,this.index=e.index=r}return o(i,n),i.prototype.schedule=function(e,t){if(void 0===t&&(t=0),!this.id)return n.prototype.schedule.call(this,e,t);this.active=!1;var r=new i(this.scheduler,this.work);return this.add(r),r.schedule(e,t)},i.prototype.requestAsyncId=function(e,t,r){void 0===r&&(r=0),this.delay=e.frame+r;var n=e.actions;return n.push(this),n.sort(i.sortActions),!0},i.prototype.recycleAsyncId=function(e,t,r){void 0===r&&(r=0)},i.prototype._execute=function(e,t){if(!0===this.active)return n.prototype._execute.call(this,e,t)},i.sortActions=function(e,t){return e.delay===t.delay?e.index===t.index?0:e.index>t.index?1:-1:e.delay>t.delay?1:-1},i}(n.AsyncAction);r.VirtualAction=a},{"./AsyncAction":775,"./AsyncScheduler":776}],780:[function(e,t,r){var n=e("./AnimationFrameAction"),i=e("./AnimationFrameScheduler");r.animationFrame=new i.AnimationFrameScheduler(n.AnimationFrameAction)},{"./AnimationFrameAction":771,"./AnimationFrameScheduler":772}],781:[function(e,t,r){var n=e("./AsapAction"),i=e("./AsapScheduler");r.asap=new i.AsapScheduler(n.AsapAction)},{"./AsapAction":773,"./AsapScheduler":774}],782:[function(e,t,r){var n=e("./AsyncAction"),i=e("./AsyncScheduler");r.async=new i.AsyncScheduler(n.AsyncAction)},{"./AsyncAction":775,"./AsyncScheduler":776}],783:[function(e,t,r){var n=e("./QueueAction"),i=e("./QueueScheduler");r.queue=new i.QueueScheduler(n.QueueAction)},{"./QueueAction":777,"./QueueScheduler":778}],784:[function(e,t,r){var n=e("../util/root");function i(e){var t=e.Symbol;if("function"==typeof t)return t.iterator||(t.iterator=t("iterator polyfill")),t.iterator;var r=e.Set;if(r&&"function"==typeof(new r)["@@iterator"])return"@@iterator";var n=e.Map;if(n)for(var i=Object.getOwnPropertyNames(n.prototype),o=0;o<i.length;++o){var a=i[o];if("entries"!==a&&"size"!==a&&n.prototype[a]===n.prototype.entries)return a}return"@@iterator"}r.symbolIteratorPonyfill=i,r.iterator=i(n.root),r.$$iterator=r.iterator},{"../util/root":818}],785:[function(e,t,r){var n=e("../util/root");function i(e){var t,r=e.Symbol;return"function"==typeof r?r.observable?t=r.observable:(t=r("observable"),r.observable=t):t="@@observable",t}r.getSymbolObservable=i,r.observable=i(n.root),r.$$observable=r.observable},{"../util/root":818}],786:[function(e,t,r){var n=e("../util/root").root.Symbol;r.rxSubscriber="function"==typeof n&&"function"==typeof n.for?n.for("rxSubscriber"):"@@rxSubscriber",r.$$rxSubscriber=r.rxSubscriber},{"../util/root":818}],787:[function(e,t,r){var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=e("../Observable"),o=e("../Subscription"),a=e("./SubscriptionLoggable"),s=e("../util/applyMixins"),l=function(r){function e(e,t){r.call(this,function(e){var t=this,r=t.logSubscribedFrame();return e.add(new o.Subscription(function(){t.logUnsubscribedFrame(r)})),t.scheduleMessages(e),e}),this.messages=e,this.subscriptions=[],this.scheduler=t}return n(e,r),e.prototype.scheduleMessages=function(e){for(var t=this.messages.length,r=0;r<t;r++){var n=this.messages[r];e.add(this.scheduler.schedule(function(e){var t=e.message,r=e.subscriber;t.notification.observe(r)},n.frame,{message:n,subscriber:e}))}},e}(i.Observable);r.ColdObservable=l,s.applyMixins(l,[a.SubscriptionLoggable])},{"../Observable":375,"../Subscription":384,"../util/applyMixins":803,"./SubscriptionLoggable":790}],788:[function(e,t,r){var i=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},n=e("../Subject"),o=e("../Subscription"),a=e("./SubscriptionLoggable"),s=e("../util/applyMixins"),l=function(n){function e(e,t){n.call(this),this.messages=e,this.subscriptions=[],this.scheduler=t}return i(e,n),e.prototype._subscribe=function(e){var t=this,r=t.logSubscribedFrame();return e.add(new o.Subscription(function(){t.logUnsubscribedFrame(r)})),n.prototype._subscribe.call(this,e)},e.prototype.setup=function(){for(var t=this,e=t.messages.length,r=0;r<e;r++)!function(){var e=t.messages[r];t.scheduler.schedule(function(){e.notification.observe(t)},e.frame)}()},e}(n.Subject);r.HotObservable=l,s.applyMixins(l,[a.SubscriptionLoggable])},{"../Subject":381,"../Subscription":384,"../util/applyMixins":803,"./SubscriptionLoggable":790}],789:[function(e,t,r){var n=function(e,t){void 0===t&&(t=Number.POSITIVE_INFINITY),this.subscribedFrame=e,this.unsubscribedFrame=t};r.SubscriptionLog=n},{}],790:[function(e,t,r){var n=e("./SubscriptionLog"),i=function(){function e(){this.subscriptions=[]}return e.prototype.logSubscribedFrame=function(){return this.subscriptions.push(new n.SubscriptionLog(this.scheduler.now())),this.subscriptions.length-1},e.prototype.logUnsubscribedFrame=function(e){var t=this.subscriptions,r=t[e];t[e]=new n.SubscriptionLog(r.subscribedFrame,this.scheduler.now())},e}();r.SubscriptionLoggable=i},{"./SubscriptionLog":789}],791:[function(e,t,r){var i=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},l=e("../Observable"),f=e("../Notification"),m=e("./ColdObservable"),o=e("./HotObservable"),u=e("./SubscriptionLog"),a=e("../scheduler/VirtualTimeScheduler"),n=function(n){function s(e){n.call(this,a.VirtualAction,750),this.assertDeepEqual=e,this.hotObservables=[],this.coldObservables=[],this.flushTests=[]}return i(s,n),s.prototype.createTime=function(e){var t=e.indexOf("|");if(-1===t)throw new Error('marble diagram for time should have a completion marker "|"');return t*s.frameTimeFactor},s.prototype.createColdObservable=function(e,t,r){if(-1!==e.indexOf("^"))throw new Error('cold observable cannot have subscription offset "^"');if(-1!==e.indexOf("!"))throw new Error('cold observable cannot have unsubscription marker "!"');var n=s.parseMarbles(e,t,r),i=new m.ColdObservable(n,this);return this.coldObservables.push(i),i},s.prototype.createHotObservable=function(e,t,r){if(-1!==e.indexOf("!"))throw new Error('hot observable cannot have unsubscription marker "!"');var n=s.parseMarbles(e,t,r),i=new o.HotObservable(n,this);return this.hotObservables.push(i),i},s.prototype.materializeInnerObservable=function(e,t){var r=this,n=[];return e.subscribe(function(e){n.push({frame:r.frame-t,notification:f.Notification.createNext(e)})},function(e){n.push({frame:r.frame-t,notification:f.Notification.createError(e)})},function(){n.push({frame:r.frame-t,notification:f.Notification.createComplete()})}),n},s.prototype.expectObservable=function(e,t){var r=this;void 0===t&&(t=null);var n,i=[],o={actual:i,ready:!1},a=s.parseMarblesAsSubscriptions(t).unsubscribedFrame;return this.schedule(function(){n=e.subscribe(function(e){var t=e;e instanceof l.Observable&&(t=r.materializeInnerObservable(t,r.frame)),i.push({frame:r.frame,notification:f.Notification.createNext(t)})},function(e){i.push({frame:r.frame,notification:f.Notification.createError(e)})},function(){i.push({frame:r.frame,notification:f.Notification.createComplete()})})},0),a!==Number.POSITIVE_INFINITY&&this.schedule(function(){return n.unsubscribe()},a),this.flushTests.push(o),{toBe:function(e,t,r){o.ready=!0,o.expected=s.parseMarbles(e,t,r,!0)}}},s.prototype.expectSubscriptions=function(e){var r={actual:e,ready:!1};return this.flushTests.push(r),{toBe:function(e){var t="string"==typeof e?[e]:e;r.ready=!0,r.expected=t.map(function(e){return s.parseMarblesAsSubscriptions(e)})}}},s.prototype.flush=function(){for(var e=this.hotObservables;0<e.length;)e.shift().setup();n.prototype.flush.call(this);for(var t=this.flushTests.filter(function(e){return e.ready});0<t.length;){var r=t.shift();this.assertDeepEqual(r.actual,r.expected)}},s.parseMarblesAsSubscriptions=function(e){if("string"!=typeof e)return new u.SubscriptionLog(Number.POSITIVE_INFINITY);for(var t=e.length,r=-1,n=Number.POSITIVE_INFINITY,i=Number.POSITIVE_INFINITY,o=0;o<t;o++){var a=o*this.frameTimeFactor,s=e[o];switch(s){case"-":case" ":break;case"(":r=a;break;case")":r=-1;break;case"^":if(n!==Number.POSITIVE_INFINITY)throw new Error("found a second subscription point '^' in a subscription marble diagram. There can only be one.");n=-1<r?r:a;break;case"!":if(i!==Number.POSITIVE_INFINITY)throw new Error("found a second subscription point '^' in a subscription marble diagram. There can only be one.");i=-1<r?r:a;break;default:throw new Error("there can only be '^' and '!' markers in a subscription marble diagram. Found instead '"+s+"'.")}}return i<0?new u.SubscriptionLog(n):new u.SubscriptionLog(n,i)},s.parseMarbles=function(e,t,r,n){if(void 0===n&&(n=!1),-1!==e.indexOf("!"))throw new Error('conventional marble diagrams cannot have the unsubscription marker "!"');for(var i=e.length,o=[],a=e.indexOf("^"),s=-1===a?0:a*-this.frameTimeFactor,l="object"!==_typeof2(t)?function(e){return e}:function(e){return n&&t[e]instanceof m.ColdObservable?t[e].messages:t[e]},u=-1,c=0;c<i;c++){var h=c*this.frameTimeFactor+s,d=void 0,p=e[c];switch(p){case"-":case" ":break;case"(":u=h;break;case")":u=-1;break;case"|":d=f.Notification.createComplete();break;case"^":break;case"#":d=f.Notification.createError(r||"error");break;default:d=f.Notification.createNext(l(p))}d&&o.push({frame:-1<u?u:h,notification:d})}return o},s}(a.VirtualTimeScheduler);r.TestScheduler=n},{"../Notification":374,"../Observable":375,"../scheduler/VirtualTimeScheduler":779,"./ColdObservable":787,"./HotObservable":788,"./SubscriptionLog":789}],792:[function(e,t,r){var n=e("./root"),i=function(t){t.requestAnimationFrame?(this.cancelAnimationFrame=t.cancelAnimationFrame.bind(t),this.requestAnimationFrame=t.requestAnimationFrame.bind(t)):t.mozRequestAnimationFrame?(this.cancelAnimationFrame=t.mozCancelAnimationFrame.bind(t),this.requestAnimationFrame=t.mozRequestAnimationFrame.bind(t)):t.webkitRequestAnimationFrame?(this.cancelAnimationFrame=t.webkitCancelAnimationFrame.bind(t),this.requestAnimationFrame=t.webkitRequestAnimationFrame.bind(t)):t.msRequestAnimationFrame?(this.cancelAnimationFrame=t.msCancelAnimationFrame.bind(t),this.requestAnimationFrame=t.msRequestAnimationFrame.bind(t)):t.oRequestAnimationFrame?(this.cancelAnimationFrame=t.oCancelAnimationFrame.bind(t),this.requestAnimationFrame=t.oRequestAnimationFrame.bind(t)):(this.cancelAnimationFrame=t.clearTimeout.bind(t),this.requestAnimationFrame=function(e){return t.setTimeout(e,1e3/60)})};r.RequestAnimationFrameDefinition=i,r.AnimationFrame=new i(n.root)},{"./root":818}],793:[function(e,t,r){var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=function(t){function e(){var e=t.call(this,"argument out of range");this.name=e.name="ArgumentOutOfRangeError",this.stack=e.stack,this.message=e.message}return n(e,t),e}(Error);r.ArgumentOutOfRangeError=i},{}],794:[function(e,t,r){var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=function(t){function e(){var e=t.call(this,"no elements in sequence");this.name=e.name="EmptyError",this.stack=e.stack,this.message=e.message}return n(e,t),e}(Error);r.EmptyError=i},{}],795:[function(e,t,r){var n=function(){function e(){this.values={}}return e.prototype.delete=function(e){return!(this.values[e]=null)},e.prototype.set=function(e,t){return this.values[e]=t,this},e.prototype.get=function(e){return this.values[e]},e.prototype.forEach=function(e,t){var r=this.values;for(var n in r)r.hasOwnProperty(n)&&null!==r[n]&&e.call(t,r[n],n)},e.prototype.clear=function(){this.values={}},e}();r.FastMap=n},{}],796:[function(e,t,r){var n=e("./root"),i=function(){function e(e){if((this.root=e).setImmediate&&"function"==typeof e.setImmediate)this.setImmediate=e.setImmediate.bind(e),this.clearImmediate=e.clearImmediate.bind(e);else{this.nextHandle=1,this.tasksByHandle={},this.currentlyRunningATask=!1,this.canUseProcessNextTick()?this.setImmediate=this.createProcessNextTickSetImmediate():this.canUsePostMessage()?this.setImmediate=this.createPostMessageSetImmediate():this.canUseMessageChannel()?this.setImmediate=this.createMessageChannelSetImmediate():this.canUseReadyStateChange()?this.setImmediate=this.createReadyStateChangeSetImmediate():this.setImmediate=this.createSetTimeoutSetImmediate();var t=function e(t){delete e.instance.tasksByHandle[t]};(t.instance=this).clearImmediate=t}}return e.prototype.identify=function(e){return this.root.Object.prototype.toString.call(e)},e.prototype.canUseProcessNextTick=function(){return"[object process]"===this.identify(this.root.process)},e.prototype.canUseMessageChannel=function(){return Boolean(this.root.MessageChannel)},e.prototype.canUseReadyStateChange=function(){var e=this.root.document;return Boolean(e&&"onreadystatechange"in e.createElement("script"))},e.prototype.canUsePostMessage=function(){var e=this.root;if(!e.postMessage||e.importScripts)return!1;var t=!0,r=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=r,t},e.prototype.partiallyApplied=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var n=function e(){var t=e.handler,r=e.args;"function"==typeof t?t.apply(void 0,r):new Function(""+t)()};return n.handler=e,n.args=t,n},e.prototype.addFromSetImmediateArguments=function(e){return this.tasksByHandle[this.nextHandle]=this.partiallyApplied.apply(void 0,e),this.nextHandle++},e.prototype.createProcessNextTickSetImmediate=function(){var e=function e(){var t=e.instance,r=t.addFromSetImmediateArguments(arguments);return t.root.process.nextTick(t.partiallyApplied(t.runIfPresent,r)),r};return e.instance=this,e},e.prototype.createPostMessageSetImmediate=function(){var n=this.root,i="setImmediate$"+n.Math.random()+"$",e=function e(t){var r=e.instance;t.source===n&&"string"==typeof t.data&&0===t.data.indexOf(i)&&r.runIfPresent(+t.data.slice(i.length))};e.instance=this,n.addEventListener("message",e,!1);var t=function e(){var t=e.messagePrefix,r=e.instance,n=r.addFromSetImmediateArguments(arguments);return r.root.postMessage(t+n,"*"),n};return t.instance=this,t.messagePrefix=i,t},e.prototype.runIfPresent=function(e){if(this.currentlyRunningATask)this.root.setTimeout(this.partiallyApplied(this.runIfPresent,e),0);else{var t=this.tasksByHandle[e];if(t){this.currentlyRunningATask=!0;try{t()}finally{this.clearImmediate(e),this.currentlyRunningATask=!1}}}},e.prototype.createMessageChannelSetImmediate=function(){var r=this,e=new this.root.MessageChannel;e.port1.onmessage=function(e){var t=e.data;r.runIfPresent(t)};var t=function e(){var t=e.channel,r=e.instance.addFromSetImmediateArguments(arguments);return t.port2.postMessage(r),r};return t.channel=e,t.instance=this,t},e.prototype.createReadyStateChangeSetImmediate=function(){var e=function e(){var t=e.instance,r=t.root.document,n=r.documentElement,i=t.addFromSetImmediateArguments(arguments),o=r.createElement("script");return o.onreadystatechange=function(){t.runIfPresent(i),o.onreadystatechange=null,n.removeChild(o),o=null},n.appendChild(o),i};return e.instance=this,e},e.prototype.createSetTimeoutSetImmediate=function(){var e=function e(){var t=e.instance,r=t.addFromSetImmediateArguments(arguments);return t.root.setTimeout(t.partiallyApplied(t.runIfPresent,r),0),r};return e.instance=this,e},e}();r.ImmediateDefinition=i,r.Immediate=new i(n.root)},{"./root":818}],797:[function(e,t,r){var n=e("./root"),i=e("./MapPolyfill");r.Map=n.root.Map||i.MapPolyfill},{"./MapPolyfill":798,"./root":818}],798:[function(e,t,r){var n=function(){function e(){this.size=0,this._values=[],this._keys=[]}return e.prototype.get=function(e){var t=this._keys.indexOf(e);return-1===t?void 0:this._values[t]},e.prototype.set=function(e,t){var r=this._keys.indexOf(e);return-1===r?(this._keys.push(e),this._values.push(t),this.size++):this._values[r]=t,this},e.prototype.delete=function(e){var t=this._keys.indexOf(e);return-1!==t&&(this._values.splice(t,1),this._keys.splice(t,1),this.size--,!0)},e.prototype.clear=function(){this._keys.length=0,this._values.length=0,this.size=0},e.prototype.forEach=function(e,t){for(var r=0;r<this.size;r++)e.call(t,this._values[r],this._keys[r])},e}();r.MapPolyfill=n},{}],799:[function(e,t,r){var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=function(t){function e(){var e=t.call(this,"object unsubscribed");this.name=e.name="ObjectUnsubscribedError",this.stack=e.stack,this.message=e.message}return n(e,t),e}(Error);r.ObjectUnsubscribedError=i},{}],800:[function(e,t,r){var n=e("./root");function i(){return function(){function e(){this._values=[]}return e.prototype.add=function(e){this.has(e)||this._values.push(e)},e.prototype.has=function(e){return-1!==this._values.indexOf(e)},Object.defineProperty(e.prototype,"size",{get:function(){return this._values.length},enumerable:!0,configurable:!0}),e.prototype.clear=function(){this._values.length=0},e}()}r.minimalSetImpl=i,r.Set=n.root.Set||i()},{"./root":818}],801:[function(e,t,r){var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=function(t){function e(){var e=t.call(this,"Timeout has occurred");this.name=e.name="TimeoutError",this.stack=e.stack,this.message=e.message}return n(e,t),e}(Error);r.TimeoutError=i},{}],802:[function(e,t,r){var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=function(r){function e(e){r.call(this),this.errors=e;var t=Error.call(this,e?e.length+" errors occurred during unsubscription:\n  "+e.map(function(e,t){return t+1+") "+e.toString()}).join("\n  "):"");this.name=t.name="UnsubscriptionError",this.stack=t.stack,this.message=t.message}return n(e,r),e}(Error);r.UnsubscriptionError=i},{}],803:[function(e,t,r){r.applyMixins=function(e,t){for(var r=0,n=t.length;r<n;r++)for(var i=t[r],o=Object.getOwnPropertyNames(i.prototype),a=0,s=o.length;a<s;a++){var l=o[a];e.prototype[l]=i.prototype[l]}}},{}],804:[function(e,t,r){var n=e("./root");function i(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];for(var n=t.length,i=0;i<n;i++){var o=t[i];for(var a in o)o.hasOwnProperty(a)&&(e[a]=o[a])}return e}function o(e){return e.Object.assign||i}r.assignImpl=i,r.getAssign=o,r.assign=o(n.root)},{"./root":818}],805:[function(e,t,r){r.errorObject={e:{}}},{}],806:[function(e,t,r){r.identity=function(e){return e}},{}],807:[function(e,t,r){r.isArray=Array.isArray||function(e){return e&&"number"==typeof e.length}},{}],808:[function(e,t,r){r.isArrayLike=function(e){return e&&"number"==typeof e.length}},{}],809:[function(e,t,r){r.isDate=function(e){return e instanceof Date&&!isNaN(+e)}},{}],810:[function(e,t,r){r.isFunction=function(e){return"function"==typeof e}},{}],811:[function(e,t,r){var n=e("../util/isArray");r.isNumeric=function(e){return!n.isArray(e)&&0<=e-parseFloat(e)+1}},{"../util/isArray":807}],812:[function(e,t,r){r.isObject=function(e){return null!=e&&"object"===_typeof2(e)}},{}],813:[function(e,t,r){r.isPromise=function(e){return e&&"function"!=typeof e.subscribe&&"function"==typeof e.then}},{}],814:[function(e,t,r){r.isScheduler=function(e){return e&&"function"==typeof e.schedule}},{}],815:[function(e,t,r){r.noop=function(){}},{}],816:[function(e,t,r){r.not=function(e,t){function r(){return!r.pred.apply(r.thisArg,arguments)}return r.pred=e,r.thisArg=t,r}},{}],817:[function(e,t,r){var n=e("./noop");function i(t){return t?1===t.length?t[0]:function(e){return t.reduce(function(e,t){return t(e)},e)}:n.noop}r.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return i(e)},r.pipeFromArray=i},{"./noop":815}],818:[function(e,t,i){(function(e){var t="undefined"!=typeof window&&window,r="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,n=t||void 0!==e&&e||r;i.root=n,function(){if(!n)throw new Error("RxJS could not find any global context (window, self, global)")}()}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],819:[function(e,t,r){var h=e("./root"),d=e("./isArrayLike"),p=e("./isPromise"),f=e("./isObject"),m=e("../Observable"),v=e("../symbol/iterator"),b=e("../InnerSubscriber"),y=e("../symbol/observable");r.subscribeToResult=function(e,t,r,n){var i=new b.InnerSubscriber(e,r,n);if(i.closed)return null;if(t instanceof m.Observable)return t._isScalar?(i.next(t.value),i.complete(),null):(i.syncErrorThrowable=!0,t.subscribe(i));if(d.isArrayLike(t)){for(var o=0,a=t.length;o<a&&!i.closed;o++)i.next(t[o]);i.closed||i.complete()}else{if(p.isPromise(t))return t.then(function(e){i.closed||(i.next(e),i.complete())},function(e){return i.error(e)}).then(null,function(e){h.root.setTimeout(function(){throw e})}),i;if(t&&"function"==typeof t[v.iterator])for(var s=t[v.iterator]();;){var l=s.next();if(l.done){i.complete();break}if(i.next(l.value),i.closed)break}else if(t&&"function"==typeof t[y.observable]){var u=t[y.observable]();if("function"==typeof u.subscribe)return u.subscribe(new b.InnerSubscriber(e,r,n));i.error(new TypeError("Provided object does not correctly implement Symbol.observable"))}else{var c="You provided "+(f.isObject(t)?"an invalid object":"'"+t+"'")+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.";i.error(new TypeError(c))}}return null}},{"../InnerSubscriber":373,"../Observable":375,"../symbol/iterator":784,"../symbol/observable":785,"./isArrayLike":808,"./isObject":812,"./isPromise":813,"./root":818}],820:[function(e,t,r){var n=e("../Subscriber"),i=e("../symbol/rxSubscriber"),o=e("../Observer");r.toSubscriber=function(e,t,r){if(e){if(e instanceof n.Subscriber)return e;if(e[i.rxSubscriber])return e[i.rxSubscriber]()}return e||t||r?new n.Subscriber(e,t,r):new n.Subscriber(o.empty)}},{"../Observer":376,"../Subscriber":383,"../symbol/rxSubscriber":786}],821:[function(e,t,r){var n,i=e("./errorObject");function o(){try{return n.apply(this,arguments)}catch(e){return i.errorObject.e=e,i.errorObject}}r.tryCatch=function(e){return n=e,o}},{"./errorObject":805}],822:[function(e,t,r){var n,i;n=this,i=function(){var e=function e(){function t(e){return i.appendChild(e.dom),e}function r(e){for(var t=0;t<i.children.length;t++)i.children[t].style.display=t===e?"block":"none";n=e}var n=0,i=document.createElement("div");i.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",i.addEventListener("click",function(e){e.preventDefault(),r(++n%i.children.length)},!1);var o=(performance||Date).now(),a=o,s=0,l=t(new e.Panel("FPS","#0ff","#002")),u=t(new e.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var c=t(new e.Panel("MB","#f08","#201"));return r(0),{REVISION:16,dom:i,addPanel:t,showPanel:r,begin:function(){o=(performance||Date).now()},end:function(){s++;var e=(performance||Date).now();if(u.update(e-o,200),a+1e3<e&&(l.update(1e3*s/(e-a),100),a=e,s=0,c)){var t=performance.memory;c.update(t.usedJSHeapSize/1048576,t.jsHeapSizeLimit/1048576)}return e},update:function(){o=this.end()},domElement:i,setMode:r}};return e.Panel=function(r,n,i){var o=1/0,a=0,s=Math.round,l=s(window.devicePixelRatio||1),u=80*l,e=48*l,c=3*l,h=2*l,d=3*l,p=15*l,f=74*l,m=30*l,v=document.createElement("canvas");v.width=u,v.height=e,v.style.cssText="width:80px;height:48px";var b=v.getContext("2d");return b.font="bold "+9*l+"px Helvetica,Arial,sans-serif",b.textBaseline="top",b.fillStyle=i,b.fillRect(0,0,u,e),b.fillStyle=n,b.fillText(r,c,h),b.fillRect(d,p,f,m),b.fillStyle=i,b.globalAlpha=.9,b.fillRect(d,p,f,m),{dom:v,update:function(e,t){o=Math.min(o,e),a=Math.max(a,e),b.fillStyle=i,b.globalAlpha=1,b.fillRect(0,0,u,p),b.fillStyle=n,b.fillText(s(e)+" "+r+" ("+s(o)+"-"+s(a)+")",c,h),b.drawImage(v,d+l,p,f-l,m,d,p,f-l,m),b.fillRect(d+f-l,p,l,m),b.fillStyle=i,b.globalAlpha=.9,b.fillRect(d+f-l,p,l,s((1-e/t)*m))}}},e},"object"===_typeof2(r)&&void 0!==t?t.exports=i():"function"==typeof define&&define.amd?define(i):n.Stats=i()},{}],823:[function(e,t,r){var n=e("./decision"),a=e("../../equipments/shotgun-equipment"),i=function(e){_inherits2(o,n);var i=_createSuper(o);function o(e,t,r){var n;return _classCallCheck2(this,o),(n=i.call(this,e)).enemy=t,n.controller=r,n}return _createClass2(o,[{key:"score",value:function(){if(this.enemy.dead)return 0;var e=this.character.equipmentHolders()[0],t=e?e.equipment:null,r=this.enemy.equipmentHolders()[0],n=r?r.equipment:null,i=(t instanceof a?.5:1)-(n instanceof a?.5:1),o=this.character.world.itemsInBucket("crown");return o&&o.length?o[0].owner===this.enemy.id?i:0:this.scoreFromRatios([Math.between(0,this.character.health/(2*this.enemy.health),1),1-Math.between(0,Math.distance(this.character,this.enemy)/1e3,1),i])}},{key:"isTarget",value:function(e){if(200<Math.distance(this.enemy,e))return!1;if(50<Math.abs(this.enemy.y-e.y))return!1;for(var t=Math.min(e.x,this.enemy.x),r=Math.max(e.x,this.enemy.x),n=t;n<r;n+=this.character.world.tileSize)if(this.character.world.solidTileAt(n,this.character.y))return!1;return!0}},{key:"target",value:function(){return this.enemy}}]),o}();t.exports=i},{"../../equipments/shotgun-equipment":898,"./decision":825}],824:[function(e,t,r){var o=e("./decision"),n=function(e){_inherits2(i,o);var n=_createSuper(i);function i(e,t){var r;return _classCallCheck2(this,i),(r=n.call(this,e)).item=t,r}return _createClass2(i,[{key:"score",value:function(){return this.item.world?2:0}},{key:"isTarget",value:function(e){return Math.distance(this.item,e)<50}},{key:"target",value:function(){return this.item}}]),i}();t.exports=n},{"./decision":825}],825:[function(e,t,r){var n=function(){function t(e){_classCallCheck2(this,t),this.character=e}return _createClass2(t,[{key:"score",value:function(){return 0}},{key:"scoreFromRatios",value:function(e){return e.reduce(function(e,t){return e+t},0)/e.length}},{key:"isTarget",value:function(e){return!1}},{key:"target",value:function(){return null}}]),t}();t.exports=n},{}],826:[function(e,t,r){var n=e("./decision"),a=e("../../equipments/shotgun-equipment"),i=function(e){_inherits2(o,n);var i=_createSuper(o);function o(e,t,r){var n;return _classCallCheck2(this,o),(n=i.call(this,e)).item=t,n.controller=r,n}return _createClass2(o,[{key:"score",value:function(){if(!this.item.world)return 0;var e=this.character.equipmentHolders()[0],t=e?e.equipment:null;return this.scoreFromRatios([1-Math.between(0,(t?t.ammo:0)/10,1),1-Math.between(0,Math.distance(this.character,this.item)/1e3,1),t instanceof a?1:0])}},{key:"isTarget",value:function(e){return Math.distance(this.item,e)<50}},{key:"target",value:function(){return this.item}}]),o}();t.exports=i},{"../../equipments/shotgun-equipment":898,"./decision":825}],827:[function(e,t,r){var o=e("./decision"),n=function(e){_inherits2(i,o);var n=_createSuper(i);function i(e,t){var r;return _classCallCheck2(this,i),(r=n.call(this,e)).item=t,r}return _createClass2(i,[{key:"score",value:function(){return this.item.world?this.character.health===this.character.maxHealth?0:this.scoreFromRatios([1-Math.between(0,this.character.health/this.character.maxHealth,1),1-Math.between(0,Math.distance(this.character,this.item)/1e3,1)]):0}},{key:"isTarget",value:function(e){return Math.distance(this.item,e)<50}},{key:"target",value:function(){return this.item}}]),i}();t.exports=n},{"./decision":825}],828:[function(e,t,r){var n=e("./flamethrower-controller"),i=e("./grenade-launcher-controller"),o=e("./rocket-launcher-controller"),a=e("./shotgun-controller"),s=e("./plasma-gun-controller"),l=e("./machine-gun-controller"),u=e("../../equipments/flamethrower-equipment"),c=e("../../equipments/grenade-launcher-equipment"),h=e("../../equipments/rocket-launcher-equipment"),d=e("../../equipments/shotgun-equipment"),p=e("../../equipments/plasma-gun-equipment"),f=e("../../equipments/machine-gun-equipment"),m=function(){function e(){_classCallCheck2(this,e)}return _createClass2(e,[{key:"createEquipmentController",value:function(e){return e instanceof u?new n(e):e instanceof c?new i(e):e instanceof h?new o(e):e instanceof d?new a(e):e instanceof p?new s(e):e instanceof f?new l(e):null}}]),e}();t.exports=m},{"../../equipments/flamethrower-equipment":888,"../../equipments/grenade-launcher-equipment":889,"../../equipments/machine-gun-equipment":890,"../../equipments/plasma-gun-equipment":891,"../../equipments/rocket-launcher-equipment":892,"../../equipments/shotgun-equipment":898,"./flamethrower-controller":830,"./grenade-launcher-controller":831,"./machine-gun-controller":832,"./plasma-gun-controller":833,"./rocket-launcher-controller":834,"./shotgun-controller":835}],829:[function(e,t,r){var n=function(){function t(e){_classCallCheck2(this,t),this.equipment=e,this.shotInterval=1}return _createClass2(t,[{key:"shouldHoldTrigger",value:function(){return!1}}]),t}();t.exports=n},{}],830:[function(e,t,r){var i=e("./straight-shot-equipment-controller"),n=function(e){_inherits2(n,i);var r=_createSuper(n);function n(e){var t;return _classCallCheck2(this,n),(t=r.call(this,e)).marginFactorY=4,t.maxDistanceX=300,t.shotInterval=0,t}return _createClass2(n)}();t.exports=n},{"./straight-shot-equipment-controller":836}],831:[function(e,t,r){var i=e("./equipment-controller"),n=function(e){_inherits2(n,i);var r=_createSuper(n);function n(e){var t;return _classCallCheck2(this,n),(t=r.call(this,e)).maxTargetDistance=600,t.shotInterval=2,t.targetRadius=100,t}return _createClass2(n,[{key:"shouldHoldTrigger",value:function(){var t=this;if(this.equipment.character.age-this.equipment.lastShot<this.shotInterval)return!1;var r=!1;return this.equipment.character.world.forEachItemInBucket("character",function(e){e!==t.equipment.character&&(r||Math.distance(t.equipment.character,e)>t.maxTargetDistance||(r=t.isEnemyInSight(e)))}),!r}},{key:"isEnemyInSight",value:function(e){var t=this.equipment.character.world.environment.gravity.y,r=this.equipment.character.x,n=this.equipment.character.y,i=Math.cos(this.equipment.launchAngle())*this.equipment.launchForce(),o=Math.sin(this.equipment.launchAngle())*this.equipment.launchForce(),a=e.y,s=t/2,l=o,u=n-a,c=Math.pow(l,2)-4*s*u,h=(-l-Math.sqrt(c))/(2*s),d=(-l+Math.sqrt(c))/(2*s),p=i*h+r,f=i*d+r;return 0<h&&Math.pointDistance(p,a,e.x,e.y)<this.targetRadius||0<d&&Math.pointDistance(f,a,e.x,e.y)<this.targetRadius}}]),n}();t.exports=n},{"./equipment-controller":829}],832:[function(e,t,r){var i=e("./straight-shot-equipment-controller"),n=function(e){_inherits2(n,i);var r=_createSuper(n);function n(e){var t;return _classCallCheck2(this,n),(t=r.call(this,e)).marginFactorY=2,t.maxDistanceX=600,t.shotInterval=0,t}return _createClass2(n)}();t.exports=n},{"./straight-shot-equipment-controller":836}],833:[function(e,t,r){var i=e("./straight-shot-equipment-controller"),n=function(e){_inherits2(n,i);var r=_createSuper(n);function n(e){var t;return _classCallCheck2(this,n),(t=r.call(this,e)).marginFactorY=3,t.maxDistanceX=500,t.shotInterval=0,t}return _createClass2(n)}();t.exports=n},{"./straight-shot-equipment-controller":836}],834:[function(e,t,r){var i=e("./straight-shot-equipment-controller"),n=function(e){_inherits2(n,i);var r=_createSuper(n);function n(e){var t;return _classCallCheck2(this,n),(t=r.call(this,e)).marginFactorY=2,t.maxDistanceX=600,t.shotInterval=1.5,t}return _createClass2(n)}();t.exports=n},{"./straight-shot-equipment-controller":836}],835:[function(e,t,r){var i=e("./straight-shot-equipment-controller"),n=function(e){_inherits2(n,i);var r=_createSuper(n);function n(e){var t;return _classCallCheck2(this,n),(t=r.call(this,e)).marginFactorY=2,t.maxDistanceX=600,t.shotInterval=.3,t}return _createClass2(n)}();t.exports=n},{"./straight-shot-equipment-controller":836}],836:[function(e,t,r){var i=e("./equipment-controller"),n=function(e){_inherits2(n,i);var r=_createSuper(n);function n(e){var t;return _classCallCheck2(this,n),(t=r.call(this,e)).maxDistanceX=500,t.marginFactorY=1.5,t.shotInterval=1,t}return _createClass2(n,[{key:"shouldHoldTrigger",value:function(){var t=this;if(this.equipment.character.age-this.equipment.lastShot<this.shotInterval)return!1;var r=!1;return this.equipment.character.world.forEachItemInBucket("character",function(e){e!==t.equipment.character&&(r||(r=t.isEnemyInSight(e)))}),r}},{key:"isEnemyInSight",value:function(e){if(Math.sign(e.x-this.equipment.character.x)!==this.equipment.character.facing)return!1;if(Math.abs(e.x-this.equipment.character.x)>this.maxDistanceX)return!1;if(Math.abs(e.y-this.equipment.character.y)>e.height/2*this.marginFactorY)return!1;for(var t=Math.min(this.equipment.character.x,e.x),r=Math.max(this.equipment.character.x,e.x),n=t;n<r;n+=this.equipment.character.world.tileSize)if(this.equipment.character.world.solidTileAt(n,this.equipment.character.y))return!1;return!0}}]),n}();t.exports=n},{"./equipment-controller":829}],837:[function(e,t,r){var h=e("../world/generate/mask"),n=e("../world/raycaster"),d=e("./path"),s=function(){function e(){_classCallCheck2(this,e),this.map={},this.list=[]}return _createClass2(e,[{key:"getOrCreate",value:function(e){var t=this.key(e);return this.map[t]||(this.map[t]={x:e.x,y:e.y,connections:[]},this.list.push(this.map[t])),this.map[t]}},{key:"connect",value:function(e,t){if(!this.isConnected(e,t)){var r=this.getOrCreate(e),n=this.getOrCreate(t);r.connections.push(n)}}},{key:"isConnected",value:function(e,t){var r=this.getOrCreate(e),n=this.getOrCreate(t);return r===n||0<=r.connections.indexOf(n)}},{key:"key",value:function(e){return e.x+","+e.y}}]),e}(),i=function(){function t(e){_classCallCheck2(this,t),this.world=e}return _createClass2(t,[{key:"detectPaths",value:function(){for(var o=this,a=[],e=0;e<this.world.matrix.rows-1;e++)for(var t=-1,r=null,n=0;n<this.world.matrix.cols;n++){var i=this.world.matrix.get(e,n)!==h.VOID;!(this.world.matrix.get(e+1,n)!==h.VOID)||i?(0<=t&&a.push(new d({row:e,col:r},{row:e,col:n-1})),t=-1,r=null):(r||(r=n),t++)}var s=[],l=[];a.forEach(function(e){var t={row:e.start.row,col:e.start.col-1};o.world.matrix.get(t.row,t.col)===h.VOID&&(s.push(new d(t,e.start)),a.push(new d(t,e.start)));var r={row:e.start.row,col:e.end.col+1};o.world.matrix.get(r.row,r.col)===h.VOID&&(l.push(new d(e.end,r)),a.push(new d(e.end,r)))});var u=[];s.forEach(function(e){for(var t=e.row,r=e.start.row+1;r<o.world.matrix.rows&&o.world.matrix.get(r,e.start.col)===h.VOID;r++)t=r;for(var n=0;n<a.length;n++){var i=a[n];if(!(i.start.row<=e.start.row)&&!(e.start.col<i.start.col||e.start.col>i.end.col||i.start.row>t)){u.push(new d({row:e.start.row,col:e.start.col},{row:i.start.row,col:e.start.col})),a.splice(n,1),a.push(new d({row:i.start.row,col:i.start.col},{row:i.start.row,col:e.start.col})),a.push(new d({row:i.start.row,col:e.start.col},{row:i.start.row,col:i.end.col}));break}}}),l.forEach(function(e){for(var t=e.row,r=e.start.row+1;r<o.world.matrix.rows&&o.world.matrix.get(r,e.end.col)===h.VOID;r++)t=r;for(var n=0;n<a.length;n++){var i=a[n];if(!(i.start.row<=e.start.row)&&!(e.end.col<i.start.col||e.end.col>i.end.col||i.start.row>t)){u.push(new d({row:e.start.row,col:e.end.col},{row:i.start.row,col:e.end.col})),a.splice(n,1),a.push(new d({row:i.start.row,col:i.start.col},{row:i.start.row,col:e.end.col})),a.push(new d({row:i.start.row,col:e.end.col},{row:i.start.row,col:i.end.col}));break}}});var c=[];return a.forEach(function(e){for(var t=e.start.col;t<=e.end.col-1;t++)c.push(new d({row:e.start.row,col:t},{row:e.start.row,col:t+1}))}),c.concat(s).concat(l).concat(u).filter(function(e){return e.start.row!==e.end.row||e.start.col!==e.end.col}).map(function(e){return new d({x:(e.start.col+.5)*o.world.tileSize,y:(e.start.row+.5)*o.world.tileSize},{x:(e.end.col+.5)*o.world.tileSize,y:(e.end.row+.5)*o.world.tileSize})})}},{key:"detectNodes",value:function(){var i=this,e=this.detectPaths(),o=new s;e.forEach(function(e){var r=[e.start,e.end];r.forEach(function(t){r.forEach(function(e){o.connect(t,e),o.connect(e,t)})})});var a=new n({world:this.world});return o.list.forEach(function(t){o.list.forEach(function(e){o.isConnected(t,e)||t.x!==e.x&&t.y!==e.y||i.couldConnect(t,e,a)&&(o.connect(t,e),o.connect(e,t))})}),o.list.forEach(function(r){var n=i.hasFooting(r);o.list.forEach(function(e){var t=i.hasFooting(e);(n||t)&&(o.isConnected(r,e)||i.couldConnectDiagonally(r,e,a)&&(o.connect(r,e),o.connect(e,r)))})}),o.list}},{key:"hasFooting",value:function(e){return!!this.world.solidTileAt(e.x,e.y+this.world.tileSize)}},{key:"couldConnectDiagonally",value:function(e,t,r){if(e.x===t.x||e.y===t.y)return!1;if(Math.distance(e,t)>5*this.world.tileSize)return!1;return this.couldConnect(e,t,r)&&this.couldConnect({x:e.x+25,y:e.y},{x:t.x+25,y:t.y},r)&&this.couldConnect({x:e.x-25,y:e.y},{x:t.x-25,y:t.y},r)&&this.couldConnect({x:e.x,y:e.y+25},{x:t.x,y:t.y+25},r)&&this.couldConnect({x:e.x,y:e.y-25},{x:t.x,y:t.y-25},r)}},{key:"couldConnect",value:function(e,t,r){var n=Math.distance(e,t);if(n>5*this.world.tileSize)return!1;var i=Math.atan2(t.y-e.y,t.x-e.x),o=r.castRay(e,i,n+this.world.tileSize/2,25);return n<=Math.distance(e,o)}},{key:"key",value:function(e){return e.x+","+e.y}},{key:"pointFromKey",value:function(e){var t=e.split(",");return{x:parseFloat(t[0]),y:parseFloat(t[1]),connections:[]}}}]),t}();t.exports=i},{"../world/generate/mask":960,"../world/raycaster":965,"./path":839}],838:[function(e,t,r){var h=function(){function e(){_classCallCheck2(this,e),this.map={},this.list=[]}return _createClass2(e,[{key:"add",value:function(e,t){this.has(e)||(this.list.push(t),this.map[e]=t)}},{key:"fetch",value:function(e){return this.map[e]||null}},{key:"has",value:function(e){return!!this.fetch(e)}},{key:"remove",value:function(e){var t=this.fetch(e);if(t){var r=this.list.indexOf(t);0<=r&&this.list.splice(r,1),delete this.map[e]}}}]),e}(),d=_createClass2(function e(t){var r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;_classCallCheck2(this,e),this.node=t,this.parent=r,this.distance=n}),n=function(){function t(e){_classCallCheck2(this,t),this.funcs={},this.funcs.hash=e.hash,this.funcs.neighbors=e.neighbors,this.funcs.heuristic=e.heuristic,this.funcs.isTarget=e.isTarget,this.funcs.distance=e.distance}return _createClass2(t,[{key:"hashFor",value:function(e){return this.funcs.hash(e)}},{key:"neighborsFor",value:function(e){return this.funcs.neighbors(e)}},{key:"heuristicFor",value:function(e,t){return this.funcs.heuristic(e,t)}},{key:"isTarget",value:function(e,t){return this.funcs.isTarget(e,t)}},{key:"distanceBetween",value:function(e,t){return this.funcs.distance(e,t)}},{key:"findPath",value:function(e,t){var r,n=this,i=new h,o=new h;e.forEach(function(e){i.add(n.hashFor(e),new d(e))});for(var a=[],s=0;s<100;s++){var l=this.closestExpandable(i,t);if(!l)break;if(this.isTarget(l.node,t)){r=l;break}this.expand(l,i,o),a.push(l.node)}for(var u=[],c=r;c;)u.unshift(c.node),c=c.parent;return{found:!!r,expandedOrder:a,steps:u}}},{key:"closestExpandable",value:function(e,r){var n,i=this,o=null;return e.list.forEach(function(e){var t=i.heuristicFor(e.node,r)+e.distance;(!o||t<n)&&(o=e,n=t)}),o}},{key:"expand",value:function(i,o,a){var s=this,e=this.hashFor(i.node);a.add(e,i),o.remove(e),this.neighborsFor(i.node).forEach(function(e){var t=s.hashFor(e),r=i.distance+s.distanceBetween(i.node,e),n=a.fetch(t);n?n.distance>r&&(n.distance=r,n.parent=i,console.log("shortcut"),o.add(t,n),a.remove(n)):o.add(t,new d(e,i,r))})}}]),t}();t.exports=n},{}],839:[function(e,t,r){var n=_createClass2(function e(t,r){_classCallCheck2(this,e),this.start=t,this.end=r});t.exports=n},{}],840:[function(e,t,r){var n=function(){function e(){_classCallCheck2(this,e)}return _createClass2(e,[{key:"ownsCyclableState",value:function(e){throw new Error}},{key:"canSendCyclableUpdate",value:function(e){throw new Error}},{key:"ownsControllerState",value:function(e){throw new Error}},{key:"maxPredictionForCyclable",value:function(e){throw new Error}},{key:"ownsWorld",value:function(){throw new Error}},{key:"ownsTimerSettings",value:function(){throw new Error}},{key:"canSendEvent",value:function(e){throw new Error}},{key:"canApplyLocalEvent",value:function(e){throw new Error}},{key:"trustsRemoteEvent",value:function(e){throw new Error}},{key:"shouldForwardEvent",value:function(e){throw new Error}}]),e}();t.exports=n},{}],841:[function(e,t,r){var n=e("./authority"),i=e("../../shared/world/events/addition"),o=e("../../shared/world/events/damage"),a=e("../../shared/world/events/bump"),s=e("../../shared/world/events/jump"),l=e("../../shared/world/events/land"),u=e("../../shared/world/events/equipment-shot"),c=e("../elements/equipment-holder"),h=function(e){_inherits2(r,n);var t=_createSuper(r);function r(){var e;return _classCallCheck2(this,r),(e=t.call(this)).characterId=null,e}return _createClass2(r,[{key:"ownsCyclableState",value:function(e){return e.id===this.characterId}},{key:"canSendCyclableUpdate",value:function(e){return e.id===this.characterId}},{key:"ownsControllerState",value:function(e){return e.characterId===this.characterId}},{key:"maxPredictionForCyclable",value:function(e){return e.decorative?Number.MAX_VALUE:e instanceof c&&e.owner===this.characterId?2:5}},{key:"ownsWorld",value:function(){return!1}},{key:"ownsTimerSettings",value:function(){return!1}},{key:"canSendEvent",value:function(e){return e instanceof i&&e.elementState.owner===this.characterId||(e instanceof a&&e.bumpedId===this.characterId||(e instanceof u&&e.equipmentHolderState.owner===this.characterId||(e instanceof s&&e.characterId===this.characterId||(e instanceof l&&e.characterId===this.characterId||e instanceof o&&e.characterId===this.characterId))))}},{key:"canApplyLocalEvent",value:function(e){return!(e instanceof o)&&this.canSendEvent(e)}},{key:"trustsRemoteEvent",value:function(e){return!(e instanceof a&&e.bumpedId===this.characterId)&&(!(e instanceof u&&e.equipmentHolderState.owner===this.characterId)&&(!(e instanceof i&&e.elementState.owner===this.characterId)&&(!(e instanceof s&&e.characterId===this.characterId)&&(!(e instanceof l&&e.characterId===this.characterId)&&!(e instanceof o)))))}},{key:"shouldForwardEvent",value:function(e){return!1}}]),r}();t.exports=h},{"../../shared/world/events/addition":940,"../../shared/world/events/bump":942,"../../shared/world/events/damage":943,"../../shared/world/events/equipment-shot":945,"../../shared/world/events/jump":952,"../../shared/world/events/land":953,"../elements/equipment-holder":868,"./authority":840}],842:[function(e,t,r){var n=e("./authority"),i=function(e){_inherits2(r,n);var t=_createSuper(r);function r(){return _classCallCheck2(this,r),t.apply(this,arguments)}return _createClass2(r,[{key:"ownsCyclableState",value:function(e){return!0}},{key:"canSendCyclableUpdate",value:function(e){return!0}},{key:"ownsControllerState",value:function(e){return!0}},{key:"maxPredictionForCyclable",value:function(e){return 0}},{key:"ownsWorld",value:function(){return!0}},{key:"ownsTimerSettings",value:function(){return!0}},{key:"canSendEvent",value:function(e){return!1}},{key:"canApplyLocalEvent",value:function(e){return!0}},{key:"trustsRemoteEvent",value:function(e){return!1}},{key:"shouldForwardEvent",value:function(e){return!1}}]),r}();t.exports=i},{"./authority":840}],843:[function(e,t,r){var n=e("./authority"),i=function(e){_inherits2(r,n);var t=_createSuper(r);function r(){return _classCallCheck2(this,r),t.apply(this,arguments)}return _createClass2(r,[{key:"ownsCyclableState",value:function(){return!1}},{key:"canSendCyclableUpdate",value:function(){return!1}},{key:"ownsControllerState",value:function(){return!1}},{key:"maxPredictionForCyclable",value:function(){return Number.MAX_VALUE}},{key:"ownsWorld",value:function(){return!1}},{key:"ownsTimerSettings",value:function(){return!1}},{key:"canSendEvent",value:function(){return!1}},{key:"canApplyLocalEvent",value:function(){return!1}},{key:"trustsRemoteEvent",value:function(){return!0}},{key:"shouldForwardEvent",value:function(){return!1}}]),r}();t.exports=i},{"./authority":840}],844:[function(e,t,r){var i=e("./authority"),o=e("../world/events/bump"),a=(e("../world/events/damage"),e("../world/events/addition")),s=e("../world/events/jump"),l=e("../world/events/land"),u=e("../world/events/equipment-shot"),n=function(e){_inherits2(n,i);var r=_createSuper(n);function n(e){var t;return _classCallCheck2(this,n),(t=r.call(this)).players=e,t}return _createClass2(n,[{key:"isBotOrNotPlayer",value:function(e){var t=this.players.playerByCharacterId(e);return!t||t.isBot}},{key:"isBot",value:function(e){var t=this.players.playerByCharacterId(e);return t&&t.isBot}},{key:"ownsCyclableState",value:function(e){return"character-health"===e.type||this.isBotOrNotPlayer(e.id)}},{key:"canSendCyclableUpdate",value:function(){return!0}},{key:"ownsControllerState",value:function(e){return this.isBotOrNotPlayer(e.characterId)}},{key:"maxPredictionForCyclable",value:function(e){return e.decorative?Number.MAX_VALUE:0}},{key:"ownsWorld",value:function(){return!0}},{key:"ownsTimerSettings",value:function(){return!0}},{key:"canSendEvent",value:function(e){return e instanceof a?this.isBot(e.elementState.owner):e instanceof u?this.isBot(e.equipmentHolderState.owner):e instanceof s?this.isBot(e.characterId):e instanceof l?this.isBot(e.characterId):!(e instanceof u)}},{key:"canApplyLocalEvent",value:function(e){return this.canSendEvent(e)}},{key:"trustsRemoteEvent",value:function(){return!0}},{key:"shouldForwardEvent",value:function(e){return e instanceof o||(e instanceof a||(e instanceof s||(e instanceof l||e instanceof u)))}}]),n}();t.exports=n},{"../world/events/addition":940,"../world/events/bump":942,"../world/events/damage":943,"../world/events/equipment-shot":945,"../world/events/jump":952,"../world/events/land":953,"./authority":840}],845:[function(e,t,r){var n=function(){function e(){_classCallCheck2(this,e)}return _createClass2(e,[{key:"send",value:function(e,t){throw new Error}},{key:"on",value:function(e){throw new Error}},{key:"disconnect",value:function(){throw new Error}},{key:"connected",value:function(){throw new Error}},{key:"disconnected",value:function(){throw new Error}}]),e}();t.exports=n},{}],846:[function(e,t,r){var n=function(){function e(){_classCallCheck2(this,e),this.lastSentStateId=null,this.lastReceivedStateId=null,this.trackingStateId=null,this.trackingStateSentTime=null,this.latency=0}return _createClass2(e,[{key:"backlog",get:function(){return null===this.lastSentStateId?0:null===this.lastReceivedStateId?0:this.lastSentStateId-this.lastReceivedStateId}},{key:"isLagging",value:function(e){return this.backlog>e}},{key:"markReceived",value:function(e){this.lastReceivedStateId=e,this.trackingStateId&&this.lastReceivedStateId>=this.trackingStateId&&(this.latency=Date.now()-this.trackingStateSentTime,this.trackingStateId=null,this.trackingStateSentTime=null)}},{key:"markSent",value:function(e){this.lastSentStateId=e,null===this.trackingStateId&&(this.trackingStateId=this.lastSentStateId,this.trackingStateSentTime=Date.now())}}]),e}();t.exports=n},{}],847:[function(e,t,r){var n=e("rxjs/Rx"),i=e("./channel"),o=function(e){_inherits2(r,i);var t=_createSuper(r);function r(){var e;return _classCallCheck2(this,r),(e=t.call(this)).isDisconnected=!1,e.outgoing=new n.Subject,e.incoming=new n.Subject,e.disconnectedSubject=new n.Subject,e}return _createClass2(r,[{key:"send",value:function(e,t){this.isDisconnected||this.outgoing.next({type:e,data:t})}},{key:"on",value:function(t){return this.incoming.filter(function(e){return e.type===t}).map(function(e){return e.data})}},{key:"receive",value:function(e,t){this.isDisconnected||this.incoming.next({type:e,data:t})}},{key:"disconnect",value:function(){this.isDisconnected||(this.isDisconnected=!0,this.disconnectedSubject.next(!0))}},{key:"connected",value:function(){return n.Observable.never()}},{key:"disconnected",value:function(){return this.disconnectedSubject}}]),r}();t.exports=o},{"./channel":845,"rxjs/Rx":379}],848:[function(e,t,r){t.exports={STATE:"state",INITIALIZATION:"init",SCOREBOARD:"scoreboard",RESPAWN:"respawn",CAMERA_TARGET:"camera-target",HUD_SETTINGS:"hud-settings",HUD_MESSAGE:"hud-message",SCORE_CHANGE:"score-change",PLAYER_SETTINGS:"player-settings",LOG_ENTRY:"log-entry",REPLAY:"replay",REPLAY_WATCHED:"replay-watched",P2P:"p2p",P2P_ROLE:" p2p-role",P2P_NEW_GUEST:" p2p-new-guest",WEBRTC_OFFER:"offer",WEBRTC_ANSWER:"answer",WEBRTC_ICE_CANDIDATE:"ice",CHAT_MESSAGE:"chat-message",POLL_OPEN:"poll-open",POLL_CLOSE:"poll-close",POLL_RESPONSE:"poll-response",POLL_REQUEST:"poll-request"}},{}],849:[function(e,t,r){var i=e("./channel"),o=e("./message-types"),n=function(e){_inherits2(n,i);var r=_createSuper(n);function n(e){var t;return _classCallCheck2(this,n),(t=r.call(this)).io=e.io,t.peerId=e.peerId,t}return _createClass2(n,[{key:"send",value:function(e,t){this.io.send(o.P2P,{peerId:this.peerId,type:e,data:t})}},{key:"on",value:function(t){var r=this;return this.io.on(o.P2P).filter(function(e){return e.type===t&&e.senderId===r.peerId}).map(function(e){return e.data})}},{key:"disconnect",value:function(){}},{key:"connected",value:function(){return this.io.connected()}},{key:"disconnected",value:function(){return this.io.disconnected()}}]),n}();t.exports=n},{"./channel":845,"./message-types":848}],850:[function(e,t,r){var i=e("rxjs/Rx"),o=e("./channel"),n=function(e){_inherits2(n,o);var r=_createSuper(n);function n(e){var t;return _classCallCheck2(this,n),(t=r.call(this)).socket=e,t}return _createClass2(n,[{key:"send",value:function(e,t){this.socket.emit(e,t)}},{key:"on",value:function(r){var n=this;return i.Observable.create(function(t){var e=function(e){return t.next(e)};return n.socket.on(r,e),function(){return n.socket.removeListener(r,e)}})}},{key:"disconnect",value:function(){this.socket.disconnect()}},{key:"connected",value:function(){return this.on("connect")}},{key:"disconnected",value:function(){return this.on("disconnect")}}]),n}();t.exports=n},{"./channel":845,"rxjs/Rx":379}],851:[function(e,t,r){var n=e("rxjs/Rx"),i=e("./channel"),o=function(e){_inherits2(r,i);var t=_createSuper(r);function r(){return _classCallCheck2(this,r),t.apply(this,arguments)}return _createClass2(r,[{key:"send",value:function(){}},{key:"on",value:function(){return n.Observable.never()}},{key:"disconnect",value:function(){}},{key:"connected",value:function(){return n.Observable.never()}},{key:"disconnected",value:function(){return n.Observable.never()}}]),r}();t.exports=o},{"./channel":845,"rxjs/Rx":379}],852:[function(e,t,r){t.exports={GAME_VERSION:"0.2.6"}},{}],853:[function(e,t,r){var n=e("./remote-hero-controller"),i=function(){function e(){_classCallCheck2(this,e)}return _createClass2(e,[{key:"createController",value:function(e,t){return"hero-controller"===t.type?this.createHeroController(e,t):null}},{key:"createHeroController",value:function(e,t){var r=e.world.cyclableById(t.characterId);return r?new n({id:t.id,character:r}):null}}]),e}();t.exports=i},{"./remote-hero-controller":857}],854:[function(e,t,r){var n=e("../util/random-id"),i=function(){function t(e){_classCallCheck2(this,t),this.id=e.id||n(),this.character=e.character}return _createClass2(t,[{key:"cycle",value:function(e){}},{key:"nonCharacterCycle",value:function(e){}},{key:"type",get:function(){throw new Error("Must implement type property")}},{key:"state",value:function(){return{id:this.id,type:this.type,characterId:this.character.id}}},{key:"parseState",value:function(e){}}]),t}();t.exports=i},{"../util/random-id":934}],855:[function(e,t,r){var i=e("./controller"),n=function(e){_inherits2(n,i);var r=_createSuper(n);function n(e){var t;return _classCallCheck2(this,n),(t=r.call(this,e)).holdingJump=!1,t.maxHoldingJumpTime=.15,t}return _createClass2(n,[{key:"type",get:function(){return"hero-controller"}},{key:"state",value:function(){var e=_get(_getPrototypeOf(n.prototype),"state",this).call(this);return e.holdingJump=this.holdingJump,e.currentInputs=this.currentInputs(),e}},{key:"parseState",value:function(e){_get(_getPrototypeOf(n.prototype),"parseState",this).call(this,e),this.holdingJump=e.holdingJump}},{key:"cycle",value:function(e){if(this.character.dead)this.character.direction=0;else{var t=this.currentInputs();if(this.character.direction=t.direction,this.cameraOffset=t.cameraOffset,this.character.landed&&(this.holdingJumpTime=0),t.jump){var r=this.holdingJump;this.holdingJumpTime<this.maxHoldingJumpTime&&(this.holdingJumpTime=Math.min(this.holdingJumpTime+e,this.maxHoldingJumpTime),this.character.jump(this.holdingJumpTime/this.maxHoldingJumpTime,r)),this.holdingJump=!0}else this.holdingJump=!1,this.holdingJumpTime=0;t.trigger?(this.character.triggeringEquipment||(this.character.triggeringEquipmentStart=this.character.age),this.character.triggeringEquipment=!0):this.character.triggeringEquipment=!1}}},{key:"currentInputs",value:function(){return this.defaultInputs()}},{key:"defaultInputs",value:function(){return{direction:0,cameraOffset:null,jump:!1,trigger:!1}}}]),n}();t.exports=n},{"./controller":854}],856:[function(e,t,r){var n=e("./hero-controller"),i=e("../ai/decisions/equipment-item-decision"),o=e("../ai/decisions/attack-decision"),a=e("../ai/decisions/health-item-decision"),s=e("../ai/decisions/crown-item-decision"),l=e("../elements/items/health-item"),u=e("../elements/items/equipment-item"),h=e("../elements/items/shield-item"),d=e("../elements/items/crown-item"),p=e("../ai/path-finder"),c=function(e){_inherits2(c,n);var r=_createSuper(c);function c(e){var t;return _classCallCheck2(this,c),(t=r.call(this,e)).nodes=e.nodes,t.equipmentControllerFactory=e.equipmentControllerFactory,t.nextAutomaticChange=0,t.path=[],t.equipmentController=null,t.currentDecision=null,t}return _createClass2(c,[{key:"cycle",value:function(e){if(this.character.world){_get(_getPrototypeOf(c.prototype),"cycle",this).call(this,e),this.nextAutomaticChange-=e;var t=this.path[0];if(t){var r=Math.abs(t.x-this.character.x),n=Math.abs(t.y-this.character.y);r<=20&&n<=20&&(t=this.path.shift(),this.nextAutomaticChange=this.estimateTimeToNextNode())}if(this.nextAutomaticChange<=0||!t){var i=this.decisionsLeaderboard(),o=0;if(this.currentDecision)for(;o<i.length&&this.currentDecision.score()<i[o].score();)o++;else o=i.length;.25<o/i.length||!this.currentDecision||0===this.currentDecision.score()?this.pickNewDecision(i):this.findPathForDecision(this.currentDecision),this.nextAutomaticChange=this.estimateTimeToNextNode()}}}},{key:"estimateTimeToNextNode",value:function(){var e=this.path[0];if(!e)return 2;var t=Math.distance(e,this.character)/this.character.speed;return Math.max(t,1)}},{key:"decisionsLeaderboard",value:function(){var t=this;if(!this.character.world)return[];var r=[];return this.character.world.forEachItemInBucket("character",function(e){e!==t.character&&r.push(new o(t.character,e,t))}),this.character.world.forEachItemInBucket("item",function(e){e instanceof d?r.push(new s(t.character,e)):e instanceof l||e instanceof h?r.push(new a(t.character,e)):e instanceof u&&r.push(new i(t.character,e,t))}),r.sort(function(e,t){return t.score()-e.score()}),r}},{key:"pickNewDecision",value:function(e){for(var t=0;t<e.length;t++){if(this.findPathForDecision(e[t]))break}this.currentTarget=this.currentDecision?this.currentDecision.target():null}},{key:"findPathForDecision",value:function(t){var n=this;if(this.currentDecision=t,this.currentDecision){var e=new p({hash:function(e){return e.x+","+e.y},neighbors:function(t){var r=!!n.character.world.solidTileAt(t.x,t.y+n.character.world.tileSize);return t.connections.filter(function(e){return e.y>=t.y||r&&Math.abs(e.y-t.y)<5*n.character.world.tileSize})},heuristic:function(e){return Math.distance(e,t.target())},isTarget:function(e){return t.isTarget(e)},distance:function(e,t){return Math.distance(e,t)}}),r=this.findNearestNodeToCharacter(),i=e.findPath([r],this.currentDecision.target());return this.path=i.steps,0<this.path.length}this.path=[]}},{key:"findNearestNodeToCharacter",value:function(){var r=this,e=this.nodes.filter(function(e){return e.y>r.character.y-r.character.world.tileSize/2});0===e.length&&(e=this.nodes);var n,i=null;return e.forEach(function(e){var t=Math.distance(e,r.character);(!i||t<n)&&(i=e,n=t)}),i}},{key:"currentInputs",value:function(){var e=_get(_getPrototypeOf(c.prototype),"currentInputs",this).call(this);if(!this.character.world)return e;var t=this.path[0];if(t){var r=Math.abs(t.x-this.character.x),n=Math.abs(t.y-this.character.y);20<r||Math.sign(t.x-this.character.x)!=this.character.facing?e.direction=Math.sign(t.x-this.character.x):this.currentDecision&&Math.sign(this.currentDecision.x-this.character.x)!=this.character.facing&&(e.direction=Math.sign(this.currentDecision.x-this.character.x)),20<n&&t.y<this.character.y-this.character.height/2&&(e.jump=!0),r>2*this.character.world.tileSize&&t.y>this.character.y&&n<1.5*this.character.world.tileSize&&(e.jump=!0);var i=this.character.world.environment.gravity.y,o=this.character.vY,a=this.character.y,s=-o/i,l=i*Math.pow(s,2)/2+o*s+a;this.character.world.solidTileAt(this.character.x,l-this.character.height/2*1.5)&&(e.jump=!1)}else this.currentTarget&&20<Math.abs(this.currentTarget.x-this.character.x)&&Math.sign(this.currentTarget.x-this.character.x)!==this.character.facing&&(e.direction=Math.sign(this.currentTarget.x-this.character.x));var u=this.character.equipmentHolders()[0];return this.equipmentController&&u&&this.equipmentController.equipment===u.equipment||(this.equipmentController=null),u.equipment&&!this.equipmentController&&(this.equipmentController=this.equipmentControllerFactory.createEquipmentController(u.equipment)),this.equipmentController&&(e.trigger=this.equipmentController.shouldHoldTrigger()),e}}]),c}();t.exports=c},{"../ai/decisions/attack-decision":823,"../ai/decisions/crown-item-decision":824,"../ai/decisions/equipment-item-decision":826,"../ai/decisions/health-item-decision":827,"../ai/path-finder":838,"../elements/items/crown-item":869,"../elements/items/equipment-item":870,"../elements/items/health-item":871,"../elements/items/shield-item":873,"./hero-controller":855}],857:[function(e,t,r){var i=e("./hero-controller"),n=function(e){_inherits2(n,i);var r=_createSuper(n);function n(e){var t;return _classCallCheck2(this,n),(t=r.call(this,e)).inputs=null,t}return _createClass2(n,[{key:"parseState",value:function(e){_get(_getPrototypeOf(n.prototype),"parseState",this).call(this,e),this.inputs=e.currentInputs}},{key:"currentInputs",value:function(){return this.inputs||_get(_getPrototypeOf(n.prototype),"currentInputs",this).call(this)}}]),n}();t.exports=n},{"./hero-controller":855}],858:[function(e,t,r){var i=e("rxjs/Rx"),o=e("./positioned-element"),a=e("../world/events/bump"),n=function(e){_inherits2(n,o);var r=_createSuper(n);function n(e){var t;return _classCallCheck2(this,n),(t=r.call(this,e)).angle=e.angle||0,t.rx.bumped=new i.Subject,t}return _createClass2(n,[{key:"width",get:function(){return 80}},{key:"height",get:function(){return 20}},{key:"type",get:function(){return"bumper"}},{key:"state",value:function(){var e=_get(_getPrototypeOf(n.prototype),"state",this).call(this);return e.angle=this.angle,e}},{key:"parseState",value:function(e){_get(_getPrototypeOf(n.prototype),"parseState",this).call(this,e),this.angle=e.angle}},{key:"hasSignificantStateChanges",value:function(e){return!!_get(_getPrototypeOf(n.prototype),"hasSignificantStateChanges",this).call(this,e)||e.angle!==this.angle}},{key:"cycle",value:function(e){_get(_getPrototypeOf(n.prototype),"cycle",this).call(this,e),this.checkHit()}},{key:"currentSpeed",value:function(){return 0}},{key:"checkHit",value:function(){var n=this;this.world.forEachItemInBucket("character",function(e){if(!(Math.abs(e.x-n.x)>n.width/2||Math.abs(e.y-n.y)>(n.height+e.height)/2)){var t=Math.atan2(e.vY,e.vX),r=Math.normalizeAngle(t-n.angle);if(Math.abs(r)<Math.PI/2)return!1;e.world.addEvent(new a(n.id,e.id))}})}},{key:"bump",value:function(e){e.launch(this.angle,10*e.world.environment.standardJumpPower),this.rx.bumped.next()}}]),n}();t.exports=n},{"../world/events/bump":942,"./positioned-element":876,"rxjs/Rx":379}],859:[function(e,t,r){var i=e("rxjs/Rx"),o=e("../positioned-element"),n=function(e){_inherits2(n,o);var r=_createSuper(n);function n(e){var t;return _classCallCheck2(this,n),(t=r.call(this,e)).scale=e.scale||1,t.gravityModifier={x:e.gravityModifierX||1,y:e.gravityModifierY||1},t.enemyTypes=e.enemyTypes||[],t.recoverTime=e.recoverTime||1,t.triggeringEquipmentStart=!!e.triggeringEquipmentStart,t.triggeringEquipment=!!e.triggeringEquipment,t}return _createClass2(n,[{key:"equipmentHolders",value:function(){return this.world.itemsInBucket("equipments-"+this.id)||[]}},{key:"buckets",value:function(){return["character"]}},{key:"healthElement",value:function(){if(!this.world)return null;var e=this.world.itemsInBucket("health-"+this.id);return e&&e.length?this.world.itemsInBucket("health-"+this.id)[0]:null}},{key:"healthElementSubject",value:function(){return this.world?this.world.itemsInBucketSubject("health-"+this.id).map(function(e){return e&&e.length?e[0]:null}):i.Observable.never()}},{key:"diedSubject",value:function(){return this.healthElementSubject().filter(function(e){return!!e}).first().flatMap(function(e){return e.rx.died.first()})}},{key:"health",get:function(){var e=this.healthElement();return e?e.health:0}},{key:"maxHealth",get:function(){var e=this.healthElement();return e?e.maxHealth:0}},{key:"dead",get:function(){return this.health<=0}},{key:"state",value:function(){var e=_get(_getPrototypeOf(n.prototype),"state",this).call(this);return e.triggeringEquipment=this.triggeringEquipment,e.triggeringEquipmentStart=this.triggeringEquipmentStart,e}},{key:"parseState",value:function(e){_get(_getPrototypeOf(n.prototype),"parseState",this).call(this,e),this.triggeringEquipment=e.triggeringEquipment,this.triggeringEquipmentStart=e.triggeringEquipmentStart}},{key:"hasSignificantStateChanges",value:function(e){return!!_get(_getPrototypeOf(n.prototype),"hasSignificantStateChanges",this).call(this,e)||this.triggeringEquipmentStart!==e.triggeringEquipmentStart}},{key:"isInvincible",value:function(){var e=this.healthElement();return!!e&&e.isInvincible()}},{key:"isRecoveringFromDamage",value:function(){var e=this.healthElement();return!!e&&e.isRecoveringFromDamage()}},{key:"recoveringTimeLeft",value:function(){var e=this.healthElement();return e?e.recoveringTimeLeft():0}},{key:"gravityYSign",value:function(){return 0<this.gravityModifier.y?1:-1}},{key:"inflictDamage",value:function(e,t){var r=this.healthElement();r&&r.damage(e,t)}}]),n}();t.exports=n},{"../positioned-element":876,"rxjs/Rx":379}],860:[function(e,t,r){var n=e("./character"),p=e("../../world/tiles/tile"),i=e("../../world/events/jump"),o=e("../../world/events/land"),a=function(e){_inherits2(d,n);var r=_createSuper(d);function d(e){var t;return _classCallCheck2(this,d),(t=r.call(this,e)).speed=e.speed,t.direction=0,t.facing=1,t.vX=0,t.vY=0,t.landed=!1,t.lastLandedAge=0,t.jumpCount=0,t.maxJumpCount=1,t.updateJumpAngle(),t}return _createClass2(d,[{key:"width",get:function(){return 46}},{key:"height",get:function(){return 52}},{key:"type",get:function(){return"walking-character"}},{key:"state",value:function(){var e=_get(_getPrototypeOf(d.prototype),"state",this).call(this);return e.vX=this.vX,e.vY=this.vY,e.direction=this.direction,e.facing=this.facing,e.speed=this.speed,e}},{key:"parseState",value:function(e){_get(_getPrototypeOf(d.prototype),"parseState",this).call(this,e),this.vX=e.vX,this.vY=e.vY,this.direction=e.direction,this.facing=e.facing,this.speed=e.speed}},{key:"hasSignificantStateChanges",value:function(e){return!!_get(_getPrototypeOf(d.prototype),"hasSignificantStateChanges",this).call(this,e)||(this.vX!==e.vX||(this.vY!==e.vY||(this.facing!==e.facing||(this.direction!==e.direction||this.speed!==e.speed))))}},{key:"updateJumpAngle",value:function(){this.jumpAngle=this.gravityYSign()*-Math.PI/2}},{key:"cycle",value:function(e){this.x+=this.vX*e,this.y+=this.vY*e,0!==this.direction&&(this.facing=Math.sign(this.direction));var t=this.readjust();(this.landed&&(this.lastLandedAge=this.age),this.world&&(0<this.gravityYSign()&&!(t&p.UP)?this.landed=!1:this.gravityYSign()<0&&!(t&p.DOWN)&&(this.landed=!1),p.LEFT,p.RIGHT),this.landed)||.05<=this.age-this.lastLandedAge&&(this.jumpCount=Math.max(1,this.jumpCount));var r=!1,n=1;if(this.landed){var i=0<this.gravityYSign()?this.y+this.height/2:this.y-this.height/2,o=this.x-this.width/2,a=this.x+this.width/2,s=this.world.solidTileAt(o,i),l=this.world.solidTileAt(a,i);(s||l)&&(r=!0,n=s&&l?Math.max(s.frictionFactor,l.frictionFactor):s?s.frictionFactor:l.frictionFactor)}if(this.world){if(this.vX+=this.world.environment.gravity.x*this.gravityModifier.x*e,Math.sign(this.direction)!==Math.sign(this.vX)){var u=r?this.world.environment.friction:this.world.environment.airFriction,c=this.speed*n/u;c*e>Math.abs(this.vX)?this.vX=0:this.vX-=c*e*Math.sign(this.vX)}if(this.direction||Math.sign(this.direction)===Math.sign(this.vX)){var h=this.speed*n/this.world.environment.friction;Math.abs(this.vX)<this.speed&&(this.vX+=this.direction*h*e)}r||(this.vY=Math.between(-this.world.environment.maxVerticalCharacterSpeed,this.vY+e*this.world.environment.gravity.y*this.gravityModifier.y,this.world.environment.maxVerticalCharacterSpeed))}_get(_getPrototypeOf(d.prototype),"cycle",this).call(this,e)}},{key:"readjust",value:function(){var o=this,a=_get(_getPrototypeOf(d.prototype),"readjust",this).call(this);return a&p.UP?this.land():a&p.DOWN&&this.hitHead(),this.world.forEachItemInBucket("character",function(e){if(e.id!==o.id){var t=o.width/2,r=o.x-e.x,n=o.y-e.y;if(!(Math.abs(r)>=t||Math.abs(n)>(e.height+o.height)/2||e.x>o.x&&a&p.RIGHT||e.x<o.x&&a&p.LEFT)){var i=r/t;o.vX=i*o.speed}}}),a}},{key:"launch",value:function(e,t){var r=Math.atan2(this.vY,this.vX);t=Math.min(t,this.world.environment.maxLaunchSpeed-r),this.vX+=Math.cos(e)*t,this.vY+=Math.sin(e)*t,this.landed=!1}},{key:"jump",value:function(e,t){if(e=void 0===e?1:e,t||this.jumpCount++,!(this.jumpCount>this.maxJumpCount)){var r=this.world.environment.standardJumpPower,n=this.landed;this.vY=0,this.launch(this.jumpAngle,e*r),n&&this.world.addEvent(new i(this.id))}}},{key:"land",value:function(){var e=this.vY;0<this.vY&&(this.vY=0),0<this.gravityYSign()&&(!this.landed&&200<e&&this.world.addEvent(new o(this.id)),this.landed=!0,this.lastLandedAge=this.age,this.jumpCount=0),this.updateJumpAngle()}},{key:"hitHead",value:function(){var e=this.vY;this.vY<0&&(this.vY=0),this.gravityYSign()<0&&(!this.landed&&e<200&&this.world.addEvent(new o(this.id)),this.landed=!0,this.lastLandedAge=this.age,this.jumpCount=0),this.updateJumpAngle()}},{key:"hurt",value:function(e,t,r){var n=r||t,i=n?Math.atan2(this.y-n.y,this.x-n.x):-Math.PI/2;this.launch(i,1200),_get(_getPrototypeOf(d.prototype),"hurt",this).call(this,e,t,r)}},{key:"currentSpeed",value:function(){return Math.pointDistance(0,0,this.vX,this.vY)}}]),d}();t.exports=a},{"../../world/events/jump":952,"../../world/events/land":953,"../../world/tiles/tile":972,"./character":859}],861:[function(e,t,r){var n=e("./world-element"),i=function(e){_inherits2(r,n);var t=_createSuper(r);function r(){return _classCallCheck2(this,r),t.apply(this,arguments)}return _createClass2(r,[{key:"type",get:function(){return"crown"}},{key:"buckets",value:function(){return["crown"]}}]),r}();t.exports=i},{"./world-element":885}],862:[function(e,t,r){var n=e("./world-decoration"),i=function(e){_inherits2(r,n);var t=_createSuper(r);function r(){return _classCallCheck2(this,r),t.apply(this,arguments)}return _createClass2(r,[{key:"type",get:function(){return"bush"}}]),r}();t.exports=i},{"./world-decoration":865}],863:[function(e,t,r){var n=e("./world-decoration"),i=function(e){_inherits2(r,n);var t=_createSuper(r);function r(){return _classCallCheck2(this,r),t.apply(this,arguments)}return _createClass2(r,[{key:"type",get:function(){return"grass"}}]),r}();t.exports=i},{"./world-decoration":865}],864:[function(e,t,r){var n=e("./world-decoration"),i=function(e){_inherits2(r,n);var t=_createSuper(r);function r(){return _classCallCheck2(this,r),t.apply(this,arguments)}return _createClass2(r,[{key:"type",get:function(){return"tree"}}]),r}();t.exports=i},{"./world-decoration":865}],865:[function(e,t,r){var n=e("../positioned-element"),i=function(e){_inherits2(r,n);var t=_createSuper(r);function r(){return _classCallCheck2(this,r),t.apply(this,arguments)}return _createClass2(r,[{key:"decorative",get:function(){return!0}},{key:"hasSignificantStateChanges",value:function(){return!1}}]),r}();t.exports=i},{"../positioned-element":876}],866:[function(e,t,r){var n=e("./characters/walking-character"),i=e("./projectiles/rocket"),o=e("./projectiles/plasma-bullet"),a=e("./projectiles/grenade"),s=e("./projectiles/fire-ball"),l=e("./projectiles/bullet"),u=e("./equipment-holder"),c=e("../equipments/equipment-factory"),h=e("./perks/character-health"),d=e("./bumper"),p=e("./environment-element"),f=e("./crown"),m=e("./items/health-item"),v=e("./items/equipment-item"),b=e("./items/shield-item"),y=e("./items/crown-item"),g=function(){function e(){_classCallCheck2(this,e),this.equipmentFactory=new c}return _createClass2(e,[{key:"createCyclable",value:function(e){return"walking-character"===e.type?new n(e):"rocket"===e.type?new i(e):"item-health"===e.type?new m(e):"item-equipment"===e.type?new v(e,this.equipmentFactory):"item-shield"===e.type?new b(e):"item-crown"===e.type?new y(e):"equipment-holder"===e.type?new u(e,this.equipmentFactory):"bumper"===e.type?new d(e):"plasma-bullet"===e.type?new o(e):"bullet"===e.type?new l(e):"grenade"===e.type?new a(e):"environment"===e.type?new p(e):"fire-ball"===e.type?new s(e):"character-health"===e.type?new h(e):"crown"===e.type?new f(e):null}}]),e}();t.exports=g},{"../equipments/equipment-factory":886,"./bumper":858,"./characters/walking-character":860,"./crown":861,"./environment-element":867,"./equipment-holder":868,"./items/crown-item":869,"./items/equipment-item":870,"./items/health-item":871,"./items/shield-item":873,"./perks/character-health":874,"./projectiles/bullet":877,"./projectiles/fire-ball":879,"./projectiles/grenade":880,"./projectiles/plasma-bullet":882,"./projectiles/rocket":883}],867:[function(e,t,r){var n=e("./world-element"),i=function(e){_inherits2(i,n);var r=_createSuper(i);function i(e){var t;return _classCallCheck2(this,i),(t=r.call(this,e)).gravity={x:0,y:1800},t.standardJumpPower=1e3,t.friction=.2,t.airFriction=.2,t.timeFactor=1,t.maxLaunchSpeed=2e3,t.maxVerticalCharacterSpeed=1e3,t}return _createClass2(i,[{key:"type",get:function(){return"environment"}},{key:"state",value:function(){var e=_get(_getPrototypeOf(i.prototype),"state",this).call(this);return e.gravity=this.gravity,e.standardJumpPower=this.standardJumpPower,e.friction=this.friction,e.airFriction=this.friction,e.timeFactor=this.timeFactor,e.maxLaunchSpeed=this.maxLaunchSpeed,e}},{key:"parseState",value:function(e){_get(_getPrototypeOf(i.prototype),"parseState",this).call(this,e),this.gravity=e.gravity,this.standardJumpPower=e.standardJumpPower,this.friction=e.friction,this.airFriction=e.airFriction,this.timeFactor=e.timeFactor,this.maxLaunchSpeed=e.maxLaunchSpeed}},{key:"hasSignificantStateChanges",value:function(e){return!!_get(_getPrototypeOf(i.prototype),"hasSignificantStateChanges",this).call(this,e)||(this.gravity.x!==e.gravity||(this.standardJumpPower!==e.standardJumpPower||(this.friction!==e.friction||(this.airFriction!==e.airFriction||(this.timeFactor!==e.timeFactor||(this.maxLaunchSpeed!==e.maxLaunchSpeed||this.maxVerticalCharacterSpeed!==e.maxVerticalCharacterSpeed))))))}},{key:"cycle",value:function(e){var n=this;_get(_getPrototypeOf(i.prototype),"cycle",this).call(this,e),this.world.forEachItemInBucket("character",function(e){var t=n.world.solidTileAt(e.x,e.y-e.height/2-1);t&&t.tapped(e);var r=n.world.solidTileAt(e.x,e.y+e.height/2+1);r&&r.landed(e)})}}]),i}();t.exports=i},{"./world-element":885}],868:[function(e,t,r){var o=e("./world-element"),a=e("../world/events/equipment-shot"),s=e("../equipments/equipment"),n=function(e){_inherits2(i,o);var n=_createSuper(i);function i(e,t){var r;return _classCallCheck2(this,i),(r=n.call(this,e)).equipmentFactory=t,r.equipment=null,e.equipment instanceof s&&r.updateEquipment(e.equipment),r}return _createClass2(i,[{key:"buckets",value:function(){return["equipments-"+this.owner]}},{key:"type",get:function(){return"equipment-holder"}},{key:"character",get:function(){return this.world?this.world.cyclableById(this.owner):null}},{key:"state",value:function(){var e=_get(_getPrototypeOf(i.prototype),"state",this).call(this);return e.equipment=this.equipment?this.equipment.state():null,e}},{key:"parseState",value:function(e){_get(_getPrototypeOf(i.prototype),"parseState",this).call(this,e),(e.equipment?e.equipment.id:null)!==(this.equipment?this.equipment.id:null)&&this.updateEquipment(e.equipment?this.equipmentFactory.createEquipment(e.equipment):null),this.equipment&&this.equipment.parseState(e.equipment)}},{key:"hasSignificantStateChanges",value:function(e){return!!_get(_getPrototypeOf(i.prototype),"hasSignificantStateChanges",this).call(this,e)||((e.equipment?e.equipment.id:null)!==(this.equipment?this.equipment.id:null)||!(!this.equipment||!this.equipment.hasSignificantStateChanges(e.equipment)))}},{key:"updateEquipment",value:function(e){this.equipment&&(this.equipment.holder=null,this.shotStrategy=null),this.equipment=e||null,this.equipment&&((this.equipment.holder=this).shotStrategy=this.equipment.shotStrategy())}},{key:"shoot",value:function(){if(this.equipment){var e=this.character;if(e){var t=this.equipment.shotEvent(e);t&&this.world.addEvent(new a(this.state(),t))}}}},{key:"cycle",value:function(e){_get(_getPrototypeOf(i.prototype),"cycle",this).call(this,e);var t=this.character;t&&!t.dead?this.shotStrategy&&this.equipment&&this.shotStrategy.shouldShoot(t.triggeringEquipment,this.age-this.equipment.lastShot,this.equipment.shotCount)&&this.shoot():this.remove()}}]),i}();t.exports=n},{"../equipments/equipment":887,"../world/events/equipment-shot":945,"./world-element":885}],869:[function(e,t,r){var n=e("./item"),i=function(e){_inherits2(r,n);var t=_createSuper(r);function r(){return _classCallCheck2(this,r),t.apply(this,arguments)}return _createClass2(r,[{key:"type",get:function(){return"item-crown"}},{key:"buckets",value:function(){return _get(_getPrototypeOf(r.prototype),"buckets",this).call(this).concat(["crown-item"])}},{key:"pickUp",value:function(e){var t=e.world.itemsInBucket("crown");t&&t.length&&(t[0].owner=e.id)}}]),r}();t.exports=i},{"./item":872}],870:[function(e,t,r){var o=e("./item"),a=e("../../world/events/acquired-equipment"),s=e("../../equipments/equipment"),n=function(e){_inherits2(i,o);var n=_createSuper(i);function i(e,t){var r;return _classCallCheck2(this,i),(r=n.call(this,e)).equipment=null,r.equipmentFactory=t,e.equipment instanceof s&&(r.equipment=e.equipment),r}return _createClass2(i,[{key:"type",get:function(){return"item-equipment"}},{key:"state",value:function(){var e=_get(_getPrototypeOf(i.prototype),"state",this).call(this);return e.equipment=this.equipment?this.equipment.state():null,e}},{key:"parseState",value:function(e){_get(_getPrototypeOf(i.prototype),"parseState",this).call(this,e),(e.equipment?e.equipment.id:null)!==(this.equipment?this.equipment.id:null)&&(this.equipment=e.equipment?this.equipmentFactory.createEquipment(e.equipment):null),this.equipment&&this.equipment.parseState(e.equipment)}},{key:"hasSignificantStateChanges",value:function(e){return!!_get(_getPrototypeOf(i.prototype),"hasSignificantStateChanges",this).call(this,e)||((e.equipment?e.equipment.id:null)!==(this.equipment?this.equipment.id:null)||!(!this.equipment||!this.equipment.hasSignificantStateChanges(e.equipment)))}},{key:"pickUp",value:function(e){var t=this;e.equipmentHolders().forEach(function(e){e.updateEquipment(t.equipment)}),e.world.addEvent(new a(e.id,this.equipment.state()))}}]),i}();t.exports=n},{"../../equipments/equipment":887,"../../world/events/acquired-equipment":938,"./item":872}],871:[function(e,t,r){var n=e("./item"),i=function(e){_inherits2(r,n);var t=_createSuper(r);function r(){return _classCallCheck2(this,r),t.apply(this,arguments)}return _createClass2(r,[{key:"type",get:function(){return"item-health"}},{key:"pickUp",value:function(e){var t=e.healthElement();t&&t.heal(1)}}]),r}();t.exports=i},{"./item":872}],872:[function(e,t,r){var n=e("../positioned-element"),i=e("../../world/events/item-pickup"),o=function(e){_inherits2(r,n);var t=_createSuper(r);function r(){return _classCallCheck2(this,r),t.apply(this,arguments)}return _createClass2(r,[{key:"width",get:function(){return 30}},{key:"height",get:function(){return 30}},{key:"buckets",value:function(){return["item"]}},{key:"cycle",value:function(e){var t=this;this.world.forEachItemInBucket("character",function(e){e.dead||Math.abs(t.x-e.x)<(t.width+e.width)/2&&Math.abs(t.y-e.y)<(t.height+e.height)/2&&t.maybePickUp(e)}),_get(_getPrototypeOf(r.prototype),"cycle",this).call(this,e)}},{key:"maybePickUp",value:function(e){e.world.addEvent(new i(this.id,e.id))}},{key:"pickUp",value:function(e){}},{key:"currentSpeed",value:function(){return 0}}]),r}();t.exports=o},{"../../world/events/item-pickup":951,"../positioned-element":876}],873:[function(e,t,r){var n=e("./item"),i=function(e){_inherits2(r,n);var t=_createSuper(r);function r(){return _classCallCheck2(this,r),t.apply(this,arguments)}return _createClass2(r,[{key:"type",get:function(){return"item-shield"}},{key:"pickUp",value:function(e){var t=e.healthElement();t&&t.acquireShield()}}]),r}();t.exports=i},{"./item":872}],874:[function(e,t,r){var i=e("rxjs/Rx"),o=e("./perk"),a=e("../../world/events/heal"),s=e("../../world/events/death"),l=e("../../world/events/damage"),u=e("../../world/events/acquired-shield"),c=e("../../world/events/took-damage"),n=function(e){_inherits2(n,o);var r=_createSuper(n);function n(e){var t;return _classCallCheck2(this,n),(t=r.call(this,e)).maxHealth=e.maxHealth||3,t.health=e.health||1,t.shield=e.shield||0,t.maxShield=e.maxShield||3,t.lastDamaged=e.lastDamaged||-99,t.recoverTime=e.recoverTime||1,t.invincibleUntilAge=e.invincibleUntilAge||3,t.invinciblePosition=e.invinciblePosition||{x:0,y:0},t.rx.died=new i.Subject,t}return _createClass2(n,[{key:"type",get:function(){return"character-health"}},{key:"state",value:function(){var e=_get(_getPrototypeOf(n.prototype),"state",this).call(this);return e.health=this.health,e.maxHealth=this.maxHealth,e.shield=this.shield,e.maxShield=this.maxShield,e.lastDamaged=this.lastDamaged,e.recoverTime=this.recoverTime,e.invincibleUntilAge=this.invincibleUntilAge,e.invinciblePosition=this.invinciblePosition,e}},{key:"parseState",value:function(e){_get(_getPrototypeOf(n.prototype),"parseState",this).call(this,e),this.health=e.health,this.maxHealth=e.maxHealth,this.shield=e.shield,this.maxShield=e.maxShield,this.lastDamaged=e.lastDamaged,this.recoverTime=e.recoverTime,this.invincibleUntilAge=e.invincibleUntilAge,this.invinciblePosition=e.invinciblePosition}},{key:"hasSignificantStateChanges",value:function(e){return!!_get(_getPrototypeOf(n.prototype),"hasSignificantStateChanges",this).call(this,e)||(e.health!==this.health||(e.maxHealth!==this.maxHealth||(e.shield!==this.shield||(e.maxShield!==this.maxShield||(e.lastDamaged!==this.lastDamaged||e.recoverTime!==this.recoverTime)))))}},{key:"damage",value:function(e,t){this.world.addEvent(new l(this.owner,this.health,e,t))}},{key:"heal",value:function(e){this.world.addEvent(new a(this.owner,e))}},{key:"buckets",value:function(){return["health-"+this.owner]}},{key:"isRecoveringFromDamage",value:function(){return 0<this.recoveringTimeLeft()}},{key:"isInvincible",value:function(){if(this.age>this.invincibleUntilAge)return!1;var e=this.world?this.world.cyclableById(this.owner):null;return!!e&&!(!this.invinciblePosition||100<Math.distance(this.invinciblePosition,e))}},{key:"recoveringTimeLeft",value:function(){var e=this.world.clockProvider.clock-this.lastDamaged;return this.recoverTime-e}},{key:"character",value:function(){return this.world.cyclableById(this.owner)}},{key:"acquireShield",value:function(){this.updateShield(this.maxShield),this.world.addEvent(new u(this.owner))}},{key:"applyDamage",value:function(e,t){this.isRecoveringFromDamage()||this.isInvincible()||(this.lastDamaged=this.world.clockProvider.clock,this.world.addEvent(new c(this.owner,e,t)),0<this.shield?this.updateShield(this.shield-1):(this.updateHealth(this.health-e),this.health<=0&&(this.health=0,this.world.addEvent(new s(this.owner,t)))))}},{key:"applyDeath",value:function(e){this.updateHealth(0),this.rx.died.next(e);var t=this.world.cyclableById(this.owner);t&&t.remove(),this.remove()}},{key:"applyHeal",value:function(e){this.updateHealth(this.health+e)}},{key:"updateHealth",value:function(e){this.health=Math.between(0,e,this.maxHealth)}},{key:"updateShield",value:function(e){this.shield=Math.between(0,e,this.maxShield)}},{key:"cycle",value:function(e){_get(_getPrototypeOf(n.prototype),"cycle",this).call(this,e),this.invinciblePosition&&!this.isInvincible()&&(this.invinciblePosition=null)}}]),n}();t.exports=n},{"../../world/events/acquired-shield":939,"../../world/events/damage":943,"../../world/events/death":944,"../../world/events/heal":950,"../../world/events/took-damage":956,"./perk":875,"rxjs/Rx":379}],875:[function(e,t,r){var n=e("../world-element"),i=function(e){_inherits2(r,n);var t=_createSuper(r);function r(){return _classCallCheck2(this,r),t.apply(this,arguments)}return _createClass2(r)}();t.exports=i},{"../world-element":885}],876:[function(e,t,r){var i=e("./world-element"),n=function(e){_inherits2(n,i);var r=_createSuper(n);function n(e){var t;return _classCallCheck2(this,n),(t=r.call(this,e)).x=e.x||0,t.y=e.y||0,t}return _createClass2(n,[{key:"width",get:function(){return 0}},{key:"height",get:function(){return 0}},{key:"state",value:function(){var e=_get(_getPrototypeOf(n.prototype),"state",this).call(this);return e.x=this.x,e.y=this.y,e}},{key:"parseState",value:function(e){_get(_getPrototypeOf(n.prototype),"parseState",this).call(this,e),this.x=e.x,this.y=e.y}},{key:"hasSignificantStateChanges",value:function(e){return!!_get(_getPrototypeOf(n.prototype),"hasSignificantStateChanges",this).call(this,e)||(this.x!==e.x||this.y!==e.y)}},{key:"currentSpeed",value:function(){return 0}},{key:"safeCycle",value:function(e,t){if(!this.world)return 0;t=Math.min(t,this.width/2,this.height/2);for(var r=e,n=0;0<r&&this.world;){var i,o=this.currentSpeed();if(0<o){var a=t/o;i=Math.min(a,r)}else i=r;this.cycle(i),r-=i,n++}return n}}]),n}();t.exports=n},{"./world-element":885}],877:[function(e,t,r){var i=e("../positioned-element"),o=e("../../world/events/removal"),n=function(e){_inherits2(n,i);var r=_createSuper(n);function n(e){var t;return _classCallCheck2(this,n),(t=r.call(this,e)).angle=e.angle||0,t.speed=e.speed||200,t.damage=e.damage||1,t.exploded=!1,t}return _createClass2(n,[{key:"width",get:function(){return 10}},{key:"height",get:function(){return 10}},{key:"type",get:function(){return"bullet"}},{key:"state",value:function(){var e=_get(_getPrototypeOf(n.prototype),"state",this).call(this);return e.angle=this.angle,e.speed=this.speed,e.damage=this.damage,e}},{key:"parseState",value:function(e){_get(_getPrototypeOf(n.prototype),"parseState",this).call(this,e),this.angle=e.angle,this.speed=e.speed,this.damage=e.damage}},{key:"hasSignificantStateChanges",value:function(e){return!!_get(_getPrototypeOf(n.prototype),"hasSignificantStateChanges",this).call(this,e)||(this.angle!==e.angle||(this.speed!==e.speed||this.damage!==e.damage))}},{key:"explode",value:function(){var t=this;this.exploded||(this.exploded=!0,this.world.forEachItemInBucket("character",function(e){Math.distance(e,t)>e.width||e.id!==t.owner&&e.inflictDamage(t.damage,t.owner||t.id,t)}),this.world.addEvent(new o(this.id)),this.remove())}},{key:"cycle",value:function(e){var t=this;this.x+=this.speed*Math.cos(this.angle)*e,this.y+=this.speed*Math.sin(this.angle)*e,!this.world.solidTileAt(this.x,this.y)&&this.world.isInBounds(this.x,this.y)?.5<this.age?this.explode():(this.world.forEachItemInBucket("character",function(e){e.dead||e.id!==t.owner&&(Math.distance(e,t)>e.width/2||t.explode())}),_get(_getPrototypeOf(n.prototype),"cycle",this).call(this,e)):this.explode()}},{key:"currentSpeed",value:function(){return this.speed}}]),n}();t.exports=n},{"../../world/events/removal":954,"../positioned-element":876}],878:[function(e,t,r){var i=e("./physical-particle"),n=function(e){_inherits2(n,i);var r=_createSuper(n);function n(e){var t;return _classCallCheck2(this,n),(t=r.call(this,e)).color=e.color||16777215,t}return _createClass2(n,[{key:"decorative",get:function(){return!0}},{key:"width",get:function(){return 5}},{key:"height",get:function(){return 5}},{key:"type",get:function(){return"damage-particle"}},{key:"becameIdle",value:function(){this.remove()}},{key:"cycle",value:function(e){_get(_getPrototypeOf(n.prototype),"cycle",this).call(this,e),5<=this.age&&this.remove()}}]),n}();t.exports=n},{"./physical-particle":881}],879:[function(e,t,r){var i=e("./physical-particle"),n=function(e){_inherits2(n,i);var r=_createSuper(n);function n(e){var t;return _classCallCheck2(this,n),(t=r.call(this,e)).maxAge=e.maxAge||1,t.bouncedOnce=!1,t}return _createClass2(n,[{key:"width",get:function(){return 10}},{key:"height",get:function(){return 10}},{key:"type",get:function(){return"fire-ball"}},{key:"state",value:function(){var e=_get(_getPrototypeOf(n.prototype),"state",this).call(this);return e.maxAge=this.maxAge,e.bouncedOnce=this.bouncedOnce,e}},{key:"parseState",value:function(e){_get(_getPrototypeOf(n.prototype),"parseState",this).call(this,e),this.maxAge=e.maxAge,this.bouncedOnce=e.bouncedOnce}},{key:"hasSignificantStateChanges",value:function(e){return!!_get(_getPrototypeOf(n.prototype),"hasSignificantStateChanges",this).call(this,e)}},{key:"setOptions",value:function(e){_get(_getPrototypeOf(n.prototype),"setOptions",this).call(this,e)}},{key:"cycle",value:function(e){var t=this;_get(_getPrototypeOf(n.prototype),"cycle",this).call(this,e),this.age>=this.maxAge?this.remove():this.world.forEachItemInBucket("character",function(e){(e.id!==t.owner||t.bouncedOnce)&&(Math.distance(t,e)>(t.width+e.width)/2||e.inflictDamage(1,t.owner||t.id,t))})}},{key:"bounced",value:function(){this.bouncedOnce=!0}}]),n}();t.exports=n},{"./physical-particle":881}],880:[function(e,t,r){var i=e("./physical-particle"),o=e("../../world/events/explosion"),n=function(e){_inherits2(n,i);var r=_createSuper(n);function n(e){var t;return _classCallCheck2(this,n),(t=r.call(this,e)).exploded=!1,t}return _createClass2(n,[{key:"width",get:function(){return 10}},{key:"height",get:function(){return 10}},{key:"type",get:function(){return"grenade"}},{key:"state",value:function(){var e=_get(_getPrototypeOf(n.prototype),"state",this).call(this);return e.timeToExplosion=this.timeToExplosion,e.blastRadius=this.blastRadius,e}},{key:"parseState",value:function(e){_get(_getPrototypeOf(n.prototype),"parseState",this).call(this,e),this.timeToExplosion=e.timeToExplosion,this.blastRadius=e.blastRadius}},{key:"hasSignificantStateChanges",value:function(e){return!!_get(_getPrototypeOf(n.prototype),"hasSignificantStateChanges",this).call(this,e)||(this.timeToExplosion!==e.timeToExplosion||this.blastRadius!==e.blastRadius)}},{key:"setOptions",value:function(e){_get(_getPrototypeOf(n.prototype),"setOptions",this).call(this,e),this.timeToExplosion=e.timeToExplosion,this.blastRadius=e.blastRadius}},{key:"explode",value:function(){this.exploded||(this.exploded=!0,this.world.addEvent(new o(this,this.blastRadius,this.owner||this.id)),this.remove())}},{key:"cycle",value:function(e){var t=this;_get(_getPrototypeOf(n.prototype),"cycle",this).call(this,e),this.timeToExplosion-=e,this.timeToExplosion<=0?this.explode():this.world.forEachItemInBucket("character",function(e){t.exploded||e.id!==t.owner&&(Math.distance(e,t)>e.width/2||t.explode())})}}]),n}();t.exports=n},{"../../world/events/explosion":949,"./physical-particle":881}],881:[function(e,t,r){var i=e("../positioned-element"),o=e("../../world/tiles/tile"),n=function(e){_inherits2(n,i);var r=_createSuper(n);function n(e){var t;return _classCallCheck2(this,n),(t=r.call(this,e)).setOptions(e),t.vX=e.vX||0,t.vY=e.vY||0,t.bounceFactor=e.bounceFactor||.5,t}return _createClass2(n,[{key:"width",get:function(){return 5}},{key:"height",get:function(){return 5}},{key:"type",get:function(){return"physical-particle"}},{key:"state",value:function(){var e=_get(_getPrototypeOf(n.prototype),"state",this).call(this);return e.vX=this.vX,e.vY=this.vY,e.bounceFactor=this.bounceFactor,e}},{key:"parseState",value:function(e){_get(_getPrototypeOf(n.prototype),"parseState",this).call(this,e),this.vX=e.vX,this.vY=e.vY,this.bounceFactor=e.bounceFactor}},{key:"setOptions",value:function(e){this.x=e.x,this.y=e.y,this.gravityModifier={x:e.gravityModifierX||1,y:e.gravityModifierY||1},this.color=e.color||16711680}},{key:"launch",value:function(e,t){this.vX=t*Math.cos(e),this.vY=t*Math.sin(e)}},{key:"cycle",value:function(e){this.x+=this.vX*e,this.y+=this.vY*e;var t=this.readjust();t?(this.vX*=this.bounceFactor,this.vY*=this.bounceFactor):(this.vX+=e*this.world.environment.gravity.x*this.gravityModifier.x,this.vY+=e*this.world.environment.gravity.y*this.gravityModifier.y),t&o.UP&&(this.vY=-Math.abs(this.vY)),t&o.DOWN&&(this.vY=Math.abs(this.vY)),t&o.LEFT&&(this.vX=-Math.abs(this.vX)),t&o.RIGHT&&(this.vX=Math.abs(this.vX)),t&&this.bounced(),t&&Math.abs(this.currentSpeed())<100&&(this.vX=0,this.vY=0,this.becameIdle()),_get(_getPrototypeOf(n.prototype),"cycle",this).call(this,e)}},{key:"becameIdle",value:function(){}},{key:"currentSpeed",value:function(){return Math.pointDistance(0,0,this.vX,this.vY)}},{key:"bounced",value:function(){}}]),n}();t.exports=n},{"../../world/tiles/tile":972,"../positioned-element":876}],882:[function(e,t,r){var i=e("../positioned-element"),o=e("../../world/events/removal"),n=function(e){_inherits2(n,i);var r=_createSuper(n);function n(e){var t;return _classCallCheck2(this,n),(t=r.call(this,e)).angle=e.angle||0,t.speed=e.speed||200,t.blastRadius=20,t.exploded=!1,t}return _createClass2(n,[{key:"width",get:function(){return 10}},{key:"height",get:function(){return 10}},{key:"type",get:function(){return"plasma-bullet"}},{key:"state",value:function(){var e=_get(_getPrototypeOf(n.prototype),"state",this).call(this);return e.angle=this.angle,e.speed=this.speed,e}},{key:"parseState",value:function(e){_get(_getPrototypeOf(n.prototype),"parseState",this).call(this,e),this.angle=e.angle,this.speed=e.speed}},{key:"hasSignificantStateChanges",value:function(e){return!!_get(_getPrototypeOf(n.prototype),"hasSignificantStateChanges",this).call(this,e)||(this.angle!==e.angle||this.speed!==e.speed)}},{key:"explode",value:function(){var t=this;this.exploded||(this.exploded=!0,this.world.forEachItemInBucket("character",function(e){Math.distance(e,t)>t.blastRadius+e.width||e.inflictDamage(1,t.owner||t.id,t)}),this.world.addEvent(new o(this.id)),this.remove())}},{key:"cycle",value:function(e){var t=this;this.x+=this.speed*Math.cos(this.angle)*e,this.y+=this.speed*Math.sin(this.angle)*e,!this.world.solidTileAt(this.x,this.y)&&this.world.isInBounds(this.x,this.y)?1<this.age?this.explode():(this.world.forEachItemInBucket("character",function(e){e.dead||e.id!==t.owner&&(Math.distance(e,t)>e.width/2||t.explode())}),_get(_getPrototypeOf(n.prototype),"cycle",this).call(this,e)):this.explode()}},{key:"currentSpeed",value:function(){return this.speed}}]),n}();t.exports=n},{"../../world/events/removal":954,"../positioned-element":876}],883:[function(e,t,r){var i=e("../positioned-element"),o=e("../../world/events/explosion"),a=e("../../world/events/removal"),n=function(e){_inherits2(n,i);var r=_createSuper(n);function n(e){var t;return _classCallCheck2(this,n),(t=r.call(this,e)).blastRadius=e.blastRadius,void 0!==e.direction?t.angle=1===e.direction?0:Math.PI:t.angle=e.angle,t.speed=e.speed,t.currentRocketSpeed=0,t.margin=e.margin||0,t.exploded=!1,t}return _createClass2(n,[{key:"width",get:function(){return 25}},{key:"height",get:function(){return 10}},{key:"type",get:function(){return"rocket"}},{key:"state",value:function(){var e=_get(_getPrototypeOf(n.prototype),"state",this).call(this);return e.angle=this.angle,e.currentRocketSpeed=this.currentRocketSpeed,e.speed=this.speed,e.blastRadius=this.blastRadius,e.margin=this.margin,e}},{key:"parseState",value:function(e){_get(_getPrototypeOf(n.prototype),"parseState",this).call(this,e),this.angle=e.angle,this.currentRocketSpeed=e.currentRocketSpeed,this.speed=e.speed,this.blastRadius=e.blastRadius,this.margin=e.margin}},{key:"hasSignificantStateChanges",value:function(e){return!!_get(_getPrototypeOf(n.prototype),"hasSignificantStateChanges",this).call(this,e)||(this.angle!==e.angle||(this.speed!==e.speed||(this.currentRocketSpeed!==e.currentRocketSpeed||this.blastRadius!==e.blastRadius)))}},{key:"explode",value:function(){this.exploded||(this.exploded=!0,this.world.addEvent(new o(this,this.blastRadius,this.owner||this.id)),this.world.addEvent(new a(this.id)),this.remove())}},{key:"cycle",value:function(e){var t=this;this.currentRocketSpeed+=4e3*e,this.currentRocketSpeed=Math.min(this.speed,this.currentRocketSpeed),this.x+=this.currentRocketSpeed*Math.cos(this.angle)*e,this.y+=this.currentRocketSpeed*Math.sin(this.angle)*e,!this.world.solidTileAt(this.x,this.y)&&this.world.isInBounds(this.x,this.y)?1<this.age?this.explode():(this.world.forEachItemInBucket("character",function(e){e.id!==t.owner&&(Math.distance(e,t)>e.width/2+t.margin||t.explode())}),_get(_getPrototypeOf(n.prototype),"cycle",this).call(this,e)):this.explode()}},{key:"currentSpeed",value:function(){return this.currentRocketSpeed}}]),n}();t.exports=n},{"../../world/events/explosion":949,"../../world/events/removal":954,"../positioned-element":876}],884:[function(e,t,r){var i=e("./grenade"),n=function(e){_inherits2(n,i);var r=_createSuper(n);function n(e){var t;return _classCallCheck2(this,n),(t=r.call(this,e)).nextPuff=Number.MAX_VALUE,t}return _createClass2(n,[{key:"updateView",value:function(){}},{key:"explode",value:function(){this.stop=!0}},{key:"bounced",value:function(){this.stop=!0}},{key:"simulate",value:function(){this.stop=!1;for(var e=[],t=0;t<50&&!this.stop;t++)e.push({x:this.x,y:this.y}),this.cycle(1/60);return e}}]),n}();t.exports=n},{"./grenade":880}],885:[function(e,t,r){var n=e("rxjs/Rx"),i=e("../util/random-id"),o=e("../../shared/world/events/removal"),a=function(){function t(e){_classCallCheck2(this,t),this.id=e.id||i(),this.owner=e.owner||null,this.world=null,this.age=0,this.lastCycleWorldClock=0,this.lastReceivedState=null,this.rx={},this.rx.cycle=new n.Subject}return _createClass2(t,[{key:"markGone",value:function(){this.world=null}},{key:"buckets",value:function(){return null}},{key:"type",get:function(){throw new Error("Must implement type property")}},{key:"decorative",get:function(){return!1}},{key:"state",value:function(){var e={id:this.id,type:this.type,age:this.age,lastCycleWorldClock:this.lastCycleWorldClock};return this.owner&&(e.owner=this.owner),e}},{key:"parseState",value:function(e){this.owner=e.owner||null,this.age=e.age}},{key:"hasSignificantStateChanges",value:function(e){return!e||(.5<=Math.abs(this.age-e.age)||this.owner!==(e.owner||null))}},{key:"cycle",value:function(e){this.age+=e,this.world&&(this.lastCycleWorldClock=this.world.clockProvider.clock),this.rx.cycle.next(e)}},{key:"safeCycle",value:function(e,t){return this.cycle(e)}},{key:"remove",value:function(){this.world&&(this.decorative?this.world.remove(this):this.world.addEvent(new o(this.id)))}},{key:"readjust",value:function(){return this.world?this.world.readjust(this):0}}]),t}();t.exports=a},{"../../shared/world/events/removal":954,"../util/random-id":934,"rxjs/Rx":379}],886:[function(e,t,r){var n=e("./shotgun-equipment"),i=e("./plasma-gun-equipment"),o=e("./rocket-launcher-equipment"),a=e("./flamethrower-equipment"),s=e("./grenade-launcher-equipment"),l=e("./machine-gun-equipment"),u=function(){function e(){_classCallCheck2(this,e)}return _createClass2(e,[{key:"createEquipment",value:function(e){return"equipment-shotgun"===e.type?new n(e):"equipment-flamethrower"===e.type?new a(e):"equipment-rocket-launcher"===e.type?new o(e):"equipment-grenade-launcher"===e.type?new s(e):"equipment-plasma-gun"===e.type?new i(e):"equipment-machine-gun"===e.type?new l(e):null}}]),e}();t.exports=u},{"./flamethrower-equipment":888,"./grenade-launcher-equipment":889,"./machine-gun-equipment":890,"./plasma-gun-equipment":891,"./rocket-launcher-equipment":892,"./shotgun-equipment":898}],887:[function(e,t,r){var n=e("rxjs/Rx"),i=e("../util/random-id"),o=e("./shot-strategies/single-shot-strategy"),a=function(){function t(e){_classCallCheck2(this,t),this.id=e.id||i(),this.holder=null,this.ammo=e.ammo||0,this.ammoPerShot=e.ammoPerShot||1,this.lastShot=e.lastShot||0,this.shotCount=e.shotCount||0,this.rx={},this.rx.ammo=new n.ReplaySubject(1),this.rx.ammo.next(this.ammo)}return _createClass2(t,[{key:"type",get:function(){throw new Error("Must implement type()")}},{key:"printableLabel",get:function(){throw new Error("Must implement printableLabel()")}},{key:"character",get:function(){return this.holder?this.holder.character:null}},{key:"state",value:function(){var e={};return e.id=this.id,e.type=this.type,e.ammo=this.ammo,e.ammoPerShot=this.ammoPerShot,e.lastShot=this.lastShot,e.shotCount=this.shotCount,e}},{key:"parseState",value:function(e){this.ammoPerShot=e.ammoPerShot,this.lastShot=Math.max(e.lastShot,this.lastShot),this.shotCount=Math.max(e.shotCount,this.shotCount),this.updateAmmo(Math.min(e.ammo,this.ammo))}},{key:"hasSignificantStateChanges",value:function(e){return e.ammo!=e.ammo||(e.ammoPerShot!=e.ammoPerShot||(e.lastShot!=e.lastShot||e.shotCount!=e.shotCount))}},{key:"updateAmmo",value:function(e){this.ammo=e,this.rx.ammo.next(e)}},{key:"shotEvent",value:function(e){return new Error("Must implement shotEvent()")}},{key:"shotStrategy",value:function(){return new o({})}}]),t}();t.exports=a},{"../util/random-id":934,"./shot-strategies/single-shot-strategy":897,"rxjs/Rx":379}],888:[function(e,t,r){var o=e("chance"),i=e("./equipment"),a=e("../elements/projectiles/fire-ball"),s=e("../world/events/addition"),l=e("./shot-strategies/continuous-shot-strategy"),n=function(e){_inherits2(n,i);var r=_createSuper(n);function n(e){var t;return _classCallCheck2(this,n),(t=r.call(this,e)).ammo=50,t}return _createClass2(n,[{key:"printableLabel",get:function(){return"Flamethrower"}},{key:"type",get:function(){return"equipment-flamethrower"}},{key:"shotEvent",value:function(e){var t=e.width,r=e.x+e.facing*t;e.world.solidTileAt(r,e.y)&&(r=e.x);var n=(new o).floating({min:-1,max:1})*Math.PI/32,i=new a({x:r,y:e.y,width:10,height:10,color:16776960,gravityModifierY:1,bounceFactor:.3,maxAge:2,owner:e.id});return i.launch((1===e.facing?-Math.PI/16:Math.PI+Math.PI/16)+n,1e3),new s(i,e.world.clockProvider.clock)}},{key:"shotStrategy",value:function(){return new l({shotInterval:.1})}}]),n}();t.exports=n},{"../elements/projectiles/fire-ball":879,"../world/events/addition":940,"./equipment":887,"./shot-strategies/continuous-shot-strategy":894,chance:177}],889:[function(e,t,r){var i=e("./equipment"),o=e("../elements/projectiles/grenade"),a=e("../world/events/addition"),s=e("./shot-strategies/release-shot-strategy"),n=function(e){_inherits2(n,i);var r=_createSuper(n);function n(e){var t;return _classCallCheck2(this,n),(t=r.call(this,e)).ammo=10,t}return _createClass2(n,[{key:"printableLabel",get:function(){return"Grenade Launcher"}},{key:"type",get:function(){return"equipment-grenade-launcher"}},{key:"equip",value:function(){_get(_getPrototypeOf(n.prototype),"equip",this).call(this)}},{key:"preparationRatio",value:function(){return(this.character.age-(this.character.triggeringEquipmentStart||0))/2%1}},{key:"launchAngle",value:function(){var e=Math.PI/4,t=-Math.PI/4;if(this.character.facing<0&&(t=Math.PI+Math.PI/4,e=Math.PI-Math.PI/4),-1===this.character.gravityYSign()){var r=e;e=t,t=r}return e+(t-e)*(Math.sin(this.preparationRatio()*Math.PI*2)/2+.5)}},{key:"launchForce",value:function(){return 1500}},{key:"shotEvent",value:function(e){var t=this.launchAngle(),r=this.launchForce(),n=new o({x:e.x,y:e.y,gravityModifierY:1.5,timeToExplosion:1,blastRadius:150,owner:e.id});return n.launch(t,r),new a(n,e.world.clockProvider.clock)}},{key:"shotStrategy",value:function(){return new s({})}}]),n}();t.exports=n},{"../elements/projectiles/grenade":880,"../world/events/addition":940,"./equipment":887,"./shot-strategies/release-shot-strategy":895}],890:[function(e,t,r){var i=e("./equipment"),o=e("../world/events/addition"),a=e("../elements/projectiles/bullet"),s=e("./shot-strategies/burst-strategy"),n=function(e){_inherits2(n,i);var r=_createSuper(n);function n(e){var t;return _classCallCheck2(this,n),(t=r.call(this,e)).ammo=20,t}return _createClass2(n,[{key:"printableLabel",get:function(){return"Machine Gun"}},{key:"type",get:function(){return"equipment-machine-gun"}},{key:"shotEvent",value:function(e){var t=Math.PI/128;e.launch(1===e.facing?-(Math.PI-t):-t,200);var r=new a({x:e.x,y:e.y,owner:e.id,angle:1===e.facing?0:Math.PI,speed:1600,damage:1});return new o(r,e.world.clockProvider.clock)}},{key:"shotStrategy",value:function(){return new s({shotInterval:.1,burstInterval:.3,burstSize:3})}}]),n}();t.exports=n},{"../elements/projectiles/bullet":877,"../world/events/addition":940,"./equipment":887,"./shot-strategies/burst-strategy":893}],891:[function(e,t,r){var i=e("./equipment"),o=e("../elements/projectiles/plasma-bullet"),a=e("../world/events/addition"),s=e("./shot-strategies/continuous-shot-strategy"),n=function(e){_inherits2(n,i);var r=_createSuper(n);function n(e){var t;return _classCallCheck2(this,n),(t=r.call(this,e)).ammo=25,t}return _createClass2(n,[{key:"printableLabel",get:function(){return"Plasma Gun"}},{key:"type",get:function(){return"equipment-plasma-gun"}},{key:"shoot",value:function(){_get(_getPrototypeOf(n.prototype),"shoot",this).call(this);var e=this.character;if(e){var t=Math.PI/128;e.launch(1===e.facing?-(Math.PI-t):-t,300)}}},{key:"shotEvent",value:function(e){var t=Math.PI/128;e.launch(1===e.facing?-(Math.PI-t):-t,150);var r=new o({x:e.x,y:e.y,owner:e.id,angle:1===e.facing?0:Math.PI,speed:800});return new a(r,e.world.clockProvider.clock)}},{key:"shotStrategy",value:function(){return new s({shotInterval:.1})}}]),n}();t.exports=n},{"../elements/projectiles/plasma-bullet":882,"../world/events/addition":940,"./equipment":887,"./shot-strategies/continuous-shot-strategy":894}],892:[function(e,t,r){var i=e("./equipment"),o=e("../elements/projectiles/rocket"),a=e("../world/events/addition"),n=function(e){_inherits2(n,i);var r=_createSuper(n);function n(e){var t;return _classCallCheck2(this,n),(t=r.call(this,e)).rocketMargin=20,t.ammo=10,t}return _createClass2(n,[{key:"printableLabel",get:function(){return"Rocket Launcher"}},{key:"type",get:function(){return"equipment-rocket-launcher"}},{key:"shotEvent",value:function(e){var t=new o({x:e.x+e.width/2*e.facing,y:e.y,blastRadius:100,direction:e.facing,speed:2e3,owner:e.id,margin:this.rocketMargin});return new a(t,e.world.clockProvider.clock)}}]),n}();t.exports=n},{"../elements/projectiles/rocket":883,"../world/events/addition":940,"./equipment":887}],893:[function(e,t,r){var i=e("./shot-strategy"),n=function(e){_inherits2(n,i);var r=_createSuper(n);function n(e){var t;return _classCallCheck2(this,n),(t=r.call(this)).shotInterval=e.shotInterval||.1,t.burstInterval=e.burstInterval||.3,t.burstSize=e.burstSize||5,t}return _createClass2(n,[{key:"shouldShoot",value:function(e,t,r){return 0<r%this.burstSize?t>=this.shotInterval:e&&t>=this.burstInterval}}]),n}();t.exports=n},{"./shot-strategy":896}],894:[function(e,t,r){var i=e("./shot-strategy"),n=function(e){_inherits2(n,i);var r=_createSuper(n);function n(e){var t;return _classCallCheck2(this,n),(t=r.call(this)).shotInterval=e.shotInterval||.1,t}return _createClass2(n,[{key:"shouldShoot",value:function(e,t){return e&&t>this.shotInterval}}]),n}();t.exports=n},{"./shot-strategy":896}],895:[function(e,t,r){var n=e("./shot-strategy"),i=function(e){_inherits2(r,n);var t=_createSuper(r);function r(){var e;return _classCallCheck2(this,r),(e=t.call(this)).cocking=!1,e}return _createClass2(r,[{key:"shouldShoot",value:function(e){var t=this.cocking&&!e;return this.cocking=e,t}}]),r}();t.exports=i},{"./shot-strategy":896}],896:[function(e,t,r){var n=function(){function e(){_classCallCheck2(this,e)}return _createClass2(e,[{key:"shouldShoot",value:function(e,t,r){return!1}}]),e}();t.exports=n},{}],897:[function(e,t,r){var i=e("./shot-strategy"),n=function(e){_inherits2(n,i);var r=_createSuper(n);function n(e){var t;return _classCallCheck2(this,n),(t=r.call(this)).shotInterval=e.shotInterval||.1,t.released=!0,t}return _createClass2(n,[{key:"shouldShoot",value:function(e,t){if(e){var r=this.released&&t>this.shotInterval;return this.released=!e,r}this.released=!0}}]),n}();t.exports=n},{"./shot-strategy":896}],898:[function(e,t,r){var i=e("./equipment"),o=e("../world/events/addition"),a=e("../elements/projectiles/bullet"),n=function(e){_inherits2(n,i);var r=_createSuper(n);function n(e){var t;return _classCallCheck2(this,n),(t=r.call(this,e)).ammoPerShot=0,t}return _createClass2(n,[{key:"printableLabel",get:function(){return"Shotgun"}},{key:"type",get:function(){return"equipment-shotgun"}},{key:"shotEvent",value:function(e){var t=Math.PI/128;e.launch(1===e.facing?-(Math.PI-t):-t,300);var r=new a({x:e.x,y:e.y,owner:e.id,angle:1===e.facing?0:Math.PI,speed:1600,damage:.5});return new o(r,e.world.clockProvider.clock)}}]),n}();t.exports=n},{"../elements/projectiles/bullet":877,"../world/events/addition":940,"./equipment":887}],899:[function(e,t,r){var n=e("rxjs/Rx"),i=e("../util/array-utils"),o=e("./timer-settings"),a=function(){function t(e){if(_classCallCheck2(this,t),!e.world)throw new Error("Missing world option");if(!e.factory)throw new Error("Missing factory option");if(!e.controllerFactory)throw new Error("Missing controllerFactory option");if(!e.equipmentFactory)throw new Error("Missing equipmentFactory option");if(!e.eventParser)throw new Error("Missing eventParser option");if(!e.authority)throw new Error("Missing authority option");this.world=e.world,this.factory=e.factory,this.controllerFactory=e.controllerFactory,this.equipmentFactory=e.equipmentFactory,this.eventParser=e.eventParser,this.authority=e.authority,this.clock=0,this.localClock=0,this.timerSettings=new o,this.controllers=[],this.controllersMap={},this.controllersMapByCharacter={},this.cyclesInFrame=0,this.rx={},this.rx.controllers=new n.Subject,this.rx.appliedEvents=new n.Subject}return _createClass2(t,[{key:"state",value:function(t){var r=this,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return{clock:this.clock,timerSettings:t.ownsTimerSettings()?null:this.timerSettings.state(),world:{cyclables:this.world.cyclables.filter(function(e){if(e.decorative)return!1;var t=n[e.id];return e.hasSignificantStateChanges(t)}).map(function(e){return e.state()}).filter(function(e){return!!e&&r.authority.canSendCyclableUpdate(e)}),matrix:this.world.matrix.toJSON()},events:[],controllers:this.controllers.map(function(e){return e.state()}).filter(function(e){return!t.ownsControllerState(e)})}}},{key:"parseState",value:function(e,r){var n=this;r.ownsWorld()&&e.world.matrix&&this.world.setMatrix(e.world.matrix);this.clock,e.clock;e.events.forEach(function(e){var t=n.eventParser.parseEvent(e);t&&n.authority.trustsRemoteEvent(t)&&n.applyEvent(t)}),e.controllers.forEach(function(e){if(!n.authority.ownsControllerState(e)){var t=n.controllersMap[e.id];if(!t){if(!(t=n.controllerFactory.createController(n,e)))return;n.addController(t)}t.parseState(e)}}),e.world.cyclables.forEach(function(e){if(r.canSendCyclableUpdate(e)&&!n.authority.ownsCyclableState(e)){var t=n.world.cyclableById(e.id);if(!t){if(!(t=n.factory.createCyclable(e)))return;n.world.add(t)}t.parseState(e),t.lastReceivedState=e}}),r.ownsTimerSettings()&&e.timerSettings&&(this.clock=Math.max(this.clock,e.clock),this.timerSettings.parseState(e.timerSettings))}},{key:"cycle",value:function(e){e*=this.world.environment.timeFactor,this.clock+=e,this.localClock+=e,this.cycleControllers(e),this.cycleWorld(e)}},{key:"cycleControllers",value:function(e){for(var t=this.controllers.length-1;0<=t;t--){this.controllers[t].nonCharacterCycle(e);var r=this.controllers[t],n=r.character;r.cycle(e),r.character.dead&&(this.controllers.splice(t,1),this.controllersMap[r.id]=null,this.controllersMapByCharacter[n.id]=null,this.rx.controllers.next(this.controllers.slice()))}}},{key:"cycleWorld",value:function(n){var i=this;this.cyclesInFrame=0,this.world.cyclables.slice().forEach(function(e){var t=i.predictionTimeLeft(e);if(!(t<=0)){var r=Math.min(n,t);i.cyclesInFrame+=e.safeCycle(r,i.world.tileSize/4)}})}},{key:"predictionTimeLeft",value:function(e){if(this.authority.ownsCyclableState(e.state()))return Number.MAX_VALUE;var t=this.authority.maxPredictionForCyclable(e),r=e.lastReceivedState?e.lastReceivedState.lastCycleWorldClock:this.clock-e.age;return t-(this.clock-r)}},{key:"addController",value:function(e){this.controllersMap[e.id]=e,this.controllersMapByCharacter[e.character.id]=e,this.controllers.push(e),this.rx.controllers.next(this.controllers.slice())}},{key:"removeController",value:function(e){this.controllersMap[e.id]=null,this.controllersMapByCharacter[e.character.id]=e,i.remove(this.controllers,e),this.rx.controllers.next(this.controllers.slice())}},{key:"controllerForCharacterId",value:function(e){return this.controllersMapByCharacter[e]}},{key:"applyEvent",value:function(e){e.apply(this),this.rx.appliedEvents.next(e)}}]),t}();t.exports=a},{"../util/array-utils":929,"./timer-settings":907,"rxjs/Rx":379}],900:[function(e,t,r){var n=function(){function r(e,t){_classCallCheck2(this,r),this.type=e,this.data=t||{}}return _createClass2(r,[{key:"toJSON",value:function(){return{type:this.type,data:this.data||{}}}}],[{key:"fromJSON",value:function(e){return new r(e.type,e.data||{})}}]),r}();n.FRAG=1,n.PLAYER_JOINED=2,n.PLAYER_LEFT=3,n.ROUND_ENDED=4,n.CHAT_MESSAGE=5,n.POLL_RESPONSE=6,n.POLL_START=7,n.CROWN_DROPPED=8,n.CROWN_ACQUIRED=9,t.exports=n},{}],901:[function(e,t,r){var n=e("rxjs/Rx"),i=e("./player"),o=function(){function e(){_classCallCheck2(this,e),this.players=[],this.mapByPlayerId={},this.mapByCharacterId={},this.rx={},this.rx.list=new n.BehaviorSubject(this.players)}return _createClass2(e,[{key:"count",get:function(){return this.players.length}},{key:"nonBotCount",get:function(){return this.players.filter(function(e){return!e.isBot}).length}},{key:"forEach",value:function(e){this.copy().forEach(e)}},{key:"map",value:function(e){return this.players.map(e)}},{key:"copy",value:function(){return this.players.slice()}},{key:"parsePlayers",value:function(e){var r=this,n={};e.forEach(function(e){var t=r.mapByPlayerId[e.id];t||(t=new i({}),r.players.push(t),r.mapByPlayerId[e.id]=t),t.characterId!==e.characterId&&(delete r.mapByCharacterId[t.characterId],e.characterId&&(r.mapByCharacterId[e.characterId]=t)),t.parseState(e),n[t.id]=!0}),Object.keys(this.mapByPlayerId).forEach(function(e){n[e]||r.removePlayer(r.mapByPlayerId[e])}),this.rx.list.next(this.players)}},{key:"addPlayer",value:function(e){if(this.playerById(e.id))throw new Error("Cannot add the same player twice");this.players.push(e),this.mapByPlayerId[e.id]=e,this.rx.list.next(this.players)}},{key:"removePlayer",value:function(e){delete this.mapByCharacterId[e.characterId],delete this.mapByPlayerId[e.id];var t=this.players.indexOf(e);0<=t&&this.players.splice(t,1),this.rx.list.next(this.players)}},{key:"playerByCharacterId",value:function(e){return this.mapByCharacterId[e]||null}},{key:"playerById",value:function(e){return this.mapByPlayerId[e]||null}},{key:"regeneratePlayerCharacterId",value:function(e){if(!this.playerById(e.id))throw new Error("Cannot regenerate character ID for a player that isn't there");delete this.mapByCharacterId[e.characterId],e.generateCharacterId(),this.mapByCharacterId[e.characterId]=e}},{key:"unsetPlayerCharacterId",value:function(e){this.mapByPlayerId[e.id]&&(delete this.mapByCharacterId[e.characterId],e.unsetCharacterId())}}]),e}();t.exports=o},{"./player":902,"rxjs/Rx":379}],902:[function(e,t,r){var n=e("../authority/client-authority"),i=e("../../shared/util/random-id"),o=function(){function t(e){_classCallCheck2(this,t),this.channel=e.channel||null,this.name=e.name||"Player",this.id=e.id||i(),this.color=e.color||16777215,this.sendAudioVideo=!!e.sendAudioVideo,this.receiveAudioVideo=!!e.receiveAudioVideo,this.isBot=!!e.isBot,this.characterId=null,this.authority=new n,this.bufferedEvents=[],this.lastReceivedCyclableStates={},this.lastSentStateId=0,this.latency=0}return _createClass2(t,[{key:"generateCharacterId",value:function(){this.characterId=i(),this.authority.characterId=this.characterId}},{key:"unsetCharacterId",value:function(){this.characterId=null,this.authority.characterId=null}},{key:"registerSentState",value:function(e){var t=this;e.gameState.world.cyclables.forEach(function(e){t.lastReceivedCyclableStates[e.id]=e})}},{key:"state",value:function(){return{id:this.id,characterId:this.characterId,latency:this.latency,name:this.name,color:this.color,sendAudioVideo:this.sendAudioVideo,receiveAudioVideo:this.receiveAudioVideo,isBot:this.isBot}}},{key:"parseState",value:function(e){this.id=e.id,this.characterId=e.characterId,this.latency=e.latency,this.name=e.name,this.color=e.color,this.sendAudioVideo=e.sendAudioVideo,this.receiveAudioVideo=e.receiveAudioVideo,this.isBot=e.isBot}}]),t}();t.exports=o},{"../../shared/util/random-id":934,"../authority/client-authority":841}],903:[function(e,t,r){var n=e("./poll"),i=function(){function e(){_classCallCheck2(this,e),this.options=[],this.prompt=null}return _createClass2(e,[{key:"build",value:function(){return new n(this.prompt,this.options)}},{key:"setPrompt",value:function(e){return this.prompt=e,this}},{key:"addOption",value:function(e,t){return this.options.push({label:t,id:e}),this}}]),e}();t.exports=i},{"./poll":905}],904:[function(e,t,r){t.exports.ADD_BOT="add-bot",t.exports.REMOVE_BOT="remove-bot"},{}],905:[function(e,t,r){var n=function(){function r(e,t){_classCallCheck2(this,r),this.prompt=e,this.options=t}return _createClass2(r,[{key:"optionById",value:function(t){return this.options.filter(function(e){return e.id===t})[0]||null}},{key:"toJSON",value:function(){return{prompt:this.prompt,options:this.options}}}],[{key:"fromJSON",value:function(e){return new r(e.prompt,e.options)}}]),r}();t.exports=n},{}],906:[function(e,t,r){var n=e("rxjs/Rx"),i=function(){function e(){_classCallCheck2(this,e),this.rowMap={},this.rows=[],this.closed=!1,this.rx={},this.rx.changed=new n.Subject}return _createClass2(e,[{key:"scoreForPlayer",value:function(e){var t=this.rowForPlayer(e);return t?t.score:null}},{key:"rowForPlayer",value:function(e){return this.rowMap[e]||null}},{key:"addPlayer",value:function(e){var t={playerId:e,score:0,deaths:0,kills:0,hits:0};this.rows.push(t),this.rowMap[e]=t,this.sort(),this.rx.changed.next()}},{key:"removePlayer",value:function(e){var t=this.rowMap[e];if(t){var r=this.rows.indexOf(t);-1!==r&&(delete this.rowMap[e],this.rows.splice(r,1),this.sort(),this.rx.changed.next())}}},{key:"add",value:function(e,t){if(!this.closed){var r=this.rowMap[e];if(!r)throw new Error("Attempted to update player before adding it");Object.keys(t).forEach(function(e){if(isNaN(t[e]))throw new Error("Attempted to add non-numeric value");r[e]+=t[e]}),this.sort(),this.rx.changed.next()}}},{key:"sort",value:function(){this.rows.sort(function(e,t){return t.score-e.score})}},{key:"state",value:function(){return{rows:this.rows}}},{key:"parseState",value:function(e){var t=this;this.rows=e.rows,this.rowMap={},e.rows.forEach(function(e){t.rowMap[e.playerId]=e}),this.rx.changed.next()}},{key:"winners",value:function(){var t=this;if(0!==this.rows.length)return this.rows.filter(function(e){return e.score===t.rows[0].score})}},{key:"close",value:function(){this.closed=!0}}]),e}();t.exports=i},{"rxjs/Rx":379}],907:[function(e,t,r){var n=function(){function r(){_classCallCheck2(this,r),this.reference=null,this.direction=r.DESCENDING}return _createClass2(r,[{key:"state",value:function(){return{reference:this.reference,direction:this.direction}}},{key:"parseState",value:function(e){this.reference=e.reference,this.direction=e.direction}},{key:"time",value:function(e){if(!this.reference)return null;var t=this.reference-e;return this.direction===r.ASCENDING&&(t*=-1),t}}]),r}();n.ASCENDING=1,n.DESCENDING=2,t.exports=n},{}],908:[function(e,t,r){var i=e("chance"),l=e("rxjs/Rx"),n=e("./game-mode"),u=e("../communication/message-types"),o=e("../world/generate/generator"),a=e("../world/world"),c=e("../world/generate/mask"),h=e("../ui/hud-items"),d=e("../ui/hud-top-bar-item"),p=e("../multiplayer/round-end/announce-winner-round-end-behavior"),f=e("../multiplayer/round-end/best-play-round-end-behavior"),m=e("../multiplayer/round-end/composite-round-end-behavior"),s=function(e){_inherits2(s,n);var t=_createSuper(s);function s(){return _classCallCheck2(this,s),t.apply(this,arguments)}return _createClass2(s,[{key:"label",get:function(){return"deathmatch"}},{key:"printableLabel",get:function(){return"Deathmatch"}},{key:"roundEndBehavior",value:function(){return new m([new p,new f])}},{key:"getWorld",value:function(){var r=this,n=new i,e=new o(n).generateMaze({rows:2,cols:4}).addRedundantDirections(.8).inflate(function(t){var e=r.masks().filter(function(e){return e.connections===t});return n.pickone(e).matrix}).padHorizontal(2,c.UNBREAKABLE_OBSTACLE).padVertical(2,c.UNBREAKABLE_OBSTACLE).inflated;return new a({matrix:e,tileSize:80,chunkSize:10})}},{key:"setup",value:function(e){_get(_getPrototypeOf(s.prototype),"setup",this).call(this,e);for(var t=0;t<3;t++)this.spawnEquipment(e);for(var r=0;r<3;r++)this.spawnHealth(e);for(var n=0;n<1;n++)this.spawnShield(e);for(var i=0;i<6;i++)this.spawnBumper(e)}},{key:"startRound",value:function(t){var r=this;_get(_getPrototypeOf(s.prototype),"startRound",this).call(this,t),t.players.forEach(function(e){return r.newPlayer(t,e)});var e=t.gameState.clock+120;t.gameState.timerSettings.reference=e,this.subscription(t.rx.cycle.filter(function(){return t.gameState.clock>=e}).take(1)).subscribe(function(){return r.finishRound(t)})}},{key:"newPlayer",value:function(e,t){_get(_getPrototypeOf(s.prototype),"newPlayer",this).call(this,e,t),this.respawnPlayerWhen(e,t,l.Observable.timer(2e3)),this.sendMessage(t,"Deathmatch"),this.sendHUDSettings(e,t)}},{key:"playerHit",value:function(e,t,r){_get(_getPrototypeOf(s.prototype),"playerHit",this).call(this,e,t,r),r&&!this.finishing&&t.id!==r.id&&(this.scoreboard.add(r.id,{score:20}),r.channel.send(u.SCORE_CHANGE,{text:"Player hit!\n+20",scoreChange:20}))}},{key:"playerDied",value:function(e,t,r){var n=this;if(this.finishing)this.subscription(l.Observable.timer(3e3)).subscribe(function(){n.respawnPlayerWhen(e,t,l.Observable.timer(2e3))});else{if(r!==t&&r){this.sendMessage(r,"You fragged "+t.name),this.scoreboard.add(r.id,{score:100}),r.channel.send(u.SCORE_CHANGE,{text:"Player killed!\n+100",scoreChange:100});var i=!t.isBot||!r.isBot;(2===e.players.count||i&&1===e.players.nonBotCount)&&(e.world.environment.timeFactor=.5,this.subscription(l.Observable.timer(3e3)).subscribe(function(){return e.world.environment.timeFactor=1}))}else;var o=e.world.environment,a=o.age+2;this.sendDeathCamWhen(e,t,r,e.rx.cycle.filter(function(){return o.age>=a}))}_get(_getPrototypeOf(s.prototype),"playerDied",this).call(this,e,t,r)}},{key:"hudTopBarItems",value:function(e,t){return t.characterId?[new d(h.AMMO),new d(h.HEALTH),new d(h.TIMER)]:[new d(h.TIMER)]}}]),s}();t.exports=s},{"../communication/message-types":848,"../multiplayer/round-end/announce-winner-round-end-behavior":914,"../multiplayer/round-end/best-play-round-end-behavior":915,"../multiplayer/round-end/composite-round-end-behavior":916,"../ui/hud-items":927,"../ui/hud-top-bar-item":928,"../world/generate/generator":958,"../world/generate/mask":960,"../world/world":974,"./game-mode":909,chance:177,"rxjs/Rx":379}],909:[function(e,t,r){var l=e("rxjs/Rx"),u=e("chance"),c=e("../world/spawn-manager"),n=e("../world/generate/mask"),i=e("../world/generate/mask-set"),o=e("../model/scoreboard"),a=e("../model/log-entry"),s=e("../multiplayer/round-end/simple-delayed-round-end-behavior"),h=e("../multiplayer/round-end/composite-round-end-behavior"),d=e("../world/events/spawn"),p=e("../world/events/took-damage"),f=e("../world/events/death"),m=e("../elements/equipment-holder"),v=e("../elements/characters/walking-character"),b=e("../elements/perks/character-health"),y=e("../elements/items/equipment-item"),g=e("../elements/items/health-item"),w=e("../elements/items/shield-item"),_=e("../elements/bumper"),x=e("../equipments/shotgun-equipment"),S=e("../equipments/rocket-launcher-equipment"),C=e("../equipments/plasma-gun-equipment"),k=e("../equipments/grenade-launcher-equipment"),T=e("../equipments/flamethrower-equipment"),A=e("../equipments/machine-gun-equipment"),E=e("../equipments/equipment-factory"),O=e("../communication/message-types"),M=e("../ai/path-detector"),P=e("../controllers/node-hero-controller"),I=e("../ai/equipment/equipment-controller-factory"),R=e("../recording/game-state-recorder"),D=e("../recording/best-play-recorder"),B=e("../recording/replay-types"),L=e("bad-words"),F=new i(e("../../assets/masks/multiplayer").map(function(e){return new n(e.matrix,e.connections)})).withMirrored().masks,j=function(){function e(){_classCallCheck2(this,e),this.currentPlayers=[],this.scoreboard=new o,this.characterIdToPlayerId={},this.rx={},this.rx.tearDown=new l.Subject}return _createClass2(e,[{key:"roundEndBehavior",value:function(){return new s}},{key:"printableLabel",get:function(){throw new Error}},{key:"label",get:function(){throw new Error}},{key:"subscription",value:function(e){return e.takeUntil(this.rx.tearDown)}},{key:"getWorld",value:function(e){throw new Error("Must implement getWorld()")}},{key:"setup",value:function(e){var t=this;this.currentPlayers=e.players.copy(),this.gameStateRecorder=new R({room:e,gameMode:this,maxLengthInSeconds:5,maxFramerate:20}),this.bestPlayRecorder=new D(new R({room:e,gameMode:this,maxLengthInSeconds:7,maxFramerate:20}),e.players,this.scoreboard),this.subscription(e.players.rx.list).subscribe(function(){return t.playersChanged(e)}),this.subscription(this.scoreboard.rx.changed.debounceTime(100).throttleTime(500)).subscribe(function(){return t.broadcastScoreboard(e)}),this.subscription(e.players.rx.list.switchMap(function(){return e.players.nonBotCount!==e.players.botCount?l.Observable.interval(3e4):l.Subject()})).subscribe(function(){return t.sendMessageFromBot(e)})}},{key:"playerHit",value:function(e,t,r){r&&this.scoreboard.add(r.id,{hits:1})}},{key:"playerDied",value:function(e,t,r){e.players.unsetPlayerCharacterId(t),r&&r!==t&&this.scoreboard.add(r.id,{kills:1}),this.scoreboard.add(t.id,{deaths:1}),this.broadcastLogEntry(e,new a(a.FRAG,{player:t.state(),killer:r?r.state():null})),this.sendHUDSettings(e,t)}},{key:"sendDeathCamWhen",value:function(r,n,i,e){var o=this,a=n.characterId,s=(i||n).characterId;i&&n.channel.send(O.CAMERA_TARGET,{playerId:i.id}),this.subscription(e.take(1)).subscribe(function(){var e={};e[a]="You",i&&(e[s]=i.name),o.sendReplay(n,[s,a],e);var t=n.isBot?l.Observable.timer(1e3):l.Observable.merge(n.channel.on(O.REPLAY_WATCHED),l.Observable.timer(1e4)).delay(2e3);o.respawnPlayerWhen(r,n,t)})}},{key:"pickSpawn",value:function(e,t){return(new u).pickone(this.isolatedPositions(e,200))}},{key:"respawnPlayerWhen",value:function(e,t){var r=this,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;n=n||l.Observable.just(null);var i=this.pickSpawn(e,t);t.channel.send(O.CAMERA_TARGET,{position:i}),this.subscription(n.take(1)).subscribe(function(){return r.doRespawnPlayer(e,t,i)})}},{key:"respawnPlayer",value:function(e,t){var r=this.pickSpawn(e,t);this.doRespawnPlayer(e,t,r)}},{key:"doRespawnPlayer",value:function(e,t,r){var n=this;if(e.players.playerById(t.id)){e.players.regeneratePlayerCharacterId(t),this.characterIdToPlayerId[t.characterId]=t.id;var i=this.heroSettings(e,t),o=new v(i);o.x=r.x,o.y=r.y;var a=new d(o.state());e.world.addEvent(a);var s=new b({owner:o.id,health:3,maxHealth:3,invincibleUntilAge:3,invinciblePosition:{x:o.x,y:o.y}});e.world.add(s);var l=new m({owner:o.id,equipment:this.defaultEquipment(e,t)});e.world.add(l),t.channel.send(O.RESPAWN,{characterId:o.id}),this.sendHUDSettings(e,t),t.isBot&&this.setupAIForBot(e,t),this.subscription(l.rx.cycle.filter(function(){return l.equipment&&l.equipment.ammo<l.equipment.ammoPerShot})).subscribe(function(){l.updateEquipment(n.defaultEquipment(e,t))})}}},{key:"tearDown",value:function(e){this.rx.tearDown.next()}},{key:"playersChanged",value:function(t){var r=this;t.players.forEach(function(e){-1===r.currentPlayers.indexOf(e)&&r.newPlayer(t,e)}),this.currentPlayers.forEach(function(e){t.players.playerById(e.id)||r.playerLeft(t,e)}),this.currentPlayers=t.players.copy()}},{key:"newPlayer",value:function(r,n){var i=this;this.scoreboard.addPlayer(n.id),n.channel.send(O.INITIALIZATION,{state:r.state(n),playerId:n.id,scoreboard:this.scoreboard.state()}),this.sendHUDSettings(r,n),this.broadcastLogEntry(r,new a(a.PLAYER_JOINED,{player:n.state()})),n.channel.on(O.CHAT_MESSAGE).takeUntil(this.rx.tearDown).subscribe(function(e){var t=new L;i.broadcastLogEntry(r,new a(a.CHAT_MESSAGE,{player:n.state(),message:t.clean(e.message)}))})}},{key:"playerLeft",value:function(e,t){this.scoreboard.removePlayer(t.id),this.broadcastLogEntry(e,new a(a.PLAYER_LEFT,{player:t.state()}))}},{key:"startRound",value:function(r){var t=this;this.gameStateRecorder.start(),this.bestPlayRecorder.start(),r.gameState.rx.appliedEvents.takeUntil(this.rx.tearDown).filter(function(e){return e instanceof p}).filter(function(e){var t=r.world.cyclableById(e.characterId);return t&&0<t.health-e.amount}).map(function(e){return{player:r.players.playerByCharacterId(e.characterId),attacker:t.playerForCharacterId(r,e.sourceId)}}).filter(function(e){return null!==e.player}).subscribe(function(e){return t.playerHit(r,e.player,e.attacker)}),this.subscription(r.gameState.rx.appliedEvents.filter(function(e){return e instanceof f}).map(function(e){return{player:r.players.playerByCharacterId(e.characterId),killer:t.playerForCharacterId(r,e.sourceId)}}).filter(function(e){return null!==e.player})).subscribe(function(e){return t.playerDied(r,e.player,e.killer)}),this.broadcastScoreboard(r)}},{key:"finishRound",value:function(e){if(!this.finishing){this.finishing=!0,this.scoreboard.close(),e.logger.info("Finishing round of "+this.label),this.broadcastLogEntry(e,new a(a.ROUND_ENDED));var t=new h([this.roundEndBehavior(),e.roundEndBehavior()].filter(function(e){return!!e}));this.subscription(t.rx.done.take(1)).subscribe(function(){return e.startRound()}),t.triggerRoundEnd(e,this)}}},{key:"playerForCharacterId",value:function(e,t){var r=this.characterIdToPlayerId[t];return e.players.playerById(r)}},{key:"broadcastScoreboard",value:function(e){var t=this.scoreboard.state();e.players.forEach(function(e){return e.channel.send(O.SCOREBOARD,t)})}},{key:"broadcastMessage",value:function(e,t){var r=this;e.players.forEach(function(e){return r.sendMessage(e,t)})}},{key:"broadcastHUDSettings",value:function(t){var r=this;t.players.forEach(function(e){return r.sendHUDSettings(t,e)})}},{key:"broadcastLogEntry",value:function(e,t){e.players.forEach(function(e){return e.channel.send(O.LOG_ENTRY,t.toJSON())})}},{key:"sendMessage",value:function(e,t){e.channel.send(O.HUD_MESSAGE,{message:t})}},{key:"sendHUDSettings",value:function(e,t){t.channel.send(O.HUD_SETTINGS,this.hudSettings(e,t))}},{key:"heroSettings",value:function(e,t){return{speed:400,bodyColor:16777215,legColor:10526880,health:3,maxHealth:3,id:t.characterId}}},{key:"defaultEquipment",value:function(e,t){return new x({owner:t.characterId,ammo:200})}},{key:"hudTopBarItems",value:function(e,t){return[]}},{key:"hudSettings",value:function(e,t){return{topBarItems:this.hudTopBarItems(e,t).map(function(e){return e.toJSON()})}}},{key:"spawnablePositions",value:function(t){var e=new c(t.world),r=e.initialMatrix();return e.horizontalBottomPathCells(r).map(function(e){return{x:(e.col+.5)*t.world.tileSize,y:(e.row+.5)*t.world.tileSize}})}},{key:"isolatedPositions",value:function(e,n){return this.spawnablePositions(e).filter(function(t){var r=!0;return e.world.forEachItemInBucket("character",function(e){Math.distance(e,t)<n&&(r=!1)}),e.world.forEachItemInBucket("item",function(e){Math.distance(e,t)<n&&(r=!1)}),r})}},{key:"addAtIsolatedPosition",value:function(e,t){var r=new u,n=this.isolatedPositions(e,100);if(0!==n.length){var i=r.pickone(n);t.x=i.x,t.y=i.y,e.world.add(t)}}},{key:"spawnHealth",value:function(e){var t=this,r=new g({});this.addAtIsolatedPosition(e,r),this.subscription(e.world.rx.deletions.filter(function(e){return e===r}).take(1).delay(5e3)).subscribe(function(){return t.spawnHealth(e)})}},{key:"spawnShield",value:function(e){var t=this,r=new w({});this.addAtIsolatedPosition(e,r),this.subscription(e.world.rx.deletions.filter(function(e){return e===r}).take(1).delay(5e3)).subscribe(function(){return t.spawnShield(e)})}},{key:"spawnEquipment",value:function(e){var t=this,r=new u,n=new y({equipment:r.pickone([new C({}),new S({}),new k({}),new T({}),new A({})])},new E);this.addAtIsolatedPosition(e,n),this.subscription(e.world.rx.deletions.filter(function(e){return e===n}).take(1).delay(5e3)).subscribe(function(){return t.spawnEquipment(e)})}},{key:"spawnBumper",value:function(n){var e=new c(n.world),i=e.initialMatrix(),t=e.surroundedVoids(i),o=[0,Math.PI/2,Math.PI,-Math.PI/2],r=t.reduce(function(e,t){var r=o.filter(function(e){return i.get(t.row+Math.sin(e),t.col+Math.cos(e))===c.OBSTACLE}).map(function(e){return{angle:e+Math.PI,x:(t.col+.5+Math.cos(e)/2)*n.world.tileSize,y:(t.row+.5+Math.sin(e)/2)*n.world.tileSize}});return e.concat(r)},[]);if(0!==r.length){var a=(new u).pickone(r),s=new _({});s.x=a.x,s.y=a.y,s.angle=a.angle,n.world.add(s)}}},{key:"setupAIForBot",value:function(e,t){var r=e.gameState.world.cyclableById(t.characterId);if(r){var n=new M(e.gameState.world).detectNodes(),i=new P({character:r,nodes:n,equipmentControllerFactory:new I});e.gameState.addController(i)}}},{key:"masks",value:function(){return F}},{key:"sendReplay",value:function(e,t,r){if(!e.isBot){for(var n=this.gameStateRecorder.getBuffer(),i=1;i<n.length;i++)n[i]=JSON.parse(JSON.stringify(n[i])),n[i].gameState.world.matrix=null;e.channel.send(O.REPLAY,{states:n,targetIds:t,indicators:r,replayType:B.DEATH_CAM})}}},{key:"sendMessageFromBot",value:function(e){var t=e.players.players.filter(function(e){return e.isBot});if(t.length){var r=new u,n=r.pickone(t);this.broadcastLogEntry(e,new a(a.CHAT_MESSAGE,{player:n.state(),message:r.pickone(["I got this","This is too easy","This round is mine","I'll do better next round","This isn't even my final form"])}))}}}]),e}();t.exports=j},{"../../assets/masks/multiplayer":1,"../ai/equipment/equipment-controller-factory":828,"../ai/path-detector":837,"../communication/message-types":848,"../controllers/node-hero-controller":856,"../elements/bumper":858,"../elements/characters/walking-character":860,"../elements/equipment-holder":868,"../elements/items/equipment-item":870,"../elements/items/health-item":871,"../elements/items/shield-item":873,"../elements/perks/character-health":874,"../equipments/equipment-factory":886,"../equipments/flamethrower-equipment":888,"../equipments/grenade-launcher-equipment":889,"../equipments/machine-gun-equipment":890,"../equipments/plasma-gun-equipment":891,"../equipments/rocket-launcher-equipment":892,"../equipments/shotgun-equipment":898,"../model/log-entry":900,"../model/scoreboard":906,"../multiplayer/round-end/composite-round-end-behavior":916,"../multiplayer/round-end/simple-delayed-round-end-behavior":918,"../recording/best-play-recorder":924,"../recording/game-state-recorder":925,"../recording/replay-types":926,"../world/events/death":944,"../world/events/spawn":955,"../world/events/took-damage":956,"../world/generate/mask":960,"../world/generate/mask-set":959,"../world/spawn-manager":966,"bad-words":170,chance:177,"rxjs/Rx":379}],910:[function(e,t,r){var i=e("chance"),l=e("rxjs/Rx"),n=e("./game-mode"),u=e("../model/log-entry"),o=e("../multiplayer/round-end/announce-winner-round-end-behavior"),a=e("../multiplayer/round-end/best-play-round-end-behavior"),c=e("../multiplayer/round-end/composite-round-end-behavior"),h=e("../communication/message-types"),d=e("../world/generate/generator"),p=e("../world/world"),f=e("../world/generate/mask"),m=e("../elements/items/crown-item"),v=e("../elements/crown"),b=e("../ui/hud-items"),y=e("../ui/hud-top-bar-item"),s=function(e){_inherits2(s,n);var t=_createSuper(s);function s(){return _classCallCheck2(this,s),t.apply(this,arguments)}return _createClass2(s,[{key:"label",get:function(){return"king-of-the-hill"}},{key:"printableLabel",get:function(){return"King Of The Hill"}},{key:"roundEndBehavior",value:function(){return new c([new o,new a])}},{key:"getWorld",value:function(){var r=this,n=new i,e=new d(n).generateMaze({rows:2,cols:4}).addRedundantDirections(.8).inflate(function(t){var e=r.masks().filter(function(e){return e.connections===t});return n.pickone(e).matrix}).padHorizontal(2,f.UNBREAKABLE_OBSTACLE).padVertical(2,f.UNBREAKABLE_OBSTACLE).inflated;return new p({matrix:e,tileSize:80,chunkSize:10})}},{key:"setup",value:function(n){var i=this;_get(_getPrototypeOf(s.prototype),"setup",this).call(this,n);for(var e=0;e<3;e++)this.spawnEquipment(n);for(var t=0;t<3;t++)this.spawnHealth(n);for(var r=0;r<1;r++)this.spawnShield(n);for(var o=0;o<6;o++)this.spawnBumper(n);var a=new m({});this.addAtIsolatedPosition(n,a),this.lastCrownPosition={x:a.x,y:a.y},this.subscription(n.rx.cycle.map(function(){return i.crown(n)}).filter(function(e){return!!e}).map(function(e){return n.world.cyclableById(e.owner)}).filter(function(e){return!!e})).subscribe(function(e){i.lastCrownPosition.x=e.x,i.lastCrownPosition.y=e.y}),this.subscription(n.rx.cycle.map(function(){return i.crown(n)}).filter(function(e){return!!e}).map(function(e){return n.players.playerByCharacterId(e.owner)}).filter(function(e){return!!e}).throttleTime(2e3)).filter(function(){return!i.finishing}).subscribe(function(e){i.scoreboard.add(e.id,{score:10}),e.channel.send(h.SCORE_CHANGE,{text:"+10",scoreChange:10}),500<=i.scoreboard.scoreForPlayer(e.id)&&i.finishRound(n)}),this.subscription(n.rx.cycle.map(function(){return i.crown(n)}).filter(function(e){return!!e}).map(function(e){return n.players.playerByCharacterId(e.owner)}).distinctUntilChanged().filter(function(e){return!!e})).subscribe(function(t){var r=new u(u.CROWN_ACQUIRED,{player:t.state()}).toJSON();n.players.forEach(function(e){t.id===e.id?i.sendMessage(e,"You have the crown"):i.sendMessage(e,t.name+" has the crown"),e.channel.send(h.LOG_ENTRY,r)})})}},{key:"startRound",value:function(t){var r=this;_get(_getPrototypeOf(s.prototype),"startRound",this).call(this,t),t.world.add(new v({})),t.players.forEach(function(e){return r.newPlayer(t,e)})}},{key:"crown",value:function(e){var t=e.world.itemsInBucket("crown");return t&&t.length?t[0]:null}},{key:"dropCrown",value:function(e,t){var r=this;e.world.add(new m({x:this.lastCrownPosition.x,y:this.lastCrownPosition.y}));var n=new u(u.CROWN_ACQUIRED,{player:t.state()}).toJSON();e.players.forEach(function(e){e.id===t.id?r.sendMessage(e,"You dropped the crown"):r.sendMessage(e,"The crown was dropped"),e.channel.send(h.LOG_ENTRY,n)})}},{key:"newPlayer",value:function(e,t){_get(_getPrototypeOf(s.prototype),"newPlayer",this).call(this,e,t),this.respawnPlayerWhen(e,t,l.Observable.timer(2e3)),this.sendMessage(t,"King Of The Hill"),this.sendHUDSettings(e,t)}},{key:"playerHit",value:function(e,t,r){if(_get(_getPrototypeOf(s.prototype),"playerHit",this).call(this,e,t,r),r&&!this.finishing&&t.id!==r.id){var n=this.crown(e);n&&n.owner===r.characterId&&(this.scoreboard.add(r.id,{score:10}),r.channel.send(h.SCORE_CHANGE,{text:"Player hit!\n+10",scoreChange:10}))}}},{key:"playerDied",value:function(e,t,r){var n=this,i=this.crown(e);if(!this.finishing&&i&&i.owner===t.characterId&&(i.owner=null,this.dropCrown(e,t)),this.finishing)this.subscription(l.Observable.timer(3e3)).subscribe(function(){n.respawnPlayerWhen(e,t,l.Observable.timer(2e3))});else{var o=e.world.environment,a=o.age+2;this.sendDeathCamWhen(e,t,r,e.rx.cycle.filter(function(){return o.age>=a})),i&&i.owner===r.characterId&&(this.scoreboard.add(r.id,{score:50}),r.channel.send(h.SCORE_CHANGE,{text:"Player killed!\n+50",scoreChange:50}))}_get(_getPrototypeOf(s.prototype),"playerDied",this).call(this,e,t,r)}},{key:"playerLeft",value:function(e,t){var r=this.crown(e);r&&r.owner===t.characterId&&(r.owner=null,this.dropCrown(e,t)),_get(_getPrototypeOf(s.prototype),"playerLeft",this).call(this,e,t)}},{key:"hudTopBarItems",value:function(e,t){return t.characterId?[new y(b.AMMO),new y(b.HEALTH),new y(b.MESSAGE,{label:"King Of",value:"The Hill"})]:[new y(b.MESSAGE,{label:"King Of",value:"The Hill"})]}}]),s}();t.exports=s},{"../communication/message-types":848,"../elements/crown":861,"../elements/items/crown-item":869,"../model/log-entry":900,"../multiplayer/round-end/announce-winner-round-end-behavior":914,"../multiplayer/round-end/best-play-round-end-behavior":915,"../multiplayer/round-end/composite-round-end-behavior":916,"../ui/hud-items":927,"../ui/hud-top-bar-item":928,"../world/generate/generator":958,"../world/generate/mask":960,"../world/world":974,"./game-mode":909,chance:177,"rxjs/Rx":379}],911:[function(e,t,r){var o=e("rxjs/Rx"),n=e("./game-mode"),a=e("../ui/hud-items"),s=e("../ui/hud-top-bar-item"),l=e("../world/world"),u=e("../world/generate/mask"),i=function(e){_inherits2(i,n);var t=_createSuper(i);function i(){return _classCallCheck2(this,i),t.apply(this,arguments)}return _createClass2(i,[{key:"label",get:function(){return"warmup"}},{key:"printableLabel",get:function(){return"Warmup"}},{key:"getWorld",value:function(){var e=u.UNBREAKABLE_OBSTACLE;return new l({matrix:[[e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e],[e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e],[e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e],[e,e,e,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,e,e,e],[e,e,e,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,e,e,e],[e,e,e,e,e,0,0,0,0,0,0,0,0,0,0,0,0,0,e,e,e,e,e],[e,e,e,0,0,0,e,e,0,0,0,0,0,0,0,e,e,0,0,0,e,e,e],[e,e,e,0,0,0,0,0,0,0,e,e,e,0,0,0,0,0,0,0,e,e,e],[e,e,e,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,e,e,e],[e,e,e,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,e,e,e],[e,e,e,0,0,e,e,e,0,0,0,0,0,0,0,e,e,e,0,0,e,e,e],[e,e,e,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,e,e,e],[e,e,e,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,e,e,e],[e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e],[e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e],[e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e]],tileSize:80,chunkSize:10})}},{key:"startRound",value:function(t){var r=this;_get(_getPrototypeOf(i.prototype),"startRound",this).call(this,t),t.players.forEach(function(e){return r.newPlayer(t,e)}),this.subscription(o.Observable.timer(1e4).switchMap(function(){return t.players.rx.list.take(1)}).map(function(e){return e.filter(function(e){return!e.isBot})}).filter(function(e){return e.length<2&&!r.finishing})).subscribe(function(){return t.promptAddBot()})}},{key:"newPlayer",value:function(e,t){_get(_getPrototypeOf(i.prototype),"newPlayer",this).call(this,e,t),this.spawnEquipment(e),this.respawnPlayerWhen(e,t,o.Observable.timer(2e3)),1===e.players.count?this.sendMessage(t,"Waiting for more players"):this.finishRound(e)}},{key:"playerDied",value:function(e,t,r){var n=this;_get(_getPrototypeOf(i.prototype),"playerDied",this).call(this,e,t,r),this.subscription(o.Observable.timer(2e3)).subscribe(function(){return n.respawnPlayer(e,t)})}},{key:"hudTopBarItems",value:function(e,t){return t.characterId?this.finishing?[new s(a.AMMO),new s(a.HEALTH),new s(a.TIMER)]:[new s(a.AMMO),new s(a.HEALTH),new s(a.MESSAGE,{label:"Waiting for",value:"more players"})]:[]}}]),i}();t.exports=i},{"../ui/hud-items":927,"../ui/hud-top-bar-item":928,"../world/generate/mask":960,"../world/world":974,"./game-mode":909,"rxjs/Rx":379}],912:[function(e,t,r){var o=e("rxjs/Rx"),n=e("chance"),i=function(){function i(e,t,r){var n=this;_classCallCheck2(this,i),this.poll=e,this.logger=r,this.players=t,this.resultsByPlayer={},this.countByOption={},e.options.forEach(function(e){n.countByOption[e.id]=0}),this.resultReady=new o.Subject}return _createClass2(i,[{key:"trackResponse",value:function(e,t){if(this.resultsByPlayer[e.id])this.logger.warn("Player #"+e.id+" ("+e.name+") tried to vote twice");else{this.resultsByPlayer[e.id]=t;var r=this.players.nonBotCount,n=this.poll.options.filter(function(e){return e.id===t})[0];n?(this.countByOption[n.id]++,this.logger.info("Player #"+e.id+" ("+e.name+") voted for "+n.label),this.countByOption[n.id]>r/2&&this.resultReady.next()):this.logger.info("Player #"+e.id+" ("+e.name+") voted blank"),Object.keys(this.resultsByPlayer).length===r&&this.resultReady.next()}}},{key:"winningOption",value:function(){var r=this,t=Object.keys(this.countByOption).reduce(function(e,t){return Math.max(r.countByOption[t],e)},0);if(0===t)return null;var e=Object.keys(this.countByOption).filter(function(e){return r.countByOption[e]===t});return(new n).pickone(e)}},{key:"ready",value:function(e){var t=this;return o.Observable.merge(o.Observable.timer(e),this.resultReady).first().map(function(){return t.winningOption()})}}]),i}();t.exports=i},{chance:177,"rxjs/Rx":379}],913:[function(e,t,r){e("../util/math");var o=e("rxjs/Rx"),i=e("chance"),a=e("../communication/lag-tracker"),s=e("../communication/message-types"),l=e("../communication/void-channel"),u=e("../model/game-state"),c=e("../model/player"),h=e("../model/player-set"),d=e("../model/poll-builder"),p=e("../model/poll-types"),f=e("../model/log-entry"),m=e("bad-words"),v=e("../elements/element-factory"),b=e("../controllers/controller-factory"),y=e("../equipments/equipment-factory"),g=e("../world/events/authority-event-proxy"),w=e("../world/events/event-parser"),_=e("../world/events/removal"),x=e("../authority/server-authority"),S=e("../authority/recorder-authority"),C=e("./poll-results-tracker"),k=e("../performance/framerate-tracker"),T=e("../util/next-in-line"),n=function(){function n(e){_classCallCheck2(this,n),this.gameModeSequence=e.gameModeSequence,this.framerate=e.framerate||60,this.logger=e.logger;var t=e.maxStateBacklogInSeconds||.3;this.maxStateBacklog=this.framerate*t;var r=e.timeoutStateBacklogInSeconds||5;this.timeoutStateBacklog=this.framerate*r,this.stateId=0,this.roundId=0,this.players=new h,this.lagTrackerMap={},this.frameSubscription=null,this.authority=new x(this.players),this.gameStateRecorderAuthority=new S,this.rx={},this.rx.cycle=new o.Subject,this.rx.tearDown=new o.Subject}return _createClass2(n,[{key:"subscription",value:function(e){return e.takeUntil(this.rx.tearDown)}},{key:"cycle",value:function(e){var r=this;this.gameState.cycle(e),this.stateId++,this.rx.cycle.next(e),this.gameState.world.eventProxy.buffer.forEach(function(t){r.players.forEach(function(e){e.authority.trustsRemoteEvent(t)&&e.bufferedEvents.push(t)})}),this.gameState.world.eventProxy.clear(),this.players.forEach(function(e){var t=r.lagTrackerMap[e.id];e.latency=t.latency,t&&t.isLagging(r.maxStateBacklog)?t.lastReceivedStateId&&r.stateId-t.lastReceivedStateId>r.timeoutStateBacklog&&(r.logger.info("Player "+e.name+"'s latency is over "+r.timeoutStateBacklog/r.framerate+" ("+(r.stateId-t.lastReceivedStateId)/r.framerate+"). Disconnecting"),e.channel.disconnect()):r.sendState(e)})}},{key:"receiveClientState",value:function(e,t){var r=this;this.gameState.parseState(t.gameState,e.authority),t.gameState.events.forEach(function(e){var t=r.gameState.eventParser.parseEvent(e);t&&r.authority.trustsRemoteEvent(t)&&r.authority.shouldForwardEvent(t)&&r.world.eventProxy.buffer.push(t)}),this.lagTrackerMap[e.id].markReceived(t.lastReceivedStateId),e.lastReceivedStateId=t.id}},{key:"receivePlayerSettings",value:function(e,t){if(t.color&&!isNaN(t.color)&&(e.color=t.color),t.name){var r=new m;e.name=r.clean(t.name)}}},{key:"state",value:function(e){var t=e.bufferedEvents;e.bufferedEvents=[];var r=this.gameState.state(e.authority,e.lastReceivedCyclableStates),n=this.players.map(function(e){return e.state()}),i={id:this.stateId,roundId:this.roundId,lastReceivedStateId:e.lastReceivedStateId,gameState:r,players:n,gameMode:this.gameMode.label};return i.gameState.events=t.map(function(e){return e.toJSON()}),i}},{key:"sendState",value:function(e){var t=this.state(e);t.gameState.world.matrix=null,e.registerSentState(t),e.channel.send(s.STATE,t);var r=this.lagTrackerMap[e.id];r&&r.markSent(t.id)}},{key:"launchIfNeeded",value:function(){var e=this;this.isLaunched||(this.lastFrame=Date.now(),this.subscription(this.frameSubscription=o.Observable.timer(0,1e3/this.framerate)).subscribe(function(){return e.frame()}),this.startRound())}},{key:"startRound",value:function(){var t=this;this.gameMode&&(this.logger.info("Ending round of "+this.gameMode.label),this.gameMode.tearDown(this)),this.players.forEach(function(e){return t.players.unsetPlayerCharacterId(e)}),this.roundId++,this.gameMode=this.gameModeSequence.nextMode(this),this.logger.info("Starting round of "+this.gameMode.label);try{this.world=this.gameMode.getWorld(this),this.gameMode.setup(this)}catch(e){throw this.logger.error(e),e}this.gameState=new u({world:this.world,factory:new v,controllerFactory:new b,equipmentFactory:new y,eventParser:new w,authority:this.authority}),this.world.clockProvider=this.gameState,this.world.eventProxy=new g(this.gameState,this.authority),this.gameMode.startRound(this),this.framerateTracker=new k({measurementInterval:1e4}),this.framerateTracker.rx.framerateMeasured.subscribe(function(e){t.logger.debug("Room framerate: "+e)})}},{key:"tearDown",value:function(){this.gameMode&&(this.logger.info("Tearing game mode down"),this.gameMode.tearDown()),this.logger.info("Tearing room down"),this.rx.tearDown.next(),this.frameSubscription=null}},{key:"isLaunched",get:function(){return null!==this.frameSubscription}},{key:"frame",value:function(){var e=Date.now(),t=(e-this.lastFrame)/1e3;this.lastFrame=e,this.cycle(t),this.framerateTracker.frameDone()}},{key:"addPlayer",value:function(r){var n=this;r.color=this.nextPlayerColor(),this.players.addPlayer(r),this.lagTrackerMap[r.id]=new a,this.subscription(r.channel.disconnected()).subscribe(function(){return n.removePlayer(r)}),this.subscription(r.channel.on(s.STATE).filter(function(){return n.players.playerById(r.id)})).subscribe(function(e){return n.receiveClientState(r,e)}),this.subscription(r.channel.on(s.PLAYER_SETTINGS)).subscribe(function(e){return n.receivePlayerSettings(r,e)}),this.subscription(r.channel.on(s.P2P)).subscribe(function(e){var t=n.players.playerById(e.peerId);t?t.channel.send(s.P2P,{senderId:r.id,type:e.type,data:e.data}):console.error("Could not find peer ",e.peerId)}),this.subscription(r.channel.on(s.POLL_RESPONSE)).subscribe(function(e){return n.trackPollResponse(r,e)}),this.subscription(r.channel.on(s.POLL_REQUEST)).subscribe(function(e){return n.playerRequestedPoll(r,e.type)}),this.logger.info("New player: "+r.name)}},{key:"removePlayer",value:function(e){this.players.removePlayer(e),e.channel.disconnect(),delete this.lagTrackerMap[e.id],this.world.addEvent(new _(e.characterId)),this.logger.info("Player disconnected: "+e.name)}},{key:"addNewBot",value:function(){var e=new c({channel:new l,name:this.nextBotName(),sendAudioVideo:!1,receiveAudioVideo:!1,isBot:!0});return this.addPlayer(e),this.logger.info("Added bot: "+e.name),e}},{key:"removeRandomBot",value:function(){var t=[];if(this.players.forEach(function(e){e.isBot&&t.push(e)}),t.length){var e=(new i).pickone(t);this.removePlayer(e)}}},{key:"startPoll",value:function(t,r){var n=this;this.currentPoll&&this.closePoll(),this.logger.info("Opening poll: "+t.prompt+" ("+t.options.map(function(e){return e.label}).join("/")+")");var i=new o.Subject;return this.currentPoll=t,this.currentPollResultsTracker=new C(this.currentPoll,this.players,this.logger),this.subscription(this.currentPollResultsTracker.ready(1e4).filter(function(){return t===n.currentPoll})).subscribe(function(e){var t=n.currentPoll.optionById(e);t?(n.logger.info("Winning poll option: "+t.label),i.next(e)):(n.logger.info("No winning poll option"),i.next()),n.closePoll()}),this.players.forEach(function(e){e.channel.send(s.POLL_OPEN,{poll:t.toJSON(),canRespond:e.id!==r})}),i}},{key:"trackPollResponse",value:function(e,t){if(this.currentPollResultsTracker)if(t){var r=this.currentPoll.optionById(t);if(r){var n=new f(f.POLL_RESPONSE,{player:e.state(),responseLabel:r.label});this.players.forEach(function(e){return e.channel.send(s.LOG_ENTRY,n.toJSON())}),this.currentPollResultsTracker.trackResponse(e,t)}}else this.currentPollResultsTracker.trackResponse(e,null);else this.logger.warn("Player attempted to respond to a poll but no poll is open")}},{key:"closePoll",value:function(){this.currentPoll&&(this.logger.info("Closing poll"),this.players.forEach(function(e){e.channel.send(s.POLL_CLOSE,{})}),this.currentPoll=null,this.currentPollResultsTracker=null)}},{key:"promptAddBot",value:function(e){var t=this,r=(new d).setPrompt("Add a bot?").addOption("yes","Yes").addOption("no","No").build();this.subscription(this.startPoll(r,e)).subscribe(function(e){"yes"===e&&t.addNewBot()})}},{key:"promptRemoveBot",value:function(e){var t=this,r=(new d).setPrompt("Remove a bot?").addOption("yes","Yes").addOption("no","No").build();this.subscription(this.startPoll(r,e)).subscribe(function(e){"yes"===e&&t.removeRandomBot()})}},{key:"playerRequestedPoll",value:function(e,t){this.currentPoll?this.logger.info("Ignoring poll request since another poll is already in progress"):t===p.ADD_BOT?(this.promptAddBot(e.id),this.trackPollResponse(e,"yes")):t===p.REMOVE_BOT?(this.promptRemoveBot(e.id),this.trackPollResponse(e,"yes")):this.logger.info("Unknown poll type: "+t)}},{key:"nextPlayerColor",value:function(){return T([65280,16711680,255,16776960,16711935,65535,16746496,16711816,65416,35071,8913151],this.players.map(function(e){return e.color}))}},{key:"nextBotName",value:function(){return T(["Flying Squirrel","Fragmaker","Terminator","Bob","Eraser","Predator","Foodchain top","Captain Biceps","El Capitan","Br4wl3r","Rocketeer","Le Fraggeur","Fraggor","eras3r","Lord Plasma"],this.players.map(function(e){return e.name}))}},{key:"roundEndBehavior",value:function(){return this.gameModeSequence.roundEndBehavior(this,this.gameMode)}}]),n}();t.exports=n},{"../authority/recorder-authority":843,"../authority/server-authority":844,"../communication/lag-tracker":846,"../communication/message-types":848,"../communication/void-channel":851,"../controllers/controller-factory":853,"../elements/element-factory":866,"../equipments/equipment-factory":886,"../model/game-state":899,"../model/log-entry":900,"../model/player":902,"../model/player-set":901,"../model/poll-builder":903,"../model/poll-types":904,"../performance/framerate-tracker":923,"../util/math":931,"../util/next-in-line":933,"../world/events/authority-event-proxy":941,"../world/events/event-parser":946,"../world/events/removal":954,"./poll-results-tracker":912,"bad-words":170,chance:177,"rxjs/Rx":379}],914:[function(e,t,r){var i=e("rxjs/Rx"),n=e("./round-end-behavior"),o=e("../../model/log-entry"),a=function(e){_inherits2(r,n);var t=_createSuper(r);function r(){return _classCallCheck2(this,r),t.apply(this,arguments)}return _createClass2(r,[{key:"triggerRoundEnd",value:function(t,r){var e=this,n=r.scoreboard.winners().map(function(e){return t.players.playerById(e.playerId)}).filter(function(e){return e});t.players.forEach(function(t){var e;e=1===n.length?n[0].id===t.id?"You win the round":n[0].name+" wins the round":"Round Tied Between "+n.map(function(e){return e.id===t.id?"You":e.name}).join(", "),r.sendMessage(t,e)}),r.broadcastHUDSettings(t),i.Observable.timer(7e3).subscribe(function(){return e.triggerDone()}),r.broadcastLogEntry(t,new o(o.ROUND_ENDED,{winners:n.map(function(e){return e.id})}))}}]),r}();t.exports=a},{"../../model/log-entry":900,"./round-end-behavior":917,"rxjs/Rx":379}],915:[function(e,t,r){var s=e("rxjs/Rx"),n=e("./round-end-behavior"),l=e("../../recording/replay-types"),u=e("../../communication/message-types"),i=function(e){_inherits2(r,n);var t=_createSuper(r);function r(){return _classCallCheck2(this,r),t.apply(this,arguments)}return _createClass2(r,[{key:"triggerRoundEnd",value:function(e,t){var r=this,n=t.bestPlayRecorder.bestPlay;if(n){var i=n.states[0].gameState,o=n.states[n.states.length-1].gameState.clock-i.clock;s.Observable.timer(1e3*(o+3)).subscribe(function(){return r.triggerDone()});var a=n.states.slice();e.players.forEach(function(e){if(!e.isBot){for(var t=1;t<a.length;t++)a[t]=JSON.parse(JSON.stringify(a[t])),a[t].gameState.world.matrix=null;var r={};r[n.characterId]=n.playerName,e.channel.send(u.REPLAY,{states:a,targetIds:[n.characterId],indicators:r,replayType:l.BEST_PLAY})}})}else this.triggerDone()}}]),r}();t.exports=i},{"../../communication/message-types":848,"../../recording/replay-types":926,"./round-end-behavior":917,"rxjs/Rx":379}],916:[function(e,t,r){var i=e("./round-end-behavior"),n=function(e){_inherits2(n,i);var r=_createSuper(n);function n(e){var t;return _classCallCheck2(this,n),(t=r.call(this)).behaviors=e,t}return _createClass2(n,[{key:"triggerRoundEnd",value:function(n,i){var o=this;!function e(t){if(t>=o.behaviors.length)o.triggerDone();else{var r=o.behaviors[t];i.subscription(r.rx.done.take(1)).subscribe(function(){e(t+1)}),r.triggerRoundEnd(n,i)}}(0)}}]),n}();t.exports=n},{"./round-end-behavior":917}],917:[function(e,t,r){var n=e("rxjs/Rx"),i=function(){function e(){_classCallCheck2(this,e),this.rx={},this.rx.done=new n.Subject}return _createClass2(e,[{key:"triggerRoundEnd",value:function(e,t){}},{key:"triggerDone",value:function(){this.rx.done.next()}}]),e}();t.exports=i},{"rxjs/Rx":379}],918:[function(e,t,r){var n=e("./round-end-behavior"),i=function(e){_inherits2(r,n);var t=_createSuper(r);function r(){return _classCallCheck2(this,r),t.apply(this,arguments)}return _createClass2(r,[{key:"triggerRoundEnd",value:function(e,t){var r=this,n=e.gameState.clock+5;e.gameState.timerSettings.reference=n,t.broadcastMessage(e,"Game Starting"),t.broadcastHUDSettings(e),e.rx.cycle.filter(function(){return e.gameState.clock>=n}).take(1).subscribe(function(){return r.triggerDone()})}}]),r}();t.exports=i},{"./round-end-behavior":917}],919:[function(e,t,r){var o=e("chance"),i=e("./round-end-behavior"),a=e("../../model/poll-builder"),s=e("../../modes/king-of-the-hill"),l=e("../../modes/deathmatch"),n=function(e){_inherits2(n,i);var r=_createSuper(n);function n(e){var t;return _classCallCheck2(this,n),(t=r.call(this)).sequence=e,t}return _createClass2(n,[{key:"triggerRoundEnd",value:function(t,r){var n=this,i=(new a).setPrompt("Next Game Mode?").addOption("deathmatch","Deathmatch").addOption("king-of-the-hill","King Of The Hill").build();r.subscription(t.startPoll(i).map(function(e){return e||(new o).pickone(i.options).id}).map(function(e){switch(e){case"deathmatch":return new l;case"king-of-the-hill":return new s;default:return new l}}).do(function(e){r.broadcastMessage(t,"Next round is "+e.printableLabel)}).delay(5e3)).subscribe(function(e){n.sequence.nextGameMode=e,n.triggerDone()})}}]),n}();t.exports=n},{"../../model/poll-builder":903,"../../modes/deathmatch":908,"../../modes/king-of-the-hill":910,"./round-end-behavior":917,chance:177}],920:[function(e,t,r){var n=function(){function e(){_classCallCheck2(this,e)}return _createClass2(e,[{key:"roundEndBehavior",value:function(e,t){return null}},{key:"nextMode",value:function(e){throw new Error}}]),e}();t.exports=n},{}],921:[function(e,t,r){var n=e("./mode-sequence"),i=e("../../modes/deathmatch"),o=e("../../modes/warmup"),a=function(e){_inherits2(r,n);var t=_createSuper(r);function r(){return _classCallCheck2(this,r),t.apply(this,arguments)}return _createClass2(r,[{key:"nextMode",value:function(e){return 1<e.players.count?new i:new o}}]),r}();t.exports=a},{"../../modes/deathmatch":908,"../../modes/warmup":911,"./mode-sequence":920}],922:[function(e,t,r){var i=e("./mode-sequence"),o=e("../round-end/vote-game-mode-round-end-behavior"),a=e("../../modes/deathmatch"),n=function(e){_inherits2(n,i);var r=_createSuper(n);function n(e){var t;return _classCallCheck2(this,n),(t=r.call(this)).nextGameMode=e||null,t}return _createClass2(n,[{key:"roundEndBehavior",value:function(){return new o(this)}},{key:"nextMode",value:function(){return this.nextGameMode||new a}}]),n}();t.exports=n},{"../../modes/deathmatch":908,"../round-end/vote-game-mode-round-end-behavior":919,"./mode-sequence":920}],923:[function(e,t,r){var n=e("rxjs/Rx"),i=function(){function t(e){_classCallCheck2(this,t),this.measurementInterval=e.measurementInterval||5e3,this.resetForNextMeasurement(),this.rx={},this.rx.framerateMeasured=new n.Subject}return _createClass2(t,[{key:"resetForNextMeasurement",value:function(){this.frameCount=0,this.measurementStartTime=Date.now()}},{key:"frameDone",value:function(){this.frameCount++;var e=Date.now()-this.measurementStartTime;if(e>this.measurementInterval){var t=1e3*this.frameCount/e;this.rx.framerateMeasured.next(t),this.resetForNextMeasurement()}}}]),t}();t.exports=i},{"rxjs/Rx":379}],924:[function(e,t,r){var o=e("rxjs/Rx"),n=function(){function i(e,t,r){var n=this;_classCallCheck2(this,i),this.gameStateRecorder=e,this.playerSet=t,this.scoreboard=r,this.scoreChangeStartDelay=1,this.bestPlay=null,this.scoreMaps=[],this.bestPlayEmitter=new o.Subject,this.largestRecordedScoreDifference=0,this.bestPlayEmitter.delay(2e3).subscribe(function(e){n.bestPlay=e,n.bestPlay.states=n.gameStateRecorder.getBuffer()})}return _createClass2(i,[{key:"start",value:function(){var e=this;this.gameStateRecorder.rx.cycle.subscribe(function(){e.checkForBestPlay()}),this.gameStateRecorder.start()}},{key:"checkForBestPlay",value:function(){var t=this,e=this.gameStateRecorder.latestState(),r=this.gameStateRecorder.earliestState();if(e&&r){var n={};for(this.playerSet.forEach(function(e){n[e.id]=t.scoreboard.scoreForPlayer(e.id)}),this.scoreMaps.push({clock:e.gameState.clock,scoreMap:n});this.scoreMaps.length&&this.scoreMaps[0].clock-this.scoreChangeStartDelay<r.gameState.clock;)this.scoreMaps.shift();this.maybeSavePlay()}}},{key:"maybeSavePlay",value:function(){if(this.scoreMaps.length){var n=this.scoreMaps[0].scoreMap,i=this.scoreMaps[this.scoreMaps.length-1].scoreMap,o=0,a=null;this.playerSet.forEach(function(e){var t=n[e.id]||0,r=(i[e.id]||0)-t;r<=o||(o=r,a=e.id)}),0===o||this.largestRecordedScoreDifference>=o||(this.largestRecordedScoreDifference=o,this.bestPlayEmitter.next({states:null,scoreDifference:o,playerId:a,playerName:this.playerSet.playerById(a).name,characterId:this.playerSet.playerById(a).characterId}))}}}]),i}();t.exports=n},{"rxjs/Rx":379}],925:[function(e,t,r){var n=e("rxjs/Rx"),i=function(){function t(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck2(this,t),this.buffer=[],this.room=e.room,this.gameMode=e.gameMode,this.maxLengthInSeconds=e.maxLengthInSeconds||5,this.maxFramerate=e.maxFramerate||10,this.bufferedEvents=[],this.rx={},this.rx.cycle=new n.Subject}return _createClass2(t,[{key:"start",value:function(){var e=this;this.gameMode.subscription(this.room.rx.cycle).subscribe(function(){return e.cycle()}),this.gameMode.subscription(this.rx.cycle.throttleTime(1e3/this.maxFramerate)).subscribe(function(){return e.recordFrame()})}},{key:"cycle",value:function(){var t=this;this.room.gameState.world.eventProxy.buffer.forEach(function(e){t.bufferedEvents.push(e.toJSON())}),this.rx.cycle.next()}},{key:"earliestState",value:function(){return this.buffer[0]||null}},{key:"latestState",value:function(){return this.buffer[this.buffer.length-1]||null}},{key:"recordableState",value:function(){var e=this.room.gameState.state(this.room.gameStateRecorderAuthority,{});return e.events=this.bufferedEvents,this.bufferedEvents=[],{gameState:e,players:this.room.players.map(function(e){return e.state()})}}},{key:"recordFrame",value:function(){for(this.buffer.push(this.recordableState());this.buffer.length&&this.room.gameState.clock-this.buffer[0].gameState.clock>this.maxLengthInSeconds;)this.buffer.shift()}},{key:"getBuffer",value:function(){return this.buffer.slice()}}]),t}();t.exports=i},{"rxjs/Rx":379}],926:[function(e,t,r){t.exports={DEATH_CAM:"death-cam",BEST_PLAY:"best-play"}},{}],927:[function(e,t,r){var n={NONE:0,HEALTH:1,TIMER:2,AMMO:3,MESSAGE:4,LEADERBOARD:5};t.exports=n},{}],928:[function(e,t,r){var n=function(){function r(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};_classCallCheck2(this,r),this.type=e,this.data=t}return _createClass2(r,[{key:"toJSON",value:function(){return{type:this.type,data:this.data}}}],[{key:"fromJSON",value:function(e){return new r(e.type,e.data)}}]),r}();t.exports=n},{}],929:[function(e,t,r){var i=e("./random"),n={addUnique:function(e,t){return!!e&&(!(0<=e.indexOf(t))&&(e.push(t),!0))},remove:function(e,t){if(!e)return!1;var r=e.indexOf(t);return-1!==r&&(e.splice(r,1),!0)},unique:function(e){return e.filter(function(e,t,r){return e&&r.indexOf(e)===t})},minus:function(e,t){var r=e.slice(0);return t.forEach(function(e){n.remove(r,e)}),r},padMatrix:function(e,t,r){var n,i,o=e.length+2*t,a=e[0].length+2*t,s=[];for(n=0;n<o;n++)for(s.push([]),i=0;i<a;i++)s[n][i]=r;for(n=0;n<e.length;n++)for(i=0;i<e[0].length;i++)s[n+t][i+t]=e[n][i];return s},pickAndRemove:function(e,t){var r=t?e.filter(t):e;if(!r.length)return null;var n=i.randPick(r);return this.remove(e,n),n},pickAndRemoveMultiple:function(e,t,r){for(var n=[],i=0;i<t&&0<e.length;i++){var o=this.pickAndRemove(e,r);null!==o&&n.push(o)}return n},arrayToMap:function(e,t){var r={};return e.forEach(function(e){r[t(e)]=e}),r},arrayToListMap:function(e,r){var n={};return e.forEach(function(e){var t=r(e);n[t]||(n[t]=[]),n[t].push(e)}),n},areSame:function(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}};t.exports=n},{"./random":936}],930:[function(e,t,r){var n=function(){function e(){_classCallCheck2(this,e)}return _createClass2(e,[{key:"debug",value:function(e){throw new Error}},{key:"info",value:function(e){throw new Error}},{key:"error",value:function(e){throw new Error}},{key:"warn",value:function(e){throw new Error}}]),e}();t.exports=n},{}],931:[function(e,t,r){Math.between=function(e,t,r){return t<e?e:r<t?r:t},Math.isBetween=function(e,t,r){return e<=t&&t<=r||t<=e&&r<=t},Math.distance=function(e,t){return Math.pointDistance(e.x,e.y,t.x,t.y)},Math.pointDistance=function(e,t,r,n){return Math.sqrt(Math.pow(e-r,2)+Math.pow(t-n,2))},Math.inRectangle=function(e,t,r,n,i,o,a,s){return s=s||0,r<=e+(a=a||0)&&n<=t+s&&e-a<=r+i&&t-s<=n+o},Math.sign=function(e){return e<0?-1:0<e?1:0},Math.roundToNearest=function(e,t){return Math.round(e/t)*t},Math.roundFloat=function(e,t){t=t||0;var r=Math.pow(10,t);return Math.round(e*r)/r},Math.normalizeAngle=function(e){for(;e<-Math.PI;)e+=2*Math.PI;for(;e>Math.PI;)e-=2*Math.PI;return e},Math.rectangleIntersection=function(e,t){var r=Math.isBetween(e.x,t.x,e.x+e.width)||Math.isBetween(e.x,t.x+t.width,e.x+e.width)||Math.isBetween(t.x,e.x,t.x+t.width),n=Math.isBetween(e.y,t.y,e.y+e.height)||Math.isBetween(e.y,t.y+t.height,e.y+e.height)||Math.isBetween(t.y,e.y,t.y+t.height);return r&&n}},{}],932:[function(e,t,r){var n=function(){function c(e){_classCallCheck2(this,c),this.matrix=e,this.rows=e.length,this.cols=e[0].length}return _createClass2(c,[{key:"toJSON",value:function(){return this.matrix}},{key:"get",value:function(e,t,r){return e<0||e>this.rows-1?r:t<0||t>this.cols-1?r:this.matrix[e][t]}},{key:"set",value:function(e,t,r){this.matrix[e][t]=r}},{key:"symetrical",value:function(){for(var e=c.empty(this.cols,this.rows,0),t=0;t<this.cols;t++)for(var r=0;r<this.rows;r++)e.set(t,r,this.matrix[r][t]);return e}},{key:"flipped",value:function(){for(var e=c.empty(this.rows,this.cols,0),t=0;t<this.rows;t++)for(var r=0;r<this.cols;r++)e.set(t,r,this.matrix[this.rows-t-1][r]);return e}},{key:"convertFlippedCell",value:function(e){return{row:this.rows-e.row-1,col:e.col}}},{key:"convertSymetricalCell",value:function(e){return{row:e.col,col:e.row}}},{key:"prettyString",value:function(){for(var e=[],t=0;t<this.rows;t++)e.push(this.matrix[t].join(""));return e.join("\n")}},{key:"extract",value:function(e,t,r,n,i){for(var o=[],a=0;a<r;a++){o.push([]);for(var s=0;s<n;s++){var l=a+e,u=s+t;l<this.rows&&u<this.cols?o[a][s]=this.matrix[l][u]:o[a][s]=i||0}}return new c(o)}},{key:"copy",value:function(){return this.extract(0,0,this.rows,this.cols)}},{key:"forEachCell",value:function(e){for(var t=0;t<this.rows;t++)for(var r=0;r<this.cols;r++)e(t,r,this.matrix[t][r])}},{key:"map",value:function(e){for(var t=this.copy(),r=0;r<this.rows;r++)for(var n=0;n<this.cols;n++){var i=e(r,n,this.matrix[r][n]);t.set(r,n,i)}return t}},{key:"flattened",value:function(){var n=[];return this.forEachCell(function(e,t,r){return n.push(r)}),n}},{key:"equals",value:function(e){if(e.rows!==this.rows||e.cols!==this.cols)return!1;for(var t=0;t<this.rows;t++)for(var r=0;r<this.cols;r++)if(this.matrix[t][r]!==e.matrix[t][r])return!1;return!0}}],[{key:"fromJSON",value:function(e){return new c(e)}},{key:"empty",value:function(e,t,r){r=r||0;for(var n=[],i=0;i<e;i++){n.push([]);for(var o=0;o<t;o++)n[i].push(r)}return new c(n)}}]),c}();t.exports=n},{}],933:[function(e,t,r){var o=e("chance");t.exports=function(e,t){var r={};t.forEach(function(e){r[e]=r[e]||0,r[e]++});var n=Number.MAX_VALUE,i=[];return e.forEach(function(e){var t=r[e]||0;t<n?(i=[e],n=t):t===n&&i.push(e)}),new o(1).pickone(i)}},{chance:177}],934:[function(e,t,r){t.exports=function(){return Math.floor(4294967295*Math.random()).toString(36)}},{}],935:[function(e,t,r){var n=e("./random");t.exports=function(){var e=n.randPick(["Trusty","Happy","Precise","Tall","Confident"]),t=n.randPick(["Human","Bear","Squirrel","Doggo","Raccoon","Kangaroo","Wolf"]);return"".concat(e," ").concat(t)}},{"./random":936}],936:[function(e,t,r){var n=function(){function o(){_classCallCheck2(this,o)}return _createClass2(o,null,[{key:"randInt",value:function(e,t){return~~o.randFloat(e,t+1)}},{key:"randFloat",value:function(e,t){return Math.random()*(t-e)+e}},{key:"randPick",value:function(e){return 0===e.length?null:e[o.randInt(0,e.length-1)]}},{key:"randPickSet",value:function(e,t){e=e.slice();for(var r=[],n=0;n<t&&e.length;n++){var i=o.randInt(0,e.length-1);r.push(e[i]),e.splice(i,1)}return r}},{key:"randBool",value:function(e){return Math.random()<e}}]),o}();t.exports=n},{}],937:[function(e,t,r){var n={equal:function(e,t){return e.size===t.size&&n.all(e,function(e){return t.has(e)})},all:function(e,t){var r,n=_createForOfIteratorHelper(e);try{for(n.s();!(r=n.n()).done;){if(!t(r.value))return!1}}catch(e){n.e(e)}finally{n.f()}return!0}};t.exports=n},{}],938:[function(e,t,r){var o=e("./event"),n=function(e){_inherits2(i,o);var n=_createSuper(i);function i(e,t){var r;return _classCallCheck2(this,i),(r=n.call(this)).characterId=e,r.equipmentState=t,r}return _createClass2(i,[{key:"apply",value:function(){}},{key:"type",get:function(){return"acquired-equipment"}},{key:"toJSON",value:function(){var e=_get(_getPrototypeOf(i.prototype),"toJSON",this).call(this);return e.characterId=this.characterId,e.equipmentState=this.equipmentState,e}}]),i}();t.exports=n},{"./event":948}],939:[function(e,t,r){var i=e("./event"),n=function(e){_inherits2(n,i);var r=_createSuper(n);function n(e){var t;return _classCallCheck2(this,n),(t=r.call(this)).characterId=e,t}return _createClass2(n,[{key:"apply",value:function(){}},{key:"type",get:function(){return"acquired-shield"}},{key:"toJSON",value:function(){var e=_get(_getPrototypeOf(n.prototype),"toJSON",this).call(this);return e.characterId=this.characterId,e}}]),n}();t.exports=n},{"./event":948}],940:[function(e,t,r){var o=e("./event"),a=e("../../elements/world-element"),n=function(e){_inherits2(i,o);var n=_createSuper(i);function i(e,t){var r;return _classCallCheck2(this,i),(r=n.call(this)).elementState=e instanceof a?(r.element=e,r.element.state()):(r.element=null,e),r.clock=t,r}return _createClass2(i,[{key:"getOrCreateElement",value:function(e){return this.element||(this.element=e.factory.createCyclable(this.elementState)),this.element}},{key:"apply",value:function(e){var t=this.getOrCreateElement(e);if(t){e.world.add(t);var r=e.clock-this.clock;t.safeCycle(r,e.world.tileSize/4)}else console.log("Unsupported element addition")}},{key:"type",get:function(){return"addition"}},{key:"toJSON",value:function(){var e=_get(_getPrototypeOf(i.prototype),"toJSON",this).call(this);return e.elementState=this.elementState,e.clock=this.clock,e}}]),i}();t.exports=n},{"../../elements/world-element":885,"./event":948}],941:[function(e,t,r){var o=e("./event-proxy"),n=function(e){_inherits2(i,o);var n=_createSuper(i);function i(e,t){var r;return _classCallCheck2(this,i),(r=n.call(this)).gameState=e,r.authority=t,r.buffer=[],r}return _createClass2(i,[{key:"addEvent",value:function(e){this.authority.canSendEvent(e)&&this.buffer.push(e),this.authority.canApplyLocalEvent(e)&&this.gameState.applyEvent(e)}},{key:"clear",value:function(){this.buffer=[]}},{key:"toJSON",value:function(){return{events:this.buffer.map(function(e){return e.toJSON()})}}}]),i}();t.exports=n},{"./event-proxy":947}],942:[function(e,t,r){var o=e("./event"),n=function(e){_inherits2(i,o);var n=_createSuper(i);function i(e,t){var r;return _classCallCheck2(this,i),(r=n.call(this)).bumperId=e,r.bumpedId=t,r}return _createClass2(i,[{key:"apply",value:function(e){var t=e.world.cyclableById(this.bumperId);if(t){var r=e.world.cyclableById(this.bumpedId);r&&t.bump(r)}}},{key:"type",get:function(){return"bump"}},{key:"toJSON",value:function(){var e=_get(_getPrototypeOf(i.prototype),"toJSON",this).call(this);return e.bumperId=this.bumperId,e.bumpedId=this.bumpedId,e}}]),i}();t.exports=n},{"./event":948}],943:[function(e,t,r){var n=e("./event"),i=function(e){_inherits2(s,n);var a=_createSuper(s);function s(e,t,r,n,i){var o;return _classCallCheck2(this,s),(o=a.call(this)).characterId=e,o.fromHealth=t,o.damage=r,o.sourceId=n,o.effectiveSource=i,o}return _createClass2(s,[{key:"apply",value:function(e){var t=e.world.cyclableById(this.characterId);if(t){var r=t.healthElement();r&&r.health===this.fromHealth&&r.applyDamage(this.damage,this.sourceId)}}},{key:"type",get:function(){return"damage"}},{key:"toJSON",value:function(){var e=_get(_getPrototypeOf(s.prototype),"toJSON",this).call(this);return e.characterId=this.characterId,e.damage=this.damage,e.fromHealth=this.fromHealth,e.sourceId=this.sourceId,e.effectiveSource=this.effectiveSource?{x:this.effectiveSource.x,y:this.effectiveSource.y}:null,e}}]),s}();t.exports=i},{"./event":948}],944:[function(e,t,r){var o=e("./event"),n=function(e){_inherits2(i,o);var n=_createSuper(i);function i(e,t){var r;return _classCallCheck2(this,i),(r=n.call(this)).characterId=e,r.sourceId=t,r}return _createClass2(i,[{key:"apply",value:function(e){var t=e.world.cyclableById(this.characterId);if(t){var r=t.healthElement();r&&r.applyDeath(this.sourceId)}}},{key:"type",get:function(){return"death"}},{key:"toJSON",value:function(){var e=_get(_getPrototypeOf(i.prototype),"toJSON",this).call(this);return e.characterId=this.characterId,e.sourceId=this.sourceId,e}}]),i}();t.exports=n},{"./event":948}],945:[function(e,t,r){var o=e("./event"),n=function(e){_inherits2(i,o);var n=_createSuper(i);function i(e,t){var r;return _classCallCheck2(this,i),(r=n.call(this)).equipmentHolderState=e,r.shotEvent=t,r}return _createClass2(i,[{key:"apply",value:function(e){if(e.world.cyclableById(this.equipmentHolderState.owner)){var t=e.world.cyclableById(this.equipmentHolderState.id);t&&t.equipment&&(this.equipmentHolderState.equipment.ammo>t.equipment.ammo||this.equipmentHolderState.equipment.id===t.equipment.id&&this.equipmentHolderState.equipment.type===t.equipment.type&&(t.equipment.updateAmmo(this.equipmentHolderState.equipment.ammo-t.equipment.ammoPerShot),t.equipment.lastShot=t.age,t.equipment.shotCount++,this.shotEvent.apply(e)))}}},{key:"type",get:function(){return"equipment-shot"}},{key:"toJSON",value:function(){var e=_get(_getPrototypeOf(i.prototype),"toJSON",this).call(this);return e.equipmentHolderState=this.equipmentHolderState,e.shotEvent=this.shotEvent,e}}]),i}();t.exports=n},{"./event":948}],946:[function(e,t,r){var n=e("./explosion"),i=e("./removal"),o=e("./addition"),a=e("./death"),s=e("./damage"),l=e("./heal"),u=e("./item-pickup"),c=e("./acquired-equipment"),h=e("./acquired-shield"),d=e("./took-damage"),p=e("./bump"),f=e("./jump"),m=e("./land"),v=e("./spawn"),b=e("./equipment-shot"),y=function(){function e(){_classCallCheck2(this,e)}return _createClass2(e,[{key:"parseEvent",value:function(e){if("explosion"===e.type)return new n(e.source,e.radius,e.owner);if("removal"===e.type)return new i(e.elementId);if("addition"===e.type)return new o(e.elementState,e.clock);if("death"===e.type)return new a(e.characterId,e.sourceId);if("damage"===e.type)return new s(e.characterId,e.fromHealth,e.damage,e.sourceId,e.effectiveSource);if("heal"===e.type)return new l(e.characterId,e.amount);if("item-pickup"===e.type)return new u(e.elementId,e.characterId);if("acquired-equipment"===e.type)return new c(e.characterId,e.equipmentState);if("bump"===e.type)return new p(e.bumperId,e.bumpedId);if("jump"===e.type)return new f(e.characterId);if("land"===e.type)return new m(e.characterId);if("spawn"===e.type)return new v(e.elementState);if("acquired-shield"===e.type)return new h(e.characterId);if("took-damage"===e.type)return new d(e.characterId,e.amount,e.sourceId);if("equipment-shot"===e.type){var t=this.parseEvent(e.shotEvent);if(t)return new b(e.equipmentHolderState,t)}return null}}]),e}();t.exports=y},{"./acquired-equipment":938,"./acquired-shield":939,"./addition":940,"./bump":942,"./damage":943,"./death":944,"./equipment-shot":945,"./explosion":949,"./heal":950,"./item-pickup":951,"./jump":952,"./land":953,"./removal":954,"./spawn":955,"./took-damage":956}],947:[function(e,t,r){var n=function(){function e(){_classCallCheck2(this,e)}return _createClass2(e,[{key:"addEvent",value:function(e){throw new Error("Must implement addEvent()")}},{key:"toJSON",value:function(){return{events:[]}}}]),e}();t.exports=n},{}],948:[function(e,t,r){var n=function(){function e(){_classCallCheck2(this,e)}return _createClass2(e,[{key:"apply",value:function(e){throw new Error("Must implement apply() method")}},{key:"type",get:function(){throw new Error("Must implement type property")}},{key:"toJSON",value:function(){return{type:this.type}}}]),e}();t.exports=n},{}],949:[function(e,t,r){var n=e("./event"),i=function(e){_inherits2(o,n);var i=_createSuper(o);function o(e,t,r){var n;return _classCallCheck2(this,o),(n=i.call(this)).source=e,n.radius=t,n.owner=r,n}return _createClass2(o,[{key:"apply",value:function(e){var t=e.world;this.damageEnemies(t),t.rx.explosions.next({source:this.source,radius:this.radius})}},{key:"damageEnemies",value:function(e){var n=this;e.forEachItemInBucket("character",function(e){var t=2*(1-Math.distance(e,n.source)/n.radius),r=.5*Math.round(t/.5);r<=0||e.inflictDamage(r,n.owner)})}},{key:"type",get:function(){return"explosion"}},{key:"toJSON",value:function(){var e=_get(_getPrototypeOf(o.prototype),"toJSON",this).call(this);return e.source={x:this.source.x,y:this.source.y},e.radius=this.radius,e.owner=this.owner,e}}]),o}();t.exports=i},{"./event":948}],950:[function(e,t,r){var o=e("./event"),n=function(e){_inherits2(i,o);var n=_createSuper(i);function i(e,t){var r;return _classCallCheck2(this,i),(r=n.call(this)).characterId=e,r.amount=t,r}return _createClass2(i,[{key:"apply",value:function(e){var t=e.world.cyclableById(this.characterId);if(t){var r=t.healthElement();r&&r.applyHeal(this.amount)}}},{key:"type",get:function(){return"heal"}},{key:"toJSON",value:function(){var e=_get(_getPrototypeOf(i.prototype),"toJSON",this).call(this);return e.characterId=this.characterId,e.amount=this.amount,e}}]),i}();t.exports=n},{"./event":948}],951:[function(e,t,r){var o=e("./removal"),n=function(e){_inherits2(i,o);var n=_createSuper(i);function i(e,t){var r;return _classCallCheck2(this,i),(r=n.call(this,e)).characterId=t,r}return _createClass2(i,[{key:"apply",value:function(e){var t=e.world.cyclableById(this.elementId);if(t){_get(_getPrototypeOf(i.prototype),"apply",this).call(this,e);var r=e.world.cyclableById(this.characterId);r&&t.pickUp(r)}}},{key:"type",get:function(){return"item-pickup"}},{key:"toJSON",value:function(){var e=_get(_getPrototypeOf(i.prototype),"toJSON",this).call(this);return e.characterId=this.characterId,e}}]),i}();t.exports=n},{"./removal":954}],952:[function(e,t,r){var i=e("./event"),n=function(e){_inherits2(n,i);var r=_createSuper(n);function n(e){var t;return _classCallCheck2(this,n),(t=r.call(this)).characterId=e,t}return _createClass2(n,[{key:"apply",value:function(){}},{key:"type",get:function(){return"jump"}},{key:"toJSON",value:function(){var e=_get(_getPrototypeOf(n.prototype),"toJSON",this).call(this);return e.characterId=this.characterId,e}}]),n}();t.exports=n},{"./event":948}],953:[function(e,t,r){var i=e("./event"),n=function(e){_inherits2(n,i);var r=_createSuper(n);function n(e){var t;return _classCallCheck2(this,n),(t=r.call(this)).characterId=e,t}return _createClass2(n,[{key:"apply",value:function(){}},{key:"type",get:function(){return"land"}},{key:"toJSON",value:function(){var e=_get(_getPrototypeOf(n.prototype),"toJSON",this).call(this);return e.characterId=this.characterId,e}}]),n}();t.exports=n},{"./event":948}],954:[function(e,t,r){var i=e("./event"),n=function(e){_inherits2(n,i);var r=_createSuper(n);function n(e){var t;return _classCallCheck2(this,n),(t=r.call(this)).elementId=e,t}return _createClass2(n,[{key:"apply",value:function(e){var t=e.world.cyclableById(this.elementId);t&&e.world.remove(t)}},{key:"type",get:function(){return"removal"}},{key:"toJSON",value:function(){var e=_get(_getPrototypeOf(n.prototype),"toJSON",this).call(this);return e.elementId=this.elementId,e}}]),n}();t.exports=n},{"./event":948}],955:[function(e,t,r){var i=e("./event"),n=function(e){_inherits2(n,i);var r=_createSuper(n);function n(e){var t;return _classCallCheck2(this,n),(t=r.call(this)).elementState=e,t}return _createClass2(n,[{key:"getOrCreateElement",value:function(e){return this.element||(this.element=e.factory.createCyclable(this.elementState)),this.element}},{key:"apply",value:function(e){if(!e.world.cyclableById(this.elementState.id)){var t=this.getOrCreateElement(e);t?e.world.add(t):console.log("Unsupported element spawn")}}},{key:"type",get:function(){return"spawn"}},{key:"toJSON",value:function(){var e=_get(_getPrototypeOf(n.prototype),"toJSON",this).call(this);return e.elementState=this.elementState,e}}]),n}();t.exports=n},{"./event":948}],956:[function(e,t,r){var n=e("./event"),i=function(e){_inherits2(o,n);var i=_createSuper(o);function o(e,t,r){var n;return _classCallCheck2(this,o),(n=i.call(this)).characterId=e,n.amount=t,n.sourceId=r,n}return _createClass2(o,[{key:"apply",value:function(){}},{key:"type",get:function(){return"took-damage"}},{key:"toJSON",value:function(){var e=_get(_getPrototypeOf(o.prototype),"toJSON",this).call(this);return e.characterId=this.characterId,e.amount=this.amount,e.sourceId=this.sourceId,e}}]),o}();t.exports=i},{"./event":948}],957:[function(e,t,r){t.exports.NONE=0,t.exports.LEFT=1,t.exports.RIGHT=2,t.exports.UP=4,t.exports.DOWN=8},{}],958:[function(e,t,r){var m=e("./direction"),v=function(e,t){for(var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,n=[],i=0;i<e;i++){n.push([]);for(var o=0;o<t;o++)n[i].push(r)}return n},n=function(){function t(e){_classCallCheck2(this,t),this.chance=e,this.maze=null,this.mazeStart=null,this.mazeEnd=null,this.connections=null,this.inflated=null}return _createClass2(t,[{key:"map",value:function(e){for(var t=0;t<this.inflated.length;t++)for(var r=0;r<this.inflated[0].length;r++)this.inflated[t][r]=e(t,r,this.inflated[t][r],this.inflated,this.chance);return this}},{key:"generateMaze",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.rows;if(isNaN(t)||t<=0)throw new Error("Invalid rows option");var r=e.cols;if(isNaN(r)||r<=0)throw new Error("Invalid rows option");var n=e.maxVerticalPath||1;if(n<1)throw new Error("maxVerticalPath should be at least 1");var i=v(t,r,0),o=function(e,t){for(var r=[],n=e;n<=t;n++)r.push(n);return r}(0,r-1);this.mazeStart={row:0,col:this.chance.pickone(o)};for(var a=this.mazeStart.col,s=0,l=function(e){return e!==a},u=0;u<i.length;u++){var c=o;n<=s&&(c=c.filter(l),s=0);var h=this.chance.pickone(c);h===a&&s++;var d=Math.min(a,h),p=Math.max(a,h);if(h!==a){i[u][d]|=m.RIGHT,i[u][p]|=m.LEFT;for(var f=d+1;f<=p-1;f++)i[u][f]|=m.LEFT,i[u][f]|=m.RIGHT}0<u&&(i[u][a]|=m.UP),u<i.length-1&&(i[u][h]|=m.DOWN),a=h}return this.mazeEnd={row:i.length-1,col:a},this.maze=i,this}},{key:"addRedundantDirections",value:function(){var n=this,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:.5;if(!this.maze)throw new Error("Must generate maze first");for(var i=[],t=function(t){var r,e;(r=t,e=[],0<r.row&&e.push(m.UP),r.row<n.maze.length-1&&e.push(m.DOWN),0<r.col&&e.push(m.LEFT),r.col<n.maze[0].length-1&&e.push(m.RIGHT),e.filter(function(e){return 0==(n.maze[r.row][r.col]&e)})).forEach(function(e){i.push({cell:t,direction:e})})},r=0;r<this.maze.length;r++)for(var o=0;o<this.maze[0].length;o++){t({row:r,col:o})}var a=Math.floor(i.length*e);return this.chance.pickset(i,a).forEach(function(e){var t,r;t=e.cell,r=e.direction,n.maze[t.row][t.col]|=r,r===m.DOWN?n.maze[t.row+1][t.col]|=m.UP:r===m.UP?n.maze[t.row-1][t.col]|=m.DOWN:r===m.RIGHT?n.maze[t.row][t.col+1]|=m.LEFT:r===m.LEFT&&(n.maze[t.row][t.col-1]|=m.RIGHT)}),this}},{key:"inflate",value:function(e){if(!this.maze)throw new Error("Must generate maze first");if(!e||!e.call)throw new Error("Invalid mapping function");for(var t=this.maze.length,r=this.maze[0].length,n=v(t,r,null),i=null,o=0;o<t;o++)for(var a=0;a<r;a++){var s=e(this.maze[o][a]);if(n[o][a]=s,i){if(i.length!==s.length||i[0].length!==s[0].length)throw new Error("Inconsistent mask dimensions")}else i=s}this.inflated=v(t*i.length,r*i[0].length,null);for(var l=0;l<t;l++)for(var u=0;u<r;u++){var c=n[l][u],h=l*i.length,d=u*i[0].length;this.applyMatrixInMatrix(this.inflated,c,h,d)}return this}},{key:"applyMatrixInMatrix",value:function(e,t,r,n){for(var i=0;i<t.length;i++)for(var o=0;o<t[0].length;o++)e[r+i][n+o]=t[i][o]}},{key:"padVertical",value:function(e,t){var r=v(this.inflated.length+2*e,this.inflated[0].length,t);return this.applyMatrixInMatrix(r,this.inflated,e,0),this.inflated=r,this}},{key:"padHorizontal",value:function(e,t){var r=v(this.inflated.length,this.inflated[0].length+2*e,t);return this.applyMatrixInMatrix(r,this.inflated,0,e),this.inflated=r,this}}]),t}();t.exports=n},{"./direction":957}],959:[function(e,t,r){var n=e("./mask"),o=e("../../util/array-utils"),i=function(){function i(e){_classCallCheck2(this,i),this.masks=e||[]}return _createClass2(i,[{key:"withMirrored",value:function(){return new i(this.masks.concat(this.masks.map(function(e){return e.mirror()}))).withoutDuplicates()}},{key:"toJSON",value:function(){return this.masks.map(function(e){return e.toJSON()})}},{key:"withoutDuplicates",value:function(){for(var e=this.masks.slice(),t=0;t<this.masks.length;t++)for(var r=JSON.stringify(this.masks[t].matrix),n=t+1;n<this.masks.length;n++){r===JSON.stringify(this.masks[n].matrix)&&o.remove(e,this.masks[n])}return new i(e)}}]),i}();i.fromJSON=function(e){return new i(e.map(function(e){return n.fromJSON(e)}))},t.exports=i},{"../../util/array-utils":929,"./mask":960}],960:[function(e,t,r){var n=function(){function i(e,t,r,n){_classCallCheck2(this,i),this.matrix=e||i.emptyMatrix(),this.connections=t||0,this.rows=r||this.matrix.length,this.cols=n||this.matrix[0].length}return _createClass2(i,[{key:"mirror",value:function(){var e=this.connections;return e&=~i.LEFT,e&=~i.RIGHT,this.connections&i.RIGHT&&(e|=i.LEFT),this.connections&i.LEFT&&(e|=i.RIGHT),new i(this.matrix.map(function(e){return e.slice(0).reverse()}),e)}},{key:"flip",value:function(){var e=this.connections;return e&=~i.UP,e&=~i.DOWN,this.connections&i.UP&&(e|=i.DOWN),this.connections&i.DOWN&&(e|=i.UP),new i(this.matrix.slice(0).reverse().map(function(e){return e.slice(0)}),e)}},{key:"toJSON",value:function(){return{matrix:this.matrix,connections:this.connections}}}],[{key:"fromJSON",value:function(e){return new i(e.matrix,e.connections)}},{key:"emptyMatrix",value:function(){for(var e=[],t=0;t<10;t++){e.push([]);for(var r=0;r<10;r++)e[t].push(i.VOID)}return e}}]),i}();n.LEFT=1,n.RIGHT=2,n.UP=4,n.DOWN=8,n.VOID=0,n.OBSTACLE=1,n.UNBREAKABLE_OBSTACLE=2,n.POSSIBLE_OBSTACLE=3,t.exports=n},{}],961:[function(e,t,r){var o=e("./matrix-pattern"),n=function(e){_inherits2(i,o);var n=_createSuper(i);function i(e,t){var r;return _classCallCheck2(this,i),(r=n.call(this)).row=e,r.col=t,r}return _createClass2(i,[{key:"flagMatrix",value:function(e,t){e.set(this.row,this.col,t)}},{key:"size",get:function(){return 1}}]),i}();t.exports=n},{"./matrix-pattern":963}],962:[function(e,t,r){var i=e("./matrix-pattern"),n=function(e){_inherits2(n,i);var r=_createSuper(n);function n(e){var t;return _classCallCheck2(this,n),(t=r.call(this)).row=e[0].row,t.colLeft=e[0].col,t.colRight=e[e.length-1].col,t}return _createClass2(n,[{key:"flagMatrix",value:function(e,t){for(var r=this.colLeft;r<=this.colRight;r++)e.set(this.row,r,t)}},{key:"size",get:function(){return this.colRight-this.colLeft+1}}]),n}();t.exports=n},{"./matrix-pattern":963}],963:[function(e,t,r){var n=function(){function e(){_classCallCheck2(this,e)}return _createClass2(e,[{key:"flagMatrix",value:function(e,t){throw new Error("Must implement flagMatrix()")}},{key:"size",get:function(){return 0}}]),e}();t.exports=n},{}],964:[function(e,t,r){var i=e("./matrix-pattern"),n=function(e){_inherits2(n,i);var r=_createSuper(n);function n(e){var t;return _classCallCheck2(this,n),(t=r.call(this)).col=e[0].col,t.rowTop=e[0].row,t.rowBottom=e[e.length-1].row,t}return _createClass2(n,[{key:"flagMatrix",value:function(e,t){for(var r=this.rowTop;r<=this.rowBottom;r++)e.set(r,this.col,t)}},{key:"size",get:function(){return this.rowBottom-this.rowTop+1}}]),n}();t.exports=n},{"./matrix-pattern":963}],965:[function(e,t,r){var n=function(){function t(e){_classCallCheck2(this,t),this.world=e.world}return _createClass2(t,[{key:"castRay",value:function(e,t,r){var n,i=this.castAgainstHorizontal(e.x,e.y,t),o=this.castAgainstVertical(e.x,e.y,t);if(i)if(o){n=Math.distance(e,i)<Math.distance(e,o)?i:o}else n=i;else n=o;return!n||r&&Math.distance(e,n)>r?{x:e.x+Math.cos(t)*r,y:e.y+Math.sin(t)*r}:n}},{key:"castAgainstHorizontal",value:function(e,t,r){var n=0<Math.sin(r),i=~~(t/this.world.tileSize)*this.world.tileSize+(n?this.world.tileSize:-1e-4),o=e+(i-t)/Math.tan(r),a=n?this.world.tileSize:-this.world.tileSize,s=a/Math.tan(r);return this.doCast(o,i,s,a)}},{key:"castAgainstVertical",value:function(e,t,r){var n=0<Math.cos(r),i=~~(e/this.world.tileSize)*this.world.tileSize+(n?this.world.tileSize:-1e-4),o=t+(i-e)*Math.tan(r),a=n?this.world.tileSize:-this.world.tileSize,s=a*Math.tan(r);return this.doCast(i,o,a,s)}},{key:"doCast",value:function(e,t,r,n){for(var i=e,o=t,a=0;a<100;a++){if(this.solidTileAt(i,o))return{x:i,y:o};if(!this.world.isWithinBounds(i,o))return null;i+=r,o+=n}}},{key:"solidTileAt",value:function(e,t){return this.world.solidTileAt(e,t)}},{key:"vision",value:function(e,t,r,n,i){n=n||10;for(var o=[],a=0;a<=n;a++){var s=this.castRay(e,t+a/(n-1)*(r-t),i);s&&o.push(s)}return o}}]),t}();t.exports=n},{}],966:[function(e,t,r){var f=e("./generate/mask"),m=e("../util/matrix"),l=e("./patterns/cell"),u=e("./patterns/vertical-pattern"),c=e("./patterns/horizontal-pattern"),n=function(){function p(e,t){_classCallCheck2(this,p),this.world=e,this.chance=t||null,this.spawnSettings=[]}return _createClass2(p,[{key:"add",value:function(e){this.spawnSettings.push(e)}},{key:"spawnAll",value:function(){var t=this,n=this.initialMatrix(!0);this.spawnSettings.forEach(function(r){var e=r.patterns(n);t.chance.pickset(e,r.quantity).forEach(function(e,t){r.spawnElement(e,t,n)})})}},{key:"initialMatrix",value:function(e){for(var t=m.empty(this.world.matrix.rows,this.world.matrix.cols,p.FREE),r=[f.OBSTACLE,f.UNBREAKABLE_OBSTACLE,f.FLOOR_SPIKE,f.CEILING_SPIKE],n=[f.SPAWN,f.EXIT,f.FAKE_EXIT,f.ABILITY_EXIT,f.LEVEL_SET_GATE],i=0;i<this.world.rows;i++)for(var o=0;o<this.world.cols;o++){var a=this.world.matrix.get(i,o);t.get(i,o)===p.FREE&&(0<=r.indexOf(a)&&t.set(i,o,p.OBSTACLE),0<=n.indexOf(a)&&t.set(i,o,p.TAKEN),a===f.FLOOR_SPIKE&&t.set(i-1,o,p.TAKEN),a===f.CEILING_SPIKE&&t.set(i+1,o,p.TAKEN))}if(e)for(var s=Math.max(0,this.world.spawn.row-2),l=Math.min(this.world.rows-1,this.world.spawn.row+2),u=Math.max(0,this.world.spawn.col-2),c=Math.min(this.world.cols-1,this.world.spawn.col+2),h=s;h<=l;h++)for(var d=u;d<=c;d++)t.get(h,d)===p.FREE&&t.set(h,d,p.TAKEN);return t}},{key:"horizontalBottomPathCells",value:function(n){return this.findCells(n,function(e,t,r){return e===p.FREE&&(!(t>=n.rows-1)&&n.get(t+1,r)===p.OBSTACLE)})}},{key:"horizontalTopPathCells",value:function(n){return this.findCells(n,function(e,t,r){return e===p.FREE&&(!(t<=0)&&n.get(t-1,r)===p.OBSTACLE)})}},{key:"surroundedVoids",value:function(n){return this.findCells(n,function(e,t,r){return e===p.FREE&&(!(0===t||t>=n.rows-1)&&(!(0===r||r>=n.cols-1)&&(n.get(t+1,r)===p.OBSTACLE||n.get(t-1,r)===p.OBSTACLE||n.get(t,r+1)===p.OBSTACLE||n.get(t,r-1)===p.OBSTACLE)))})}},{key:"fullySurroundedObstacles",value:function(n){return this.findCells(n,function(e,t,r){return e===p.OBSTACLE&&(!(0===t||t>=n.rows-1)&&(!(0===r||r>=n.cols-1)&&(n.get(t+1,r)===p.OBSTACLE&&n.get(t-1,r)===p.OBSTACLE&&n.get(t,r+1)===p.OBSTACLE&&n.get(t,r-1)===p.OBSTACLE)))})}},{key:"exposedObstacles",value:function(n){var i=this;return this.findCells(n,function(e,t,r){return e===p.OBSTACLE&&(i.world.matrix.get(t,r)===f.OBSTACLE&&(!(0===t||t>=n.rows-1)&&(!(0===r||r>=n.cols-1)&&(n.get(t+1,r)===p.FREE||n.get(t-1,r)===p.FREE||n.get(t,r+1)===p.FREE||n.get(t,r-1)===p.FREE))))})}},{key:"verticalGaps",value:function(e,n,i){n=n||1,i=i||Number.MAX_VALUE;var o,a=[],s=[];return this.loopCellsVertically(e,function(e,t,r){e===p.TAKEN?s=[]:e===p.OBSTACLE?(Math.isBetween(n,s.length,i)&&a.push(new u(s)),s=[]):e===p.FREE&&(0<s.length||o===p.OBSTACLE)&&s.push(new l(t,r)),o=e}),a}},{key:"horizontalGaps",value:function(e,n,i){n=n||1,i=i||Number.MAX_VALUE;var o,a=[],s=[];return this.loopCellsHorizontally(e,function(e,t,r){e===p.TAKEN?s=[]:e===p.OBSTACLE?(Math.isBetween(n,s.length,i)&&a.push(new c(s)),s=[]):e===p.FREE&&(0<s.length||o===p.OBSTACLE)&&s.push(new l(t,r)),o=e}),a}},{key:"horizontalPaths",value:function(r,e,t){return this.horizontalGaps(r,e,t).filter(function(e){for(var t=e.colLeft;t<=e.colRight;t++)if(r.get(e.row+1,t)!==p.OBSTACLE)return!1;return!0})}},{key:"loopCellsHorizontally",value:function(e,t){for(var r=0;r<e.rows;r++)for(var n=0;n<e.cols;n++)t(e.get(r,n),r,n)}},{key:"loopCellsVertically",value:function(e,t){for(var r=0;r<e.cols;r++)for(var n=0;n<e.rows;n++)t(e.get(n,r),n,r)}},{key:"findCells",value:function(e,t){for(var r=[],n=1;n<e.rows;n++)for(var i=0;i<e.cols;i++)t(e.get(n,i),n,i)&&r.push(new l(n,i));return r}}]),p}();n.FREE=0,n.OBSTACLE=1,n.TAKEN=2,n.HORIZONTAL_PATHS_BOTTOM=2,n.HORIZONTAL_PATHS_TOP=3,n.VERTICAL_GAPS=4,n.SURROUNDED_FREE=5,n.EXPOSED_OBSTACLES=5,t.exports=n},{"../util/matrix":932,"./generate/mask":960,"./patterns/cell":961,"./patterns/horizontal-pattern":962,"./patterns/vertical-pattern":964}],967:[function(e,t,r){var n=e("./solid-tile"),i=e("../../../elements/characters/walking-character"),o=function(e){_inherits2(r,n);var t=_createSuper(r);function r(e){return _classCallCheck2(this,r),t.call(this,e)}return _createClass2(r,[{key:"damage",value:function(){}},{key:"tapped",value:function(e){_get(_getPrototypeOf(r.prototype),"tapped",this).call(this,e),e instanceof i&&e.vY<=0&&e.inflictDamage(1,this.chunk.world.environment.id,this.center)}}]),r}();t.exports=o},{"../../../elements/characters/walking-character":860,"./solid-tile":970}],968:[function(e,t,r){var n=e("../../../elements/characters/walking-character"),i=e("./solid-tile"),o=function(e){_inherits2(r,i);var t=_createSuper(r);function r(e){return _classCallCheck2(this,r),t.call(this,e)}return _createClass2(r,[{key:"damage",value:function(){}},{key:"landed",value:function(e){_get(_getPrototypeOf(r.prototype),"landed",this).call(this,e),e instanceof n&&0<=e.vY&&e.inflictDamage(1,this.chunk.world.environment.id,this.center)}}]),r}();t.exports=o},{"../../../elements/characters/walking-character":860,"./solid-tile":970}],969:[function(e,t,r){var n=e("./solid-tile"),i=function(e){_inherits2(r,n);var t=_createSuper(r);function r(){return _classCallCheck2(this,r),t.apply(this,arguments)}return _createClass2(r,[{key:"damage",value:function(){}}]),r}();t.exports=i},{"./solid-tile":970}],970:[function(e,t,r){var i=e("../tile"),n=function(e){_inherits2(n,i);var r=_createSuper(n);function n(e){var t;return _classCallCheck2(this,n),(t=r.call(this,e)).health=1,t.frictionFactor=1,t}return _createClass2(n,[{key:"destroy",value:function(){this.chunk.removeTile(this)}},{key:"damage",value:function(e){this.health-=e,this.health<=0&&this.destroy()}}]),n}();t.exports=n},{"../tile":972}],971:[function(e,t,r){var n=e("./obstacle-tile"),i=function(e){_inherits2(r,n);var t=_createSuper(r);function r(e){return _classCallCheck2(this,r),t.call(this,e)}return _createClass2(r,[{key:"damage",value:function(){}}]),r}();t.exports=i},{"./obstacle-tile":969}],972:[function(e,t,r){var n=function(){function t(e){_classCallCheck2(this,t),this.row=e.row,this.col=e.col,this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this.chunk=e.chunk,this.markedRemoved=!1,this.color=e.color||1464961,this.center={x:this.x+this.width/2,y:this.y+this.height/2}}return _createClass2(t,[{key:"pushAway",value:function(r){var n,i;return[{x:this.x-r.width/2,y:r.y,type:t.LEFT},{x:this.x+this.width+r.width/2,y:r.y,type:t.RIGHT},{x:r.x,y:this.y-r.height/2,type:t.UP},{x:r.x,y:this.y+this.height+r.height/2,type:t.DOWN}].forEach(function(e){var t=Math.sqrt(Math.pow(e.x-r.x,2)+Math.pow(e.y-r.y,2));(!n||t<i)&&(n=e,i=t)}),r.x=n.x,r.y=n.y,n.type}},{key:"landed",value:function(e){}},{key:"tapped",value:function(e){}},{key:"destroy",value:function(){this.chunk.removeTile(this)}},{key:"damage",value:function(e){}}]),t}();n.LEFT=1,n.RIGHT=2,n.UP=4,n.DOWN=8,t.exports=n},{}],973:[function(e,t,r){var n=e("./generate/mask"),i=e("./tiles/obstacles/obstacle-tile"),o=e("./tiles/obstacles/unbreakable-obstacle-tile"),a=e("./tiles/obstacles/floor-spikes-tile"),u=e("./tiles/obstacles/ceiling-spikes-tile"),s=e("../util/array-utils"),l=function(){function t(e){_classCallCheck2(this,t),this.id=e.id,this.row=e.row,this.col=e.col,this.matrix=e.matrix,this.tileSize=e.tileSize,this.world=e.world,this.x=this.col*this.tileSize,this.y=this.row*this.tileSize,this.width=this.matrix.cols*this.tileSize,this.height=this.matrix.rows*this.tileSize,this.rectangle={x:this.x,y:this.y,width:this.width,height:this.height},this.createTiles()}return _createClass2(t,[{key:"tileAt",value:function(e,t){var r=~~(t/this.tileSize)-this.row,n=~~(e/this.tileSize)-this.col;return this.tiles.get(r,n)}},{key:"createTiles",value:function(){var s=this,l={};l[n.OBSTACLE]=i,l[n.UNBREAKABLE_OBSTACLE]=o,l[n.FLOOR_SPIKE]=a,l[n.CEILING_SPIKE]=u,this.tiles=this.matrix.map(function(e,t,r){var n=l[r];if(!n)return null;var i=s.row+e,o=(s.col+t)*s.tileSize,a=i*s.tileSize;return new n({row:e+s.row,col:t+s.col,x:o,y:a,width:s.tileSize,height:s.tileSize,chunk:s})}),this.tileList=this.tiles.flattened().filter(Boolean)}},{key:"addTile",value:function(e){this.tiles.set(e.row-this.row,e.col-this.col,e),this.tileList.push(e)}},{key:"removeTile",value:function(e){this.tiles.set(e.row-this.row,e.col-this.col,null),this.matrix.set(e.row-this.row,e.col-this.col,n.VOID),this.world.matrix.set(e.row,e.col,n.VOID),s.remove(this.tileList,e),e.markedRemoved=!0}}]),t}();t.exports=l},{"../util/array-utils":929,"./generate/mask":960,"./tiles/obstacles/ceiling-spikes-tile":967,"./tiles/obstacles/floor-spikes-tile":968,"./tiles/obstacles/obstacle-tile":969,"./tiles/obstacles/unbreakable-obstacle-tile":971}],974:[function(e,t,r){var n=e("rxjs/Rx"),a=e("./world-chunk"),u=e("./generate/mask"),c=e("./tiles/tile"),i=e("./tiles/obstacles/solid-tile"),o=e("../util/array-utils"),s=e("../util/matrix"),l=e("./raycaster"),h=e("../elements/environment-element"),d=function(){function t(e){_classCallCheck2(this,t),this.tileSize=e.tileSize,this.chunkSize=e.chunkSize,this.clockProvider=null,this.cyclables=[],this.cyclablesMap={},this.buckets={},this.setMatrix(e.matrix,e.connections),this.eventProxy=null,this.raycaster=new l({world:this}),this.rx={},this.rx.additions=new n.Subject,this.rx.deletions=new n.Subject,this.rx.explosions=new n.Subject,this.add(this.environment=new h({id:"e"}))}return _createClass2(t,[{key:"setMatrix",value:function(e,t){if(!(e instanceof s))return this.setMatrix(new s(e),t);if(!this.matrix||!this.matrix.equals(e)){this.matrix=e,this.connections=t||null,this.rows=this.matrix.rows,this.cols=this.matrix.cols,this.width=this.cols*this.tileSize,this.height=this.rows*this.tileSize,this.createChunks(),this.spawn=this.findSpawn();for(var r=this.rows-1;0<=r&&!this.lowestVoidY;r--)for(var n=0;n<this.cols&&!this.lowestVoidY;n++)this.matrix.get(r,n)==u.VOID&&(this.lowestVoidY=(r+1)*this.tileSize)}}},{key:"createChunks",value:function(){this.chunkMap={},this.chunkList=[];for(var e=0;e<this.rows;e+=this.chunkSize)for(var t=0;t<this.cols;t+=this.chunkSize){var r=this.matrix.extract(e,t,this.chunkSize,this.chunkSize),n=t*this.tileSize,i=e*this.tileSize,o=new a({id:this.chunkId(n,i),matrix:r,tileSize:this.tileSize,row:e,col:t,world:this});this.chunkList.push(o),this.chunkMap[o.id]=o}}},{key:"findSpawn",value:function(){for(var e=0;e<this.matrix.rows;e++)for(var t=0;t<this.matrix.cols;t++){if(this.matrix.get(e,t)===u.SPAWN)return{row:e,col:t,x:(t+.5)*this.tileSize,y:(e+.5)*this.tileSize}}}},{key:"chunkId",value:function(e,t){return~~(e/(this.chunkSize*this.tileSize))+"-"+~~(t/(this.chunkSize*this.tileSize))}},{key:"cyclableById",value:function(e){return this.cyclablesMap[e]||null}},{key:"add",value:function(t){var r=this;(t.world=this).cyclables.push(t);var e=(this.cyclablesMap[t.id]=t).buckets();e&&e.forEach(function(e){r.buckets[e]=r.buckets[e]||[],r.buckets[e].push(t)}),this.rx.additions.next(t)}},{key:"remove",value:function(r){var n=this;if(o.remove(this.cyclables,r)){r.markGone();var e=r.buckets();e&&e.forEach(function(e){var t=n.buckets[e];o.remove(t,r),0===t.length&&delete n.buckets[e]}),delete this.cyclablesMap[r.id],this.rx.deletions.next(r)}}},{key:"itemsInBucket",value:function(e){return this.buckets[e]||null}},{key:"itemCountInBucket",value:function(e){var t=this.itemsInBucket(e);return t?t.length:0}},{key:"forEachItemInBucket",value:function(e,t){var r=this.itemsInBucket(e);r&&r.slice().forEach(t)}},{key:"isWithinBounds",value:function(e,t){return Math.inRectangle(e,t,0,0,this.width,this.height)}},{key:"chunkAt",value:function(e,t){return this.isWithinBounds(e,t)?this.chunkMap[this.chunkId(e,t)]:null}},{key:"tileAt",value:function(e,t){var r=this.chunkAt(e,t);return r?r.tileAt(e,t):null}},{key:"tileAtRowCol",value:function(e,t){return this.tileAt(t*this.tileSize,e*this.tileSize)}},{key:"solidTileAt",value:function(e,t){var r=this.tileAt(e,t);return r&&r instanceof i?r:null}},{key:"solidTileAtRowCol",value:function(e,t){return this.solidTileAt(t*this.tileSize,e*this.tileSize)}},{key:"isInBounds",value:function(e,t){return 0<e&&0<t&&e<this.width&&t<this.height}},{key:"damageTileAt",value:function(e,t,r){var n=this.tileAt(e,t);n&&n.damage(r)}},{key:"forEachTile",value:function(t){this.chunkList.forEach(function(e){e.tileList.forEach(t)})}},{key:"filterTiles",value:function(t){var r=[];return this.chunkList.forEach(function(e){e.tileList.forEach(function(e){t(e)&&r.push(e)})}),r}},{key:"findPaths",value:function(e,t,r){for(var n=this,i=0,o=[],a=1;a<this.rows-1;a++)for(var s=i=0;s<this.cols;s++){var l=this.matrix.get(a,s)!==u.VOID&&this.matrix.get(a,s)!==u.SPAWN;!(this.matrix.get(a+t,s)===u.OBSTACLE||this.matrix.get(a+t,s)===u.UNBREAKABLE_OBSTACLE)||l?(e<=i&&o.push({row:a,colLeft:s-i,colRight:s-1}),i=0):i++}return r&&(o=o.filter(function(e){return e.row!==n.spawn.row||(e.colLeft>n.spawn.col||e.colRight<n.spawn.col)})),o}},{key:"readjust",value:function(e){var t=e.x-e.width/2,r=e.x+e.width/2-1,n=e.y-e.height/2,i=e.y+e.height/2,o=this.solidTileAt(t,n),a=this.solidTileAt(r,n),s=this.solidTileAt(t,i),l=this.solidTileAt(r,i),u=0;return a&&s&&!l&&!o?(u|=a.pushAway(e),u|=s.pushAway(e)):o&&l&&!a&&!s?(u|=o.pushAway(e),u|=l.pushAway(e)):o&&a?(e.y=Math.ceil(n/o.height)*o.height+e.height/2,u|=c.DOWN,s?(e.x=Math.ceil(t/s.width)*s.width+e.width/2,u|=c.RIGHT):l&&(e.x=Math.floor(r/l.width)*l.width-e.width/2,u|=c.LEFT)):s&&l?(e.y=Math.floor(i/s.height)*s.height-e.height/2,u|=c.UP,o?(e.x=Math.ceil(t/o.width)*o.width+e.width/2,u|=c.RIGHT):a&&(e.x=Math.floor(r/a.width)*a.width-e.width/2,u|=c.LEFT)):o&&s?(e.x=Math.ceil(t/o.width)*o.width+e.width/2,u|=c.RIGHT):a&&l?(e.x=Math.floor(r/a.width)*a.width-e.width/2,u|=c.LEFT):s?u|=s.pushAway(e):l?u|=l.pushAway(e):o?u|=o.pushAway(e):a&&(u|=a.pushAway(e)),u}},{key:"addEvent",value:function(e){this.eventProxy.addEvent(e)}},{key:"cyclableSubject",value:function(e){var t=this;return n.Observable.merge(this.rx.additions,this.rx.deletions).startWith(null).map(function(){return t.cyclableById(e)})}},{key:"itemsInBucketSubject",value:function(e){var t=this;return n.Observable.merge(this.rx.additions,this.rx.deletions).startWith(null).map(function(){return t.itemsInBucket(e)})}}]),t}();t.exports=d},{"../elements/environment-element":867,"../util/array-utils":929,"../util/matrix":932,"./generate/mask":960,"./raycaster":965,"./tiles/obstacles/solid-tile":970,"./tiles/tile":972,"./world-chunk":973,"rxjs/Rx":379}]},{},[14]);